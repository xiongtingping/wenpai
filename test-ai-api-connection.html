<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI API è¿æ¥æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.loading {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .status.idle {
            background-color: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .config-info {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .config-info h4 {
            margin-top: 0;
            color: #0056b3;
        }
        .config-item {
            margin: 5px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– AI API è¿æ¥æµ‹è¯•</h1>
            <p>æµ‹è¯•å†…å®¹ç”ŸæˆAIæ˜¯å¦èƒ½è¿æ¥ä¸ŠAPIåŠŸèƒ½</p>
        </div>

        <div class="config-info">
            <h4>ğŸ“‹ å½“å‰é…ç½®ä¿¡æ¯</h4>
            <div id="configInfo">
                <div class="config-item">æ­£åœ¨åŠ è½½é…ç½®ä¿¡æ¯...</div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ åŸºç¡€è¿æ¥æµ‹è¯•</h3>
            <div id="basicStatus" class="status idle">æœªæµ‹è¯•</div>
            <button onclick="testBasicConnection()">æµ‹è¯•åŸºç¡€è¿æ¥</button>
            <div id="basicResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ æ–‡æœ¬ç”Ÿæˆæµ‹è¯•</h3>
            <div id="textStatus" class="status idle">æœªæµ‹è¯•</div>
            <button onclick="testTextGeneration()">æµ‹è¯•æ–‡æœ¬ç”Ÿæˆ</button>
            <div id="textResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ¨ å›¾åƒç”Ÿæˆæµ‹è¯•</h3>
            <div id="imageStatus" class="status idle">æœªæµ‹è¯•</div>
            <button onclick="testImageGeneration()">æµ‹è¯•å›¾åƒç”Ÿæˆ</button>
            <div id="imageResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ”„ æ‰¹é‡æµ‹è¯•</h3>
            <button onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <div id="allResults" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // é…ç½®ä¿¡æ¯
        const config = {
            openaiKey: 'sk-your-openai-api-key-here',
            deepseekKey: 'sk-your-deepseek-api-key-here',
            geminiKey: 'your-gemini-api-key-here',
            apiEndpoints: {
                openai: 'https://api.openai.com/v1/chat/completions',
                deepseek: 'https://api.deepseek.com/v1/chat/completions',
                gemini: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent'
            }
        };

        // æ›´æ–°é…ç½®ä¿¡æ¯æ˜¾ç¤º
        function updateConfigInfo() {
            const configInfo = document.getElementById('configInfo');
            configInfo.innerHTML = `
                <div class="config-item">OpenAI API Key: ${config.openaiKey ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®'}</div>
                <div class="config-item">DeepSeek API Key: ${config.deepseekKey ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®'}</div>
                <div class="config-item">Gemini API Key: ${config.geminiKey ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®'}</div>
                <div class="config-item">å½“å‰ç¯å¢ƒ: ${window.location.hostname === 'localhost' ? 'å¼€å‘ç¯å¢ƒ' : 'ç”Ÿäº§ç¯å¢ƒ'}</div>
            `;
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(elementId, status, message = '') {
            const element = document.getElementById(elementId);
            element.className = `status ${status}`;
            element.textContent = message || getStatusText(status);
        }

        function getStatusText(status) {
            switch(status) {
                case 'success': return 'âœ… æµ‹è¯•æˆåŠŸ';
                case 'error': return 'âŒ æµ‹è¯•å¤±è´¥';
                case 'loading': return 'â³ æµ‹è¯•ä¸­...';
                default: return 'â¸ï¸ æœªæµ‹è¯•';
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(elementId, content) {
            const element = document.getElementById(elementId);
            element.textContent = content;
            element.style.display = 'block';
        }

        // æµ‹è¯•åŸºç¡€è¿æ¥
        async function testBasicConnection() {
            updateStatus('basicStatus', 'loading', 'â³ æµ‹è¯•ä¸­...');
            
            try {
                // æµ‹è¯•ç½‘ç»œè¿æ¥
                const response = await fetch('https://api.openai.com/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.openaiKey}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    updateStatus('basicStatus', 'success', 'âœ… åŸºç¡€è¿æ¥æˆåŠŸ');
                    showResult('basicResult', 'OpenAI API è¿æ¥æ­£å¸¸\nå“åº”çŠ¶æ€: ' + response.status);
                } else {
                    updateStatus('basicStatus', 'error', 'âŒ è¿æ¥å¤±è´¥');
                    showResult('basicResult', `è¿æ¥å¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯ä¿¡æ¯: ${response.statusText}`);
                }
            } catch (error) {
                updateStatus('basicStatus', 'error', 'âŒ è¿æ¥å¼‚å¸¸');
                showResult('basicResult', `è¿æ¥å¼‚å¸¸:\n${error.message}`);
            }
        }

        // æµ‹è¯•æ–‡æœ¬ç”Ÿæˆ
        async function testTextGeneration() {
            updateStatus('textStatus', 'loading', 'â³ æµ‹è¯•ä¸­...');
            
            try {
                const response = await fetch(config.apiEndpoints.openai, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.openaiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            { role: 'user', content: 'è¯·ç”¨ä¸€å¥è¯ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚' }
                        ],
                        max_tokens: 100,
                        temperature: 0.7
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    updateStatus('textStatus', 'success', 'âœ… æ–‡æœ¬ç”ŸæˆæˆåŠŸ');
                    showResult('textResult', `ç”ŸæˆæˆåŠŸ!\n\nå“åº”å†…å®¹:\n${JSON.stringify(data, null, 2)}`);
                } else {
                    const errorData = await response.text();
                    updateStatus('textStatus', 'error', 'âŒ æ–‡æœ¬ç”Ÿæˆå¤±è´¥');
                    showResult('textResult', `ç”Ÿæˆå¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯ä¿¡æ¯: ${errorData}`);
                }
            } catch (error) {
                updateStatus('textStatus', 'error', 'âŒ ç”Ÿæˆå¼‚å¸¸');
                showResult('textResult', `ç”Ÿæˆå¼‚å¸¸:\n${error.message}`);
            }
        }

        // æµ‹è¯•å›¾åƒç”Ÿæˆ
        async function testImageGeneration() {
            updateStatus('imageStatus', 'loading', 'â³ æµ‹è¯•ä¸­...');
            
            try {
                const response = await fetch('https://api.openai.com/v1/images/generations', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.openaiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: 'A simple red circle on white background',
                        n: 1,
                        size: '256x256'
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    updateStatus('imageStatus', 'success', 'âœ… å›¾åƒç”ŸæˆæˆåŠŸ');
                    showResult('imageResult', `ç”ŸæˆæˆåŠŸ!\n\nå“åº”å†…å®¹:\n${JSON.stringify(data, null, 2)}`);
                } else {
                    const errorData = await response.text();
                    updateStatus('imageStatus', 'error', 'âŒ å›¾åƒç”Ÿæˆå¤±è´¥');
                    showResult('imageResult', `ç”Ÿæˆå¤±è´¥\nçŠ¶æ€ç : ${response.status}\né”™è¯¯ä¿¡æ¯: ${errorData}`);
                }
            } catch (error) {
                updateStatus('imageStatus', 'error', 'âŒ ç”Ÿæˆå¼‚å¸¸');
                showResult('imageResult', `ç”Ÿæˆå¼‚å¸¸:\n${error.message}`);
            }
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        async function runAllTests() {
            const results = [];
            
            // è¿è¡ŒåŸºç¡€è¿æ¥æµ‹è¯•
            updateStatus('basicStatus', 'loading');
            try {
                await testBasicConnection();
                results.push('åŸºç¡€è¿æ¥: âœ… æˆåŠŸ');
            } catch (error) {
                results.push('åŸºç¡€è¿æ¥: âŒ å¤±è´¥');
            }

            // è¿è¡Œæ–‡æœ¬ç”Ÿæˆæµ‹è¯•
            updateStatus('textStatus', 'loading');
            try {
                await testTextGeneration();
                results.push('æ–‡æœ¬ç”Ÿæˆ: âœ… æˆåŠŸ');
            } catch (error) {
                results.push('æ–‡æœ¬ç”Ÿæˆ: âŒ å¤±è´¥');
            }

            // è¿è¡Œå›¾åƒç”Ÿæˆæµ‹è¯•
            updateStatus('imageStatus', 'loading');
            try {
                await testImageGeneration();
                results.push('å›¾åƒç”Ÿæˆ: âœ… æˆåŠŸ');
            } catch (error) {
                results.push('å›¾åƒç”Ÿæˆ: âŒ å¤±è´¥');
            }

            showResult('allResults', `æ‰¹é‡æµ‹è¯•å®Œæˆ!\n\n${results.join('\n')}`);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateConfigInfo();
            
            // å°è¯•ä»ç¯å¢ƒå˜é‡è·å–é…ç½®
            if (typeof window !== 'undefined' && window.location.hostname === 'localhost') {
                console.log('å¼€å‘ç¯å¢ƒæ£€æµ‹åˆ°ï¼Œå°è¯•è¯»å–ç¯å¢ƒå˜é‡...');
            }
        });
    </script>
</body>
</html> 