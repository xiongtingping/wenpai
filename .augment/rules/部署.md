---
type: "agent_requested"
description: "部署"
---
请检查当前项目是否符合现代 Web 项目的部署标准要求，重点排查所有可能导致：

- 构建产物不完整 ❌
- 部署路径错误 ❌
- 运行时环境变量缺失 ❌
- 浏览器访问失败 ❌
- SSR 或静态部署不兼容 ❌

🧩 请从以下维度全面检查：

### ✅ 1. 构建产物路径
- 构建命令是否正确（如 `npm run build`）
- 输出目录是否标准（如 `.next`, `dist`, `build`）
- 是否有文件遗漏（如 HTML、CSS、入口 JS）

### ✅ 2. 路径与资源访问
- 是否存在硬编码的绝对路径（如 `/static/img/logo.png`）
- 是否使用了不适配部署平台的路径写法
- 静态资源是否正确导入（图标、字体、CSS）

### ✅ 3. 环境变量
- 所有 `.env` 中的变量是否有 fallback 或默认值
- 构建/部署时需要哪些变量？是否已设置？
- 使用了 `process.env.VAR_NAME` 的地方是否被正确编译注入

### ✅ 4. 接口请求兼容性
- 是否有写死的 `localhost:xxxx` 请求（部署后肯定会失败）
- 是否使用 `window.location.origin` 这种部署不安全方式
- 是否支持跨域（部署在不同域名下时）

### ✅ 5. SSR / 静态部署兼容性
- 是否使用了 `window`、`document` 等仅浏览器可用对象（在 SSR 构建时报错）
- 是否有动态导入失败的问题
- 是否明确区分 SSR 与客户端渲染逻辑

### ✅ 6. 构建配置（Vite/Next.js）
- 是否正确配置 `base` 或 `assetPrefix`（防止资源找不到）
- 是否自定义了构建目录，是否告知部署平台

### ✅ 7. 动态路由与路由守卫
- 是否使用 `next/router`, `react-router` 的正确方式
- 是否存在受保护页面跳转失败情况
- 所有路由是否能 fallback 到 404 页面

---

## ✅ 输出格式要求：

- 问题清单（按模块列出）
- 修复建议（代码或配置）
- 高危项标注（🔥）

---

🛡️ 注意事项：

- 不要对 UI 样式做任何改动
- 不要重写业务组件，仅指出部署隐患
- 所有修改建议必须兼容构建 & 部署平台（Vercel / Netlify / 静态服务器）