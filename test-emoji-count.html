<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“ç‰ŒEmojiç”Ÿæˆå™¨ - æ•°é‡é€‰æ‹©æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #2563eb;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #374151;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        button:hover {
            background: #1d4ed8;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f3f4f6;
            border-radius: 6px;
            border-left: 4px solid #2563eb;
        }
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .emoji-item {
            text-align: center;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: white;
        }
        .emoji-item img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 8px;
        }
        .emoji-item .emotion {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 5px;
        }
        .emoji-item .count {
            font-size: 11px;
            color: #9ca3af;
        }
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            margin-bottom: 10px;
        }
        .status.success { background: #dcfce7; color: #166534; }
        .status.error { background: #fef2f2; color: #dc2626; }
        .status.generating { background: #dbeafe; color: #1d4ed8; }
        .status.pending { background: #f3f4f6; color: #6b7280; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ å“ç‰ŒEmojiç”Ÿæˆå™¨ - æ•°é‡é€‰æ‹©åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ æµ‹è¯•é…ç½®</h2>
            <div class="form-group">
                <label for="brand">å“ç‰Œåç§°ï¼š</label>
                <input type="text" id="brand" value="æµ‹è¯•å“ç‰Œ" placeholder="è¾“å…¥å“ç‰Œåç§°">
            </div>
            <div class="form-group">
                <label for="character">è§’è‰²æè¿°ï¼š</label>
                <textarea id="character" rows="3" placeholder="æè¿°å“ç‰Œè§’è‰²ç‰¹å¾">å¯çˆ±çš„å¡é€šå½¢è±¡ï¼ŒAIç§‘æŠ€é£æ ¼</textarea>
            </div>
            <div class="form-group">
                <label for="emojiCount">æ¯ä¸ªè¡¨æƒ…ç”Ÿæˆæ•°é‡ï¼š</label>
                <select id="emojiCount">
                    <option value="1">1ä¸ª</option>
                    <option value="2">2ä¸ª</option>
                    <option value="3" selected>3ä¸ª</option>
                    <option value="4">4ä¸ª</option>
                    <option value="5">5ä¸ª</option>
                </select>
            </div>
            <div class="form-group">
                <label for="selectedEmotions">é€‰æ‹©è¡¨æƒ…ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼š</label>
                <input type="text" id="selectedEmotions" value="å¼€å¿ƒå¾®ç¬‘,å¤§ç¬‘,ç”Ÿæ°”,å“­æ³£,æƒŠè®¶" placeholder="è¾“å…¥è¡¨æƒ…åç§°ï¼Œç”¨é€—å·åˆ†éš”">
            </div>
            <button onclick="testEmojiGeneration()">ğŸš€ å¼€å§‹æµ‹è¯•ç”Ÿæˆ</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ç”Ÿæˆç»“æœ</h2>
            <div id="results">
                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ’¡ åŠŸèƒ½è¯´æ˜</h2>
            <ul>
                <li><strong>æ•°é‡é€‰æ‹©ï¼š</strong>ç”¨æˆ·å¯ä»¥é€‰æ‹©æ¯ä¸ªè¡¨æƒ…ç”Ÿæˆ1-5ä¸ªä¸åŒçš„emojiå˜ä½“</li>
                <li><strong>æ‰¹é‡ç”Ÿæˆï¼š</strong>æ”¯æŒä¸€æ¬¡æ€§ç”Ÿæˆå¤šä¸ªè¡¨æƒ…çš„å¤šä¸ªå˜ä½“</li>
                <li><strong>è¿›åº¦æ˜¾ç¤ºï¼š</strong>å®æ—¶æ˜¾ç¤ºç”Ÿæˆè¿›åº¦å’ŒçŠ¶æ€</li>
                <li><strong>å•ç‹¬ä¸‹è½½ï¼š</strong>æ¯ä¸ªemojiéƒ½å¯ä»¥å•ç‹¬ä¸‹è½½</li>
                <li><strong>æ‰¹é‡ä¸‹è½½ï¼š</strong>æ”¯æŒæ‰¹é‡ä¸‹è½½æ‰€æœ‰ç”Ÿæˆçš„å›¾ç‰‡</li>
                <li><strong>é‡æ–°ç”Ÿæˆï¼š</strong>å¤±è´¥çš„emojiå¯ä»¥å•ç‹¬é‡æ–°ç”Ÿæˆ</li>
            </ul>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸAPIè°ƒç”¨
        async function generateEmojiImage(prompt, count = 1) {
            // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
            
            // æ¨¡æ‹ŸæˆåŠŸæˆ–å¤±è´¥
            if (Math.random() > 0.1) { // 90%æˆåŠŸç‡
                const urls = [];
                for (let i = 0; i < count; i++) {
                    urls.push(`https://picsum.photos/200/200?random=${Math.floor(Math.random() * 1000)}`);
                }
                return { success: true, urls };
            } else {
                throw new Error('æ¨¡æ‹Ÿç”Ÿæˆå¤±è´¥');
            }
        }

        // æµ‹è¯•emojiç”ŸæˆåŠŸèƒ½
        async function testEmojiGeneration() {
            const brand = document.getElementById('brand').value;
            const character = document.getElementById('character').value;
            const emojiCount = parseInt(document.getElementById('emojiCount').value);
            const selectedEmotions = document.getElementById('selectedEmotions').value.split(',').map(s => s.trim());
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>ğŸ”„ æ­£åœ¨ç”Ÿæˆä¸­...</p>';
            
            const results = [];
            const totalCount = selectedEmotions.length;
            
            for (let i = 0; i < selectedEmotions.length; i++) {
                const emotion = selectedEmotions[i];
                const prompt = `ä¸€ä¸ª${brand}å“ç‰Œçš„${character}ï¼Œæ­£åœ¨${emotion}ï¼Œè¡¨æƒ…é£æ ¼ä¸º emojiï¼Œæ‰å¹³å¡é€šé£ï¼Œé€æ˜èƒŒæ™¯`;
                
                try {
                    const result = await generateEmojiImage(prompt, emojiCount);
                    results.push({
                        emotion,
                        urls: result.urls,
                        status: 'success'
                    });
                } catch (error) {
                    results.push({
                        emotion,
                        urls: [],
                        status: 'error',
                        error: error.message
                    });
                }
                
                // æ›´æ–°è¿›åº¦
                const progress = ((i + 1) / totalCount) * 100;
                resultsDiv.innerHTML = `
                    <p>ğŸ”„ ç”Ÿæˆè¿›åº¦: ${Math.round(progress)}% (${i + 1}/${totalCount})</p>
                    <div style="width: 100%; height: 20px; background: #e5e7eb; border-radius: 10px; overflow: hidden;">
                        <div style="width: ${progress}%; height: 100%; background: #2563eb; transition: width 0.3s;"></div>
                    </div>
                `;
            }
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(results);
        }

        // æ˜¾ç¤ºç”Ÿæˆç»“æœ
        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            const totalImages = results.reduce((sum, result) => sum + result.urls.length, 0);
            const successCount = results.filter(r => r.status === 'success').length;
            const errorCount = results.filter(r => r.status === 'error').length;
            
            let html = `
                <div class="result">
                    <h3>ğŸ“ˆ ç”Ÿæˆç»Ÿè®¡</h3>
                    <p>âœ… æˆåŠŸ: ${successCount} ä¸ªè¡¨æƒ…</p>
                    <p>âŒ å¤±è´¥: ${errorCount} ä¸ªè¡¨æƒ…</p>
                    <p>ğŸ–¼ï¸ æ€»å›¾ç‰‡: ${totalImages} å¼ </p>
                </div>
                <div class="emoji-grid">
            `;
            
            results.forEach(result => {
                const statusClass = result.status;
                const statusText = result.status === 'success' ? 'æˆåŠŸ' : 
                                 result.status === 'error' ? 'å¤±è´¥' : 
                                 result.status === 'generating' ? 'ç”Ÿæˆä¸­' : 'ç­‰å¾…ä¸­';
                
                html += `
                    <div class="emoji-item">
                        <div class="status ${statusClass}">${statusText}</div>
                        <div class="emotion">${result.emotion}</div>
                        <div class="count">${result.urls.length} ä¸ªå˜ä½“</div>
                `;
                
                if (result.urls.length > 0) {
                    result.urls.forEach((url, index) => {
                        html += `<img src="${url}" alt="${result.emotion} ${index + 1}">`;
                    });
                } else {
                    html += `<div style="width: 60px; height: 60px; background: #f3f4f6; display: flex; align-items: center; justify-content: center; margin: 0 auto;">âŒ</div>`;
                }
                
                if (result.error) {
                    html += `<div style="font-size: 10px; color: #dc2626; margin-top: 5px;">${result.error}</div>`;
                }
                
                html += '</div>';
            });
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html> 