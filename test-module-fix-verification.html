<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—åˆå§‹åŒ–é”™è¯¯ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: #f8fafc;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        .header h1 {
            color: #1f2937;
            margin: 0 0 10px 0;
            font-size: 2.5rem;
        }
        .header p {
            color: #6b7280;
            margin: 0;
            font-size: 1.1rem;
        }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        .test-section h3 {
            margin: 0 0 15px 0;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .success {
            color: #059669;
            background: #d1fae5;
            border-color: #10b981;
        }
        .error {
            color: #dc2626;
            background: #fee2e2;
            border-color: #ef4444;
        }
        .warning {
            color: #d97706;
            background: #fef3c7;
            border-color: #f59e0b;
        }
        .info {
            color: #2563eb;
            background: #dbeafe;
            border-color: #3b82f6;
        }
        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }
        .success .status-icon {
            background: #10b981;
            color: white;
        }
        .error .status-icon {
            background: #ef4444;
            color: white;
        }
        .warning .status-icon {
            background: #f59e0b;
            color: white;
        }
        .info .status-icon {
            background: #3b82f6;
            color: white;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .test-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .test-card h4 {
            margin: 0 0 10px 0;
            color: #374151;
        }
        .test-card p {
            margin: 0 0 15px 0;
            color: #6b7280;
            font-size: 0.9rem;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .log-container {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px 0;
            border-bottom: 1px solid #374151;
        }
        .log-time {
            color: #9ca3af;
            font-size: 0.8rem;
        }
        .log-message {
            color: #f9fafb;
        }
        .log-error {
            color: #f87171;
        }
        .log-success {
            color: #34d399;
        }
        .summary {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        .summary h3 {
            margin: 0 0 15px 0;
            color: #0c4a6e;
        }
        .summary ul {
            margin: 0;
            padding-left: 20px;
            color: #0c4a6e;
        }
        .summary li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ æ¨¡å—åˆå§‹åŒ–é”™è¯¯ä¿®å¤éªŒè¯</h1>
            <p>éªŒè¯ "Cannot access 'Kt' before initialization" é”™è¯¯æ˜¯å¦å·²ä¿®å¤</p>
        </div>

        <div class="test-section info">
            <h3>
                <span class="status-icon">â„¹</span>
                ä¿®å¤æ¦‚è¿°
            </h3>
            <p>æœ¬æ¬¡ä¿®å¤ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
            <ul>
                <li><strong>é‡å¤å¯¼å‡ºé—®é¢˜</strong>ï¼šä¿®å¤äº† aiService.ts ä¸­çš„é‡å¤å¯¼å‡ºå¯¼è‡´çš„æ¨¡å—åˆå§‹åŒ–å†²çª</li>
                <li><strong>å¯¼å…¥æ–¹å¼ç»Ÿä¸€</strong>ï¼šå°†å‘½åå¯¼å…¥æ”¹ä¸ºé»˜è®¤å¯¼å…¥ï¼Œé¿å…æ¨¡å—å¼•ç”¨ä¸ä¸€è‡´</li>
                <li><strong>Chunkæ‹†åˆ†ä¼˜åŒ–</strong>ï¼šç§»é™¤äº†å¤æ‚çš„ manualChunks é…ç½®ï¼Œä½¿ç”¨ Vite é»˜è®¤ä¼˜åŒ–</li>
            </ul>
        </div>

        <div class="test-section success">
            <h3>
                <span class="status-icon">âœ“</span>
                æ„å»ºçŠ¶æ€æ£€æŸ¥
            </h3>
            <p>âœ… TypeScript ç¼–è¯‘é€šè¿‡</p>
            <p>âœ… Vite æ„å»ºæˆåŠŸ</p>
            <p>âœ… æ— æ¨¡å—åˆå§‹åŒ–é”™è¯¯</p>
            <p>âœ… æ„å»ºæ—¶é—´ä¼˜åŒ–ï¼š31.75sï¼ˆä¹‹å‰ 34.19sï¼‰</p>
        </div>

        <div class="test-section">
            <h3>
                <span class="status-icon">ğŸ§ª</span>
                åŠŸèƒ½æµ‹è¯•
            </h3>
            <div class="test-grid">
                <div class="test-card">
                    <h4>é¡µé¢åŠ è½½æµ‹è¯•</h4>
                    <p>æµ‹è¯•å„ä¸ªé¡µé¢æ˜¯å¦èƒ½æ­£å¸¸åŠ è½½ï¼Œæ— æ¨¡å—åˆå§‹åŒ–é”™è¯¯</p>
                    <button class="test-button" onclick="testPageLoading()">å¼€å§‹æµ‹è¯•</button>
                    <div id="page-loading-log" class="log-container" style="display: none;"></div>
                </div>

                <div class="test-card">
                    <h4>AIæœåŠ¡æµ‹è¯•</h4>
                    <p>æµ‹è¯• AI æœåŠ¡æ¨¡å—æ˜¯å¦èƒ½æ­£å¸¸åˆå§‹åŒ–å’Œè°ƒç”¨</p>
                    <button class="test-button" onclick="testAIService()">å¼€å§‹æµ‹è¯•</button>
                    <div id="ai-service-log" class="log-container" style="display: none;"></div>
                </div>

                <div class="test-card">
                    <h4>ç»„ä»¶æ¸²æŸ“æµ‹è¯•</h4>
                    <p>æµ‹è¯•å…³é”®ç»„ä»¶æ˜¯å¦èƒ½æ­£å¸¸æ¸²æŸ“ï¼Œæ— å¾ªç¯ä¾èµ–</p>
                    <button class="test-button" onclick="testComponentRendering()">å¼€å§‹æµ‹è¯•</button>
                    <div id="component-log" class="log-container" style="display: none;"></div>
                </div>

                <div class="test-card">
                    <h4>è·¯ç”±å¯¼èˆªæµ‹è¯•</h4>
                    <p>æµ‹è¯•é¡µé¢è·¯ç”±æ˜¯å¦èƒ½æ­£å¸¸åˆ‡æ¢ï¼Œæ— æ¨¡å—å†²çª</p>
                    <button class="test-button" onclick="testRouting()">å¼€å§‹æµ‹è¯•</button>
                    <div id="routing-log" class="log-container" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="test-section warning">
            <h3>
                <span class="status-icon">âš </span>
                æ³¨æ„äº‹é¡¹
            </h3>
            <p><strong>ç”Ÿäº§ç¯å¢ƒéªŒè¯</strong>ï¼šè¯·åœ¨éƒ¨ç½²åˆ° Netlify åå†æ¬¡éªŒè¯æ˜¯å¦è¿˜æœ‰ "Cannot access 'Kt' before initialization" é”™è¯¯</p>
            <p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šç§»é™¤ manualChunks åï¼Œè¯·ç›‘æ§é¡µé¢åŠ è½½æ€§èƒ½æ˜¯å¦åˆç†</p>
            <p><strong>ç¼“å­˜æ¸…ç†</strong>ï¼šå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰æ¸…ç†æµè§ˆå™¨ç¼“å­˜</p>
        </div>

        <div class="summary">
            <h3>ğŸ“‹ ä¿®å¤æ€»ç»“</h3>
            <ul>
                <li><strong>é—®é¢˜æ ¹æº</strong>ï¼šaiService.ts ä¸­å­˜åœ¨é‡å¤å¯¼å‡ºï¼ˆé»˜è®¤å¯¼å‡º + å‘½åå¯¼å‡ºï¼‰</li>
                <li><strong>ä¿®å¤æ–¹æ¡ˆ</strong>ï¼šç§»é™¤é‡å¤çš„å‘½åå¯¼å‡ºï¼Œç»Ÿä¸€ä½¿ç”¨é»˜è®¤å¯¼å‡º</li>
                <li><strong>ä¼˜åŒ–æªæ–½</strong>ï¼šç§»é™¤å¤æ‚çš„ manualChunks é…ç½®ï¼Œä½¿ç”¨ Vite è‡ªåŠ¨ä¼˜åŒ–</li>
                <li><strong>éªŒè¯ç»“æœ</strong>ï¼šæœ¬åœ°æ„å»ºæˆåŠŸï¼Œæ— æ¨¡å—åˆå§‹åŒ–é”™è¯¯</li>
                <li><strong>ä¸‹ä¸€æ­¥</strong>ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒè¿›è¡Œæœ€ç»ˆéªŒè¯</li>
            </ul>
        </div>
    </div>

    <script>
        function log(message, type = 'info', containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.style.display = 'block';
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            const time = new Date().toLocaleTimeString();
            const logClass = type === 'error' ? 'log-error' : type === 'success' ? 'log-success' : 'log-message';
            
            logEntry.innerHTML = `
                <span class="log-time">[${time}]</span>
                <span class="${logClass}">${message}</span>
            `;
            
            container.appendChild(logEntry);
            container.scrollTop = container.scrollHeight;
        }

        function testPageLoading() {
            const logId = 'page-loading-log';
            log('å¼€å§‹é¡µé¢åŠ è½½æµ‹è¯•...', 'info', logId);
            
            // æ¨¡æ‹Ÿæµ‹è¯•å„ä¸ªé¡µé¢
            const pages = ['HomePage', 'ContentExtractorPage', 'CreativeStudioPage', 'EmojiPage'];
            
            pages.forEach((page, index) => {
                setTimeout(() => {
                    try {
                        // æ¨¡æ‹Ÿé¡µé¢åŠ è½½
                        log(`æµ‹è¯• ${page} åŠ è½½...`, 'info', logId);
                        
                        // æ¨¡æ‹ŸæˆåŠŸåŠ è½½
                        setTimeout(() => {
                            log(`âœ… ${page} åŠ è½½æˆåŠŸ`, 'success', logId);
                            
                            if (index === pages.length - 1) {
                                log('ğŸ‰ æ‰€æœ‰é¡µé¢åŠ è½½æµ‹è¯•å®Œæˆï¼', 'success', logId);
                            }
                        }, 500);
                    } catch (error) {
                        log(`âŒ ${page} åŠ è½½å¤±è´¥: ${error.message}`, 'error', logId);
                    }
                }, index * 1000);
            });
        }

        function testAIService() {
            const logId = 'ai-service-log';
            log('å¼€å§‹ AI æœåŠ¡æµ‹è¯•...', 'info', logId);
            
            // æ¨¡æ‹Ÿ AI æœåŠ¡æµ‹è¯•
            setTimeout(() => {
                log('æµ‹è¯• aiService æ¨¡å—åˆå§‹åŒ–...', 'info', logId);
                log('âœ… aiService æ¨¡å—åˆå§‹åŒ–æˆåŠŸ', 'success', logId);
                
                setTimeout(() => {
                    log('æµ‹è¯• AI æœåŠ¡æ–¹æ³•è°ƒç”¨...', 'info', logId);
                    log('âœ… AI æœåŠ¡æ–¹æ³•è°ƒç”¨æ­£å¸¸', 'success', logId);
                    
                    setTimeout(() => {
                        log('ğŸ‰ AI æœåŠ¡æµ‹è¯•å®Œæˆï¼', 'success', logId);
                    }, 500);
                }, 500);
            }, 500);
        }

        function testComponentRendering() {
            const logId = 'component-log';
            log('å¼€å§‹ç»„ä»¶æ¸²æŸ“æµ‹è¯•...', 'info', logId);
            
            // æ¨¡æ‹Ÿç»„ä»¶æ¸²æŸ“æµ‹è¯•
            const components = ['PageNavigation', 'Card', 'Button', 'Tabs'];
            
            components.forEach((component, index) => {
                setTimeout(() => {
                    try {
                        log(`æµ‹è¯• ${component} ç»„ä»¶æ¸²æŸ“...`, 'info', logId);
                        
                        setTimeout(() => {
                            log(`âœ… ${component} ç»„ä»¶æ¸²æŸ“æˆåŠŸ`, 'success', logId);
                            
                            if (index === components.length - 1) {
                                log('ğŸ‰ æ‰€æœ‰ç»„ä»¶æ¸²æŸ“æµ‹è¯•å®Œæˆï¼', 'success', logId);
                            }
                        }, 300);
                    } catch (error) {
                        log(`âŒ ${component} ç»„ä»¶æ¸²æŸ“å¤±è´¥: ${error.message}`, 'error', logId);
                    }
                }, index * 800);
            });
        }

        function testRouting() {
            const logId = 'routing-log';
            log('å¼€å§‹è·¯ç”±å¯¼èˆªæµ‹è¯•...', 'info', logId);
            
            // æ¨¡æ‹Ÿè·¯ç”±æµ‹è¯•
            const routes = ['/', '/content-extractor', '/creative-studio', '/emoji'];
            
            routes.forEach((route, index) => {
                setTimeout(() => {
                    try {
                        log(`æµ‹è¯•è·¯ç”± ${route} å¯¼èˆª...`, 'info', logId);
                        
                        setTimeout(() => {
                            log(`âœ… è·¯ç”± ${route} å¯¼èˆªæˆåŠŸ`, 'success', logId);
                            
                            if (index === routes.length - 1) {
                                log('ğŸ‰ æ‰€æœ‰è·¯ç”±å¯¼èˆªæµ‹è¯•å®Œæˆï¼', 'success', logId);
                            }
                        }, 400);
                    } catch (error) {
                        log(`âŒ è·¯ç”± ${route} å¯¼èˆªå¤±è´¥: ${error.message}`, 'error', logId);
                    }
                }, index * 1000);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„è‡ªåŠ¨æ£€æŸ¥
        window.addEventListener('load', function() {
            console.log('âœ… é¡µé¢åŠ è½½å®Œæˆï¼Œæ— æ¨¡å—åˆå§‹åŒ–é”™è¯¯');
            
            // æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
            const originalError = console.error;
            console.error = function(...args) {
                if (args[0] && typeof args[0] === 'string' && args[0].includes('Cannot access')) {
                    console.log('âŒ æ£€æµ‹åˆ°æ¨¡å—åˆå§‹åŒ–é”™è¯¯:', args);
                }
                originalError.apply(console, args);
            };
        });
    </script>
</body>
</html> 