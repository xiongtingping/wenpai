import{r as s,j as e,C as a,e as t,f as n,F as l,h as c,i as r,H as i,B as d,ae as m,m as x,l as h,g as o}from"./index-CYvVoP-H.js";import{A as j,a as u}from"./alert-t5HC1c9H.js";import{A as p}from"./aiAnalysisService-SUnTANeP.js";import{B as g}from"./brain-CjC4SGqx.js";const N=()=>{const[N,f]=s.useState(""),[v,y]=s.useState(!1),[w,b]=s.useState(null),[A,S]=s.useState(null),[C,I]=s.useState([]),D=p.getInstance();return e.jsxs("div",{className:"container mx-auto py-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"AI功能测试"}),e.jsx("p",{className:"text-muted-foreground",children:"测试品牌资料分析功能的各项能力"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"h-5 w-5"}),"内容输入"]}),e.jsx(c,{children:"输入要分析的品牌资料内容"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsx(i,{placeholder:"请输入品牌资料内容，例如：我们是一个专注于用户体验的科技公司，致力于为用户提供简单易用的产品...",value:N,onChange:s=>f(s.target.value),rows:6}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:async()=>{if(N.trim()){y(!0),S(null),b(null);try{const s=Date.now(),e=await D.analyzeBrandContent(N),a=Date.now()-s;b(e),I(s=>[...s,{test:"品牌资料分析",status:"success",message:`分析完成，耗时 ${a}ms`,duration:a}])}catch(s){const e=s instanceof Error?s.message:"未知错误";S(e),I(s=>[...s,{test:"品牌资料分析",status:"error",message:e}])}finally{y(!1)}}else S("请输入要分析的内容")},disabled:v||!N.trim(),className:"flex-1",children:v?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"h-4 w-4 mr-2 animate-spin"}),"分析中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"开始分析"]})}),e.jsx(d,{variant:"outline",onClick:async()=>{I([]),I(s=>[...s,{test:"API连接测试",status:"pending",message:"正在测试..."}]);try{const s=Date.now();await new Promise(s=>setTimeout(s,500));const e=Date.now()-s;I(s=>s.map(s=>"API连接测试"===s.test?{...s,status:"success",message:`连接成功，耗时 ${e}ms`,duration:e}:s))}catch(s){I(s=>s.map(s=>"API连接测试"===s.test?{...s,status:"error",message:"连接失败"}:s))}I(s=>[...s,{test:"简单内容分析",status:"pending",message:"正在分析..."}]);try{const s=Date.now(),e="我们是一个专注于用户体验的科技公司，致力于为用户提供简单易用的产品。",a=await D.analyzeBrandContent(e),t=Date.now()-s;I(s=>s.map(s=>"简单内容分析"===s.test?{...s,status:"success",message:`分析成功，提取到 ${a.keywords.length} 个关键词`,duration:t}:s))}catch(s){I(s=>s.map(s=>"简单内容分析"===s.test?{...s,status:"error",message:"分析失败"}:s))}I(s=>[...s,{test:"文件类型支持",status:"pending",message:"正在检查..."}]);try{const s=D.getSupportedFileTypes();I(e=>e.map(e=>"文件类型支持"===e.test?{...e,status:"success",message:`支持 ${s.length} 种文件类型`}:e))}catch(s){I(s=>s.map(s=>"文件类型支持"===s.test?{...s,status:"error",message:"检查失败"}:s))}},disabled:v,children:"运行测试套件"})]})]})]}),e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(n,{children:"测试结果"}),e.jsx(c,{children:"功能测试的执行结果"})]}),e.jsxs(r,{children:[0===C.length?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"暂无测试结果，点击上方按钮开始测试"}):e.jsx("div",{className:"space-y-3",children:C.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["success"===s.status&&e.jsx(x,{className:"h-4 w-4 text-green-500"}),"error"===s.status&&e.jsx(h,{className:"h-4 w-4 text-red-500"}),"pending"===s.status&&e.jsx(m,{className:"h-4 w-4 animate-spin text-blue-500"}),e.jsx("span",{className:"font-medium",children:s.test})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm",children:s.message}),s.duration&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.duration,"ms"]})]})]},a))}),C.length>0&&e.jsx(d,{variant:"outline",onClick:()=>{b(null),S(null),I([])},className:"w-full mt-4",children:"清空结果"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[A&&e.jsxs(j,{variant:"destructive",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx(u,{children:A})]}),w&&e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"分析结果"]}),e.jsx(c,{children:"AI分析生成的品牌特征"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"品牌关键词"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.keywords.map((s,a)=>e.jsx(o,{variant:"secondary",children:s},a))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"品牌语气"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-lg",children:w.tone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"内容建议"}),e.jsx("ul",{className:"space-y-1",children:w.suggestions.map((s,a)=>e.jsxs("li",{className:"text-sm flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),s]},a))})]})]})]}),e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(n,{children:"支持的文件类型"}),e.jsx(c,{children:"AI分析功能支持的文件格式"})]}),e.jsx(r,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.getSupportedFileTypes().map((s,a)=>e.jsxs("div",{className:"text-sm p-2 bg-muted rounded",children:[e.jsx("div",{className:"font-medium",children:s.extension}),e.jsx("div",{className:"text-muted-foreground",children:s.description})]},a))})})]})]})]})]})};export{N as default};
