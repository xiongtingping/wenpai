import{j as e}from"./ui-core-BEqq4eN-.js";import{r as s}from"./router-CDHmMMQ-.js";import{u as t,B as a,C as i,a as l,b as n,e as c,d as r}from"./pages-home-BoZVsFKO.js";import{B as d,i as m,j as o,k as x,l as h,L as u,I as j,T as p,C as g,D as N,b as v,c as f,d as b,m as w}from"./pages-adapt-CiCh1UVu.js";import{P as y}from"./pages-brand-CflPsgWd.js";import{P as C}from"./components-layout-LKVIGOSA.js";import{f as T,v as z,P as S,ax as D,n as k,S as A,C as L,aa as $,E as F,W as q,x as P,e as B,ay as E,a3 as I,G as O,az as M,aA as V,V as _,aB as G,Z as W,ap as Z}from"./utils-U1evx29U.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-sEIB86A8.js";import"./components-auth-valB4v-J.js";import"./api-services-Ciw7WX26.js";import"./pages-content-extractor-DtDkVS7Z.js";const H={weibo:"https://weibo.com/newlogin?url=https://weibo.com/compose/repost",xiaohongshu:"https://creator.xiaohongshu.com/publish",zhihu:"https://www.zhihu.com/question/new",wechat:"https://mp.weixin.qq.com/",bilibili:"https://member.bilibili.com/platform/upload/text",douyin:"https://creator.douyin.com/creator-micro/content/upload",kuaishou:"https://cp.kuaishou.com/article/publish",baijia:"https://baijiahao.baidu.com/builder/rc/edit"};function J(){const{toast:J}=t(),[K,Q]=s.useState("publish"),[R,U]=s.useState([]),[X,Y]=s.useState([]),[ee,se]=s.useState([]),[te,ae]=s.useState(!1),[ie,le]=s.useState(0),[ne,ce]=s.useState({title:"",content:"",scheduledTime:"",useTemplate:!1,images:[]}),[re,de]=s.useState(!1),[me,oe]=s.useState(!1),[xe,he]=s.useState(null),ue=[{id:"wechat",name:"微信公众号",icon:e.jsx(O,{className:"w-4 h-4"}),color:"bg-green-500",maxLength:5e3,features:["富文本","图片","链接"],status:"active",lastSync:new Date,connected:!0},{id:"xiaohongshu",name:"小红书",icon:e.jsx(M,{className:"w-4 h-4"}),color:"bg-red-500",maxLength:1e3,features:["图片","标签","定位"],status:"active",lastSync:new Date,connected:!0},{id:"zhihu",name:"知乎",icon:e.jsx(V,{className:"w-4 h-4"}),color:"bg-blue-500",maxLength:3e3,features:["专栏","问答","想法"],status:"active",lastSync:new Date,connected:!0},{id:"weibo",name:"新浪微博",icon:e.jsx(D,{className:"w-4 h-4"}),color:"bg-orange-500",maxLength:2e3,features:["话题","图片","@用户"],status:"active",lastSync:new Date,connected:!0},{id:"douyin",name:"抖音",icon:e.jsx(_,{className:"w-4 h-4"}),color:"bg-black",maxLength:100,features:["视频","话题","音乐"],status:"inactive",connected:!1},{id:"bilibili",name:"B站",icon:e.jsx(G,{className:"w-4 h-4"}),color:"bg-pink-500",maxLength:500,features:["视频","专栏","动态"],status:"active",lastSync:new Date,connected:!0},{id:"kuaishou",name:"快手",icon:e.jsx(W,{className:"w-4 h-4"}),color:"bg-yellow-500",maxLength:200,features:["视频","直播","话题"],status:"inactive",connected:!1},{id:"baijia",name:"百家号",icon:e.jsx(O,{className:"w-4 h-4"}),color:"bg-blue-600",maxLength:4e3,features:["文章","图片","SEO"],status:"inactive",connected:!1}];s.useEffect(()=>{const e=[{id:"1",title:"春季营销策略分享",content:"随着春天的到来，各大品牌都在调整营销策略...",platforms:["wechat","xiaohongshu","zhihu"],status:"completed",createdAt:new Date("2024-01-15"),results:{wechat:{status:"success",url:"https://mp.weixin.qq.com/s/abc123",publishedAt:new Date},xiaohongshu:{status:"success",url:"https://www.xiaohongshu.com/discovery/item/abc123",publishedAt:new Date},zhihu:{status:"failed",error:"内容审核未通过"}}},{id:"2",title:"AI工具使用技巧",content:"分享一些实用的AI工具使用技巧，提高工作效率...",platforms:["zhihu","weibo","bilibili"],status:"publishing",createdAt:new Date("2024-01-14"),results:{zhihu:{status:"success",url:"https://zhuanlan.zhihu.com/p/abc123",publishedAt:new Date},weibo:{status:"pending"},bilibili:{status:"pending"}}}],s=[{id:"1",name:"产品发布模板",title:"🎉 重磅发布！{产品名称}正式上线",content:"经过团队的精心打磨，{产品名称}终于和大家见面了！\n\n✨ 核心功能：\n{功能列表}\n\n🎯 适用场景：\n{场景描述}\n\n立即体验：{产品链接}",platforms:["wechat","xiaohongshu","zhihu"],tags:["产品","发布","营销"],useCount:15,createdAt:new Date("2024-01-10")},{id:"2",name:"节日祝福模板",title:"🎊 {节日名称}快乐！",content:"在这个特殊的日子里，{品牌名称}向所有朋友送上最真挚的祝福！\n\n🌟 愿你：\n{祝福内容}\n\n感谢一路以来的支持与陪伴！",platforms:["wechat","weibo","xiaohongshu"],tags:["节日","祝福","品牌"],useCount:8,createdAt:new Date("2024-01-08")}];U(e),Y(s)},[]);const je=e=>{ce({title:e.title,content:e.content,scheduledTime:"",useTemplate:!0,images:[]}),se(e.platforms),Q("publish"),de(!1),Y(s=>s.map(s=>s.id===e.id?{...s,useCount:s.useCount+1}:s))},pe=s=>{switch(s){case"success":return e.jsx(L,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(Z,{className:"w-4 h-4 text-red-500"});case"pending":return e.jsx($,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(Z,{className:"w-4 h-4 text-gray-500"})}},ge=e=>{switch(e){case"completed":return"bg-green-50 text-green-700 border-green-200";case"publishing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(C,{title:"一键转发管理",description:"多平台内容发布和管理",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>oe(!0),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"平台设置"]}),e.jsx(d,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"已上线"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(m,{value:K,onValueChange:Q,children:[e.jsxs(o,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"publish",children:"发布内容"}),e.jsx(x,{value:"history",children:"发布历史"}),e.jsx(x,{value:"templates",children:"内容模板"}),e.jsx(x,{value:"analytics",children:"数据分析"})]}),e.jsx(h,{value:"publish",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"内容编辑"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"title",children:"标题"}),e.jsx(j,{id:"title",placeholder:"输入内容标题...",value:ne.title,onChange:e=>ce(s=>({...s,title:e.target.value}))})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"content",children:"内容"}),e.jsx(p,{id:"content",placeholder:"输入要发布的内容...",value:ne.content,onChange:e=>ce(s=>({...s,content:e.target.value})),rows:8}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ne.content.length," 字符"]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"scheduledTime",children:"定时发布（可选）"}),e.jsx(j,{id:"scheduledTime",type:"datetime-local",value:ne.scheduledTime,onChange:e=>ce(s=>({...s,scheduledTime:e.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{id:"useTemplate",checked:ne.useTemplate,onCheckedChange:e=>ce(s=>({...s,useTemplate:!!e}))}),e.jsx(u,{htmlFor:"useTemplate",children:"使用内容模板"})]}),ne.useTemplate&&e.jsxs(a,{variant:"outline",onClick:()=>de(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"选择模板"]}),e.jsxs(a,{onClick:async()=>{if(!ne.content.trim())return void J({title:"内容不能为空",description:"请先填写要发布的内容",variant:"destructive"});if(0===ee.length)return void J({title:"请选择平台",description:"请至少选择一个平台",variant:"destructive"});try{await navigator.clipboard.writeText(ne.content)}catch{return void J({title:"复制失败",description:"请手动复制内容",variant:"destructive"})}const e=ee[0],s=H[e];s?(window.open(s,"_blank"),J({title:"内容已复制",description:"请在新页面粘贴内容并发布"})):J({title:"暂不支持自动跳转",description:"请手动前往平台发布内容"})},disabled:te,className:"w-full",size:"lg",variant:"secondary",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"一键发布（自动复制并跳转）"]}),e.jsx(a,{onClick:async()=>{if(ne.title.trim()&&ne.content.trim())if(0!==ee.length){ae(!0),le(0);try{const e={id:Date.now().toString(),title:ne.title,content:ne.content,platforms:ee,status:"publishing",scheduledTime:ne.scheduledTime?new Date(ne.scheduledTime):void 0,createdAt:new Date,results:{}};ee.forEach(s=>{e.results[s]={status:"pending"}}),U(s=>[e,...s]);const s=ee.length;let t=0;for(const a of ee){await new Promise(e=>setTimeout(e,1e3));const i=Math.random()>.2;U(s=>s.map(s=>s.id===e.id?{...s,results:{...s.results,[a]:i?{status:"success",url:`https://example.com/${a}/${Date.now()}`,publishedAt:new Date}:{status:"failed",error:"发布失败，请稍后重试"}}}:s)),t++,le(t/s*100)}U(s=>s.map(s=>{if(s.id===e.id){const e=Object.values(s.results),t=e.some(e=>"failed"===e.status),a=e.every(e=>"pending"!==e.status);return{...s,status:a?t?"failed":"completed":"publishing"}}return s})),J({title:"发布完成",description:`内容已发布到 ${ee.length} 个平台`}),ce({title:"",content:"",scheduledTime:"",useTemplate:!1,images:[]}),se([]),Q("history")}catch(e){J({title:"发布失败",description:"请稍后重试",variant:"destructive"})}finally{ae(!1),le(0)}}else J({title:"请选择发布平台",description:"至少选择一个平台进行发布",variant:"destructive"});else J({title:"请填写完整内容",description:"标题和内容不能为空",variant:"destructive"})},disabled:te,className:"w-full",size:"lg",children:te?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"发布中... ",Math.round(ie),"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"一键发布（模拟API）"]})}),te&&e.jsx(y,{value:ie,className:"w-full"})]})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"选择平台"]}),e.jsx(r,{children:"选择要发布的目标平台"})]}),e.jsx(c,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ue.map(s=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${ee.includes(s.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${s.connected?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>{return s.connected&&(e=s.id,void se(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]));var e},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded ${s.color} text-white`,children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["最多 ",s.maxLength," 字符"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ee.includes(s.id)&&e.jsx(L,{className:"w-5 h-5 text-blue-500"}),!s.connected&&e.jsx(d,{variant:"outline",className:"text-xs",children:"未连接"})]})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.features.map((s,t)=>e.jsx(d,{variant:"secondary",className:"text-xs",children:s},t))})]},s.id))})})]})]})}),e.jsx(h,{value:"history",className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"发布历史"]})}),e.jsx(c,{children:0===R.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"暂无发布记录"})]}):e.jsx("div",{className:"space-y-4",children:R.map(s=>e.jsx(i,{className:"border-l-4 border-l-blue-500",children:e.jsx(c,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.title}),e.jsx(d,{variant:"outline",className:ge(s.status),children:"completed"===s.status?"已完成":"publishing"===s.status?"发布中":"failed"===s.status?"失败":"待发布"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.content}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.platforms.map(t=>{const i=ue.find(e=>e.id===t),l=s.results[t];return i?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 rounded ${i.color} text-white`,children:i.icon}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&pe(l.status),(null==l?void 0:l.url)&&e.jsx(a,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",asChild:!0,children:e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(F,{className:"w-3 h-3"})})})]})]},t):null})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["发布时间：",s.createdAt.toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"查看详情"]}),e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"复制内容"]})]})]})]})})})},s.id))})})]})}),e.jsx(h,{value:"templates",className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"内容模板"]}),e.jsxs(a,{onClick:()=>de(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"创建模板"]})]})}),e.jsx(c,{children:0===X.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"暂无内容模板"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:X.map(s=>e.jsx(i,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs(d,{variant:"outline",className:"text-xs",children:["使用 ",s.useCount," 次"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.title}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.map((s,t)=>e.jsx(d,{variant:"secondary",className:"text-xs",children:s},t))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["创建于 ",s.createdAt.toLocaleDateString()]}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>je(s),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"使用模板"]})]})]})},s.id))})})]})}),e.jsx(h,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"总发布数"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.length})]}),e.jsx(A,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"成功发布"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.filter(e=>"completed"===e.status).length})]}),e.jsx(L,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"成功率"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[R.length>0?Math.round(R.filter(e=>"completed"===e.status).length/R.length*100):0,"%"]})]}),e.jsx(I,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"模板数量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:X.length})]}),e.jsx(B,{className:"h-8 w-8 text-orange-500"})]})})})]})})]}),e.jsx(N,{open:re,onOpenChange:de,children:e.jsxs(v,{className:"max-w-2xl",children:[e.jsxs(f,{children:[e.jsx(b,{children:"选择内容模板"}),e.jsx(w,{children:"选择一个模板来快速创建发布内容"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:X.map(s=>e.jsx(i,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs(d,{variant:"outline",className:"text-xs",children:["使用 ",s.useCount," 次"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.title}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.map((s,t)=>e.jsx(d,{variant:"secondary",className:"text-xs",children:s},t))}),e.jsxs(a,{variant:"outline",size:"sm",className:"w-full",onClick:()=>je(s),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"使用此模板"]})]})},s.id))})]})}),e.jsx(N,{open:me,onOpenChange:oe,children:e.jsxs(v,{className:"max-w-4xl",children:[e.jsxs(f,{children:[e.jsx(b,{children:"平台设置"}),e.jsx(w,{children:"管理各平台的连接状态和配置"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:ue.map(s=>e.jsx(i,{children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded ${s.color} text-white`,children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.connected?"已连接":"未连接"})]})]}),e.jsx(d,{variant:"outline",className:s.connected?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:s.connected?"已连接":"未连接"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.features.map((s,t)=>e.jsx(d,{variant:"secondary",className:"text-xs",children:s},t))}),e.jsx(a,{variant:s.connected?"outline":"default",size:"sm",className:"w-full",disabled:s.connected,children:s.connected?"已连接":"连接平台"})]})},s.id))})]})})]})]})}export{J as default};
