import{c as e,b as s,u as t,j as r,B as n,d as a,e as o,f as i,g as c,h as l,V as d,R as u,i as m,k as x,l as p}from"./ui-core-CpPo71Rl.js";import{r as f,a as h,d as v,B as j,e as w,f as g,R as y}from"./router-D6jKKatM.js";import{a as N,g as b}from"./react-vendor-D7XYiaTe.js";import{u as E,B as T,T as R}from"./pages-adapt-BFelL6ZS.js";import{a as C,X as P,U as D,r as L,C as k,h as S,s as I,u as _}from"./utils-D02jGtCA.js";import{c as F,a as A,u as M,C as V,b as K,d as O,f as B,e as U,B as $,U as H,H as X}from"./pages-home-BH7TBd0z.js";import"./components-landing-DtVSPtW_.js";var q,W={};const Y=b(function(){if(q)return W;q=1;var e=N();return W.createRoot=e.createRoot,W.hydrateRoot=e.hydrateRoot,W}());var z="ToastProvider",[G,J,Q]=s("Toast"),[Z,ee]=e("Toast",[Q]),[se,te]=Z(z),re=e=>{const{__scopeToast:s,label:t="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[c,l]=f.useState(null),[d,u]=f.useState(0),m=f.useRef(!1),x=f.useRef(!1);return t.trim(),r.jsx(G.Provider,{scope:s,children:r.jsx(se,{scope:s,label:t,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:c,onViewportChange:l,onToastAdd:f.useCallback(()=>u(e=>e+1),[]),onToastRemove:f.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:x,children:i})})};re.displayName=z;var ne="ToastViewport",ae=["F8"],oe="toast.viewportPause",ie="toast.viewportResume",ce=f.forwardRef((e,s)=>{const{__scopeToast:o,hotkey:i=ae,label:c="Notifications ({hotkey})",...l}=e,d=te(ne,o),u=J(o),m=f.useRef(null),x=f.useRef(null),p=f.useRef(null),h=f.useRef(null),v=t(s,h,d.onViewportChange),j=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=d.toastCount>0;f.useEffect(()=>{const e=e=>{var s;0!==i.length&&i.every(s=>e[s]||e.code===s)&&(null==(s=h.current)||s.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),f.useEffect(()=>{const e=m.current,s=h.current;if(w&&e&&s){const t=()=>{if(!d.isClosePausedRef.current){const e=new CustomEvent(oe);s.dispatchEvent(e),d.isClosePausedRef.current=!0}},r=()=>{if(d.isClosePausedRef.current){const e=new CustomEvent(ie);s.dispatchEvent(e),d.isClosePausedRef.current=!1}},n=s=>{!e.contains(s.relatedTarget)&&r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",t),e.addEventListener("focusout",n),e.addEventListener("pointermove",t),e.addEventListener("pointerleave",a),window.addEventListener("blur",t),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",t),e.removeEventListener("focusout",n),e.removeEventListener("pointermove",t),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",t),window.removeEventListener("focus",r)}}},[w,d.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:e})=>{const s=u().map(s=>{const t=s.ref.current,r=[t,...Re(t)];return"forwards"===e?r:r.reverse()});return("forwards"===e?s.reverse():s).flat()},[u]);return f.useEffect(()=>{const e=h.current;if(e){const s=s=>{var t,r,n;const a=s.altKey||s.ctrlKey||s.metaKey;if("Tab"===s.key&&!a){const a=document.activeElement,o=s.shiftKey;if(s.target===e&&o)return void(null==(t=x.current)||t.focus());const i=g({tabbingDirection:o?"backwards":"forwards"}),c=i.findIndex(e=>e===a);Ce(i.slice(c+1))?s.preventDefault():o?null==(r=x.current)||r.focus():null==(n=p.current)||n.focus()}};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}},[u,g]),r.jsxs(n,{ref:m,role:"region","aria-label":c.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&r.jsx(de,{ref:x,onFocusFromOutsideViewport:()=>{Ce(g({tabbingDirection:"forwards"}))}}),r.jsx(G.Slot,{scope:o,children:r.jsx(a.ol,{tabIndex:-1,...l,ref:v})}),w&&r.jsx(de,{ref:p,onFocusFromOutsideViewport:()=>{Ce(g({tabbingDirection:"backwards"}))}})]})});ce.displayName=ne;var le="ToastFocusProxy",de=f.forwardRef((e,s)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...a}=e,o=te(le,t);return r.jsx(d,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:e=>{var s;const t=e.relatedTarget;!(null==(s=o.viewport)?void 0:s.contains(t))&&n()}})});de.displayName=le;var ue="Toast",me=f.forwardRef((e,s)=>{const{forceMount:t,open:n,defaultOpen:a,onOpenChange:d,...u}=e,[m,x]=o({prop:n,defaultProp:a??!0,onChange:d,caller:ue});return r.jsx(i,{present:t||m,children:r.jsx(fe,{open:m,...u,ref:s,onClose:()=>x(!1),onPause:l(e.onPause),onResume:l(e.onResume),onSwipeStart:c(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:c(e.onSwipeMove,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${t}px`)}),onSwipeCancel:c(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:c(e.onSwipeEnd,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${t}px`),x(!1)})})})});me.displayName=ue;var[xe,pe]=Z(ue,{onClose(){}}),fe=f.forwardRef((e,s)=>{const{__scopeToast:n,type:o="foreground",duration:i,open:d,onClose:m,onEscapeKeyDown:x,onPause:p,onResume:v,onSwipeStart:j,onSwipeMove:w,onSwipeCancel:g,onSwipeEnd:y,...N}=e,b=te(ue,n),[E,T]=f.useState(null),R=t(s,e=>T(e)),C=f.useRef(null),P=f.useRef(null),D=i||b.duration,L=f.useRef(0),k=f.useRef(D),S=f.useRef(0),{onToastAdd:I,onToastRemove:_}=b,F=l(()=>{var e;(null==E?void 0:E.contains(document.activeElement))&&(null==(e=b.viewport)||e.focus()),m()}),A=f.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(S.current),L.current=(new Date).getTime(),S.current=window.setTimeout(F,e))},[F]);f.useEffect(()=>{const e=b.viewport;if(e){const s=()=>{A(k.current),null==v||v()},t=()=>{const e=(new Date).getTime()-L.current;k.current=k.current-e,window.clearTimeout(S.current),null==p||p()};return e.addEventListener(oe,t),e.addEventListener(ie,s),()=>{e.removeEventListener(oe,t),e.removeEventListener(ie,s)}}},[b.viewport,D,p,v,A]),f.useEffect(()=>{d&&!b.isClosePausedRef.current&&A(D)},[d,D,b.isClosePausedRef,A]),f.useEffect(()=>(I(),()=>_()),[I,_]);const M=f.useMemo(()=>E?be(E):null,[E]);return b.viewport?r.jsxs(r.Fragment,{children:[M&&r.jsx(he,{__scopeToast:n,role:"status","aria-live":"foreground"===o?"assertive":"polite","aria-atomic":!0,children:M}),r.jsx(xe,{scope:n,onClose:F,children:h.createPortal(r.jsx(G.ItemSlot,{scope:n,children:r.jsx(u,{asChild:!0,onEscapeKeyDown:c(x,()=>{b.isFocusedToastEscapeKeyDownRef.current||F(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(a.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":b.swipeDirection,...N,ref:R,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:c(e.onKeyDown,e=>{"Escape"===e.key&&(null==x||x(e.nativeEvent),e.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:c(e.onPointerDown,e=>{0===e.button&&(C.current={x:e.clientX,y:e.clientY})}),onPointerMove:c(e.onPointerMove,e=>{if(!C.current)return;const s=e.clientX-C.current.x,t=e.clientY-C.current.y,r=Boolean(P.current),n=["left","right"].includes(b.swipeDirection),a=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,o=n?a(0,s):0,i=n?0:a(0,t),c="touch"===e.pointerType?10:2,l={x:o,y:i},d={originalEvent:e,delta:l};r?(P.current=l,Ee("toast.swipeMove",w,d,{discrete:!1})):Te(l,b.swipeDirection,c)?(P.current=l,Ee("toast.swipeStart",j,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(s)>c||Math.abs(t)>c)&&(C.current=null)}),onPointerUp:c(e.onPointerUp,e=>{const s=P.current,t=e.target;if(t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),P.current=null,C.current=null,s){const t=e.currentTarget,r={originalEvent:e,delta:s};Te(s,b.swipeDirection,b.swipeThreshold)?Ee("toast.swipeEnd",y,r,{discrete:!0}):Ee("toast.swipeCancel",g,r,{discrete:!0}),t.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),he=e=>{const{__scopeToast:s,children:t,...n}=e,a=te(ue,s),[o,i]=f.useState(!1),[c,u]=f.useState(!1);return function(e=()=>{}){const s=l(e);x(()=>{let e=0,t=0;return e=window.requestAnimationFrame(()=>t=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(t)}},[s])}(()=>i(!0)),f.useEffect(()=>{const e=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(e)},[]),c?null:r.jsx(m,{asChild:!0,children:r.jsx(d,{...n,children:o&&r.jsxs(r.Fragment,{children:[a.label," ",t]})})})},ve=f.forwardRef((e,s)=>{const{__scopeToast:t,...n}=e;return r.jsx(a.div,{...n,ref:s})});ve.displayName="ToastTitle";var je=f.forwardRef((e,s)=>{const{__scopeToast:t,...n}=e;return r.jsx(a.div,{...n,ref:s})});je.displayName="ToastDescription";var we=f.forwardRef((e,s)=>{const{altText:t,...n}=e;return t.trim()?r.jsx(Ne,{altText:t,asChild:!0,children:r.jsx(ye,{...n,ref:s})}):null});we.displayName="ToastAction";var ge="ToastClose",ye=f.forwardRef((e,s)=>{const{__scopeToast:t,...n}=e,o=pe(ge,t);return r.jsx(Ne,{asChild:!0,children:r.jsx(a.button,{type:"button",...n,ref:s,onClick:c(e.onClick,o.onClose)})})});ye.displayName=ge;var Ne=f.forwardRef((e,s)=>{const{__scopeToast:t,altText:n,...o}=e;return r.jsx(a.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...o,ref:s})});function be(e){const s=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&s.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const t=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!t)if(r){const t=e.dataset.radixToastAnnounceAlt;t&&s.push(t)}else s.push(...be(e))}}),s}function Ee(e,s,t,{discrete:r}){const n=t.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});s&&n.addEventListener(e,s,{once:!0}),r?p(n,a):n.dispatchEvent(a)}var Te=(e,s,t=0)=>{const r=Math.abs(e.x),n=Math.abs(e.y),a=r>n;return"left"===s||"right"===s?a&&r>t:!a&&n>t};function Re(e){const s=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const s="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||s?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)s.push(t.currentNode);return s}function Ce(e){const s=document.activeElement;return e.some(e=>e===s||(e.focus(),document.activeElement!==s))}var Pe=ce,De=me,Le=ve,ke=je,Se=we,Ie=ye;const _e=re,Fe=f.forwardRef(({className:e,...s},t)=>r.jsx(Pe,{ref:t,className:F("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));Fe.displayName=Pe.displayName;const Ae=C("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Me=f.forwardRef(({className:e,variant:s,...t},n)=>r.jsx(De,{ref:n,className:F(Ae({variant:s}),e),...t}));Me.displayName=De.displayName,f.forwardRef(({className:e,...s},t)=>r.jsx(Se,{ref:t,className:F("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s})).displayName=Se.displayName;const Ve=f.forwardRef(({className:e,...s},t)=>r.jsx(Ie,{ref:t,className:F("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:r.jsx(P,{className:"h-4 w-4"})}));Ve.displayName=Ie.displayName;const Ke=f.forwardRef(({className:e,...s},t)=>r.jsx(Le,{ref:t,className:F("text-sm font-semibold [&+div]:text-xs",e),...s}));Ke.displayName=Le.displayName;const Oe=f.forwardRef(({className:e,...s},t)=>r.jsx(ke,{ref:t,className:F("text-sm opacity-90",e),...s}));function Be(){const{toasts:e}=E();return r.jsxs(_e,{children:[e.map(function({id:e,title:s,description:t,action:n,...a}){return r.jsxs(Me,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[s&&r.jsx(Ke,{children:s}),t&&r.jsx(Oe,{children:t})]}),n,r.jsx(Ve,{})]},e)}),r.jsx(Fe,{})]})}function Ue(){const e=v();return f.useEffect(()=>{A.show();const s=()=>e("/");return A.onLogin(s),()=>A.offLogin(s)},[e]),null}function $e(){const e=v();return f.useEffect(()=>{A.show();const s=()=>e("/");return A.onLogin(s),()=>A.offLogin(s)},[e]),null}function He(){const e=v();return f.useEffect(()=>{A.show();const s=()=>e("/");return A.onLogin(s),()=>A.offLogin(s)},[e]),null}function Xe(){var e;const{user:s,isAuthenticated:t,logout:n,usageRemaining:a,recordUserAction:o}=M(),[i,c]=f.useState([]);f.useEffect(()=>{t||A.show();const e=()=>{o("login_success",{page:"authing-login-test"})};return A.onLogin(e),()=>A.offLogin(e)},[t,o]);const l=(e,s,t)=>{c(r=>[...r,{test:e,status:s,message:t}])};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Authing 登录系统测试"}),r.jsx("p",{className:"text-gray-600",children:"测试 Authing 登录系统的各项功能和配置"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs(V,{children:[r.jsx(K,{className:"pb-3",children:r.jsxs(O,{className:"flex items-center gap-2",children:[r.jsx(D,{className:"w-5 h-5"}),"认证状态"]})}),r.jsxs(B,{children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx(T,{variant:t?"default":"secondary",children:t?"已登录":"未登录"})}),r.jsxs("p",{className:"text-sm text-gray-600",children:["状态: ",t?"正常":"需要登录"]})]})]}),r.jsxs(V,{children:[r.jsx(K,{className:"pb-3",children:r.jsxs(O,{className:"flex items-center gap-2",children:[r.jsx(L,{className:"w-5 h-5"}),"使用量"]})}),r.jsxs(B,{children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsxs(T,{variant:"outline",children:[a," 次"]})}),r.jsx("p",{className:"text-sm text-gray-600",children:"剩余使用次数"})]})]}),r.jsxs(V,{children:[r.jsx(K,{className:"pb-3",children:r.jsxs(O,{className:"flex items-center gap-2",children:[r.jsx(k,{className:"w-5 h-5"}),"测试状态"]})}),r.jsxs(B,{children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsxs(T,{variant:"outline",children:[i.length," 项"]})}),r.jsx("p",{className:"text-sm text-gray-600",children:"已执行测试项目"})]})]})]}),s&&r.jsxs(V,{className:"mb-8",children:[r.jsx(K,{children:r.jsx(O,{children:"当前用户信息"})}),r.jsx(B,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"ID："}),s.id]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"用户名："}),s.username]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"昵称："}),s.nickname||"未设置"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"邮箱："}),s.email||"未设置"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"VIP："}),r.jsx(T,{variant:s.isVIP?"default":"secondary",children:s.isVIP?"是":"否"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"角色："}),(null==(e=s.roles)?void 0:e.join(", "))||"无"]})]})})]}),r.jsxs(V,{className:"mb-8",children:[r.jsxs(K,{children:[r.jsx(O,{children:"操作面板"}),r.jsx(U,{children:"测试 Authing 登录系统的各项功能"})]}),r.jsx(B,{children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs($,{onClick:()=>{c([]),t?l("登录状态","success","用户已登录"):l("登录状态","warning","用户未登录"),s?(l("用户信息","success",`用户ID: ${s.id}`),l("用户名","success",s.nickname||s.username||"未设置"),l("邮箱","success",s.email||"未设置"),l("VIP状态","success",s.isVIP?"VIP用户":"普通用户")):l("用户信息","warning","无用户信息"),l("使用量","success",`剩余 ${a} 次`);try{o("test_run",{timestamp:(new Date).toISOString()}),l("行为记录","success","功能正常")}catch(e){l("行为记录","error","功能异常")}},className:"flex items-center gap-2",children:[r.jsx(L,{className:"w-4 h-4"}),"运行所有测试"]}),!t&&r.jsxs($,{onClick:()=>{A.show(),l("显示登录","success","登录界面已显示")},variant:"outline",className:"flex items-center gap-2",children:[r.jsx(S,{className:"w-4 h-4"}),"显示登录界面"]}),t&&r.jsxs($,{onClick:()=>{n(),l("用户登出","success","用户已登出")},variant:"destructive",className:"flex items-center gap-2",children:[r.jsx(I,{className:"w-4 h-4"}),"登出"]})]})})]}),i.length>0&&r.jsxs(V,{children:[r.jsx(K,{children:r.jsx(O,{children:"测试结果"})}),r.jsx(B,{children:r.jsx("div",{className:"space-y-2",children:i.map((e,s)=>r.jsxs("div",{className:"flex items-center gap-2",children:["success"===e.status&&r.jsx(k,{className:"w-4 h-4 text-green-500"}),"error"===e.status&&r.jsx(_,{className:"w-4 h-4 text-red-500"}),"warning"===e.status&&r.jsx(_,{className:"w-4 h-4 text-yellow-500"}),r.jsxs("span",{className:"font-medium",children:[e.test,"："]}),r.jsx("span",{className:"success"===e.status?"text-green-600":"error"===e.status?"text-red-600":"text-yellow-600",children:e.message})]},s))})})]})]})}function qe(){var e,s;const{user:t,isAuthenticated:n,logout:a}=M();return n&&t?r.jsxs("div",{className:"max-w-xl mx-auto p-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"个人中心"}),r.jsxs("div",{className:"flex items-center mb-6",children:[t.avatar&&r.jsx("img",{src:t.avatar,alt:"avatar",className:"w-16 h-16 rounded-full mr-4"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold",children:t.nickname||t.username}),r.jsx("div",{className:"text-gray-500",children:t.email})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-medium",children:"ID："}),t.id]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-medium",children:"VIP："}),t.isVIP?"是":"否"]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-medium",children:"角色："}),(null==(e=t.roles)?void 0:e.join(", "))||"无"]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-medium",children:"权限："}),(null==(s=t.permissions)?void 0:s.join(", "))||"无"]}),r.jsx($,{onClick:a,variant:"destructive",children:"登出"})]}):r.jsx("div",{className:"p-8 text-center",children:"请先登录"})}function We(){const e=v();return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-6xl mb-4",children:"404"}),r.jsx("p",{className:"mb-6",children:"Page not found"}),r.jsx($,{onClick:()=>e("/"),variant:"link",children:"Return home"})]})})}function Ye(){return r.jsxs(w,{children:[r.jsx(g,{path:"/",element:r.jsx(X,{})}),r.jsx(g,{path:"/login",element:r.jsx(Ue,{})}),r.jsx(g,{path:"/register",element:r.jsx($e,{})}),r.jsx(g,{path:"/login-register",element:r.jsx(He,{})}),r.jsx(g,{path:"/authing-login-test",element:r.jsx(Xe,{})}),r.jsx(g,{path:"/profile",element:r.jsx(qe,{})}),r.jsx(g,{path:"*",element:r.jsx(We,{})})]})}function ze(){return r.jsx(H,{children:r.jsx(j,{children:r.jsxs(R,{children:[r.jsx(Ye,{}),r.jsx(Be,{})]})})})}Oe.displayName=ke.displayName;class Ge extends y.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"😵 应用出现错误"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"抱歉，应用遇到了一个意外错误"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"刷新页面"}),!1]})}):this.props.children}}Y.createRoot(document.getElementById("root")).render(r.jsx(y.StrictMode,{children:r.jsx(Ge,{children:r.jsx(ze,{})})}));
