import{r as e,j as s,C as a,e as l,f as i,g as t,i as c,T as r,a as n,b as d,d as m,B as x,ad as h,aF as j,m as o}from"./index-BuR5xlXm.js";import{S as p}from"./separator-CMY9eZD-.js";import{A as u}from"./AlipayQRCode-DJxkOHJh.js";import{C as g}from"./credit-card-CMjqDMcN.js";import"./creemClientService-CRnFWG6U.js";import"./browser-Il7jAgTf.js";import"./smartphone-SbHUnXyW.js";function N(){const[N,f]=e.useState("flow"),[b,v]=e.useState({}),[y,w]=e.useState("init"),S=[{id:"pro-monthly",name:"专业版月付",priceId:"prod_3nJOuQeVStqkp6JaDcrKHf",price:29,description:"测试专业版月付流程"},{id:"pro-yearly",name:"专业版年付",priceId:"prod_5qBlDTLpD3h9gvOZFd4Rgu",price:349,description:"测试专业版年付流程"},{id:"premium-monthly",name:"高级版月付",priceId:"prod_4HYBfvrcbXYnbxjlswMj28",price:69,description:"测试高级版月付流程"},{id:"premium-yearly",name:"高级版年付",priceId:"prod_6OfIoVnRg2pXsuYceVKOYk",price:828,description:"测试高级版年付流程"}],I=e=>{switch(e){case"success":return s.jsx(o,{className:"h-4 w-4 text-green-500"});case"pending":return s.jsx(h,{className:"h-4 w-4 text-yellow-500"});case"failed":return s.jsx(j,{className:"h-4 w-4 text-red-500"});default:return s.jsx(h,{className:"h-4 w-4 text-gray-500"})}};return s.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[s.jsxs(a,{children:[s.jsxs(l,{children:[s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(g,{className:"h-6 w-6"}),"支付流程测试",s.jsx(t,{variant:"secondary",children:"完整流程验证"})]}),s.jsx("p",{className:"text-muted-foreground",children:"测试完整的支付流程：支付发起 → 二维码生成 → 状态监控 → 回调处理 → 会员开通"})]}),s.jsx(c,{children:s.jsxs(r,{value:N,onValueChange:f,children:[s.jsxs(n,{className:"grid w-full grid-cols-3",children:[s.jsx(d,{value:"flow",children:"流程测试"}),s.jsx(d,{value:"qr-code",children:"二维码测试"}),s.jsx(d,{value:"monitor",children:"状态监控"})]}),s.jsx(m,{value:"flow",className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(e=>s.jsxs(a,{className:"border-2 border-gray-200",children:[s.jsxs(l,{children:[s.jsx(i,{className:"text-lg",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["¥",e.price]}),s.jsx(t,{variant:"outline",children:e.priceId})]})]}),s.jsxs(c,{children:[s.jsx(x,{onClick:()=>(async e=>{w("testing"),v(s=>({...s,[e.id]:{status:"running",steps:[]}}));const s={status:"success",steps:[{name:"创建支付订单",status:"success",time:(new Date).toISOString()},{name:"生成支付二维码",status:"success",time:(new Date).toISOString()},{name:"支付状态监控",status:"pending",time:(new Date).toISOString()},{name:"支付回调处理",status:"pending",time:(new Date).toISOString()},{name:"会员权限开通",status:"pending",time:(new Date).toISOString()}]};v(a=>({...a,[e.id]:s})),w("qr-code")})(e),className:"w-full",disabled:"testing"===y,children:"开始测试"}),b[e.id]&&s.jsx("div",{className:"mt-4 space-y-2",children:b[e.id].steps.map((e,a)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[I(e.status),s.jsx("span",{className:"success"===e.status?"text-green-600":"failed"===e.status?"text-red-600":"text-gray-600",children:e.name})]},a))})]})]},e.id))})}),s.jsx(m,{value:"qr-code",className:"space-y-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(e=>s.jsxs(a,{children:[s.jsx(l,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[e.name,s.jsx(t,{variant:"outline",children:"二维码测试"})]})}),s.jsx(c,{children:s.jsx(u,{priceId:e.priceId,title:`${e.name} - 测试`,showPrice:!0})})]},e.id))})}),s.jsx(m,{value:"monitor",className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"支付状态监控测试"}),s.jsx("p",{className:"text-sm text-gray-600",children:"选择一个测试用例，然后使用上面的二维码进行支付，观察状态监控功能"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(e=>s.jsxs(a,{children:[s.jsx(l,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[e.name,s.jsx(t,{variant:"outline",children:"状态监控"})]})}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(u,{priceId:e.priceId,title:`${e.name} - 监控测试`,showPrice:!0}),s.jsx(p,{}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:"• 扫描二维码完成支付"}),s.jsx("p",{children:"• 观察支付状态变化"}),s.jsx("p",{children:"• 验证会员权限开通"})]})]})})]},e.id))})]})})]})})]}),s.jsxs(a,{className:"mt-6",children:[s.jsx(l,{children:s.jsx(i,{children:"支付流程说明"})}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),s.jsx("h4",{className:"font-medium",children:"选择套餐"}),s.jsx("p",{className:"text-sm text-gray-600",children:"选择订阅计划和周期"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),s.jsx("h4",{className:"font-medium",children:"创建订单"}),s.jsx("p",{className:"text-sm text-gray-600",children:"系统创建支付订单"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("span",{className:"text-blue-600 font-bold",children:"3"})}),s.jsx("h4",{className:"font-medium",children:"扫码支付"}),s.jsx("p",{className:"text-sm text-gray-600",children:"使用支付宝扫码支付"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("span",{className:"text-blue-600 font-bold",children:"4"})}),s.jsx("h4",{className:"font-medium",children:"回调处理"}),s.jsx("p",{className:"text-sm text-gray-600",children:"支付平台回调处理"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("span",{className:"text-green-600 font-bold",children:"5"})}),s.jsx("h4",{className:"font-medium",children:"开通会员"}),s.jsx("p",{className:"text-sm text-gray-600",children:"自动开通对应会员权限"})]})]}),s.jsx(p,{}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"测试要点"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• 验证不同套餐的价格映射是否正确"}),s.jsx("li",{children:"• 检查支付二维码生成是否正常"}),s.jsx("li",{children:"• 测试支付状态监控功能"}),s.jsx("li",{children:"• 验证支付成功后的会员权限开通"}),s.jsx("li",{children:"• 检查支付回调处理是否正常"})]})]})]})})]})]})}export{N as default};
