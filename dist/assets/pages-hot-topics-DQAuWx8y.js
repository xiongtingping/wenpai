import{j as e}from"./ui-core-DvCHSSHi.js";import{r as s,u as t}from"./router-C2V8BG2_.js";import{C as a,a as l,b as i,d as n,B as c,e as r,S as d,u as x}from"./pages-home-D0WvN7gs.js";import{S as m,e as h,f as o,g as j,h as u,B as N,D as f,a as g,b as p,c as v,d as w,m as y,L as b,I as k,i as S,j as C,k as $,l as z}from"./pages-adapt-D7FZxb5-.js";import{P as H}from"./components-layout-1yKIHtlJ.js";import{Q as A,W as q,O as I,Y as O,_ as D,$ as M,a0 as _,j as E,f as L,a1 as T,a2 as P,a3 as U,E as R,X as J,k as V,o as B,a4 as F,l as G,P as Q,H as W,G as Y,a5 as Z,a6 as K,a7 as X,a8 as ee,a9 as se,aa as te,ab as ae,ac as le,ad as ie,Z as ne,ae as ce,V as re}from"./utils-OoJFdsFh.js";import{g as de,a as xe,b as me,c as he,d as oe,e as je,f as ue,t as Ne,m as fe,h as ge}from"./api-services-Dox5v3KK.js";const pe=({keyword:t,trends:d,timeRange:x="7d",loading:f=!1,onRefresh:g})=>{const p=s.useMemo(()=>{if(0===d.length)return null;const e=[...d].sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()),s=e[0].heat,t=e[e.length-1].heat,a=t-s;return{current:t,change:a,changePercent:s>0?a/s*100:0,max:Math.max(...e.map(e=>e.heat)),min:Math.min(...e.map(e=>e.heat)),average:Math.round(e.reduce((e,s)=>e+s.heat,0)/e.length),trend:a>0?"up":a<0?"down":"stable"}},[d]),v=s.useMemo(()=>d.map(e=>({date:new Date(e.date).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}),heat:e.heat,mentions:e.mentions,platforms:e.platforms.length})),[d]);return e.jsxs(a,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),"热度趋势"]}),e.jsxs(n,{children:['话题"',t,'"的热度变化趋势']})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{value:x,onValueChange:e=>{},children:[e.jsx(h,{className:"w-24",children:e.jsx(o,{})}),e.jsxs(j,{children:[e.jsx(u,{value:"7d",children:"7天"}),e.jsx(u,{value:"30d",children:"30天"}),e.jsx(u,{value:"90d",children:"90天"})]})]}),g&&e.jsx(c,{variant:"outline",size:"sm",onClick:g,disabled:f,children:e.jsx(q,{className:"w-4 h-4"})})]})]})}),e.jsx(r,{children:f?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.current.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"当前热度"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-lg font-semibold flex items-center justify-center gap-1 ${(e=>{switch(e){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})(p.trend)}`,children:[(s=>{switch(s){case"up":return e.jsx(M,{className:"w-4 h-4 text-green-600"});case"down":return e.jsx(D,{className:"w-4 h-4 text-red-600"});default:return e.jsx(O,{className:"w-4 h-4 text-gray-600"})}})(p.trend),p.changePercent>0?"+":"",p.changePercent.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"变化趋势"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:p.average.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"平均热度"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:p.max.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"最高热度"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"热度变化"}),e.jsxs(N,{variant:"outline",className:"text-xs",children:[d.length," 个数据点"]})]}),(()=>{if(0===v.length)return null;const s=Math.max(...v.map(e=>e.heat)),t=Math.min(...v.map(e=>e.heat)),a=s-t;return e.jsx("div",{className:"flex items-end justify-between h-32 mt-4 space-x-1",children:v.map((s,l)=>{const i=a>0?(s.heat-t)/a*100:50,n=l===v.length-1;return e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"w-full rounded-t transition-all duration-300 "+(n?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"),style:{height:`${Math.max(i,10)}%`},title:`${s.date}: ${s.heat.toLocaleString()}`}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 transform rotate-45 origin-left",children:s.date})]},l)})})})()]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"平台分布"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(d.flatMap(e=>e.platforms))).map(s=>e.jsx(N,{variant:"secondary",className:"text-xs",children:s},s))})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"暂无热度趋势数据"}),e.jsx("p",{className:"text-sm",children:"开始监控话题后即可查看热度变化"})]})})]})},ve={enabled:!0,sound:!0,desktop:!0,email:!1,push:!1,quietHours:{enabled:!1,start:"22:00",end:"08:00"}};function we(){try{const e=localStorage.getItem("notification-config");return e?{...ve,...JSON.parse(e)}:ve}catch(e){return ve}}function ye(){try{const e=localStorage.getItem("notifications");return e?JSON.parse(e):[]}catch(e){return[]}}function be(e){try{localStorage.setItem("notifications",JSON.stringify(e))}catch(s){}}function ke(e){const s=ye(),t={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2),createdAt:(new Date).toISOString()};return s.unshift(t),s.length>100&&s.splice(100),be(s),function(e){const s=we();s.enabled&&(s.quietHours.enabled&&function(){const e=we();if(!e.quietHours.enabled)return!1;const s=new Date,t=60*s.getHours()+s.getMinutes(),[a,l]=e.quietHours.start.split(":").map(Number),[i,n]=e.quietHours.end.split(":").map(Number),c=60*a+l,r=60*i+n;return c<=r?t>=c&&t<=r:t>=c||t<=r}()||(s.desktop&&"Notification"in window&&("granted"===Notification.permission?new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id,requireInteraction:"error"===e.level}):"default"===Notification.permission&&Notification.requestPermission().then(s=>{"granted"===s&&new Notification(e.title,{body:e.message,icon:"/favicon.ico"})})),s.sound&&function(){try{const e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(e=>{})}catch(e){}}(),document.hidden&&function(e){const s=document.title;let t=0;const a=()=>{t>=5?document.title=s:(document.title=t%2==0?`🔔 ${e}`:s,t++,setTimeout(a,1e3))};a()}(e.title)))}(t),t}function Se(e,s,t){const a=s.length;ke({type:"topic_update",level:a>0?"success":"info",title:`话题更新: ${e}`,message:a>0?`发现 ${a} 条关于"${e}"的新内容`:`"${e}"暂无新内容`,data:{keyword:e,subscriptionName:t,resultCount:a},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}function Ce(e,s,t){ke({type:"heat_alert",level:"warning",title:`热度警报: ${e}`,message:`"${e}"热度达到 ${s.toLocaleString()}，超过阈值 ${t.toLocaleString()}`,data:{keyword:e,heat:s,threshold:t},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}function $e(e,s){const t={created:"创建成功",updated:"更新成功",deleted:"删除成功",enabled:"已启用",disabled:"已禁用"};ke({type:"subscription",level:"success",title:`订阅${t[e]}`,message:`话题订阅"${s}"${t[e]}`,data:{action:e,subscriptionName:s}})}const ze=()=>{const[t,l]=s.useState([]),[i,n]=s.useState(we()),[x,S]=s.useState(!1),[C,$]=s.useState("all");s.useEffect(()=>{z()},[]),s.useEffect(()=>{const e=setInterval(()=>{z()},3e4);return()=>clearInterval(e)},[]);const z=()=>{l(ye())},H=e=>{const s={...i,...e};n(s),function(e){try{localStorage.setItem("notification-config",JSON.stringify(e))}catch(s){}}(s)},A=t.filter(e=>{switch(C){case"unread":return!e.readAt;case"topic_update":return"topic_update"===e.type;case"heat_alert":return"heat_alert"===e.type;default:return!0}}),q=(s,t)=>{switch(t){case"error":return e.jsx(F,{className:"w-4 h-4 text-red-600"});case"warning":return e.jsx(F,{className:"w-4 h-4 text-yellow-600"});case"success":return e.jsx(B,{className:"w-4 h-4 text-green-600"});default:return e.jsx(V,{className:"w-4 h-4 text-blue-600"})}},I=e=>{switch(e){case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}},O=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime();return t<6e4?"刚刚":t<36e5?`${Math.floor(t/6e4)}分钟前`:t<864e5?`${Math.floor(t/36e5)}小时前`:s.toLocaleDateString("zh-CN")},D=ye().filter(e=>!e.readAt).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"通知中心"}),D>0&&e.jsx(N,{variant:"destructive",className:"ml-2",children:D})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{value:C,onValueChange:e=>$(e),children:[e.jsx(h,{className:"w-32",children:e.jsx(o,{})}),e.jsxs(j,{children:[e.jsx(u,{value:"all",children:"全部"}),e.jsx(u,{value:"unread",children:"未读"}),e.jsx(u,{value:"topic_update",children:"话题更新"}),e.jsx(u,{value:"heat_alert",children:"热度警报"})]})]}),e.jsxs(f,{open:x,onOpenChange:S,children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(E,{className:"w-4 h-4"})})}),e.jsxs(p,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"通知设置"}),e.jsx(y,{children:"配置通知的显示方式和时间"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"启用通知"}),e.jsx(d,{checked:i.enabled,onCheckedChange:e=>H({enabled:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"桌面通知"}),e.jsx(d,{checked:i.desktop,onCheckedChange:e=>H({desktop:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"声音提醒"}),e.jsx(d,{checked:i.sound,onCheckedChange:e=>H({sound:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"静音时间"}),e.jsx(d,{checked:i.quietHours.enabled,onCheckedChange:e=>H({quietHours:{...i.quietHours,enabled:e}})})]}),i.quietHours.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm",children:"开始时间"}),e.jsx(k,{type:"time",value:i.quietHours.start,onChange:e=>H({quietHours:{...i.quietHours,start:e.target.value}})})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-sm",children:"结束时间"}),e.jsx(k,{type:"time",value:i.quietHours.end,onChange:e=>H({quietHours:{...i.quietHours,end:e.target.value}})})]})]})]})]})]}),D>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{!function(){const e=ye(),s=(new Date).toISOString();e.forEach(e=>{e.readAt||(e.readAt=s)}),be(e)}(),z()},children:[e.jsx(L,{className:"w-4 h-4"}),"全部已读"]}),t.length>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{be([]),z()},children:[e.jsx(T,{className:"w-4 h-4"}),"清空"]})]})]}),0===A.length?e.jsx(a,{children:e.jsxs(r,{className:"text-center py-8",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"暂无通知"}),e.jsx("p",{className:"text-sm text-gray-400",children:"当有话题更新或热度变化时会收到通知"})]})}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(s=>e.jsx(a,{className:`transition-all duration-200 hover:shadow-md ${s.readAt?"opacity-75":""} ${I(s.level)}`,children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:q(s.type,s.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),!s.readAt&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"新"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),O(s.createdAt)]}),s.actionUrl&&e.jsxs(c,{variant:"ghost",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>window.open(s.actionUrl,"_blank"),children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"查看详情"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[!s.readAt&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>(function(e){const s=ye(),t=s.findIndex(s=>s.id===e);-1!==t&&(s[t].readAt=(new Date).toISOString(),be(s))}(s.id),void z()),className:"h-8 w-8 p-0",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>(function(e){be(ye().filter(s=>s.id!==e))}(s.id),void z()),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(J,{className:"w-4 h-4"})})]})]})})},s.id))})]})},He=Object.freeze(Object.defineProperty({__proto__:null,default:function(){t();const{toast:m}=x(),[h,o]=s.useState(null),[j,u]=s.useState("all"),[f,g]=s.useState(!0),[p,v]=s.useState(!1),[w,y]=s.useState(""),[b,k]=s.useState(null),[A,q]=s.useState("hot"),[I,O]=s.useState([]),[E,L]=s.useState({}),[J,V]=s.useState(null),[B,F]=s.useState(!1),[ve,we]=s.useState(!1),[ye,be]=s.useState(!1),[ke,Se]=s.useState(de()),[Ce,$e]=s.useState({}),[He,Ae]=s.useState({}),[qe,Ie]=s.useState({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),[Oe]=s.useState(xe()),De=me(),Me=async()=>{try{g(!0),k(null);const e=await oe();o(e)}catch(e){const s=e instanceof Error?e.message:"网络连接异常";k(s),m({title:"获取数据失败",description:s,variant:"destructive"})}finally{g(!1)}},_e=async()=>{v(!0),await Me(),v(!1),b||m({title:"数据已刷新",description:"全网热点数据已更新"})},Ee=s=>{switch(s){case"weibo":case"baidu":case"github":return e.jsx(Y,{className:"w-4 h-4"});case"zhihu":case"ithome":case"csdn":return e.jsx(le,{className:"w-4 h-4"});case"douyin":return e.jsx(re,{className:"w-4 h-4"});case"bilibili":return e.jsx(ce,{className:"w-4 h-4"});case"36kr":return e.jsx(ne,{className:"w-4 h-4"});case"sspai":return e.jsx(ie,{className:"w-4 h-4"});case"juejin":return e.jsx(ee,{className:"w-4 h-4"});default:return e.jsx(W,{className:"w-4 h-4"})}},Le=()=>{const e=je();O(e),Se(de())},Te=async e=>{if(!Ce[e]){Ae(s=>({...s,[e]:!0}));try{const s=await ge(e,7);$e(t=>({...t,[e]:s}))}catch(s){}finally{Ae(s=>({...s,[e]:!1}))}}};s.useEffect(()=>{Me(),Le()},[]);const Pe=(()=>{if(!h)return[];if("all"===j){const e=[];return Object.values(h.data).forEach(s=>{e.push(...s)}),e.slice(0,50)}return h.data[j]||[]})(),Ue=h?{total:Object.values(h.data).reduce((e,s)=>e+s.length,0),platforms:Object.keys(h.data).length}:{total:0,platforms:0};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(H,{title:"全网雷达",description:"实时监控各平台热门话题，支持自定义话题订阅和智能追踪",showAdaptButton:!1,actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:_e,disabled:p,children:[e.jsx(G,{className:"h-4 w-4 mr-2 "+(p?"animate-spin":"")}),"刷新"]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(S,{value:A,onValueChange:e=>q(e),className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs(C,{className:"grid w-full grid-cols-3 max-w-md",children:[e.jsxs($,{value:"hot",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(M,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"全网热点"}),e.jsx("span",{className:"sm:hidden",children:"热点"})]}),e.jsxs($,{value:"subscriptions",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"话题订阅"}),e.jsx("span",{className:"sm:hidden",children:"订阅"})]}),e.jsxs($,{value:"notifications",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"通知中心"}),e.jsx("span",{className:"sm:hidden",children:"通知"})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>F(!0),className:"text-xs sm:text-sm",children:[e.jsx(Q,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"添加订阅"}),e.jsx("span",{className:"sm:hidden",children:"添加"})]})})]}),e.jsxs(z,{value:"hot",children:[b&&e.jsx(a,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(D,{className:"w-4 h-4 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"获取热点数据失败"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:b}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"可能原因：网络连接异常、API服务暂时不可用、或防火墙限制"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:_e,disabled:p,className:"border-red-300 text-red-700 hover:bg-red-100",children:[e.jsx(G,{className:"h-4 w-4 mr-2 "+(p?"animate-spin":"")}),"重试"]})]})})}),e.jsxs(a,{className:"mb-6",children:[e.jsxs(l,{children:[e.jsx(i,{className:"text-lg",children:"选择平台"}),e.jsx(n,{children:"查看不同平台的热门话题"})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{variant:"all"===j?"default":"outline",size:"sm",onClick:()=>u("all"),children:"全部平台"}),De.map(s=>e.jsxs(c,{variant:j===s?"default":"outline",size:"sm",onClick:()=>u(s),children:[Ee(s),he(s)]},s))]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"总话题数"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ue.total})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-4 h-4 text-blue-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"平台数量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ue.platforms})]}),e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-green-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"更新时间"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:(new Date).toLocaleTimeString("zh-CN")})]}),e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-4 h-4 text-purple-600"})})]})})})]}),f?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"加载中..."})]}):e.jsx("div",{className:"grid gap-4",children:Pe.map((s,t)=>e.jsx(a,{className:"hover:shadow-md transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),e.jsx(N,{variant:"outline",className:"text-xs",children:s.platform}),s.hot&&e.jsxs(N,{variant:"destructive",className:"text-xs",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"热"]})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.desc}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["热度: ",s.hot]}),e.jsxs("span",{children:["平台: ",s.platform||"未知"]}),e.jsxs("span",{children:["序号: ",s.index||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(X,{className:"w-4 h-4"})})]})]})})},t))})]}),e.jsxs(z,{value:"subscriptions",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"总订阅数"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:ke.active}),e.jsx("p",{className:"text-sm text-gray-600",children:"活跃订阅"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ke.notificationEnabled}),e.jsx("p",{className:"text-sm text-gray-600",children:"通知开启"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.values(E).flat().length}),e.jsx("p",{className:"text-sm text-gray-600",children:"监控结果"})]})})})]}),0===I.length?e.jsx(a,{children:e.jsxs(r,{className:"text-center py-12",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无话题订阅"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"创建话题订阅，实时监控感兴趣的内容"}),e.jsxs(c,{onClick:()=>F(!0),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"添加第一个订阅"]})]})}):e.jsx("div",{className:"space-y-4",children:I.map(s=>e.jsxs(a,{className:"hover:shadow-md transition-shadow",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["关键词: ",s.keyword]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{checked:s.isActive,onCheckedChange:e=>{return t=s.id,Ne(t,e),void Le();var t}}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const s=await fe(e);L(t=>({...t,[e.id]:s})),m({title:"监控完成",description:`发现 ${s.length} 条相关内容`})}catch(s){m({title:"监控失败",description:"请重试",variant:"destructive"})}})(s),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"检查"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{V(s),Te(s.keyword)},children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"趋势"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>(e=>{const s=I.find(s=>s.id===e);s&&confirm(`确定要删除话题订阅"${s.name}"吗？`)&&(ue(e),Le(),m({title:"删除成功",description:`话题订阅"${s.name}"已删除`}))})(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(T,{className:"w-4 h-4"})})]})]})}),e.jsxs(r,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"状态:"}),e.jsx(N,{variant:s.isActive?"default":"secondary",className:"ml-2",children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"监控中"]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"已暂停"]})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"检查间隔:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.checkInterval,"分钟"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"搜索源:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.sources.length,"个"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"通知:"}),e.jsx(N,{variant:s.notificationEnabled?"default":"secondary",className:"ml-2",children:s.notificationEnabled?"开启":"关闭"})]})]}),E[s.id]&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["最新监控结果 (",E[s.id].length," 条)"]}),e.jsx("div",{className:"space-y-2",children:E[s.id].slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.platform," • 热度: ",s.heat]})]}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(R,{className:"w-3 h-3"})})]},s.id))})]})]})]},s.id))}),J&&Ce[J.keyword]&&e.jsx("div",{className:"mt-6",children:e.jsx(pe,{keyword:J.keyword,trends:Ce[J.keyword],loading:He[J.keyword],onRefresh:()=>Te(J.keyword)})})]}),e.jsx(z,{value:"notifications",children:e.jsx(ze,{})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{He as H,Ce as a,Se as b,$e as n};
