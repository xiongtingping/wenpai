import{j as e}from"./ui-core-BoM6Gtru.js";import{r as s}from"./router-CDHmMMQ-.js";import{C as a,a as t,b as i,e as l,B as r}from"./pages-home-B2qezEHm.js";import{B as c,i as n,j as d,k as m,l as x}from"./pages-adapt-BAX30gfz.js";import{S as o}from"./pages-hot-topics-DladIUhZ.js";import{A as j}from"./AlipayQRCode-B5Tv00PO.js";import{aO as h,aa as p,ap as u,C as g}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-Bf3ZBHM2.js";import"./components-layout-MG0qUfcO.js";import"./pages-brand-Be4bUKpb.js";import"./api-services-h5tHo7Hg.js";import"./pages-content-extractor-Caq7DiWW.js";import"./components-auth-rO0vuiGv.js";import"./creemClientService-DNWMJNoV.js";import"./browser-C5-Pn058.js";function N(){const[N,f]=s.useState("flow"),[b,v]=s.useState({}),[y,w]=s.useState("init"),S=[{id:"pro-monthly",name:"专业版月付",priceId:"prod_3nJOuQeVStqkp6JaDcrKHf",price:29,description:"测试专业版月付流程"},{id:"pro-yearly",name:"专业版年付",priceId:"prod_5qBlDTLpD3h9gvOZFd4Rgu",price:349,description:"测试专业版年付流程"},{id:"premium-monthly",name:"高级版月付",priceId:"prod_4HYBfvrcbXYnbxjlswMj28",price:69,description:"测试高级版月付流程"},{id:"premium-yearly",name:"高级版年付",priceId:"prod_6OfIoVnRg2pXsuYceVKOYk",price:828,description:"测试高级版年付流程"}],I=s=>{switch(s){case"success":return e.jsx(g,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(p,{className:"h-4 w-4 text-yellow-500"});case"failed":return e.jsx(u,{className:"h-4 w-4 text-red-500"});default:return e.jsx(p,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-6 w-6"}),"支付流程测试",e.jsx(c,{variant:"secondary",children:"完整流程验证"})]}),e.jsx("p",{className:"text-muted-foreground",children:"测试完整的支付流程：支付发起 → 二维码生成 → 状态监控 → 回调处理 → 会员开通"})]}),e.jsx(l,{children:e.jsxs(n,{value:N,onValueChange:f,children:[e.jsxs(d,{className:"grid w-full grid-cols-3",children:[e.jsx(m,{value:"flow",children:"流程测试"}),e.jsx(m,{value:"qr-code",children:"二维码测试"}),e.jsx(m,{value:"monitor",children:"状态监控"})]}),e.jsx(x,{value:"flow",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(s=>e.jsxs(a,{className:"border-2 border-gray-200",children:[e.jsxs(t,{children:[e.jsx(i,{className:"text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["¥",s.price]}),e.jsx(c,{variant:"outline",children:s.priceId})]})]}),e.jsxs(l,{children:[e.jsx(r,{onClick:()=>(async e=>{w("testing"),v(s=>({...s,[e.id]:{status:"running",steps:[]}}));const s={status:"success",steps:[{name:"创建支付订单",status:"success",time:(new Date).toISOString()},{name:"生成支付二维码",status:"success",time:(new Date).toISOString()},{name:"支付状态监控",status:"pending",time:(new Date).toISOString()},{name:"支付回调处理",status:"pending",time:(new Date).toISOString()},{name:"会员权限开通",status:"pending",time:(new Date).toISOString()}]};v(a=>({...a,[e.id]:s})),w("qr-code")})(s),className:"w-full",disabled:"testing"===y,children:"开始测试"}),b[s.id]&&e.jsx("div",{className:"mt-4 space-y-2",children:b[s.id].steps.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[I(s.status),e.jsx("span",{className:"success"===s.status?"text-green-600":"failed"===s.status?"text-red-600":"text-gray-600",children:s.name})]},a))})]})]},s.id))})}),e.jsx(x,{value:"qr-code",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(s=>e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[s.name,e.jsx(c,{variant:"outline",children:"二维码测试"})]})}),e.jsx(l,{children:e.jsx(j,{priceId:s.priceId,title:`${s.name} - 测试`,showPrice:!0})})]},s.id))})}),e.jsx(x,{value:"monitor",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"支付状态监控测试"}),e.jsx("p",{className:"text-sm text-gray-600",children:"选择一个测试用例，然后使用上面的二维码进行支付，观察状态监控功能"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(s=>e.jsxs(a,{children:[e.jsx(t,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[s.name,e.jsx(c,{variant:"outline",children:"状态监控"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{priceId:s.priceId,title:`${s.name} - 监控测试`,showPrice:!0}),e.jsx(o,{}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"• 扫描二维码完成支付"}),e.jsx("p",{children:"• 观察支付状态变化"}),e.jsx("p",{children:"• 验证会员权限开通"})]})]})})]},s.id))})]})})]})})]}),e.jsxs(a,{className:"mt-6",children:[e.jsx(t,{children:e.jsx(i,{children:"支付流程说明"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"1"})}),e.jsx("h4",{className:"font-medium",children:"选择套餐"}),e.jsx("p",{className:"text-sm text-gray-600",children:"选择订阅计划和周期"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"2"})}),e.jsx("h4",{className:"font-medium",children:"创建订单"}),e.jsx("p",{className:"text-sm text-gray-600",children:"系统创建支付订单"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"3"})}),e.jsx("h4",{className:"font-medium",children:"扫码支付"}),e.jsx("p",{className:"text-sm text-gray-600",children:"使用支付宝扫码支付"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"4"})}),e.jsx("h4",{className:"font-medium",children:"回调处理"}),e.jsx("p",{className:"text-sm text-gray-600",children:"支付平台回调处理"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-green-600 font-bold",children:"5"})}),e.jsx("h4",{className:"font-medium",children:"开通会员"}),e.jsx("p",{className:"text-sm text-gray-600",children:"自动开通对应会员权限"})]})]}),e.jsx(o,{}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"测试要点"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• 验证不同套餐的价格映射是否正确"}),e.jsx("li",{children:"• 检查支付二维码生成是否正常"}),e.jsx("li",{children:"• 测试支付状态监控功能"}),e.jsx("li",{children:"• 验证支付成功后的会员权限开通"}),e.jsx("li",{children:"• 检查支付回调处理是否正常"})]})]})]})})]})]})}export{N as default};
