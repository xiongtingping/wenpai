import{p as e,u as s,r as a,aW as t,j as l,P as i,T as n,a as r,b as c,aX as d,am as o,Z as x,B as m,C as h,i as j,g as p,d as u,ar as g,o as v,ad as N,L as f,H as w,K as y,N as C,O as b,Q as S,U as k,G as F,a9 as D,ae as A,ag as O,F as T}from"./index-Dk-gCvGC.js";import{I as z}from"./input-DhHrf3ht.js";import{D as I,f as P,a as L,b as U,c as R,e as $,d as Z}from"./dialog-480ju0ai.js";import{B as E}from"./brain-DYzkN-Z0.js";import{S as B}from"./search-WI96IYUW.js";import{F as G}from"./funnel-Dwot3d4y.js";import{T as W}from"./tag-3eMchzMP.js";import{L as V}from"./link-2-BxYv2eUx.js";import{S as J}from"./square-pen-Bvl9tt87.js";import{C as K}from"./copy-Dl2_VZ1T.js";import{T as q}from"./trash-2-BRjr6LBN.js";import{S as H}from"./save-i5C6icUg.js";import{F as M}from"./file-CSMba4lF.js";import{E as Q}from"./eye-BIY8v0D2.js";function X(){e();const{toast:X}=s(),Y=a.useRef(null),[_,ee]=a.useState([]),[se,ae]=a.useState("all"),[te,le]=a.useState(""),[ie,ne]=a.useState([]),[re,ce]=a.useState(null),[de,oe]=a.useState("time"),[xe,me]=a.useState("desc"),[he,je]=a.useState("url"),[pe,ue]=a.useState(""),[ge,ve]=a.useState(null),[Ne,fe]=a.useState(!1),[we,ye]=a.useState(!1),[Ce,be]=a.useState(!1),[Se,ke]=a.useState("collection"),[Fe,De]=a.useState(null),[Ae,Oe]=a.useState(null),[Te,ze]=a.useState({title:"",url:"",description:"",tags:"",category:""}),[Ie,Pe]=a.useState({title:"",content:"",tags:"",category:"",platform:""});t.useEffect(()=>{ee([{id:"1",title:"å°çº¢ä¹¦è¥é”€ç­–ç•¥åˆ†æž",content:"æ·±åº¦åˆ†æžå°çº¢ä¹¦å¹³å°çš„ç”¨æˆ·ç‰¹å¾ã€å†…å®¹åå¥½å’Œè¥é”€æœºä¼š...",type:"collection",source:"https://example.com/xiaohongshu-analysis",sourceType:"url",tags:["å°çº¢ä¹¦","è¥é”€ç­–ç•¥","ç¤¾äº¤åª’ä½“"],isFavorite:!0,isUsed:!1,category:"è¥é”€åˆ†æž",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z"},{id:"2",title:"å“ç‰ŒæŽ¨å¹¿æ–‡æ¡ˆæ¨¡æ¿",content:"ðŸŽ¯ æ ¸å¿ƒå–ç‚¹ï¼š\nâ€¢ é«˜æ•ˆä¾¿æ·çš„æ“ä½œä½“éªŒ\nâ€¢ ä¸“ä¸šå¯é çš„æŠ€æœ¯æ”¯æŒ\nâ€¢ æ€§ä»·æ¯”è¶…é«˜çš„è§£å†³æ–¹æ¡ˆ...",type:"copywriting",tags:["å“ç‰ŒæŽ¨å¹¿","æ–‡æ¡ˆæ¨¡æ¿","è¥é”€"],isFavorite:!0,isUsed:!0,category:"è¥é”€æ–‡æ¡ˆ",platform:"å¾®ä¿¡å…¬ä¼—å·",createdAt:"2024-01-14T14:20:00Z",updatedAt:"2024-01-14T14:20:00Z"},{id:"3",title:"2024å¹´å†…å®¹è¥é”€è¶‹åŠ¿æŠ¥å‘Š",content:"# 2024å¹´å†…å®¹è¥é”€è¶‹åŠ¿æŠ¥å‘Š\n\n## ä¸»è¦è¶‹åŠ¿\n1. AIè¾…åŠ©å†…å®¹åˆ›ä½œ\n2. çŸ­è§†é¢‘æŒç»­ç«çƒ­\n3. äº’åŠ¨å¼å†…å®¹å¢žé•¿...",type:"extraction",source:"2024-content-marketing-report.pdf",sourceType:"file",tags:["å†…å®¹è¥é”€","è¶‹åŠ¿æŠ¥å‘Š","2024"],isFavorite:!1,isUsed:!1,category:"è¡Œä¸šæŠ¥å‘Š",summary:"åˆ†æžäº†2024å¹´å†…å®¹è¥é”€çš„ä¸»è¦è¶‹åŠ¿ï¼ŒåŒ…æ‹¬AIè¾…åŠ©åˆ›ä½œã€çŸ­è§†é¢‘å‘å±•ã€äº’åŠ¨å†…å®¹ç­‰å…³é”®æ–¹å‘...",metadata:{wordCount:2500,charCount:8e3,date:"2024-01-01"},createdAt:"2024-01-13T09:15:00Z",updatedAt:"2024-01-13T09:15:00Z"}])},[]);const Le=()=>{const e=new Set;return _.forEach(s=>{s.tags.forEach(s=>e.add(s))}),Array.from(e).sort()},Ue=e=>{const s=e.includes(".jpg")||e.includes(".png")||e.includes(".jpeg"),a=e.includes(".pdf");return`# å†…å®¹æå–ï¼š${e}\n\n## ðŸ“„ æ™ºèƒ½æå–ç»“æžœ\n\n${s?"ðŸ–¼ï¸ **å›¾ç‰‡OCRè¯†åˆ«**ï¼šå·²æˆåŠŸè¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—å†…å®¹":a?"ðŸ“„ **PDFè§£æž**ï¼šå·²æå–PDFæ–‡æ¡£çš„æ–‡å­—å’Œç»“æž„åŒ–å†…å®¹":"ðŸŒ **ç½‘é¡µæŠ“å–**ï¼šå·²èŽ·å–ç½‘é¡µçš„æ ¸å¿ƒæ–‡å­—å†…å®¹"}\n\n### ðŸ” æå–çš„ä¸»è¦å†…å®¹\n- **å…³é”®ä¿¡æ¯1**ï¼š${s?"å›¾ç‰‡ä¸­åŒ…å«çš„é‡è¦æ–‡å­—ä¿¡æ¯":a?"PDFæ–‡æ¡£çš„æ ¸å¿ƒè§‚ç‚¹å’Œæ•°æ®":"ç½‘é¡µçš„ä¸»è¦è§‚ç‚¹å’Œæ ¸å¿ƒä¿¡æ¯"}\n- **å…³é”®ä¿¡æ¯2**ï¼šè¯¦ç»†çš„åˆ†æžå’Œå®žç”¨å»ºè®®\n- **å…³é”®ä¿¡æ¯3**ï¼šç›¸å…³çš„è¶‹åŠ¿åˆ†æžå’Œå‘å±•æ–¹å‘\n\n### ðŸ“Š ç»“æž„åŒ–ä¿¡æ¯\n\n#### ðŸ’¡ æ ¸å¿ƒä»·å€¼\n- å†…å®¹å…·æœ‰å¾ˆå¼ºçš„å®žç”¨æ€§å’Œå‚è€ƒä»·å€¼\n- ä¿¡æ¯ç»“æž„æ¸…æ™°ï¼Œä¾¿äºŽç†è§£å’Œåº”ç”¨\n- æ¶µç›–äº†é‡è¦çš„æ¦‚å¿µå’Œå®žè·µæ–¹æ³•\n\n#### ðŸŽ¯ åº”ç”¨åœºæ™¯\n- å¯ä½œä¸ºå†³ç­–å‚è€ƒå’Œè¡ŒåŠ¨æŒ‡å—\n- é€‚åˆç”¨äºŽå­¦ä¹ å’Œç ”ç©¶\n- æœ‰åŠ©äºŽæ·±å…¥ç†è§£ç›¸å…³é¢†åŸŸ\n\n### ðŸ·ï¸ æ™ºèƒ½æ ‡ç­¾å»ºè®®\n\`${s?"OCRè¯†åˆ«, å›¾ç‰‡å¤„ç†":a?"PDFæ–‡æ¡£, æ–‡æ¡£åˆ†æž":"ç½‘é¡µå†…å®¹, åœ¨çº¿èµ„æº"}\`\n\n---\n\n*ðŸ¤– AIæ™ºèƒ½æå–æ—¶é—´ï¼š${(new Date).toLocaleString("zh-CN")}*  \n*ðŸ“ˆ å†…å®¹è´¨é‡è¯„åˆ†ï¼š85åˆ†*`},Re=e=>{navigator.clipboard.writeText(e),X({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",description:"å†…å®¹å·²å¤åˆ¶"})},$e=()=>{De(null)},Ze=e=>{Oe(e)},Ee=()=>{Oe(null)},Be=e=>s=>{s?e(!0):setTimeout(()=>{e(!1)},0)},Ge=(()=>{let e=[..._];return"all"!==se&&(e=e.filter(e=>e.type===se)),te&&(e=e.filter(e=>e.title.toLowerCase().includes(te.toLowerCase())||e.content.toLowerCase().includes(te.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(te.toLowerCase())))),ie.length>0&&(e=e.filter(e=>ie.some(s=>e.tags.includes(s)))),null!==re&&(e=e.filter(e=>e.isFavorite===re)),e.sort((e,s)=>{let a=0;switch(de){case"time":a=new Date(e.updatedAt).getTime()-new Date(s.updatedAt).getTime();break;case"title":a=e.title.localeCompare(s.title);break;case"type":a=e.type.localeCompare(s.type)}return"asc"===xe?a:-a}),e})();return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(i,{title:"æˆ‘çš„èµ„æ–™åº“",description:"ç»Ÿä¸€ç®¡ç†ç½‘ç»œæ”¶è—ã€å†…å®¹æå–å’Œæ–‡æ¡ˆç®¡ç†",showAdaptButton:!1}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs(n,{value:se,onValueChange:ae,className:"w-full",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[l.jsxs(r,{className:"grid w-full grid-cols-2 sm:grid-cols-4 max-w-md",children:[l.jsxs(c,{value:"all",className:"flex items-center gap-2 text-xs sm:text-sm",children:[l.jsx(d,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"å…¨éƒ¨"}),l.jsx("span",{className:"sm:hidden",children:"å…¨éƒ¨"})]}),l.jsxs(c,{value:"collection",className:"flex items-center gap-2 text-xs sm:text-sm",children:[l.jsx(o,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"ç½‘ç»œæ”¶è—"}),l.jsx("span",{className:"sm:hidden",children:"æ”¶è—"})]}),l.jsxs(c,{value:"extraction",className:"flex items-center gap-2 text-xs sm:text-sm",children:[l.jsx(x,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"å†…å®¹æå–"}),l.jsx("span",{className:"sm:hidden",children:"æå–"})]}),l.jsxs(c,{value:"copywriting",className:"flex items-center gap-2 text-xs sm:text-sm",children:[l.jsx(E,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"æ–‡æ¡ˆç®¡ç†"}),l.jsx("span",{className:"sm:hidden",children:"æ–‡æ¡ˆ"})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx(I,{open:Ce&&"collection"===Se,onOpenChange:Be(be),children:l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{ke("collection"),be(!0)},className:"text-xs sm:text-sm",children:[l.jsx(o,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"æ·»åŠ ç½‘ç»œæ”¶è—"}),l.jsx("span",{className:"sm:hidden",children:"æ”¶è—"})]})})}),l.jsx(I,{open:Ce&&"extraction"===Se,onOpenChange:Be(be),children:l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{ke("extraction"),be(!0)},className:"text-xs sm:text-sm",children:[l.jsx(x,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"å†…å®¹æå–"}),l.jsx("span",{className:"sm:hidden",children:"æå–"})]})})}),l.jsx(I,{open:Ce&&"copywriting"===Se,onOpenChange:Be(be),children:l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{ke("copywriting"),be(!0)},className:"text-xs sm:text-sm",children:[l.jsx(E,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"åˆ›å»ºæ–‡æ¡ˆ"}),l.jsx("span",{className:"sm:hidden",children:"æ–‡æ¡ˆ"})]})})})]})]}),l.jsx(h,{className:"mb-6",children:l.jsxs(j,{className:"p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx(z,{placeholder:"æœç´¢æ ‡é¢˜ã€å†…å®¹æˆ–æ ‡ç­¾...",value:te,onChange:e=>le(e.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(G,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"ç­›é€‰ï¼š"}),l.jsx(m,{size:"sm",variant:null===re?"default":"outline",onClick:()=>ce(null),children:"å…¨éƒ¨"}),l.jsx(m,{size:"sm",variant:!0===re?"default":"outline",onClick:()=>ce(!0),children:"å·²æ”¶è—"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"æŽ’åºï¼š"}),l.jsxs("select",{value:de,onChange:e=>oe(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"time",children:"æ—¶é—´"}),l.jsx("option",{value:"title",children:"æ ‡é¢˜"}),l.jsx("option",{value:"type",children:"ç±»åž‹"})]}),l.jsxs("select",{value:xe,onChange:e=>me(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"desc",children:"é™åº"}),l.jsx("option",{value:"asc",children:"å‡åº"})]})]})]}),Le().length>0&&l.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[l.jsx(W,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"æ ‡ç­¾ï¼š"}),Le().map(e=>l.jsx(p,{variant:ie.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>ne(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]),children:e},e))]})]})}),l.jsxs(u,{value:se,className:"mt-0",children:[l.jsx("div",{className:"grid gap-4",children:Ge.map(e=>{var s;const a=(e=>{switch(e){case"collection":return{icon:l.jsx(o,{className:"w-4 h-4"}),name:"ç½‘ç»œæ”¶è—"};case"extraction":return{icon:l.jsx(x,{className:"w-4 h-4"}),name:"å†…å®¹æå–"};case"copywriting":return{icon:l.jsx(E,{className:"w-4 h-4"}),name:"æ–‡æ¡ˆç®¡ç†"};default:return{icon:l.jsx(T,{className:"w-4 h-4"}),name:"å…¶ä»–"}}})(e.type);return l.jsx(h,{className:"hover:shadow-md transition-shadow",children:l.jsx(j,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs(p,{variant:"outline",className:"text-xs",children:[a.icon,l.jsx("span",{className:"ml-1",children:a.name})]}),l.jsx("h3",{className:"font-semibold cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>Ze(e),children:e.title}),e.isFavorite&&l.jsx(g,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.isUsed&&l.jsx(p,{variant:"secondary",className:"text-xs",children:"å·²ä½¿ç”¨"})]}),l.jsx("div",{className:"text-sm text-gray-600 mb-3 line-clamp-2 cursor-pointer hover:text-gray-800 transition-colors",onClick:()=>Ze(e),children:e.content}),e.source&&l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[l.jsx(V,{className:"w-3 h-3"}),l.jsx("span",{className:"truncate",children:e.source})]}),e.summary&&l.jsxs("div",{className:"mb-3 p-2 bg-purple-50 rounded text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(v,{className:"w-3 h-3 text-purple-500"}),l.jsx("span",{className:"font-medium text-purple-700",children:"AIæ€»ç»“"})]}),l.jsx("p",{className:"text-purple-600",children:e.summary})]}),l.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.tags.map((e,s)=>l.jsx(p,{variant:"outline",className:"text-xs",children:e},s))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(N,{className:"w-3 h-3"}),(t=e.updatedAt,new Date(t).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),e.category&&l.jsx("span",{children:e.category}),e.platform&&l.jsx("span",{children:e.platform}),(null==(s=e.metadata)?void 0:s.wordCount)&&l.jsxs("span",{children:[e.metadata.wordCount," å­—"]})]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(m,{size:"sm",variant:"ghost",onClick:()=>{return s=e.id,void ee(e=>e.map(e=>e.id===s?{...e,isFavorite:!e.isFavorite}:e));var s},children:l.jsx(g,{className:"w-4 h-4 "+(e.isFavorite?"text-yellow-500 fill-current":"")})}),l.jsx(m,{size:"sm",variant:"ghost",onClick:()=>(e=>{De(e)})(e),children:l.jsx(J,{className:"w-4 h-4"})}),l.jsx(m,{size:"sm",variant:"ghost",onClick:()=>Re(e.content),children:l.jsx(K,{className:"w-4 h-4"})}),l.jsx(m,{size:"sm",variant:"ghost",onClick:()=>{return s=e.id,ee(e=>e.filter(e=>e.id!==s)),void X({title:"å·²åˆ é™¤",description:"é¡¹ç›®å·²ä»Žèµ„æ–™åº“ä¸­ç§»é™¤"});var s},children:l.jsx(q,{className:"w-4 h-4"})})]})]})})},e.id);var t})}),0===Ge.length&&l.jsx(h,{children:l.jsxs(j,{className:"p-12 text-center",children:[l.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— èµ„æ–™"}),l.jsx("p",{className:"text-gray-600",children:te||ie.length>0?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„èµ„æ–™":"è¯·ä½¿ç”¨å³ä¸Šè§’çš„æŒ‰é’®å¼€å§‹æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªèµ„æ–™"})]})})]})]}),l.jsxs(I,{open:Ce&&"collection"===Se,onOpenChange:Be(be),children:[l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",children:[l.jsx(o,{className:"w-4 h-4 mr-2"}),"æ·»åŠ æ”¶è—"]})}),l.jsxs(L,{children:[l.jsxs(U,{children:[l.jsx(R,{children:"æ·»åŠ ç½‘ç»œæ”¶è—"}),l.jsx($,{children:"ä¿å­˜æœ‰ä»·å€¼çš„ç½‘é¡µé“¾æŽ¥åˆ°èµ„æ–™åº“"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡é¢˜"}),l.jsx(z,{value:Te.title,onChange:e=>ze(s=>({...s,title:e.target.value})),placeholder:"è¾“å…¥ç½‘é¡µæ ‡é¢˜"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"URL"}),l.jsx(z,{value:Te.url,onChange:e=>ze(s=>({...s,url:e.target.value})),placeholder:"https://example.com"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"æè¿°"}),l.jsx(w,{value:Te.description,onChange:e=>ze(s=>({...s,description:e.target.value})),placeholder:"ç®€çŸ­æè¿°è¿™ä¸ªç½‘é¡µçš„å†…å®¹",rows:3})]}),l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰"}),l.jsx(z,{value:Te.tags,onChange:e=>ze(s=>({...s,tags:e.target.value})),placeholder:"è¥é”€,ç­–ç•¥,åˆ†æž"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"åˆ†ç±»"}),l.jsx(z,{value:Te.category,onChange:e=>ze(s=>({...s,category:e.target.value})),placeholder:"è¥é”€èµ„æ–™"})]})]}),l.jsxs(Z,{children:[l.jsx(m,{variant:"outline",onClick:()=>be(!1),children:"å–æ¶ˆ"}),l.jsxs(m,{onClick:()=>{if(!Te.title.trim()||!Te.url.trim())return void X({title:"è¯·å¡«å†™å®Œæ•´ä¿¡æ¯",description:"æ ‡é¢˜å’ŒURLä¸èƒ½ä¸ºç©º",variant:"destructive"});const e=Te.tags.split(",").map(e=>e.trim()).filter(e=>e),s={id:Date.now().toString(),title:Te.title.trim(),content:Te.description.trim()||"æš‚æ— æè¿°",type:"collection",source:Te.url.trim(),sourceType:"url",tags:e,isFavorite:!1,isUsed:!1,category:Te.category||"æœªåˆ†ç±»",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(e=>[s,...e]),ze({title:"",url:"",description:"",tags:"",category:""}),be(!1),X({title:"æ”¶è—æˆåŠŸ",description:"æ–°æ”¶è—å·²ä¿å­˜åˆ°èµ„æ–™åº“"})},children:[l.jsx(H,{className:"w-4 h-4 mr-2"}),"ä¿å­˜"]})]})]})]}),l.jsxs(I,{open:Ce&&"extraction"===Se,onOpenChange:Be(be),children:[l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",children:[l.jsx(x,{className:"w-4 h-4 mr-2"}),"å†…å®¹æå–"]})}),l.jsxs(L,{className:"max-w-2xl",children:[l.jsxs(U,{children:[l.jsx(R,{children:"å†…å®¹æå–"}),l.jsx($,{children:"ä»Žç½‘é¡µã€PDFã€å›¾ç‰‡ä¸­æ™ºèƒ½æå–æ–‡å­—å†…å®¹å¹¶ç”ŸæˆAIæ€»ç»“"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æå–æ–¹å¼"}),l.jsxs(y,{value:he,onValueChange:e=>je(e),children:[l.jsx(C,{children:l.jsx(b,{})}),l.jsxs(S,{children:[l.jsx(k,{value:"url",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(F,{className:"w-4 h-4"}),"ç½‘é¡µé“¾æŽ¥"]})}),l.jsx(k,{value:"file",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(D,{className:"w-4 h-4"}),"æ–‡ä»¶ä¸Šä¼  (PDF/å›¾ç‰‡)"]})})]})]})]}),"url"===he&&l.jsxs("div",{children:[l.jsx(f,{children:"ç½‘é¡µé“¾æŽ¥"}),l.jsx(z,{placeholder:"ç²˜è´´ç½‘é¡µURLåœ°å€ï¼Œæ”¯æŒè‡ªåŠ¨æå–é¡µé¢æ–‡å­—å†…å®¹",value:pe,onChange:e=>ue(e.target.value)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ”¯æŒæå–ç½‘é¡µæ­£æ–‡ã€æ ‡é¢˜ã€æ®µè½ç­‰ç»“æž„åŒ–å†…å®¹"})]}),"file"===he&&l.jsxs("div",{children:[l.jsx(f,{children:"æ–‡ä»¶ä¸Šä¼ "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(z,{ref:Y,type:"file",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];a&&ve(a)},accept:".pdf,.doc,.docx,.txt,.md,.json,.html,.htm,image/*",className:"flex-1"}),l.jsxs(m,{variant:"outline",onClick:()=>{var e;return null==(e=Y.current)?void 0:e.click()},children:[l.jsx(D,{className:"w-4 h-4 mr-2"}),"é€‰æ‹©æ–‡ä»¶"]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"æ”¯æŒ PDFæ–‡æ¡£ã€Wordæ–‡æ¡£ã€å›¾ç‰‡(PNG/JPG/JPEG)ã€æ–‡æœ¬æ–‡ä»¶ç­‰æ ¼å¼"}),ge&&l.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(M,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"text-sm font-medium",children:ge.name}),l.jsxs("span",{className:"text-xs text-gray-500",children:["(",(ge.size/1024).toFixed(1)," KB)"]})]}),l.jsxs("div",{className:"text-xs text-blue-600",children:[ge.type.includes("image")&&"ðŸ–¼ï¸ å›¾ç‰‡OCRæ–‡å­—è¯†åˆ«",ge.type.includes("pdf")&&"ðŸ“„ PDFæ–‡æ¡£å†…å®¹æå–",ge.type.includes("text")&&"ðŸ“ æ–‡æœ¬å†…å®¹è§£æž",ge.type.includes("doc")&&"ðŸ“„ Wordæ–‡æ¡£å†…å®¹æå–"]})]})]}),l.jsxs("div",{className:"bg-purple-50 p-3 rounded border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(v,{className:"w-4 h-4 text-purple-600"}),l.jsx("span",{className:"text-sm font-medium text-purple-800",children:"AIæ™ºèƒ½å¤„ç†"})]}),l.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[l.jsx("li",{children:"â€¢ è‡ªåŠ¨æå–å’Œæ•´ç†æ–‡å­—å†…å®¹"}),l.jsx("li",{children:"â€¢ ç”Ÿæˆå†…å®¹æ‘˜è¦å’Œå…³é”®ä¿¡æ¯"}),l.jsx("li",{children:"â€¢ æ™ºèƒ½åˆ†ç±»å’Œæ ‡ç­¾å»ºè®®"}),l.jsx("li",{children:"â€¢ ç»“æž„åŒ–å†…å®¹å±•ç¤º"})]})]})]}),l.jsxs(Z,{children:[l.jsx(m,{variant:"outline",onClick:()=>be(!1),children:"å–æ¶ˆ"}),l.jsx(m,{onClick:async()=>{if("url"!==he||pe.trim())if("file"!==he||ge){fe(!0);try{await new Promise(e=>setTimeout(e,2e3));const e={id:Date.now().toString(),title:"url"===he?`å†…å®¹æå–ï¼š${pe}`:`å†…å®¹æå–ï¼š${null==ge?void 0:ge.name}`,content:Ue("url"===he?pe:(null==ge?void 0:ge.name)||""),type:"extraction",source:"url"===he?pe:null==ge?void 0:ge.name,sourceType:he,tags:["å†…å®¹æå–","url"===he?"ç½‘é¡µæå–":(null==ge?void 0:ge.type.includes("image"))?"OCRè¯†åˆ«":(null==ge?void 0:ge.type.includes("pdf"))?"PDFæå–":"æ–‡æ¡£æå–"],isFavorite:!1,isUsed:!1,category:"æ™ºèƒ½æå–",summary:"url"===he?"ä»Žç½‘é¡µä¸­æ™ºèƒ½æå–çš„ç»“æž„åŒ–å†…å®¹ï¼ŒåŒ…å«æ ¸å¿ƒä¿¡æ¯å’Œå…³é”®è§‚ç‚¹...":(null==ge?void 0:ge.type.includes("image"))?"é€šè¿‡OCRæŠ€æœ¯ä»Žå›¾ç‰‡ä¸­è¯†åˆ«æå–çš„æ–‡å­—å†…å®¹...":(null==ge?void 0:ge.type.includes("pdf"))?"ä»ŽPDFæ–‡æ¡£ä¸­æå–çš„æ–‡å­—å’Œç»“æž„åŒ–ä¿¡æ¯...":"ä»Žæ–‡æ¡£ä¸­æ™ºèƒ½æå–çš„æ ¸å¿ƒå†…å®¹...",metadata:{wordCount:350,charCount:1200,date:(new Date).toISOString().split("T")[0]},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(s=>[e,...s]),be(!1),ue(""),ve(null),X({title:"å†…å®¹æå–æˆåŠŸ",description:"å†…å®¹å·²æ™ºèƒ½æå–å¹¶æ·»åŠ åˆ°èµ„æ–™åº“"})}catch{X({title:"å†…å®¹æå–å¤±è´¥",description:"è¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥æˆ–æ–‡ä»¶æ ¼å¼åŽé‡è¯•",variant:"destructive"})}finally{fe(!1)}}else X({title:"è¯·é€‰æ‹©æ–‡ä»¶",description:"è¯·ä¸Šä¼ è¦æå–å†…å®¹çš„æ–‡ä»¶",variant:"destructive"});else X({title:"è¯·è¾“å…¥URL",description:"è¯·æä¾›æœ‰æ•ˆçš„ç½‘é¡µåœ°å€",variant:"destructive"})},disabled:Ne,children:Ne?l.jsxs(l.Fragment,{children:[l.jsx(A,{className:"w-4 h-4 mr-2 animate-spin"}),"æ™ºèƒ½æå–ä¸­..."]}):l.jsxs(l.Fragment,{children:[l.jsx(v,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ™ºèƒ½æå–"]})})]})]})]}),l.jsxs(I,{open:Ce&&"copywriting"===Se,onOpenChange:Be(be),children:[l.jsx(P,{asChild:!0,children:l.jsxs(m,{variant:"outline",size:"sm",children:[l.jsx(E,{className:"w-4 h-4 mr-2"}),"åˆ›å»ºæ–‡æ¡ˆ"]})}),l.jsxs(L,{className:"max-w-2xl",children:[l.jsxs(U,{children:[l.jsx(R,{children:"åˆ›å»ºæ–‡æ¡ˆ"}),l.jsx($,{children:"æ·»åŠ æ–°çš„æ–‡æ¡ˆå†…å®¹åˆ°èµ„æ–™åº“"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡é¢˜"}),l.jsx(z,{value:Ie.title,onChange:e=>Pe(s=>({...s,title:e.target.value})),placeholder:"è¾“å…¥æ–‡æ¡ˆæ ‡é¢˜"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"å†…å®¹"}),l.jsx(w,{value:Ie.content,onChange:e=>Pe(s=>({...s,content:e.target.value})),placeholder:"è¾“å…¥æ–‡æ¡ˆå†…å®¹ï¼Œæ”¯æŒMarkdownæ ¼å¼",rows:8})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰"}),l.jsx(z,{value:Ie.tags,onChange:e=>Pe(s=>({...s,tags:e.target.value})),placeholder:"è¥é”€,æ–‡æ¡ˆ,æŽ¨å¹¿"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"åˆ†ç±»"}),l.jsx(z,{value:Ie.category,onChange:e=>Pe(s=>({...s,category:e.target.value})),placeholder:"è¥é”€æ–‡æ¡ˆ"})]})]}),l.jsxs("div",{children:[l.jsx(f,{children:"å¹³å°"}),l.jsx(z,{value:Ie.platform,onChange:e=>Pe(s=>({...s,platform:e.target.value})),placeholder:"å¾®ä¿¡å…¬ä¼—å·"})]})]}),l.jsxs(Z,{children:[l.jsx(m,{variant:"outline",onClick:()=>be(!1),children:"å–æ¶ˆ"}),l.jsxs(m,{onClick:()=>{if(!Ie.title.trim()||!Ie.content.trim())return void X({title:"è¯·å¡«å†™å®Œæ•´ä¿¡æ¯",description:"æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©º",variant:"destructive"});const e=Ie.tags.split(",").map(e=>e.trim()).filter(e=>e),s={id:Date.now().toString(),title:Ie.title.trim(),content:Ie.content.trim(),type:"copywriting",tags:e,isFavorite:!1,isUsed:!1,category:Ie.category||"æœªåˆ†ç±»",platform:Ie.platform||void 0,metadata:{wordCount:Ie.content.trim().split(/\s+/).length,charCount:Ie.content.trim().length},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(e=>[s,...e]),Pe({title:"",content:"",tags:"",category:"",platform:""}),be(!1),X({title:"æ–‡æ¡ˆåˆ›å»ºæˆåŠŸ",description:"æ–°æ–‡æ¡ˆå·²ä¿å­˜åˆ°èµ„æ–™åº“"})},children:[l.jsx(H,{className:"w-4 h-4 mr-2"}),"ä¿å­˜"]})]})]})]}),l.jsx(I,{open:!!Fe,onOpenChange:e=>!e&&setTimeout(()=>$e(),0),children:l.jsxs(L,{className:"max-w-2xl",children:[l.jsxs(U,{children:[l.jsx(R,{children:"ç¼–è¾‘å†…å®¹"}),l.jsxs($,{children:["ä¿®æ”¹","collection"===(null==Fe?void 0:Fe.type)?"ç½‘ç»œæ”¶è—":"extraction"===(null==Fe?void 0:Fe.type)?"å†…å®¹æå–":"æ–‡æ¡ˆç®¡ç†","å†…å®¹"]})]}),Fe&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡é¢˜"}),l.jsx(z,{value:Fe.title,onChange:e=>De({...Fe,title:e.target.value}),placeholder:"è¾“å…¥æ ‡é¢˜"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"å†…å®¹"}),l.jsx(w,{value:Fe.content,onChange:e=>De({...Fe,content:e.target.value}),placeholder:"è¾“å…¥å†…å®¹",rows:8})]}),"collection"===Fe.type&&l.jsxs("div",{children:[l.jsx(f,{children:"é“¾æŽ¥"}),l.jsx(z,{value:Fe.source||"",onChange:e=>De({...Fe,source:e.target.value}),placeholder:"https://example.com"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(f,{children:"æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰"}),l.jsx(z,{value:Fe.tags.join(", "),onChange:e=>De({...Fe,tags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"æ ‡ç­¾1, æ ‡ç­¾2"})]}),l.jsxs("div",{children:[l.jsx(f,{children:"åˆ†ç±»"}),l.jsx(z,{value:Fe.category||"",onChange:e=>De({...Fe,category:e.target.value}),placeholder:"åˆ†ç±»åç§°"})]})]}),"copywriting"===Fe.type&&l.jsxs("div",{children:[l.jsx(f,{children:"å¹³å°"}),l.jsx(z,{value:Fe.platform||"",onChange:e=>De({...Fe,platform:e.target.value}),placeholder:"å‘å¸ƒå¹³å°"})]})]}),l.jsxs(Z,{children:[l.jsx(m,{variant:"outline",onClick:$e,children:"å–æ¶ˆ"}),l.jsxs(m,{onClick:()=>{Fe&&(ee(e=>e.map(e=>e.id===Fe.id?Fe:e)),De(null),X({title:"ä¿å­˜æˆåŠŸ",description:"å†…å®¹å·²æ›´æ–°"}))},children:[l.jsx(H,{className:"w-4 h-4 mr-2"}),"ä¿å­˜ä¿®æ”¹"]})]})]})}),l.jsx(I,{open:!!Ae,onOpenChange:e=>!e&&setTimeout(()=>Ee(),0),children:l.jsxs(L,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[l.jsxs(U,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(R,{className:"flex items-center gap-2",children:[l.jsx(Q,{className:"w-5 h-5"}),null==Ae?void 0:Ae.title]}),l.jsx(m,{variant:"ghost",size:"sm",onClick:Ee,children:l.jsx(O,{className:"w-4 h-4"})})]}),l.jsxs($,{children:["collection"===(null==Ae?void 0:Ae.type)?"ç½‘ç»œæ”¶è—":"extraction"===(null==Ae?void 0:Ae.type)?"å†…å®¹æå–":"æ–‡æ¡ˆç®¡ç†",(null==Ae?void 0:Ae.source)&&` â€¢ æ¥æºï¼š${Ae.source}`]})]}),Ae&&l.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh] pr-2",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ae.tags.map((e,s)=>l.jsx(p,{variant:"outline",className:"text-xs",children:e},s)),Ae.category&&l.jsx(p,{variant:"secondary",className:"text-xs",children:Ae.category})]}),Ae.summary&&l.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(v,{className:"w-4 h-4 text-purple-500"}),l.jsx("span",{className:"font-medium text-purple-700",children:"AIæ€»ç»“"})]}),l.jsx("p",{className:"text-purple-600 text-sm",children:Ae.summary})]}),l.jsx("div",{className:"prose prose-sm max-w-none",children:l.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:Ae.content})}),Ae.metadata&&l.jsxs("div",{className:"text-xs text-gray-500 space-y-1 border-t pt-4",children:[Ae.metadata.wordCount&&l.jsxs("div",{children:["å­—æ•°ï¼š",Ae.metadata.wordCount]}),Ae.metadata.charCount&&l.jsxs("div",{children:["å­—ç¬¦æ•°ï¼š",Ae.metadata.charCount]}),Ae.metadata.date&&l.jsxs("div",{children:["æ—¥æœŸï¼š",Ae.metadata.date]})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[l.jsxs(m,{variant:"outline",size:"sm",onClick:()=>Ae&&Re(Ae.content),children:[l.jsx(K,{className:"w-4 h-4 mr-2"}),"å¤åˆ¶å†…å®¹"]}),l.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{Ae&&(De(Ae),Ee())},children:[l.jsx(J,{className:"w-4 h-4 mr-2"}),"ç¼–è¾‘"]})]})]})})]})]})}export{X as default};
