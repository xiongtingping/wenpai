import{j as e}from"./ui-core-BoM6Gtru.js";import{u as s,r as a,R as t}from"./router-CDHmMMQ-.js";import{u as l,B as n,C as i,e as r}from"./pages-home-DBDkeS6P.js";import{i as c,j as d,k as o,D as x,a as m,I as h,B as j,l as p,b as u,c as g,d as v,m as N,L as w,T as f,n as y,S as C,e as b,f as S,g as k,h as D}from"./pages-adapt-D91yLQsN.js";import{P as A}from"./components-layout-GdDGmkJW.js";import{a6 as F,$ as O,Z as z,a7 as T,z as I,D as P,a8 as L,h as R,a9 as U,g as $,aa as Z,v as B,x as E,a5 as G,s as W,G as J,ab as V,ac as K,ad as M,W as q,X as H,e as Q}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B0lu_Zdo.js";import"./pages-brand-Y2nduvKa.js";import"./api-services-sC6AUvc1.js";import"./pages-content-extractor-UQ_Zkhev.js";import"./components-auth-BdwTK_yH.js";function X(){s();const{toast:X}=l(),Y=a.useRef(null),[_,ee]=a.useState([]),[se,ae]=a.useState("all"),[te,le]=a.useState(""),[ne,ie]=a.useState([]),[re,ce]=a.useState(null),[de,oe]=a.useState("time"),[xe,me]=a.useState("desc"),[he,je]=a.useState("url"),[pe,ue]=a.useState(""),[ge,ve]=a.useState(null),[Ne,we]=a.useState(!1),[fe,ye]=a.useState(!1),[Ce,be]=a.useState(!1),[Se,ke]=a.useState("collection"),[De,Ae]=a.useState(null),[Fe,Oe]=a.useState(null),[ze,Te]=a.useState({title:"",url:"",description:"",tags:"",category:""}),[Ie,Pe]=a.useState({title:"",content:"",tags:"",category:"",platform:""});t.useEffect(()=>{ee([{id:"1",title:"小红书营销策略分析",content:"深度分析小红书平台的用户特征、内容偏好和营销机会...",type:"collection",source:"https://example.com/xiaohongshu-analysis",sourceType:"url",tags:["小红书","营销策略","社交媒体"],isFavorite:!0,isUsed:!1,category:"营销分析",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z"},{id:"2",title:"品牌推广文案模板",content:"🎯 核心卖点：\n• 高效便捷的操作体验\n• 专业可靠的技术支持\n• 性价比超高的解决方案...",type:"copywriting",tags:["品牌推广","文案模板","营销"],isFavorite:!0,isUsed:!0,category:"营销文案",platform:"微信公众号",createdAt:"2024-01-14T14:20:00Z",updatedAt:"2024-01-14T14:20:00Z"},{id:"3",title:"2024年内容营销趋势报告",content:"# 2024年内容营销趋势报告\n\n## 主要趋势\n1. AI辅助内容创作\n2. 短视频持续火热\n3. 互动式内容增长...",type:"extraction",source:"2024-content-marketing-report.pdf",sourceType:"file",tags:["内容营销","趋势报告","2024"],isFavorite:!1,isUsed:!1,category:"行业报告",summary:"分析了2024年内容营销的主要趋势，包括AI辅助创作、短视频发展、互动内容等关键方向...",metadata:{wordCount:2500,charCount:8e3,date:"2024-01-01"},createdAt:"2024-01-13T09:15:00Z",updatedAt:"2024-01-13T09:15:00Z"}])},[]);const Le=()=>{const e=new Set;return _.forEach(s=>{s.tags.forEach(s=>e.add(s))}),Array.from(e).sort()},Re=e=>{const s=e.includes(".jpg")||e.includes(".png")||e.includes(".jpeg"),a=e.includes(".pdf");return`# 内容提取：${e}\n\n## 📄 智能提取结果\n\n${s?"🖼️ **图片OCR识别**：已成功识别图片中的文字内容":a?"📄 **PDF解析**：已提取PDF文档的文字和结构化内容":"🌐 **网页抓取**：已获取网页的核心文字内容"}\n\n### 🔍 提取的主要内容\n- **关键信息1**：${s?"图片中包含的重要文字信息":a?"PDF文档的核心观点和数据":"网页的主要观点和核心信息"}\n- **关键信息2**：详细的分析和实用建议\n- **关键信息3**：相关的趋势分析和发展方向\n\n### 📊 结构化信息\n\n#### 💡 核心价值\n- 内容具有很强的实用性和参考价值\n- 信息结构清晰，便于理解和应用\n- 涵盖了重要的概念和实践方法\n\n#### 🎯 应用场景\n- 可作为决策参考和行动指南\n- 适合用于学习和研究\n- 有助于深入理解相关领域\n\n### 🏷️ 智能标签建议\n\`${s?"OCR识别, 图片处理":a?"PDF文档, 文档分析":"网页内容, 在线资源"}\`\n\n---\n\n*🤖 AI智能提取时间：${(new Date).toLocaleString("zh-CN")}*  \n*📈 内容质量评分：85分*`},Ue=e=>{navigator.clipboard.writeText(e),X({title:"已复制到剪贴板",description:"内容已复制"})},$e=()=>{Ae(null)},Ze=e=>{Oe(e)},Be=()=>{Oe(null)},Ee=e=>s=>{s?e(!0):setTimeout(()=>{e(!1)},0)},Ge=(()=>{let e=[..._];return"all"!==se&&(e=e.filter(e=>e.type===se)),te&&(e=e.filter(e=>e.title.toLowerCase().includes(te.toLowerCase())||e.content.toLowerCase().includes(te.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(te.toLowerCase())))),ne.length>0&&(e=e.filter(e=>ne.some(s=>e.tags.includes(s)))),null!==re&&(e=e.filter(e=>e.isFavorite===re)),e.sort((e,s)=>{let a=0;switch(de){case"time":a=new Date(e.updatedAt).getTime()-new Date(s.updatedAt).getTime();break;case"title":a=e.title.localeCompare(s.title);break;case"type":a=e.type.localeCompare(s.type)}return"asc"===xe?a:-a}),e})();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(A,{title:"我的资料库",description:"统一管理网络收藏、内容提取和文案管理",showAdaptButton:!1}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(c,{value:se,onValueChange:ae,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs(d,{className:"grid w-full grid-cols-2 sm:grid-cols-4 max-w-md",children:[e.jsxs(o,{value:"all",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(F,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"全部"}),e.jsx("span",{className:"sm:hidden",children:"全部"})]}),e.jsxs(o,{value:"collection",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(O,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"网络收藏"}),e.jsx("span",{className:"sm:hidden",children:"收藏"})]}),e.jsxs(o,{value:"extraction",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"内容提取"}),e.jsx("span",{className:"sm:hidden",children:"提取"})]}),e.jsxs(o,{value:"copywriting",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"文案管理"}),e.jsx("span",{className:"sm:hidden",children:"文案"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(x,{open:Ce&&"collection"===Se,onOpenChange:Ee(be),children:e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{ke("collection"),be(!0)},className:"text-xs sm:text-sm",children:[e.jsx(O,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"添加网络收藏"}),e.jsx("span",{className:"sm:hidden",children:"收藏"})]})})}),e.jsx(x,{open:Ce&&"extraction"===Se,onOpenChange:Ee(be),children:e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{ke("extraction"),be(!0)},className:"text-xs sm:text-sm",children:[e.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"内容提取"}),e.jsx("span",{className:"sm:hidden",children:"提取"})]})})}),e.jsx(x,{open:Ce&&"copywriting"===Se,onOpenChange:Ee(be),children:e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{ke("copywriting"),be(!0)},className:"text-xs sm:text-sm",children:[e.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"创建文案"}),e.jsx("span",{className:"sm:hidden",children:"文案"})]})})})]})]}),e.jsx(i,{className:"mb-6",children:e.jsxs(r,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(h,{placeholder:"搜索标题、内容或标签...",value:te,onChange:e=>le(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"筛选："}),e.jsx(n,{size:"sm",variant:null===re?"default":"outline",onClick:()=>ce(null),children:"全部"}),e.jsx(n,{size:"sm",variant:!0===re?"default":"outline",onClick:()=>ce(!0),children:"已收藏"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"排序："}),e.jsxs("select",{value:de,onChange:e=>oe(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"time",children:"时间"}),e.jsx("option",{value:"title",children:"标题"}),e.jsx("option",{value:"type",children:"类型"})]}),e.jsxs("select",{value:xe,onChange:e=>me(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"desc",children:"降序"}),e.jsx("option",{value:"asc",children:"升序"})]})]})]}),Le().length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[e.jsx(L,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"标签："}),Le().map(s=>e.jsx(j,{variant:ne.includes(s)?"default":"outline",className:"cursor-pointer",onClick:()=>ie(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]),children:s},s))]})]})}),e.jsxs(p,{value:se,className:"mt-0",children:[e.jsx("div",{className:"grid gap-4",children:Ge.map(s=>{var a;const t=(s=>{switch(s){case"collection":return{icon:e.jsx(O,{className:"w-4 h-4"}),name:"网络收藏"};case"extraction":return{icon:e.jsx(z,{className:"w-4 h-4"}),name:"内容提取"};case"copywriting":return{icon:e.jsx(T,{className:"w-4 h-4"}),name:"文案管理"};default:return{icon:e.jsx(Q,{className:"w-4 h-4"}),name:"其他"}}})(s.type);return e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(j,{variant:"outline",className:"text-xs",children:[t.icon,e.jsx("span",{className:"ml-1",children:t.name})]}),e.jsx("h3",{className:"font-semibold cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>Ze(s),children:s.title}),s.isFavorite&&e.jsx(R,{className:"w-4 h-4 text-yellow-500 fill-current"}),s.isUsed&&e.jsx(j,{variant:"secondary",className:"text-xs",children:"已使用"})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3 line-clamp-2 cursor-pointer hover:text-gray-800 transition-colors",onClick:()=>Ze(s),children:s.content}),s.source&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:s.source})]}),s.summary&&e.jsxs("div",{className:"mb-3 p-2 bg-purple-50 rounded text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx($,{className:"w-3 h-3 text-purple-500"}),e.jsx("span",{className:"font-medium text-purple-700",children:"AI总结"})]}),e.jsx("p",{className:"text-purple-600",children:s.summary})]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.tags.map((s,a)=>e.jsx(j,{variant:"outline",className:"text-xs",children:s},a))}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),(l=s.updatedAt,new Date(l).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),s.category&&e.jsx("span",{children:s.category}),s.platform&&e.jsx("span",{children:s.platform}),(null==(a=s.metadata)?void 0:a.wordCount)&&e.jsxs("span",{children:[s.metadata.wordCount," 字"]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>{return e=s.id,void ee(s=>s.map(s=>s.id===e?{...s,isFavorite:!s.isFavorite}:s));var e},children:e.jsx(R,{className:"w-4 h-4 "+(s.isFavorite?"text-yellow-500 fill-current":"")})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>(e=>{Ae(e)})(s),children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>Ue(s.content),children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>{return e=s.id,ee(s=>s.filter(s=>s.id!==e)),void X({title:"已删除",description:"项目已从资料库中移除"});var e},children:e.jsx(G,{className:"w-4 h-4"})})]})]})})},s.id);var l})}),0===Ge.length&&e.jsx(i,{children:e.jsxs(r,{className:"p-12 text-center",children:[e.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无资料"}),e.jsx("p",{className:"text-gray-600",children:te||ne.length>0?"没有找到匹配的资料":"请使用右上角的按钮开始添加您的第一个资料"})]})})]})]}),e.jsxs(x,{open:Ce&&"collection"===Se,onOpenChange:Ee(be),children:[e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"添加收藏"]})}),e.jsxs(u,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"添加网络收藏"}),e.jsx(N,{children:"保存有价值的网页链接到资料库"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"标题"}),e.jsx(h,{value:ze.title,onChange:e=>Te(s=>({...s,title:e.target.value})),placeholder:"输入网页标题"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"URL"}),e.jsx(h,{value:ze.url,onChange:e=>Te(s=>({...s,url:e.target.value})),placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"描述"}),e.jsx(f,{value:ze.description,onChange:e=>Te(s=>({...s,description:e.target.value})),placeholder:"简短描述这个网页的内容",rows:3})]}),e.jsxs("div",{children:[e.jsx(w,{children:"标签（用逗号分隔）"}),e.jsx(h,{value:ze.tags,onChange:e=>Te(s=>({...s,tags:e.target.value})),placeholder:"营销,策略,分析"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"分类"}),e.jsx(h,{value:ze.category,onChange:e=>Te(s=>({...s,category:e.target.value})),placeholder:"营销资料"})]})]}),e.jsxs(y,{children:[e.jsx(n,{variant:"outline",onClick:()=>be(!1),children:"取消"}),e.jsxs(n,{onClick:()=>{if(!ze.title.trim()||!ze.url.trim())return void X({title:"请填写完整信息",description:"标题和URL不能为空",variant:"destructive"});const e=ze.tags.split(",").map(e=>e.trim()).filter(e=>e),s={id:Date.now().toString(),title:ze.title.trim(),content:ze.description.trim()||"暂无描述",type:"collection",source:ze.url.trim(),sourceType:"url",tags:e,isFavorite:!1,isUsed:!1,category:ze.category||"未分类",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(e=>[s,...e]),Te({title:"",url:"",description:"",tags:"",category:""}),be(!1),X({title:"收藏成功",description:"新收藏已保存到资料库"})},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"保存"]})]})]})]}),e.jsxs(x,{open:Ce&&"extraction"===Se,onOpenChange:Ee(be),children:[e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"内容提取"]})}),e.jsxs(u,{className:"max-w-2xl",children:[e.jsxs(g,{children:[e.jsx(v,{children:"内容提取"}),e.jsx(N,{children:"从网页、PDF、图片中智能提取文字内容并生成AI总结"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"提取方式"}),e.jsxs(C,{value:he,onValueChange:e=>je(e),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(D,{value:"url",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"网页链接"]})}),e.jsx(D,{value:"file",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"文件上传 (PDF/图片)"]})})]})]})]}),"url"===he&&e.jsxs("div",{children:[e.jsx(w,{children:"网页链接"}),e.jsx(h,{placeholder:"粘贴网页URL地址，支持自动提取页面文字内容",value:pe,onChange:e=>ue(e.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"支持提取网页正文、标题、段落等结构化内容"})]}),"file"===he&&e.jsxs("div",{children:[e.jsx(w,{children:"文件上传"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{ref:Y,type:"file",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];a&&ve(a)},accept:".pdf,.doc,.docx,.txt,.md,.json,.html,.htm,image/*",className:"flex-1"}),e.jsxs(n,{variant:"outline",onClick:()=>{var e;return null==(e=Y.current)?void 0:e.click()},children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"选择文件"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"支持 PDF文档、Word文档、图片(PNG/JPG/JPEG)、文本文件等格式"}),ge&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:ge.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(ge.size/1024).toFixed(1)," KB)"]})]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[ge.type.includes("image")&&"🖼️ 图片OCR文字识别",ge.type.includes("pdf")&&"📄 PDF文档内容提取",ge.type.includes("text")&&"📝 文本内容解析",ge.type.includes("doc")&&"📄 Word文档内容提取"]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"AI智能处理"})]}),e.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[e.jsx("li",{children:"• 自动提取和整理文字内容"}),e.jsx("li",{children:"• 生成内容摘要和关键信息"}),e.jsx("li",{children:"• 智能分类和标签建议"}),e.jsx("li",{children:"• 结构化内容展示"})]})]})]}),e.jsxs(y,{children:[e.jsx(n,{variant:"outline",onClick:()=>be(!1),children:"取消"}),e.jsx(n,{onClick:async()=>{if("url"!==he||pe.trim())if("file"!==he||ge){we(!0);try{await new Promise(e=>setTimeout(e,2e3));const e={id:Date.now().toString(),title:"url"===he?`内容提取：${pe}`:`内容提取：${null==ge?void 0:ge.name}`,content:Re("url"===he?pe:(null==ge?void 0:ge.name)||""),type:"extraction",source:"url"===he?pe:null==ge?void 0:ge.name,sourceType:he,tags:["内容提取","url"===he?"网页提取":(null==ge?void 0:ge.type.includes("image"))?"OCR识别":(null==ge?void 0:ge.type.includes("pdf"))?"PDF提取":"文档提取"],isFavorite:!1,isUsed:!1,category:"智能提取",summary:"url"===he?"从网页中智能提取的结构化内容，包含核心信息和关键观点...":(null==ge?void 0:ge.type.includes("image"))?"通过OCR技术从图片中识别提取的文字内容...":(null==ge?void 0:ge.type.includes("pdf"))?"从PDF文档中提取的文字和结构化信息...":"从文档中智能提取的核心内容...",metadata:{wordCount:350,charCount:1200,date:(new Date).toISOString().split("T")[0]},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(s=>[e,...s]),be(!1),ue(""),ve(null),X({title:"内容提取成功",description:"内容已智能提取并添加到资料库"})}catch{X({title:"内容提取失败",description:"请检查网络连接或文件格式后重试",variant:"destructive"})}finally{we(!1)}}else X({title:"请选择文件",description:"请上传要提取内容的文件",variant:"destructive"});else X({title:"请输入URL",description:"请提供有效的网页地址",variant:"destructive"})},disabled:Ne,children:Ne?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}),"智能提取中..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"开始智能提取"]})})]})]})]}),e.jsxs(x,{open:Ce&&"copywriting"===Se,onOpenChange:Ee(be),children:[e.jsx(m,{asChild:!0,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"创建文案"]})}),e.jsxs(u,{className:"max-w-2xl",children:[e.jsxs(g,{children:[e.jsx(v,{children:"创建文案"}),e.jsx(N,{children:"添加新的文案内容到资料库"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"标题"}),e.jsx(h,{value:Ie.title,onChange:e=>Pe(s=>({...s,title:e.target.value})),placeholder:"输入文案标题"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"内容"}),e.jsx(f,{value:Ie.content,onChange:e=>Pe(s=>({...s,content:e.target.value})),placeholder:"输入文案内容，支持Markdown格式",rows:8})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"标签（用逗号分隔）"}),e.jsx(h,{value:Ie.tags,onChange:e=>Pe(s=>({...s,tags:e.target.value})),placeholder:"营销,文案,推广"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"分类"}),e.jsx(h,{value:Ie.category,onChange:e=>Pe(s=>({...s,category:e.target.value})),placeholder:"营销文案"})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"平台"}),e.jsx(h,{value:Ie.platform,onChange:e=>Pe(s=>({...s,platform:e.target.value})),placeholder:"微信公众号"})]})]}),e.jsxs(y,{children:[e.jsx(n,{variant:"outline",onClick:()=>be(!1),children:"取消"}),e.jsxs(n,{onClick:()=>{if(!Ie.title.trim()||!Ie.content.trim())return void X({title:"请填写完整信息",description:"标题和内容不能为空",variant:"destructive"});const e=Ie.tags.split(",").map(e=>e.trim()).filter(e=>e),s={id:Date.now().toString(),title:Ie.title.trim(),content:Ie.content.trim(),type:"copywriting",tags:e,isFavorite:!1,isUsed:!1,category:Ie.category||"未分类",platform:Ie.platform||void 0,metadata:{wordCount:Ie.content.trim().split(/\s+/).length,charCount:Ie.content.trim().length},createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};ee(e=>[s,...e]),Pe({title:"",content:"",tags:"",category:"",platform:""}),be(!1),X({title:"文案创建成功",description:"新文案已保存到资料库"})},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"保存"]})]})]})]}),e.jsx(x,{open:!!De,onOpenChange:e=>!e&&setTimeout(()=>$e(),0),children:e.jsxs(u,{className:"max-w-2xl",children:[e.jsxs(g,{children:[e.jsx(v,{children:"编辑内容"}),e.jsxs(N,{children:["修改","collection"===(null==De?void 0:De.type)?"网络收藏":"extraction"===(null==De?void 0:De.type)?"内容提取":"文案管理","内容"]})]}),De&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"标题"}),e.jsx(h,{value:De.title,onChange:e=>Ae({...De,title:e.target.value}),placeholder:"输入标题"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"内容"}),e.jsx(f,{value:De.content,onChange:e=>Ae({...De,content:e.target.value}),placeholder:"输入内容",rows:8})]}),"collection"===De.type&&e.jsxs("div",{children:[e.jsx(w,{children:"链接"}),e.jsx(h,{value:De.source||"",onChange:e=>Ae({...De,source:e.target.value}),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"标签（用逗号分隔）"}),e.jsx(h,{value:De.tags.join(", "),onChange:e=>Ae({...De,tags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)}),placeholder:"标签1, 标签2"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"分类"}),e.jsx(h,{value:De.category||"",onChange:e=>Ae({...De,category:e.target.value}),placeholder:"分类名称"})]})]}),"copywriting"===De.type&&e.jsxs("div",{children:[e.jsx(w,{children:"平台"}),e.jsx(h,{value:De.platform||"",onChange:e=>Ae({...De,platform:e.target.value}),placeholder:"发布平台"})]})]}),e.jsxs(y,{children:[e.jsx(n,{variant:"outline",onClick:$e,children:"取消"}),e.jsxs(n,{onClick:()=>{De&&(ee(e=>e.map(e=>e.id===De.id?De:e)),Ae(null),X({title:"保存成功",description:"内容已更新"}))},children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"保存修改"]})]})]})}),e.jsx(x,{open:!!Fe,onOpenChange:e=>!e&&setTimeout(()=>Be(),0),children:e.jsxs(u,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),null==Fe?void 0:Fe.title]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:Be,children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsxs(N,{children:["collection"===(null==Fe?void 0:Fe.type)?"网络收藏":"extraction"===(null==Fe?void 0:Fe.type)?"内容提取":"文案管理",(null==Fe?void 0:Fe.source)&&` • 来源：${Fe.source}`]})]}),Fe&&e.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh] pr-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Fe.tags.map((s,a)=>e.jsx(j,{variant:"outline",className:"text-xs",children:s},a)),Fe.category&&e.jsx(j,{variant:"secondary",className:"text-xs",children:Fe.category})]}),Fe.summary&&e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium text-purple-700",children:"AI总结"})]}),e.jsx("p",{className:"text-purple-600 text-sm",children:Fe.summary})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:Fe.content})}),Fe.metadata&&e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 border-t pt-4",children:[Fe.metadata.wordCount&&e.jsxs("div",{children:["字数：",Fe.metadata.wordCount]}),Fe.metadata.charCount&&e.jsxs("div",{children:["字符数：",Fe.metadata.charCount]}),Fe.metadata.date&&e.jsxs("div",{children:["日期：",Fe.metadata.date]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Fe&&Ue(Fe.content),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"复制内容"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{Fe&&(Ae(Fe),Be())},children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"编辑"]})]})]})})]})]})}export{X as default};
