const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/aiService-C8Za63DW.js","assets/index-Cu70HESd.js","assets/index-TzzW6MqQ.css"])))=>i.map(i=>d[i]);
import{k as e,t as s,r as t,j as a,B as n,F as i,p as r,_ as c}from"./index-Cu70HESd.js";import{C as l,a as o,b as d,c as m,d as u}from"./card-C_loCoFD.js";import{I as h}from"./input-iNWycu-N.js";import{T as x}from"./textarea-DylBDHiN.js";import{L as j}from"./label-CiijFGu1.js";import{P as p}from"./PageNavigation-DDP3eurv.js";import{B as v}from"./book-open-DCLSTXeC.js";import{Z as f}from"./zap-B-n6G30_.js";import{G as g}from"./globe-BHSXmKRF.js";import{F as w}from"./file-Dpp48lLp.js";import{U as N}from"./upload-ZA6D-pIW.js";import{L as y}from"./loader-circle-DkAs3sDA.js";import{S as C}from"./search-CdF4BiAP.js";import{T as b}from"./trash-2-Bbk5Qu_n.js";import{C as S}from"./circle-check-big-P3EWXA1B.js";import{C as k}from"./circle-alert-BGkMlRh1.js";import{R as A}from"./rotate-ccw-DgoSx0Gs.js";import{C as I}from"./copy-BOz6b4UI.js";import{D as T}from"./download-BkaKNVvD.js";import{S as L}from"./save-Dyhx6hr6.js";import{L as z}from"./link-2-DvRnO-0q.js";import{B as R}from"./brain-C-vMWJ_o.js";import"./badge-CIOmyheZ.js";import"./crown-BXlF8AAg.js";const D=e=>{const s=e.includes("xiaohongshu")?"小红书":e.includes("zhihu")?"知乎":e.includes("weibo")?"微博":"网页";return`# ${s}内容提取\n\n## 主要内容\n\n这是从 ${e} 提取的内容。\n\n### 核心观点\n- **观点一**：详细阐述了重要概念和基本原理，为读者提供了深入的理解\n- **观点二**：分析了当前市场状况和发展趋势，具有很强的前瞻性\n- **观点三**：提供了实用的方法和建议，可以直接应用到实际工作中\n\n### 关键信息\n- 发布时间：2024年2月15日\n- 作者：${s}用户\n- 阅读量：10.2万\n- 点赞数：3.5千\n\n### 深度分析\n\n#### 实用价值\n这篇内容具有很强的实用价值，不仅提供了理论基础，还结合了实际案例进行分析。对于相关领域的从业者来说，是一份很好的参考资料。\n\n#### 应用建议\n1. **直接应用**：可以将其中的方法论直接应用到实际工作中\n2. **深入研究**：建议进一步深入研究相关领域的最新发展\n3. **持续关注**：关注作者的后续更新和相关讨论\n\n### 相关链接\n- [原文链接](${e})\n- [作者主页](${e}/author)\n- [相关话题](${e}/topics)\n\n---\n\n*提取时间：${(new Date).toLocaleString("zh-CN")}*\n*数据来源：${e}*`},$=e=>`## 🤖 AI智能总结\n\n### 📋 内容概要\n这是一份高质量的内容，包含了丰富的信息和深入的分析。内容结构清晰，逻辑严谨，具有很强的参考价值。\n\n### 🔍 核心观点\n- **主要论点**：内容围绕核心主题展开，提供了全面的分析视角\n- **关键信息**：包含了重要的数据和事实依据，支撑了主要观点\n- **实用建议**：提供了具体可行的方法和建议，具有很强的操作性\n\n### 💡 关键要点\n1. **理论基础扎实**：内容具备完整的理论体系支撑\n2. **实践指导性强**：提供了具体的操作指南和实施步骤\n3. **案例分析详细**：通过实际案例加深理解和应用\n4. **前瞻性强**：对未来发展趋势有深入的分析和预测\n\n### 📈 应用价值\n- **决策参考**：可作为相关决策的重要参考依据\n- **学习资料**：适合作为学习和研究的参考材料\n- **实践指导**：提供了具体的实践指导和操作建议\n\n### 🎯 推荐指数\n**⭐⭐⭐⭐⭐ 五星推荐**\n\n这份内容质量优秀，信息丰富，具有很高的参考价值。建议收藏并深入学习应用。\n\n---\n\n*AI总结生成时间：${(new Date).toLocaleString("zh-CN")}*`,U=async e=>{try{return await navigator.clipboard.writeText(e),!0}catch(s){return!1}};function P(){const P=e(),{toast:_}=s(),F=t.useRef(null),[O,E]=t.useState("url"),[B,J]=t.useState(""),[V,q]=t.useState(""),[G,Y]=t.useState(null),[Z,H]=t.useState([]),[K,M]=t.useState(!1),[Q,W]=t.useState(!1),[X,ee]=t.useState(!0),se=()=>{"url"===O&&B?(async()=>{var e,s,t;if(!B.trim())return void _({title:"请输入URL",description:"请提供有效的网页地址",variant:"destructive"});M(!0);const a=Date.now().toString();try{await new Promise(e=>setTimeout(e,2e3));const i={id:a,source:B,sourceType:"url",title:`网页内容：${B.includes("xiaohongshu")?"小红书":B.includes("zhihu")?"知乎":"网页"}内容提取`,content:D(B),metadata:{description:"从网页中提取的结构化内容",keywords:["内容提取","网页解析","数据抓取"],author:"网站编辑",date:"2024-02-15",wordCount:350,charCount:1200},extractedAt:(new Date).toISOString(),status:"success"};if(X)try{await new Promise(e=>setTimeout(e,500)),i.content;const a=await c(()=>import("./aiService-C8Za63DW.js"),__vite__mapDeps([0,1,2])).then(e=>e.default.summarizeContent(i.content)),n=a.data,r=null==n?void 0:n.data;a.success&&(null==(t=null==(s=null==(e=null==r?void 0:r.choices)?void 0:e[0])?void 0:s.message)?void 0:t.content)?i.summary=r.choices[0].message.content:i.summary=$(i.content)}catch(n){i.summary=$(i.content)}H(e=>[i,...e]),J(""),_({title:"内容提取成功",description:X?"已成功提取网页内容并生成AI总结":"已成功提取网页内容"})}catch{const e={id:a,source:B,sourceType:"url",title:"提取失败",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"提取失败，请检查URL是否有效"};H(s=>[e,...s]),_({title:"提取失败",description:"请检查URL是否有效或稍后重试",variant:"destructive"})}finally{M(!1)}})():"file"===O&&G?(async()=>{if(!G)return void _({title:"请选择文件",description:"请上传要提取内容的文件",variant:"destructive"});M(!0);const e=Date.now().toString();try{await new Promise(e=>setTimeout(e,1500));const t=await(s=G,new Promise((e,t)=>{const a=new FileReader;a.onload=s=>{var t;const a=null==(t=s.target)?void 0:t.result;e(a)},a.onerror=t,a.readAsText(s)})),a={id:e,source:G.name,sourceType:"file",title:`文件内容：${G.name}`,content:t,metadata:{description:`从文件 ${G.name} 提取的内容`,wordCount:t.split(/\s+/).length,charCount:t.length},extractedAt:(new Date).toISOString(),status:"success"};X&&(await new Promise(e=>setTimeout(e,1500)),a.summary=$(a.content)),H(e=>[a,...e]),Y(null),_({title:"文件提取成功",description:X?`已成功提取 ${G.name} 的内容并生成AI总结`:`已成功提取 ${G.name} 的内容`})}catch{const s={id:e,source:G.name,sourceType:"file",title:"提取失败",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"文件读取失败，请检查文件格式"};H(e=>[s,...e]),_({title:"文件提取失败",description:"请检查文件格式或稍后重试",variant:"destructive"})}finally{M(!1)}var s})():"text"===O&&V&&(async()=>{if(!V.trim())return void _({title:"请输入文本",description:"请提供要处理的文本内容",variant:"destructive"});M(!0);const e=Date.now().toString();try{await new Promise(e=>setTimeout(e,1e3));const s={id:e,source:"手动输入",sourceType:"text",title:"文本内容处理",content:V,metadata:{description:"从手动输入的文本中提取的内容",wordCount:V.split(/\s+/).length,charCount:V.length},extractedAt:(new Date).toISOString(),status:"success"};X&&(await new Promise(e=>setTimeout(e,1500)),s.summary=$(s.content)),H(e=>[s,...e]),q(""),_({title:"文本处理成功",description:X?"已成功处理文本内容并生成AI总结":"已成功处理文本内容"})}catch{const s={id:e,source:"手动输入",sourceType:"text",title:"处理失败",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"文本处理失败，请检查内容格式"};H(e=>[s,...e]),_({title:"文本处理失败",description:"请检查内容格式或稍后重试",variant:"destructive"})}finally{M(!1)}})()};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(p,{title:"内容提取与AI总结",description:"从网页、文件或文本中提取内容，并生成AI智能总结",actions:a.jsx("div",{className:"flex gap-2",children:a.jsxs(n,{variant:"outline",onClick:()=>P("/bookmarks"),children:[a.jsx(v,{className:"w-4 h-4 mr-2"}),"我的资料库"]})})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1 space-y-6",children:a.jsxs(l,{children:[a.jsxs(o,{children:[a.jsxs(d,{className:"flex items-center gap-2",children:[a.jsx(f,{className:"w-5 h-5"}),"内容提取"]}),a.jsx(m,{children:"选择内容来源，开始提取和总结"})]}),a.jsxs(u,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(j,{className:"text-sm font-medium",children:"提取方式"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[a.jsxs(n,{variant:"url"===O?"default":"outline",size:"sm",onClick:()=>E("url"),className:"flex items-center gap-2",children:[a.jsx(g,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"网页URL"}),a.jsx("span",{className:"sm:hidden",children:"URL"})]}),a.jsxs(n,{variant:"file"===O?"default":"outline",size:"sm",onClick:()=>E("file"),className:"flex items-center gap-2",children:[a.jsx(w,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"文件上传"}),a.jsx("span",{className:"sm:hidden",children:"文件"})]}),a.jsxs(n,{variant:"text"===O?"default":"outline",size:"sm",onClick:()=>E("text"),className:"flex items-center gap-2",children:[a.jsx(i,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"文本输入"}),a.jsx("span",{className:"sm:hidden",children:"文本"})]})]})]}),"url"===O&&a.jsxs("div",{children:[a.jsx(j,{children:"网页URL"}),a.jsx(h,{placeholder:"https://example.com",value:B,onChange:e=>J(e.target.value),className:"mt-2"})]}),"file"===O&&a.jsxs("div",{children:[a.jsx(j,{children:"选择文件"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("input",{type:"file",ref:F,onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&Y(t)},accept:".txt,.md,.doc,.docx,.pdf",className:"hidden"}),a.jsxs(n,{variant:"outline",onClick:()=>{var e;return null==(e=F.current)?void 0:e.click()},className:"w-full",children:[a.jsx(N,{className:"w-4 h-4 mr-2"}),G?G.name:"选择文件"]})]})]}),"text"===O&&a.jsxs("div",{children:[a.jsx(j,{children:"文本内容"}),a.jsx(x,{placeholder:"输入要提取和总结的文本内容...",value:V,onChange:e=>q(e.target.value),rows:6,className:"mt-2"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"auto-summary",checked:X,onChange:e=>ee(e.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"auto-summary",className:"text-sm font-medium",children:"自动生成AI总结"})]}),a.jsx(n,{onClick:se,disabled:K,className:"w-full",children:K?a.jsxs(a.Fragment,{children:[a.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"提取中..."]}):a.jsxs(a.Fragment,{children:[a.jsx(C,{className:"w-4 h-4 mr-2"}),"开始提取"]})})]})]})}),a.jsx("div",{className:"lg:col-span-2 space-y-6",children:Z.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["提取结果 (",Z.length,")"]}),a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>H([]),children:[a.jsx(b,{className:"w-4 h-4 mr-2"}),"清空所有"]})]}),Z.map(e=>{var s,t;return a.jsxs(l,{className:"border",children:[a.jsxs(o,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:["success"===e.status&&a.jsx(S,{className:"w-5 h-5 text-green-500"}),"error"===e.status&&a.jsx(k,{className:"w-5 h-5 text-red-500"}),a.jsx(d,{className:"text-lg",children:e.title})]}),a.jsxs("div",{className:"flex gap-2",children:["error"===e.status&&a.jsxs(n,{variant:"outline",size:"sm",onClick:se,children:[a.jsx(A,{className:"w-4 h-4 mr-1"}),"重试"]}),"success"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>U(e.content),children:[a.jsx(I,{className:"w-4 h-4 mr-1"}),"复制"]}),a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>((e,s)=>{const t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)})(e.content,`${e.title}.md`),children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),"下载"]}),a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>(async()=>{try{await new Promise(e=>setTimeout(e,500)),_({title:"保存成功",description:"内容已保存到个人库"})}catch(e){_({title:"保存失败",description:"请稍后重试",variant:"destructive"})}})(),children:[a.jsx(L,{className:"w-4 h-4 mr-1"}),"保存"]})]}),a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{return s=e.id,H(e=>e.filter(e=>e.id!==s)),void _({title:"删除成功",description:"已删除该提取结果"});var s},children:[a.jsx(b,{className:"w-4 h-4 mr-1"}),"删除"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:["url"===e.sourceType&&a.jsx(z,{className:"w-4 h-4"}),"file"===e.sourceType&&a.jsx(w,{className:"w-4 h-4"}),"text"===e.sourceType&&a.jsx(i,{className:"w-4 h-4"}),e.source]}),a.jsx("span",{children:(t=e.extractedAt,new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))}),(null==(s=e.metadata)?void 0:s.wordCount)&&a.jsxs("span",{children:["字数: ",e.metadata.wordCount]})]})]}),a.jsx(u,{children:"success"===e.status?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"提取内容"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:e.content})})]}),e.summary?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(R,{className:"w-4 h-4 text-purple-500"}),a.jsx("h4",{className:"font-medium",children:"AI智能总结"}),a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>U(e.summary),children:[a.jsx(I,{className:"w-4 h-4 mr-1"}),"复制总结"]})]}),a.jsx("div",{className:"bg-purple-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:e.summary})})]}):a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(n,{variant:"outline",onClick:()=>(async e=>{var s,t,a;const n=Z.find(s=>s.id===e);if(n){W(!0);try{const i=await c(()=>import("./aiService-C8Za63DW.js"),__vite__mapDeps([0,1,2])).then(e=>e.default.summarizeContent(n.content)),r=i.data,l=null==r?void 0:r.data;if(!i.success||!(null==(a=null==(t=null==(s=null==l?void 0:l.choices)?void 0:s[0])?void 0:t.message)?void 0:a.content))throw new Error("AI总结生成失败");H(s=>s.map(s=>s.id===e?{...s,summary:l.choices[0].message.content}:s)),_({title:"AI总结生成成功",description:"已为内容生成智能总结"})}catch(i){_({title:"AI总结失败",description:"请稍后重试或检查网络连接",variant:"destructive"})}finally{W(!1)}}})(e.id),disabled:Q,children:Q?a.jsxs(a.Fragment,{children:[a.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"生成中..."]}):a.jsxs(a.Fragment,{children:[a.jsx(r,{className:"w-4 h-4 mr-2"}),"生成AI总结"]})})})]}):a.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded",children:e.error||"提取失败"})})]},e.id)})]}):a.jsx(l,{className:"border-dashed",children:a.jsxs(u,{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[a.jsx(f,{className:"w-12 h-12 mb-4"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"等待内容提取"}),a.jsxs("p",{className:"text-sm text-center",children:["请在左侧选择内容来源并开始提取",a.jsx("br",{}),"支持网页URL、文件上传和文本输入"]})]})})})]})})]})}export{P as default};
