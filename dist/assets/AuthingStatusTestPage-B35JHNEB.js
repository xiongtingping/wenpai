import{p as s,j as e,B as l,C as a,e as i,f as c,k as r,h as d,i as n,ae as x,m as t,aF as m,g as h,ay as j,R as o}from"./index-BuR5xlXm.js";import{S as g}from"./separator-CMY9eZD-.js";import{u as p,a as N}from"./useAuthingStatus-D7sP9hky.js";import{A as u}from"./arrow-left-Cx2hbPOV.js";import{L as f}from"./log-in-ozpaY2gY.js";import{L as b}from"./log-out-Cw0Q0gIC.js";function v(){const v=s(),{isLoggedIn:w,user:y,loading:k,error:A,checkStatus:L,getUserInfo:S,login:C,logout:H,refreshUser:I}=p({autoCheck:!0,redirectUri:"/authing-status-test",enableSecurityLog:!0}),D=N();return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(l,{variant:"ghost",onClick:()=>{v(-1)},className:"mb-4",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"返回"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Authing状态检查测试"}),e.jsx("p",{className:"text-gray-600",children:"测试useAuthingStatus Hook的功能和状态管理"})]}),e.jsxs(a,{className:"mb-8",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5"}),"当前状态概览"]}),e.jsx(d,{children:"实时显示Authing登录状态和用户信息"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[k?e.jsx(x,{className:"w-4 h-4 animate-spin text-blue-600"}):w?e.jsx(t,{className:"w-4 h-4 text-green-600"}):e.jsx(m,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"登录状态"})]}),e.jsx(h,{variant:w?"default":"secondary",children:k?"检查中...":w?"已登录":"未登录"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"用户信息"})]}),e.jsx("p",{className:"text-sm text-green-700",children:k?"加载中...":y?`${y.nickname} (${y.username})`:"未获取"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"font-medium text-red-900",children:"错误状态"})]}),e.jsx("p",{className:"text-sm text-red-700",children:A||"无错误"})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-blue-600"}),"完整Hook功能测试"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"状态检查操作"}),e.jsx(d,{children:"手动触发各种状态检查操作"})]}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs(l,{onClick:L,disabled:k,className:"w-full",children:[k?e.jsx(x,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(o,{className:"w-4 h-4 mr-2"}),"检查登录状态"]}),e.jsxs(l,{onClick:S,disabled:k||!w,variant:"outline",className:"w-full",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"获取用户信息"]}),e.jsxs(l,{onClick:I,disabled:k||!w,variant:"outline",className:"w-full",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"刷新用户信息"]})]})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"登录登出操作"}),e.jsx(d,{children:"测试登录和登出功能"})]}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs(l,{onClick:()=>C(),disabled:k||w,className:"w-full",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"登录"]}),e.jsxs(l,{onClick:H,disabled:k||!w,variant:"destructive",className:"w-full",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"登出"]}),e.jsxs(l,{onClick:()=>C("/user-profile"),disabled:k||w,variant:"outline",className:"w-full",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"登录后跳转到用户信息页"]})]})]})]})]}),e.jsx(g,{className:"my-8"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-green-600"}),"简化Hook对比"]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"useSimpleAuthingStatus Hook"}),e.jsx(d,{children:"基于您提供的代码逻辑实现的简化版本"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.loading?e.jsx(x,{className:"w-4 h-4 animate-spin text-purple-600"}):D.isLoggedIn?e.jsx(t,{className:"w-4 h-4 text-green-600"}):e.jsx(m,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"简化Hook状态"})]}),e.jsx(h,{variant:D.isLoggedIn?"default":"secondary",children:D.loading?"检查中...":D.isLoggedIn?"已登录":"未登录"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"简化Hook用户"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:D.loading?"加载中...":D.user?`${D.user.nickname||D.user.username}`:"未获取"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(o,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-900",children:"自动跳转"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:D.loading?"检查中...":D.isLoggedIn?"已登录":"未登录时自动跳转"})]})]})})]})]}),e.jsx(g,{className:"my-8"}),y&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-blue-600"}),"用户信息详情"]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"当前用户信息"}),e.jsx(d,{children:"从Authing获取的完整用户信息"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"基本信息"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"用户ID:"}),e.jsx("p",{className:"font-mono bg-gray-100 p-1 rounded",children:y.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"用户名:"}),e.jsx("p",{children:y.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"昵称:"}),e.jsx("p",{children:y.nickname})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"邮箱:"}),e.jsx("p",{children:y.email||"未设置"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"手机号:"}),e.jsx("p",{children:y.phone||"未设置"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"时间信息"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"创建时间:"}),e.jsx("p",{children:new Date(y.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"更新时间:"}),e.jsx("p",{children:new Date(y.updatedAt).toLocaleString()})]})]})]})]})})]})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"功能特性"}),e.jsx(d,{children:"useAuthingStatus Hook的主要功能和特性"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"核心功能"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• 自动检查登录状态"}),e.jsx("li",{children:"• 获取用户信息"}),e.jsx("li",{children:"• 登录/登出操作"}),e.jsx("li",{children:"• 刷新用户信息"}),e.jsx("li",{children:"• 错误处理"}),e.jsx("li",{children:"• 加载状态管理"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"安全特性"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• 安全日志记录"}),e.jsx("li",{children:"• 错误日志追踪"}),e.jsx("li",{children:"• 用户行为监控"}),e.jsx("li",{children:"• 状态验证"}),e.jsx("li",{children:"• 安全的跳转机制"}),e.jsx("li",{children:"• 防重复操作"})]})]})]})})]})]})}export{v as default};
