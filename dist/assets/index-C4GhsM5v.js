const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-adapt-TpxL9qXl.js","assets/ui-core-CpixwkN4.js","assets/router-CDHmMMQ-.js","assets/react-vendor-D7XYiaTe.js","assets/components-layout-DVNx4yCQ.js","assets/pages-home-VedHkcQa.js","assets/components-landing-DkW9i9QU.js","assets/pages-brand-BFAxHyKh.js","assets/utils-BtoDKMDU.js","assets/api-services-Bt6XQYxd.js","assets/pages-content-extractor-COXy_-Wy.js","assets/components-auth-Dtkj9iM3.js","assets/InvitePage-X8MIy3Zc.js","assets/pages-hot-topics-Bfl9l8w8.js","assets/HotTopicDetailPage-DNqqWyWv.js","assets/PaymentPage-pWmg3EWo.js","assets/ProfilePage-HyG8rNrZ.js","assets/SettingsPage-DlGiil25.js","assets/UserDataPage-DuRg-FlT.js","assets/UserProfilePage-Bz-8S22P.js","assets/UserProfile-D2iWK3TL.js","assets/UserProfileTestPage-CCCHMM30.js","assets/LoginButtonTestPage-DuzjUuX1.js","assets/AuthingStatusTestPage-D_OzQCfM.js","assets/useAuthingStatus-37RmpFhA.js","assets/LogoutButtonTestPage-BPPRzg4e.js","assets/alert-dialog-BYtbGEVl.js","assets/UserEditFormTestPage-BCH_Ihjt.js","assets/pages-emoji-DFlKZb1r.js","assets/PrivacyPage-ftaara1D.js","assets/TermsPage-4bf6wxK9.js","assets/ChangelogPage-RiB9yTN3.js","assets/HistoryPage-BAGwrnXI.js","assets/pages-library-CEVmJXQ7.js","assets/pages-creative-CqCYIXck.js","assets/components-creative-We2mgALb.js","assets/TestNewFeaturesPage-DaOYcark.js","assets/pages-share-BbDWSVGe.js","assets/AboutPage-w7hgi4sp.js","assets/TestPage-Cw4W0omJ.js","assets/AITestPage-BvPQeQiX.js","assets/ReferrerTestPage-B9ygelap.js","assets/ArchitectureTestPage-yEc2R1_n.js","assets/AuthingSystemTestPage-CIS-zZMa.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{aj as n,ak as r,al as i,j as s,am as o,a7 as a,an as c,ao as l,ap as u,aq as d,ar as h,as as p,at as f,au as m,av as g,aw as v,ax as y,ay as x,az as b,aA as w,aB as j,aC as N}from"./ui-core-CpixwkN4.js";import{r as T,a as S,u as C,R as k,L as E,e as I,B as P,f as A,g as _}from"./router-CDHmMMQ-.js";import{a as D,g as O}from"./react-vendor-D7XYiaTe.js";import{_ as L}from"./pages-emoji-DFlKZb1r.js";import{c as R,u as B,B as F,g as V,C as M,a as U,b as q,d as H,e as z,j as $,r as W,k as G,f as Z,l as J,m as Y,n as K,h as X,s as Q,o as ee,p as te,q as ne,A as re,H as ie}from"./pages-home-VedHkcQa.js";import{b as se,X as oe,aK as ae,aL as ce,aM as le,r as ue,Q as de,W as he,U as pe,aJ as fe,af as me,f as ge,Z as ve,aN as ye,p as xe,ad as be,C as we,aa as je,i as Ne,h as Te,aC as Se,A as Ce,o as ke,aB as Ee,Y as Ie,n as Pe,aO as Ae,ap as _e,x as De}from"./utils-BtoDKMDU.js";import{i as Oe,j as Le,k as Re,l as Be,L as Fe,I as Ve,C as Me,B as Ue,S as qe,e as He,f as ze,g as $e,h as We,T as Ge,p as Ze}from"./pages-adapt-TpxL9qXl.js";import{P as Je}from"./components-auth-Dtkj9iM3.js";import{T as Ye,P as Ke,c as Xe}from"./components-layout-DVNx4yCQ.js";import{q as Qe}from"./api-services-Bt6XQYxd.js";import{S as et}from"./pages-hot-topics-Bfl9l8w8.js";import"./pages-content-extractor-COXy_-Wy.js";import"./pages-brand-BFAxHyKh.js";import"./components-landing-DkW9i9QU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var tt,nt={};const rt=O(function(){if(tt)return nt;tt=1;var e=D();return nt.createRoot=e.createRoot,nt.hydrateRoot=e.hydrateRoot,nt}());var it="ToastProvider",[st,ot,at]=r("Toast"),[ct,lt]=n("Toast",[at]),[ut,dt]=ct(it),ht=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[c,l]=T.useState(null),[u,d]=T.useState(0),h=T.useRef(!1),p=T.useRef(!1);return n.trim(),s.jsx(st.Provider,{scope:t,children:s.jsx(ut,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:T.useCallback(()=>d(e=>e+1),[]),onToastRemove:T.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:a})})};ht.displayName=it;var pt="ToastViewport",ft=["F8"],mt="toast.viewportPause",gt="toast.viewportResume",vt=T.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=ft,label:c="Notifications ({hotkey})",...l}=e,u=dt(pt,n),d=ot(n),h=T.useRef(null),p=T.useRef(null),f=T.useRef(null),m=T.useRef(null),g=i(t,m,u.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=u.toastCount>0;T.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=m.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),T.useEffect(()=>{const e=h.current,t=m.current;if(y&&e&&t){const n=()=>{if(!u.isClosePausedRef.current){const e=new CustomEvent(mt);t.dispatchEvent(e),u.isClosePausedRef.current=!0}},r=()=>{if(u.isClosePausedRef.current){const e=new CustomEvent(gt);t.dispatchEvent(e),u.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[y,u.isClosePausedRef]);const x=T.useCallback(({tabbingDirection:e})=>{const t=d().map(t=>{const n=t.ref.current,r=[n,...Lt(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return T.useEffect(()=>{const e=m.current;if(e){const t=t=>{var n,r,i;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null==(n=p.current)||n.focus());const a=x({tabbingDirection:o?"backwards":"forwards"}),c=a.findIndex(e=>e===s);Rt(a.slice(c+1))?t.preventDefault():o?null==(r=p.current)||r.focus():null==(i=f.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,x]),s.jsxs(o,{ref:h,role:"region","aria-label":c.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(xt,{ref:p,onFocusFromOutsideViewport:()=>{Rt(x({tabbingDirection:"forwards"}))}}),s.jsx(st.Slot,{scope:n,children:s.jsx(a.ol,{tabIndex:-1,...l,ref:g})}),y&&s.jsx(xt,{ref:f,onFocusFromOutsideViewport:()=>{Rt(x({tabbingDirection:"backwards"}))}})]})});vt.displayName=pt;var yt="ToastFocusProxy",xt=T.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,o=dt(yt,n);return s.jsx(h,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=o.viewport)?void 0:t.contains(n))&&r()}})});xt.displayName=yt;var bt="Toast",wt=T.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=e,[h,p]=c({prop:r,defaultProp:i??!0,onChange:o,caller:bt});return s.jsx(l,{present:n||h,children:s.jsx(Tt,{open:h,...a,ref:t,onClose:()=>p(!1),onPause:d(e.onPause),onResume:d(e.onResume),onSwipeStart:u(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:u(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:u(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:u(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),p(!1)})})})});wt.displayName=bt;var[jt,Nt]=ct(bt,{onClose(){}}),Tt=T.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:c,onClose:l,onEscapeKeyDown:h,onPause:f,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:x,...b}=e,w=dt(bt,n),[j,N]=T.useState(null),C=i(t,e=>N(e)),k=T.useRef(null),E=T.useRef(null),I=o||w.duration,P=T.useRef(0),A=T.useRef(I),_=T.useRef(0),{onToastAdd:D,onToastRemove:O}=w,L=d(()=>{var e;(null==j?void 0:j.contains(document.activeElement))&&(null==(e=w.viewport)||e.focus()),l()}),R=T.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(_.current),P.current=(new Date).getTime(),_.current=window.setTimeout(L,e))},[L]);T.useEffect(()=>{const e=w.viewport;if(e){const t=()=>{R(A.current),null==m||m()},n=()=>{const e=(new Date).getTime()-P.current;A.current=A.current-e,window.clearTimeout(_.current),null==f||f()};return e.addEventListener(mt,n),e.addEventListener(gt,t),()=>{e.removeEventListener(mt,n),e.removeEventListener(gt,t)}}},[w.viewport,I,f,m,R]),T.useEffect(()=>{c&&!w.isClosePausedRef.current&&R(I)},[c,I,w.isClosePausedRef,R]),T.useEffect(()=>(D(),()=>O()),[D,O]);const B=T.useMemo(()=>j?_t(j):null,[j]);return w.viewport?s.jsxs(s.Fragment,{children:[B&&s.jsx(St,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:B}),s.jsx(jt,{scope:n,onClose:L,children:S.createPortal(s.jsx(st.ItemSlot,{scope:n,children:s.jsx(p,{asChild:!0,onEscapeKeyDown:u(h,()=>{w.isFocusedToastEscapeKeyDownRef.current||L(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(a.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":w.swipeDirection,...b,ref:C,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:u(e.onKeyDown,e=>{"Escape"===e.key&&(null==h||h(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:u(e.onPointerDown,e=>{0===e.button&&(k.current={x:e.clientX,y:e.clientY})}),onPointerMove:u(e.onPointerMove,e=>{if(!k.current)return;const t=e.clientX-k.current.x,n=e.clientY-k.current.y,r=Boolean(E.current),i=["left","right"].includes(w.swipeDirection),s=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,o=i?s(0,t):0,a=i?0:s(0,n),c="touch"===e.pointerType?10:2,l={x:o,y:a},u={originalEvent:e,delta:l};r?(E.current=l,Dt("toast.swipeMove",v,u,{discrete:!1})):Ot(l,w.swipeDirection,c)?(E.current=l,Dt("toast.swipeStart",g,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>c||Math.abs(n)>c)&&(k.current=null)}),onPointerUp:u(e.onPointerUp,e=>{const t=E.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),E.current=null,k.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};Ot(t,w.swipeDirection,w.swipeThreshold)?Dt("toast.swipeEnd",x,r,{discrete:!0}):Dt("toast.swipeCancel",y,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),St=e=>{const{__scopeToast:t,children:n,...r}=e,i=dt(bt,t),[o,a]=T.useState(!1),[c,l]=T.useState(!1);return function(e=()=>{}){const t=d(e);m(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),T.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),c?null:s.jsx(f,{asChild:!0,children:s.jsx(h,{...r,children:o&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},Ct=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(a.div,{...r,ref:t})});Ct.displayName="ToastTitle";var kt=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(a.div,{...r,ref:t})});kt.displayName="ToastDescription";var Et=T.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(At,{altText:n,asChild:!0,children:s.jsx(Pt,{...r,ref:t})}):null});Et.displayName="ToastAction";var It="ToastClose",Pt=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=Nt(It,n);return s.jsx(At,{asChild:!0,children:s.jsx(a.button,{type:"button",...r,ref:t,onClick:u(e.onClick,i.onClose)})})});Pt.displayName=It;var At=T.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return s.jsx(a.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function _t(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(..._t(e))}}),t}function Dt(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?g(i,s):i.dispatchEvent(s)}var Ot=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return"left"===t||"right"===t?s&&r>n:!s&&i>n};function Lt(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Rt(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Bt=vt,Ft=wt,Vt=Ct,Mt=kt,Ut=Et,qt=Pt;const Ht=ht,zt=T.forwardRef(({className:e,...t},n)=>s.jsx(Bt,{ref:n,className:R("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));zt.displayName=Bt.displayName;const $t=se("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wt=T.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(Ft,{ref:r,className:R($t({variant:t}),e),...n}));Wt.displayName=Ft.displayName,T.forwardRef(({className:e,...t},n)=>s.jsx(Ut,{ref:n,className:R("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=Ut.displayName;const Gt=T.forwardRef(({className:e,...t},n)=>s.jsx(qt,{ref:n,className:R("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(oe,{className:"h-4 w-4"})}));Gt.displayName=qt.displayName;const Zt=T.forwardRef(({className:e,...t},n)=>s.jsx(Vt,{ref:n,className:R("text-sm font-semibold [&+div]:text-xs",e),...t}));Zt.displayName=Vt.displayName;const Jt=T.forwardRef(({className:e,...t},n)=>s.jsx(Mt,{ref:n,className:R("text-sm opacity-90",e),...t}));function Yt(){const{toasts:e}=B();return s.jsxs(Ht,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return s.jsxs(Wt,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[t&&s.jsx(Zt,{children:t}),n&&s.jsx(Jt,{children:n})]}),r,s.jsx(Gt,{})]},e)}),s.jsx(zt,{})]})}function Kt(){const e=C();return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-6xl mb-4",children:"404"}),s.jsx("p",{className:"mb-6",children:"Page not found"}),s.jsx(F,{onClick:()=>e("/"),variant:"link",children:"Return home"})]})})}function Xt(){const[e,t]=T.useState("password"),[n,r]=T.useState(!1),[i,o]=T.useState(!1),[a,c]=T.useState(0),[l,u]=T.useState(!1),[d,h]=T.useState({phone:"",email:"",password:"",loginType:"phone"}),[p,f]=T.useState({phone:"",email:"",code:"",loginType:"phone"});k.useEffect(()=>{const e=localStorage.getItem("remembered_login");if(e)try{const t=JSON.parse(e);h(e=>({...e,phone:t.phone||"",email:t.email||"",password:t.password||"",loginType:t.loginType||"phone"})),u(!0)}catch(t){}},[]);const{toast:m}=B(),{login:g}=V(),v=C(),y=(e,t)=>{h(n=>({...n,[e]:t}))},x=(e,t)=>{f(n=>({...n,[e]:t}))};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(F,{variant:"ghost",onClick:()=>v("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(ae,{className:"h-4 w-4"}),"返回首页"]}),s.jsxs(M,{className:"shadow-xl",children:[s.jsxs(U,{className:"text-center",children:[s.jsx(q,{className:"text-2xl font-bold",children:"登录账号"}),s.jsx(H,{children:"欢迎回到文派，继续您的创作之旅"})]}),s.jsxs(z,{children:[s.jsxs(Oe,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(Le,{className:"grid w-full grid-cols-2",children:[s.jsx(Re,{value:"password",children:"密码登录"}),s.jsx(Re,{value:"code",children:"验证码登录"})]}),s.jsxs(Be,{value:"password",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{children:"登录方式"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{type:"button",variant:"phone"===d.loginType?"default":"outline",size:"sm",onClick:()=>h(e=>({...e,loginType:"phone"})),className:"flex-1",children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"手机号"]}),s.jsxs(F,{type:"button",variant:"email"===d.loginType?"default":"outline",size:"sm",onClick:()=>h(e=>({...e,loginType:"email"})),className:"flex-1",children:[s.jsx(le,{className:"h-4 w-4 mr-1"}),"邮箱"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"password-account",children:"phone"===d.loginType?"手机号":"邮箱"}),s.jsxs("div",{className:"relative",children:["phone"===d.loginType?s.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}):s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"password-account",type:"phone"===d.loginType?"tel":"email",placeholder:"phone"===d.loginType?"请输入手机号":"请输入邮箱",value:"phone"===d.loginType?d.phone:d.email,onChange:e=>{"phone"===d.loginType?y("phone",e.target.value):y("email",e.target.value)},className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"password-password",children:"密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"password-password",type:n?"text":"password",placeholder:"请输入密码",value:d.password,onChange:e=>y("password",e.target.value),className:"pl-10 pr-10"}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>r(!n),children:n?s.jsx(de,{className:"h-4 w-4"}):s.jsx(he,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Me,{id:"remember-password",checked:l,onCheckedChange:e=>u(e)}),s.jsx(Fe,{htmlFor:"remember-password",className:"text-sm",children:"记住密码"})]}),s.jsx(E,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"忘记密码？"})]}),s.jsx(F,{onClick:async()=>{const{loginType:e,phone:t,email:n,password:r}=d;if(r)if("phone"!==e||t)if("email"!==e||n)if("email"!==e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))if("phone"!==e||/^1[3-9]\d{9}$/.test(t)){o(!0);try{const r={id:"temp-user-id",phone:"phone"===e?t:"",email:"email"===e?n:"",username:"phone"===e?t:n,nickname:"phone"===e?t:n,plan:"free",isProUser:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await g(r),l?(()=>{if(l){const e={phone:d.phone,email:d.email,password:d.password,loginType:d.loginType};localStorage.setItem("remembered_login",JSON.stringify(e))}else localStorage.removeItem("remembered_login")})():localStorage.removeItem("remembered_login"),m({title:"登录成功",description:"欢迎回来！"}),v("/")}catch(i){m({title:"登录失败",description:i.message||"请检查登录信息",variant:"destructive"})}finally{o(!1)}}else m({title:"请输入正确的手机号",variant:"destructive"});else m({title:"请输入正确的邮箱格式",variant:"destructive"});else m({title:"请输入邮箱",variant:"destructive"});else m({title:"请输入手机号",variant:"destructive"});else m({title:"请输入密码",variant:"destructive"})},disabled:i,className:"w-full",children:i?"登录中...":"立即登录"})]}),s.jsxs(Be,{value:"code",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{children:"登录方式"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{type:"button",variant:"phone"===p.loginType?"default":"outline",size:"sm",onClick:()=>f(e=>({...e,loginType:"phone"})),className:"flex-1",children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"手机号"]}),s.jsxs(F,{type:"button",variant:"email"===p.loginType?"default":"outline",size:"sm",onClick:()=>f(e=>({...e,loginType:"email"})),className:"flex-1",children:[s.jsx(le,{className:"h-4 w-4 mr-1"}),"邮箱"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"code-account",children:"phone"===p.loginType?"手机号":"邮箱"}),s.jsxs("div",{className:"relative",children:["phone"===p.loginType?s.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}):s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"code-account",type:"phone"===p.loginType?"tel":"email",placeholder:"phone"===p.loginType?"请输入手机号":"请输入邮箱",value:"phone"===p.loginType?p.phone:p.email,onChange:e=>{"phone"===p.loginType?x("phone",e.target.value):x("email",e.target.value)},className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"code-verification",children:"验证码"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx(Ve,{id:"code-verification",placeholder:"请输入验证码",value:p.code,onChange:e=>x("code",e.target.value)})}),s.jsx(F,{type:"button",variant:"outline",onClick:async()=>{if(!(a>0)){if("phone"===p.loginType){if(!p.phone)return void m({title:"请输入手机号",variant:"destructive"});if(!/^1[3-9]\d{9}$/.test(p.phone))return void m({title:"请输入正确的手机号",variant:"destructive"})}else{if(!p.email)return void m({title:"请输入邮箱",variant:"destructive"});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email))return void m({title:"请输入正确的邮箱格式",variant:"destructive"})}try{const e="phone"===p.loginType?"手机":"邮箱";m({title:"验证码已发送",description:`验证码已发送到您的${e}`}),c(60);const t=setInterval(()=>{c(e=>e<=1?(clearInterval(t),0):e-1)},1e3)}catch(e){m({title:"发送失败",description:"请稍后重试",variant:"destructive"})}}},disabled:a>0,className:"w-24",children:a>0?`${a}s`:"发送验证码"})]})]}),s.jsx(F,{onClick:async()=>{if("phone"===p.loginType){if(!p.phone||!p.code)return void m({title:"请填写完整信息",variant:"destructive"})}else if(!p.email||!p.code)return void m({title:"请填写完整信息",variant:"destructive"});o(!0);try{const e={id:"temp-user-id",phone:"phone"===p.loginType?p.phone:"",email:"email"===p.loginType?p.email:"",username:"phone"===p.loginType?p.phone:p.email,nickname:"phone"===p.loginType?p.phone:p.email,plan:"free",isProUser:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await g(e),m({title:"登录成功",description:"欢迎回来！"}),v("/")}catch(e){const t="phone"===p.loginType?"手机号":"邮箱";m({title:"登录失败",description:e.message||`请检查${t}和验证码`,variant:"destructive"})}finally{o(!1)}},disabled:i,className:"w-full",children:i?"登录中...":"立即登录"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["还没有账号？",s.jsx(E,{to:"/register",className:"text-blue-600 hover:underline ml-1",children:"立即注册"})]})})]})]})]})})}var Qt,en,tn,nn,rn,sn,on,an,cn,ln,un,dn,hn,pn,fn,mn,gn,vn,yn,xn,bn,wn;Jt.displayName=Mt.displayName,(en=Qt||(Qt={})).Data="DATA",en.Api="API",en.Menu="MENU",en.Ui="UI",en.Button="BUTTON",(nn=tn||(tn={})).User="USER",nn.Role="ROLE",nn.Group="GROUP",nn.Org="ORG",nn.AkSk="AK_SK",(sn=rn||(rn={})).And="AND",sn.Or="OR",(an=on||(on={})).ResetPassword="RESET_PASSWORD",an.PasswordResetedNotification="PASSWORD_RESETED_NOTIFICATION",an.ChangePassword="CHANGE_PASSWORD",an.Welcome="WELCOME",an.VerifyEmail="VERIFY_EMAIL",an.ChangeEmail="CHANGE_EMAIL",(ln=cn||(cn={})).CreatedatDesc="CREATEDAT_DESC",ln.CreatedatAsc="CREATEDAT_ASC",ln.UpdatedatDesc="UPDATEDAT_DESC",ln.UpdatedatAsc="UPDATEDAT_ASC",(dn=un||(un={})).Suspended="Suspended",dn.Resigned="Resigned",dn.Activated="Activated",dn.Archived="Archived",(pn=hn||(hn={})).String="STRING",pn.Number="NUMBER",pn.Datetime="DATETIME",pn.Boolean="BOOLEAN",pn.Object="OBJECT",pn.Select="SELECT",(mn=fn||(fn={})).Allow="ALLOW",mn.Deny="DENY",(vn=gn||(gn={})).Node="NODE",vn.Org="ORG",vn.User="USER",vn.Userpool="USERPOOL",vn.Role="ROLE",vn.Permission="PERMISSION",vn.Application="APPLICATION",(xn=yn||(yn={})).Username="USERNAME",xn.Email="EMAIL",xn.Phone="PHONE",(wn=bn||(bn={})).ResetPassword="RESET_PASSWORD",wn.RESET_PASSWORD_VERIFY_CODE="RESET_PASSWORD_VERIFY_CODE",wn.VerifyEmail="VERIFY_EMAIL",wn.FIRST_EMAIL_LOGIN_VERIFY="FIRST_EMAIL_LOGIN_VERIFY",wn.CONSOLE_CONDUCTED_VERIFY="CONSOLE_CONDUCTED_VERIFY",wn.ChangeEmail="CHANGE_EMAIL",wn.EMAIL_BIND_VERIFY_CODE="EMAIL_BIND_VERIFY_CODE",wn.EMAIL_UNBIND_VERIFY_CODE="EMAIL_UNBIND_VERIFY_CODE",wn.MfaVerify="MFA_VERIFY",wn.VerifyCode="VERIFY_CODE",wn.REGISTER_VERIFY_CODE="REGISTER_VERIFY_CODE",wn.LOGIN_VERIFY_CODE="LOGIN_VERIFY_CODE",wn.MFA_VERIFY_CODE="MFA_VERIFY_CODE",wn.INFORMATION_COMPLETION_VERIFY_CODE="INFORMATION_COMPLETION_VERIFY_CODE";var jn="3.4.2";function Nn(e,t){return new Promise(function(n){return setTimeout(n,e,t)})}function Tn(e){return!!e&&"function"==typeof e.then}function Sn(e,t){try{var n=e();Tn(n)?n.then(function(e){return t(!0,e)},function(e){return t(!1,e)}):t(!0,n)}catch(r){t(!1,r)}}function Cn(e,t,n){return void 0===n&&(n=16),v(this,void 0,void 0,function(){var r,i,s,o;return x(this,function(a){switch(a.label){case 0:r=Array(e.length),i=Date.now(),s=0,a.label=1;case 1:return s<e.length?(r[s]=t(e[s],s),(o=Date.now())>=i+n?(i=o,[4,Nn(0)]):[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++s,[3,1];case 4:return[2,r]}})})}function kn(e){e.then(void 0,function(){})}function En(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function In(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function Pn(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function An(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function _n(e,t){return[e[0]^t[0],e[1]^t[1]]}function Dn(e){return e=_n(e,[0,e[0]>>>1]),e=_n(e=In(e,[4283543511,3981806797]),[0,e[0]>>>1]),_n(e=In(e,[3301882366,444984403]),[0,e[0]>>>1])}function On(e){return parseInt(e)}function Ln(e){return parseFloat(e)}function Rn(e,t){return"number"==typeof e&&isNaN(e)?t:e}function Bn(e){return e.reduce(function(e,t){return e+(t?1:0)},0)}function Fn(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function Vn(e){return e&&"object"==typeof e&&"message"in e?e:{message:e}}function Mn(){var e=window,t=navigator;return Bn(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Un(){var e=window,t=navigator;return Bn(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function qn(){var e=window,t=navigator;return Bn(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function Hn(){var e=window;return Bn(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function zn(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function $n(){var e=Un(),t=function(){var e,t,n=window;return Bn(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}();if(!e&&!t)return!1;var n=window;return Bn(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}function Wn(e){var t=new Error(e);return t.name=e,t}function Gn(e,t,n){var r,i,s;return void 0===n&&(n=50),v(this,void 0,void 0,function(){var o,a;return x(this,function(c){switch(c.label){case 0:o=document,c.label=1;case 1:return o.body?[3,3]:[4,Nn(n)];case 2:return c.sent(),[3,1];case 3:a=o.createElement("iframe"),c.label=4;case 4:return c.trys.push([4,,10,11]),[4,new Promise(function(e,n){var r=!1,i=function(){r=!0,e()};a.onload=i,a.onerror=function(e){r=!0,n(e)};var s=a.style;s.setProperty("display","block","important"),s.position="absolute",s.top="0",s.left="0",s.visibility="hidden",t&&"srcdoc"in a?a.srcdoc=t:a.src="about:blank",o.body.appendChild(a);var c=function(){var e,t;r||("complete"===(null===(t=null===(e=a.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(c,10))};c()})];case 5:c.sent(),c.label=6;case 6:return(null===(i=null===(r=a.contentWindow)||void 0===r?void 0:r.document)||void 0===i?void 0:i.body)?[3,8]:[4,Nn(n)];case 7:return c.sent(),[3,6];case 8:return[4,e(a,a.contentWindow)];case 9:return[2,c.sent()];case 10:return null===(s=a.parentNode)||void 0===s||s.removeChild(a),[7];case 11:return[2]}})})}function Zn(e){for(var t=function(e){for(var t,n,r="Unexpected syntax '".concat(e,"'"),i=/^\s*([a-z-]*)(.*)$/i.exec(e),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,c=function(e,t){o[e]=o[e]||[],o[e].push(t)};;){var l=a.exec(i[2]);if(!l)break;var u=l[0];switch(u[0]){case".":c("class",u.slice(1));break;case"#":c("id",u.slice(1));break;case"[":var d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(u);if(!d)throw new Error(r);c(d[1],null!==(n=null!==(t=d[4])&&void 0!==t?t:d[5])&&void 0!==n?n:"");break;default:throw new Error(r)}}return[s,o]}(e),n=t[0],r=t[1],i=document.createElement(null!=n?n:"div"),s=0,o=Object.keys(r);s<o.length;s++){var a=o[s],c=r[a].join(" ");"style"===a?Jn(i.style,c):i.setAttribute(a,c)}return i}function Jn(e,t){for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],s=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(i);if(s){var o=s[1],a=s[2],c=s[4];e.setProperty(o,a,c||"")}}}var Yn,Kn,Xn=["monospace","sans-serif","serif"],Qn=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function er(e){return e.toDataURL()}function tr(){var e=screen;return[Rn(Ln(e.availTop),null),Rn(Ln(e.width)-Ln(e.availWidth)-Rn(Ln(e.availLeft),0),null),Rn(Ln(e.height)-Ln(e.availHeight)-Rn(Ln(e.availTop),0),null),Rn(Ln(e.availLeft),null)]}function nr(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function rr(e){var t;return v(this,void 0,void 0,function(){var n,r,i,s,o,a,c;return x(this,function(l){switch(l.label){case 0:for(n=document,r=n.createElement("div"),i=new Array(e.length),s={},ir(r),c=0;c<e.length;++c)"DIALOG"===(o=Zn(e[c])).tagName&&o.show(),ir(a=n.createElement("div")),a.appendChild(o),r.appendChild(a),i[c]=o;l.label=1;case 1:return n.body?[3,3]:[4,Nn(50)];case 2:return l.sent(),[3,1];case 3:n.body.appendChild(r);try{for(c=0;c<e.length;++c)i[c].offsetParent||(s[e[c]]=!0)}finally{null===(t=r.parentNode)||void 0===t||t.removeChild(r)}return[2,s]}})})}function ir(e){e.style.setProperty("display","block","important")}function sr(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function or(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function ar(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function cr(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function lr(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var ur=Math,dr=function(){return 0},hr={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},pr={fonts:function(){return Gn(function(e,t){var n=t.document,r=n.body;r.style.fontSize="48px";var i=n.createElement("div"),s={},o={},a=function(e){var t=n.createElement("span"),r=t.style;return r.position="absolute",r.top="0",r.left="0",r.fontFamily=e,t.textContent="mmMwWLliI0O&1",i.appendChild(t),t},c=Xn.map(a),l=function(){for(var e={},t=function(t){e[t]=Xn.map(function(e){return function(e,t){return a("'".concat(e,"',").concat(t))}(t,e)})},n=0,r=Qn;n<r.length;n++)t(r[n]);return e}();r.appendChild(i);for(var u=0;u<Xn.length;u++)s[Xn[u]]=c[u].offsetWidth,o[Xn[u]]=c[u].offsetHeight;return Qn.filter(function(e){return t=l[e],Xn.some(function(e,n){return t[n].offsetWidth!==s[e]||t[n].offsetHeight!==o[e]});var t})})},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return v(this,void 0,void 0,function(){var e,n,r,i,s;return x(this,function(o){switch(o.label){case 0:return qn()||$n()?(a=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',a("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",a("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",a("LnNwb25zb3JpdA=="),".ylamainos",a("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",a("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",a("LmhlYWRlci1ibG9ja2VkLWFk"),a("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",a("I2FkXzMwMFgyNTA="),a("I2Jhbm5lcmZsb2F0MjI="),a("I2NhbXBhaWduLWJhbm5lcg=="),a("I0FkLUNvbnRlbnQ=")],adGuardChinese:[a("LlppX2FkX2FfSA=="),a("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",a("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),a("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",a("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",a("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",a("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),a("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),a("LmFkZ29vZ2xl"),a("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[a("YW1wLWF1dG8tYWRz"),a("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",a("I2FkX2ludmlld19hcmVh")],adGuardRussian:[a("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),a("LnJlY2xhbWE="),'div[id^="smi2adblock"]',a("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[a("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),a("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",a("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),a("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),a("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",a("I3Jla2xhbWk="),a("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),a("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),a("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[a("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",a("LndpZGdldF9wb19hZHNfd2lkZ2V0"),a("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",a("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[a("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),a("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",a("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",a("I3Jla2xhbW5pLWJveA=="),a("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",a("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[a("I2FkdmVydGVudGll"),a("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",a("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",a("LnNwb25zb3JsaW5rZ3J1ZW4="),a("I3dlcmJ1bmdza3k="),a("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),a("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[a("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",a("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[a("LnJla2xhbW9zX3RhcnBhcw=="),a("LnJla2xhbW9zX251b3JvZG9z"),a("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),a("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),a("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[a("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[a("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),a("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",a("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[a("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),a("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),a("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",a("LmFkX19tYWlu"),a("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[a("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[a("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),a("I2xpdmVyZUFkV3JhcHBlcg=="),a("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),a("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[a("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",a("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),a("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),a("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[a("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),a("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),a("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",a("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),a("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),a("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),a("ZGl2I3NrYXBpZWNfYWQ=")],ro:[a("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),a("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[a("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),a("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),a("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",a("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),a("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",a("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},n=Object.keys(e),[4,rr((s=[]).concat.apply(s,n.map(function(t){return e[t]})))]):[2,void 0];case 1:return r=o.sent(),t&&function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];"\n".concat(i,":");for(var s=0,o=e[i];s<o.length;s++){var a=o[s];"\n  ".concat(t[a]?"🚫":"➡️"," ").concat(a)}}}(e,r),(i=n.filter(function(t){var n=e[t];return Bn(n.map(function(e){return r[e]}))>.6*n.length})).sort(),[2,i]}var a})})},fontPreferences:function(){return void 0===e&&(e=4e3),Gn(function(t,n){var r=n.document,i=r.body,s=i.style;s.width="".concat(e,"px"),s.webkitTextSizeAdjust=s.textSizeAdjust="none",Un()?i.style.zoom="".concat(1/n.devicePixelRatio):qn()&&(i.style.zoom="reset");var o=r.createElement("div");return o.textContent=b([],Array(e/20|0),!0).map(function(){return"word"}).join(" "),i.appendChild(o),function(e,t){for(var n={},r={},i=0,s=Object.keys(hr);i<s.length;i++){var o=s[i],a=hr[o],c=a[0],l=void 0===c?{}:c,u=a[1],d=void 0===u?"mmMwWLliI0fiflO&1":u,h=e.createElement("span");h.textContent=d,h.style.whiteSpace="nowrap";for(var p=0,f=Object.keys(l);p<f.length;p++){var m=f[p],g=l[m];void 0!==g&&(h.style[m]=g)}n[o]=h,t.appendChild(e.createElement("br")),t.appendChild(h)}for(var v=0,y=Object.keys(hr);v<y.length;v++)r[o=y[v]]=n[o].getBoundingClientRect().width;return r}(r,i)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">');var e},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(qn()&&!Hn()&&!function(){var e=window;return Bn(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var i=n.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.25,r.connect(i),i.connect(n.destination),r.start(0);var s=function(e){var t=function(){};return[new Promise(function(n,r){var i=!1,s=0,o=0;e.oncomplete=function(e){return n(e.renderedBuffer)};var a=function(){setTimeout(function(){return r(Wn("timeout"))},Math.min(500,o+5e3-Date.now()))},c=function(){try{var t=e.startRendering();switch(Tn(t)&&kn(t),e.state){case"running":o=Date.now(),i&&a();break;case"suspended":document.hidden||s++,i&&s>=3?r(Wn("suspended")):setTimeout(c,500)}}catch(n){r(n)}};c(),t=function(){i||(i=!0,o>0&&a())}}),t]}(n),o=s[0],a=s[1],c=o.then(function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))},function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e});return kn(c),function(){return a(),c}},screenFrame:function(){var e=this,t=function(){var e=this;return function(){if(void 0===Kn){var e=function(){var t=tr();nr(t)?Kn=setTimeout(e,2500):(Yn=t,Kn=void 0)};e()}}(),function(){return v(e,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return nr(e=tr())?Yn?[2,b([],Yn,!0)]:(n=document).fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement?[4,zn()]:[3,2]:[3,2];case 1:t.sent(),e=tr(),t.label=2;case 2:return nr(e)||(Yn=e),[2,e]}var n})})}}();return function(){return v(e,void 0,void 0,function(){var e,n;return x(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:Fn(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}})})}},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))Un()&&Bn([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var i=t.languages;i&&n.push(i.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return Rn(Ln(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return Rn(On(e),null)},n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return Rn(On(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,i=(r=(new Date).getFullYear(),-Math.max(Ln(new Date(r,0,1).getTimezoneOffset()),Ln(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(i>=0?"+":"").concat(Math.abs(i))},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){var e,t;if(!(Mn()||(e=window,t=navigator,Bn(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!Mn())))try{return!!window.indexedDB}catch(n){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&qn()&&!Hn()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return Bn(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var i=[],s=0;s<r.length;++s){var o=r[s];i.push({type:o.type,suffixes:o.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:i})}}return t}},canvas:function(){var e,t,n=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),i=r[0],s=r[1];if(function(e,t){return!(!t||!e.toDataURL)}(i,s)){n=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(s),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(i,s);var o=er(i);o!==er(i)?e=t="unstable":(t=o,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var i=r[n],s=i[0],o=i[1],a=i[2];t.fillStyle=s,t.beginPath(),t.arc(o,a,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(i,s),e=er(i))}else e=t="";return{winding:n,geometry:e,text:t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=On(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(r){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],i=window[r];i&&"object"==typeof i&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(n){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: ".concat(n,")")).matches)return n}},invertedColors:function(){return!!sr("inverted")||!sr("none")&&void 0},forcedColors:function(){return!!or("active")||!or("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return ar("no-preference")?0:ar("high")||ar("more")?1:ar("low")||ar("less")?-1:ar("forced")?10:void 0},reducedMotion:function(){return!!cr("reduce")||!cr("no-preference")&&void 0},hdr:function(){return!!lr("high")||!lr("standard")&&void 0},math:function(){var e,t=ur.acos||dr,n=ur.acosh||dr,r=ur.asin||dr,i=ur.asinh||dr,s=ur.atanh||dr,o=ur.atan||dr,a=ur.sin||dr,c=ur.sinh||dr,l=ur.cos||dr,u=ur.cosh||dr,d=ur.tan||dr,h=ur.tanh||dr,p=ur.exp||dr,f=ur.expm1||dr,m=ur.log1p||dr;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,ur.log(e+ur.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:i(1),asinhPf:ur.log(1+ur.sqrt(2)),atanh:s(.5),atanhPf:ur.log(3)/2,atan:o(.5),sin:a(-1e300),sinh:c(1),sinhPf:ur.exp(1)-1/ur.exp(1)/2,cos:l(10.000000000123),cosh:u(1),coshPf:(ur.exp(1)+1/ur.exp(1))/2,tan:d(-1e300),tanh:h(1),tanhPf:(ur.exp(2)-1)/(ur.exp(2)+1),exp:p(1),expm1:f(1),expm1Pf:ur.exp(1)-1,log1p:m(10),log1pPf:ur.log(11),powPI:ur.pow(ur.PI,-100)}},videoCard:function(){var e,t=document.createElement("canvas"),n=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(n&&"getExtension"in n){var r=n.getExtension("WEBGL_debug_renderer_info");if(r)return{vendor:(n.getParameter(r.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(n.getParameter(r.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}};function fr(e){return function(e,t){t=t||0;var n,r=(e=e||"").length%16,i=e.length-r,s=[0,t],o=[0,t],a=[0,0],c=[0,0],l=[2277735313,289559509],u=[1291169091,658871167];for(n=0;n<i;n+=16)a=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],c=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],a=Pn(a=In(a,l),31),s=En(s=Pn(s=_n(s,a=In(a,u)),27),o),s=En(In(s,[0,5]),[0,1390208809]),c=Pn(c=In(c,u),33),o=En(o=Pn(o=_n(o,c=In(c,l)),31),s),o=En(In(o,[0,5]),[0,944331445]);switch(a=[0,0],c=[0,0],r){case 15:c=_n(c,An([0,e.charCodeAt(n+14)],48));case 14:c=_n(c,An([0,e.charCodeAt(n+13)],40));case 13:c=_n(c,An([0,e.charCodeAt(n+12)],32));case 12:c=_n(c,An([0,e.charCodeAt(n+11)],24));case 11:c=_n(c,An([0,e.charCodeAt(n+10)],16));case 10:c=_n(c,An([0,e.charCodeAt(n+9)],8));case 9:c=In(c=_n(c,[0,e.charCodeAt(n+8)]),u),o=_n(o,c=In(c=Pn(c,33),l));case 8:a=_n(a,An([0,e.charCodeAt(n+7)],56));case 7:a=_n(a,An([0,e.charCodeAt(n+6)],48));case 6:a=_n(a,An([0,e.charCodeAt(n+5)],40));case 5:a=_n(a,An([0,e.charCodeAt(n+4)],32));case 4:a=_n(a,An([0,e.charCodeAt(n+3)],24));case 3:a=_n(a,An([0,e.charCodeAt(n+2)],16));case 2:a=_n(a,An([0,e.charCodeAt(n+1)],8));case 1:a=In(a=_n(a,[0,e.charCodeAt(n)]),l),s=_n(s,a=In(a=Pn(a,31),u))}return s=En(s=_n(s,[0,e.length]),o=_n(o,[0,e.length])),o=En(o,s),s=En(s=Dn(s),o=Dn(o)),o=En(o,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var i=r[n],s=e[i],o=s.error?"error":JSON.stringify(s.value);t+="".concat(t?"|":"").concat(i.replace(/([:|\\])/g,"\\$1"),":").concat(o)}return t}(e))}function mr(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise(function(e){return n.call(window,function(){return e()},{timeout:t})}):Nn(Math.min(e,t))}(e,2*e)}function gr(e,t){return Date.now(),{get:function(n){return v(this,void 0,void 0,function(){var r,i;return x(this,function(s){switch(s.label){case 0:return Date.now(),[4,e()];case 1:return r=s.sent(),i=function(e){var t,n=function(e){var t=function(e){if($n())return.4;if(qn())return Hn()?.5:.3;var t=e.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}(e),n=function(e){return Fn(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(n))}}(e);return{get visitorId(){return void 0===t&&(t=fr(this.components)),t},set visitorId(e){t=e},confidence:n,components:e,version:jn}}(r),t||null==n||n.debug,[2,i]}})})}}}var vr={load:function(e){var t=void 0===e?{}:e,n=t.delayFallback,r=t.debug,i=t.monitoring,s=void 0===i||i;return v(this,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return s&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(jn,"/npm-monitoring"),!0),e.send()}catch(t){}}(),[4,mr(n)];case 1:return e.sent(),[2,gr((t=pr,i={debug:r},o=[],a=Object.keys(t).filter(function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(o,e)}),c=Cn(a,function(e){return function(e,t){var n=new Promise(function(n){var r=Date.now();Sn(e.bind(null,t),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now()-r;if(!e[0])return n(function(){return{error:Vn(e[1]),duration:i}});var s=e[1];if(function(e){return"function"!=typeof e}(s))return n(function(){return{value:s,duration:i}});n(function(){return new Promise(function(e){var t=Date.now();Sn(s,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=i+Date.now()-t;if(!n[0])return e({error:Vn(n[1]),duration:s});e({value:n[1],duration:s})})})})})});return kn(n),function(){return n.then(function(e){return e()})}}(t[e],i)}),kn(c),function(){return v(this,void 0,void 0,function(){var e,t,n,r;return x(this,function(i){switch(i.label){case 0:return[4,c];case 1:return[4,Cn(i.sent(),function(e){var t=e();return kn(t),t})];case 2:return e=i.sent(),[4,Promise.all(e)];case 3:for(t=i.sent(),n={},r=0;r<a.length;++r)n[a[r]]=t[r];return[2,n]}})})}),r)]}var t,i,o,a,c})})},hashComponents:fr,componentsToDebugString:function(e){return JSON.stringify(e,function(e,t){return t instanceof Error?y({name:(n=t).name,message:n.message,stack:null===(r=n.stack)||void 0===r?void 0:r.split("\n")},n):t;var n,r},2)}},yr={ASN1:null,Base64:null,Hex:null,crypto:null,href:null};function xr(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function br(e,t){return e&t}function wr(e,t){return e|t}function jr(e,t){return e^t}function Nr(e,t){return e&~t}function Tr(e){if(0==e)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function Sr(e){for(var t=0;0!=e;)e&=e-1,++t;return t}var Cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function kr(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=Cr.charAt(n>>6)+Cr.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=Cr.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=Cr.charAt(n>>2)+Cr.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function Er(e){var t,n="",r=0,i=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var s=Cr.indexOf(e.charAt(t));s<0||(0==r?(n+=xr(s>>2),i=3&s,r=1):1==r?(n+=xr(i<<2|s>>4),i=15&s,r=2):2==r?(n+=xr(i),n+=xr(s>>2),i=3&s,r=3):(n+=xr(i<<2|s>>4),n+=xr(15&s),r=0))}return 1==r&&(n+=xr(i<<2)),n}var Ir,Pr,Ar=function(e,t){return(Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},_r={decode:function(e){var t;if(void 0===Pr){for(Pr=Object.create(null),t=0;t<64;++t)Pr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(t=0;t<9;++t)Pr["= \f\n\r\t \u2028\u2029".charAt(t)]=-1}var n=[],r=0,i=0;for(t=0;t<e.length;++t){var s=e.charAt(t);if("="==s)break;if(-1!=(s=Pr[s])){if(void 0===s)throw new Error("Illegal character at offset "+t);r|=s,++i>=4?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,r=0,i=0):r<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=_r.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return _r.decode(e)}},Dr=1e13,Or=function(){function e(e){this.buf=[+e||0]}return e.prototype.mulAdd=function(e,t){var n,r,i=this.buf,s=i.length;for(n=0;n<s;++n)(r=i[n]*e+t)<Dr?t=0:r-=(t=0|r/Dr)*Dr,i[n]=r;t>0&&(i[n]=t)},e.prototype.sub=function(e){var t,n,r=this.buf,i=r.length;for(t=0;t<i;++t)(n=r[t]-e)<0?(n+=Dr,e=1):e=0,r[t]=n;for(;0===r[r.length-1];)r.pop()},e.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,n=t[t.length-1].toString(),r=t.length-2;r>=0;--r)n+=(Dr+t[r]).toString().substring(1);return n},e.prototype.valueOf=function(){for(var e=this.buf,t=0,n=e.length-1;n>=0;--n)t=t*Dr+e[n];return t},e.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},e}(),Lr=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,Rr=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function Br(e,t){return e.length>t&&(e=e.substring(0,t)+"…"),e}var Fr=function(){function e(t,n){this.hexDigits="0123456789ABCDEF",t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=n)}return e.prototype.get=function(e){if(void 0===e&&(e=this.pos++),e>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},e.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},e.prototype.hexDump=function(e,t,n){for(var r="",i=e;i<t;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},e.prototype.isASCII=function(e,t){for(var n=e;n<t;++n){var r=this.get(n);if(r<32||r>176)return!1}return!0},e.prototype.parseStringISO=function(e,t){for(var n="",r=e;r<t;++r)n+=String.fromCharCode(this.get(r));return n},e.prototype.parseStringUTF=function(e,t){for(var n="",r=e;r<t;){var i=this.get(r++);n+=i<128?String.fromCharCode(i):i>191&&i<224?String.fromCharCode((31&i)<<6|63&this.get(r++)):String.fromCharCode((15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},e.prototype.parseStringBMP=function(e,t){for(var n,r,i="",s=e;s<t;)n=this.get(s++),r=this.get(s++),i+=String.fromCharCode(n<<8|r);return i},e.prototype.parseTime=function(e,t,n){var r=this.parseStringISO(e,t),i=(n?Lr:Rr).exec(r);return i?(n&&(i[1]=+i[1],i[1]+=+i[1]<70?2e3:1900),r=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(r+=":"+i[5],i[6]&&(r+=":"+i[6],i[7]&&(r+="."+i[7]))),i[8]&&(r+=" UTC","Z"!=i[8]&&(r+=i[8],i[9]&&(r+=":"+i[9]))),r):"Unrecognized time: "+r},e.prototype.parseInteger=function(e,t){for(var n,r=this.get(e),i=r>127,s=i?255:0,o="";r==s&&++e<t;)r=this.get(e);if(0===(n=t-e))return i?-1:0;if(n>4){for(o=r,n<<=3;!(128&(+o^s));)o=+o<<1,--n;o="("+n+" bit)\n"}i&&(r-=256);for(var a=new Or(r),c=e+1;c<t;++c)a.mulAdd(256,this.get(c));return o+a.toString()},e.prototype.parseBitString=function(e,t,n){for(var r=this.get(e),i="("+((t-e-1<<3)-r)+" bit)\n",s="",o=e+1;o<t;++o){for(var a=this.get(o),c=o==t-1?r:0,l=7;l>=c;--l)s+=a>>l&1?"1":"0";if(s.length>n)return i+Br(s,n)}return i+s},e.prototype.parseOctetString=function(e,t,n){if(this.isASCII(e,t))return Br(this.parseStringISO(e,t),n);var r=t-e,i="("+r+" byte)\n";r>(n/=2)&&(t=e+n);for(var s=e;s<t;++s)i+=this.hexByte(this.get(s));return r>n&&(i+="…"),i},e.prototype.parseOID=function(e,t,n){for(var r="",i=new Or,s=0,o=e;o<t;++o){var a=this.get(o);if(i.mulAdd(128,127&a),s+=7,!(128&a)){if(""===r)if((i=i.simplify())instanceof Or)i.sub(80),r="2."+i.toString();else{var c=i<80?i<40?0:1:2;r=c+"."+(i-40*c)}else r+="."+i.toString();if(r.length>n)return Br(r,n);i=new Or,s=0}}return s>0&&(r+=".incomplete"),r},e}(),Vr=function(){function e(e,t,n,r,i){if(!(r instanceof Mr))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=n,this.tag=r,this.sub=i}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(e){if(void 0===this.tag)return null;void 0===e&&(e=1/0);var t=this.posContent(),n=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+n,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+n);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+n,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+n,e);case 6:return this.stream.parseOID(t,t+n,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return Br(this.stream.parseStringUTF(t,t+n),e);case 18:case 19:case 20:case 21:case 22:case 26:return Br(this.stream.parseStringISO(t,t+n),e);case 30:return Br(this.stream.parseStringBMP(t,t+n),e);case 23:case 24:return this.stream.parseTime(t,t+n,23==this.tag.tagNumber)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(e){void 0===e&&(e="");var t=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var n=0,r=this.sub.length;n<r;++n)t+=this.sub[n].toPrettyString(e)}return t},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(e){var t=e.get(),n=127&t;if(n==t)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0===n)return null;t=0;for(var r=0;r<n;++r)t=256*t+e.get();return t},e.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,n=2*this.length;return e.substr(t,n)},e.decode=function(t){var n;n=t instanceof Fr?t:new Fr(t,0);var r=new Fr(n),i=new Mr(n),s=e.decodeLength(n),o=n.pos,a=o-r.pos,c=null,l=function(){var t=[];if(null!==s){for(var r=o+s;n.pos<r;)t[t.length]=e.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+o)}else try{for(;;){var i=e.decode(n);if(i.tag.isEOC())break;t[t.length]=i}s=o-n.pos}catch(a){throw new Error("Exception while decoding undefined length content: "+a)}return t};if(i.tagConstructed)c=l();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");c=l();for(var u=0;u<c.length;++u)if(c[u].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(d){c=null}if(null===c){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+o);n.pos=o+Math.abs(s)}return new e(r,a,s,i,c)},e}(),Mr=function(){function e(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=!!(32&t),this.tagNumber=31&t,31==this.tagNumber){var n=new Or;do{t=e.get(),n.mulAdd(128,127&t)}while(128&t);this.tagNumber=n.simplify()}}return e.prototype.isUniversal=function(){return 0===this.tagClass},e.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},e}(),Ur=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],qr=(1<<26)/Ur[Ur.length-1],Hr=function(){function e(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}return e.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=xr(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=xr(n));return i?s:"0"},e.prototype.negate=function(){var t=Zr();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ti(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(t){var n=Zr();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n},e.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new $r(t):new Wr(t),this.exp(e,n)},e.prototype.clone=function(){var e=Zr();return this.copyTo(e),e},e.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),128&n&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},e.prototype.equals=function(e){return 0==this.compareTo(e)},e.prototype.min=function(e){return this.compareTo(e)<0?this:e},e.prototype.max=function(e){return this.compareTo(e)>0?this:e},e.prototype.and=function(e){var t=Zr();return this.bitwiseTo(e,br,t),t},e.prototype.or=function(e){var t=Zr();return this.bitwiseTo(e,wr,t),t},e.prototype.xor=function(e){var t=Zr();return this.bitwiseTo(e,jr,t),t},e.prototype.andNot=function(e){var t=Zr();return this.bitwiseTo(e,Nr,t),t},e.prototype.not=function(){for(var e=Zr(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},e.prototype.shiftLeft=function(e){var t=Zr();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},e.prototype.shiftRight=function(e){var t=Zr();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},e.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+Tr(this[e]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=Sr(this[n]^t);return e},e.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},e.prototype.setBit=function(e){return this.changeBit(e,wr)},e.prototype.clearBit=function(e){return this.changeBit(e,Nr)},e.prototype.flipBit=function(e){return this.changeBit(e,jr)},e.prototype.add=function(e){var t=Zr();return this.addTo(e,t),t},e.prototype.subtract=function(e){var t=Zr();return this.subTo(e,t),t},e.prototype.multiply=function(e){var t=Zr();return this.multiplyTo(e,t),t},e.prototype.divide=function(e){var t=Zr();return this.divRemTo(e,t,null),t},e.prototype.remainder=function(e){var t=Zr();return this.divRemTo(e,null,t),t},e.prototype.divideAndRemainder=function(e){var t=Zr(),n=Zr();return this.divRemTo(e,t,n),[t,n]},e.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),s=ei(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new $r(t):t.isEven()?new Gr(t):new Wr(t);var o=[],a=3,c=n-1,l=(1<<n)-1;if(o[1]=r.convert(this),n>1){var u=Zr();for(r.sqrTo(o[1],u);a<=l;)o[a]=Zr(),r.mulTo(u,o[a-2],o[a]),a+=2}var d,h,p=e.t-1,f=!0,m=Zr();for(i=ti(e[p])-1;p>=0;){for(i>=c?d=e[p]>>i-c&l:(d=(e[p]&(1<<i+1)-1)<<c-i,p>0&&(d|=e[p-1]>>this.DB+i-c)),a=n;!(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),f)o[d].copyTo(s),f=!1;else{for(;a>1;)r.sqrTo(s,m),r.sqrTo(m,s),a-=2;a>0?r.sqrTo(s,m):(h=s,s=m,m=h),r.mulTo(m,o[d],s)}for(;p>=0&&!(e[p]&1<<i);)r.sqrTo(s,m),h=s,s=m,m=h,--i<0&&(i=this.DB-1,--p)}return r.revert(s)},e.prototype.modInverse=function(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),s=ei(1),o=ei(0),a=ei(0),c=ei(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&s.subTo(a,s),o.subTo(c,o)):(i.subTo(r,i),n&&a.subTo(s,a),c.subTo(o,c))}return 0!=i.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},e.prototype.pow=function(e){return this.exp(e,new zr)},e.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},e.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=Ur[Ur.length-1]){for(t=0;t<Ur.length;++t)if(n[0]==Ur[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<Ur.length;){for(var r=Ur[t],i=t+1;i<Ur.length&&r<qr;)r*=Ur[i++];for(r=n.modInt(r);t<i;)if(r%Ur[t++]==0)return!1}return n.millerRabin(e)},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},e.prototype.fromString=function(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,s=!1,o=0;--i>=0;){var a=8==r?255&+t[i]:Qr(t,i);a<0?"-"==t.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&128&+t[0]&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},e.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,a=this.t-1;a>=0;--a)t[a+s+1]=this[a]>>r|o,o=(this[a]&i)<<n;for(a=s-1;a>=0;--a)t[a]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},e.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}},e.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},e.prototype.multiplyTo=function(t,n){var r=this.abs(),i=t.abs(),s=r.t;for(n.t=s+i.t;--s>=0;)n[s]=0;for(s=0;s<i.t;++s)n[s+r.t]=r.am(0,i[s],n,s,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},e.prototype.divRemTo=function(t,n,r){var i=t.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=Zr());var o=Zr(),a=this.s,c=t.s,l=this.DB-ti(i[i.t-1]);l>0?(i.lShiftTo(l,o),s.lShiftTo(l,r)):(i.copyTo(o),s.copyTo(r));var u=o.t,d=o[u-1];if(0!=d){var h=d*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),p=this.FV/h,f=(1<<this.F1)/h,m=1<<this.F2,g=r.t,v=g-u,y=null==n?Zr():n;for(o.dlShiftTo(v,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),e.ONE.dlShiftTo(u,y),y.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--v>=0;){var x=r[--g]==d?this.DM:Math.floor(r[g]*p+(r[g-1]+m)*f);if((r[g]+=o.am(0,x,r,v,0,u))<x)for(o.dlShiftTo(v,y),r.subTo(y,r);r[g]<--x;)r.subTo(y,r)}null!=n&&(r.drShiftTo(u,n),a!=c&&e.ZERO.subTo(n,n)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&e.ZERO.subTo(r,r)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.exp=function(t,n){if(t>4294967295||t<1)return e.ONE;var r=Zr(),i=Zr(),s=n.convert(this),o=ti(t)-1;for(s.copyTo(r);--o>=0;)if(n.sqrTo(r,i),(t&1<<o)>0)n.mulTo(i,s,r);else{var a=r;r=i,i=a}return n.revert(r)},e.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},e.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=ei(n),i=Zr(),s=Zr(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(e)+o},e.prototype.fromRadix=function(t,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),s=!1,o=0,a=0,c=0;c<t.length;++c){var l=Qr(t,c);l<0?"-"==t.charAt(c)&&0==this.signum()&&(s=!0):(a=n*a+l,++o>=r&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(n,o)),this.dAddOffset(a,0)),s&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(t,n,r){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),wr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=[],s=7&t;i.length=1+(t>>3),n.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},e.prototype.bitwiseTo=function(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},e.prototype.changeBit=function(t,n){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,n,r),r},e.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},e.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},e.prototype.multiplyLowerTo=function(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(var i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},e.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},e.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},e.prototype.millerRabin=function(t){var n=this.subtract(e.ONE),r=n.getLowestSetBit();if(r<=0)return!1;var i=n.shiftRight(r);(t=t+1>>1)>Ur.length&&(t=Ur.length);for(var s=Zr(),o=0;o<t;++o){s.fromInt(Ur[Math.floor(Math.random()*Ur.length)]);var a=s.modPow(i,this);if(0!=a.compareTo(e.ONE)&&0!=a.compareTo(n)){for(var c=1;c++<r&&0!=a.compareTo(n);)if(0==(a=a.modPowInt(2,this)).compareTo(e.ONE))return!1;if(0!=a.compareTo(n))return!1}}return!0},e.prototype.square=function(){var e=Zr();return this.squareTo(e),e},e.prototype.gcda=function(e,t){var n=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(n.compareTo(r)<0){var i=n;n=r,r=i}var s=n.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)t(n);else{s<o&&(o=s),o>0&&(n.rShiftTo(o,n),r.rShiftTo(o,r));var a=function(){(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),n.compareTo(r)>=0?(n.subTo(r,n),n.rShiftTo(1,n)):(r.subTo(n,r),r.rShiftTo(1,r)),n.signum()>0?setTimeout(a,0):(o>0&&r.lShiftTo(o,r),setTimeout(function(){t(r)},0))};setTimeout(a,10)}},e.prototype.fromNumberAsync=function(t,n,r,i){if("number"==typeof n)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),wr,this),this.isEven()&&this.dAddOffset(1,0);var s=this,o=function(){s.dAddOffset(2,0),s.bitLength()>t&&s.subTo(e.ONE.shiftLeft(t-1),s),s.isProbablePrime(n)?setTimeout(function(){i()},0):setTimeout(o,0)};setTimeout(o,0)}else{var a=[],c=7&t;a.length=1+(t>>3),n.nextBytes(a),c>0?a[0]&=(1<<c)-1:a[0]=0,this.fromString(a,256)}},e}(),zr=function(){function e(){}return e.prototype.convert=function(e){return e},e.prototype.revert=function(e){return e},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},e.prototype.sqrTo=function(e,t){e.squareTo(t)},e}(),$r=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),Wr=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=Zr();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Hr.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=Zr();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),Gr=function(){function e(e){this.m=e,this.r2=Zr(),this.q3=Zr(),Hr.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}return e.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Zr();return e.copyTo(t),this.reduce(t),t},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function Zr(){return new Hr(null)}function Jr(e,t){return new Hr(e,t)}Hr.prototype.am=function(e,t,n,r,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var c=16383&this[e],l=this[e++]>>14,u=a*c+l*o;i=((c=o*c+((16383&u)<<14)+n[r]+i)>>28)+(u>>14)+a*l,n[r++]=268435455&c}return i},Hr.prototype.DB=28,Hr.prototype.DM=268435455,Hr.prototype.DV=1<<28,Hr.prototype.FV=Math.pow(2,52),Hr.prototype.F1=24,Hr.prototype.F2=4;var Yr,Kr,Xr=[];for(Yr="0".charCodeAt(0),Kr=0;Kr<=9;++Kr)Xr[Yr++]=Kr;for(Yr="a".charCodeAt(0),Kr=10;Kr<36;++Kr)Xr[Yr++]=Kr;for(Yr="A".charCodeAt(0),Kr=10;Kr<36;++Kr)Xr[Yr++]=Kr;function Qr(e,t){var n=Xr[e.charCodeAt(t)];return null==n?-1:n}function ei(e){var t=Zr();return t.fromInt(e),t}function ti(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}Hr.ZERO=ei(0),Hr.ONE=ei(1);var ni,ri,ii=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},e.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},e}(),si=null;if(null==si){si=[],ri=0;var oi=void 0;if(yr.crypto&&yr.crypto.getRandomValues){var ai=new Uint32Array(256);for(yr.crypto.getRandomValues(ai),oi=0;oi<ai.length;++oi)si[ri++]=255&ai[oi]}var ci=function(e){if(this.count=this.count||0,this.count>=256||ri>=256)yr.removeEventListener?yr.removeEventListener("mousemove",ci,!1):yr.detachEvent&&yr.detachEvent("onmousemove",ci);else try{var t=e.x+e.y;si[ri++]=255&t,this.count+=1}catch(n){}};yr.addEventListener?yr.addEventListener("mousemove",ci,!1):yr.attachEvent&&yr.attachEvent("onmousemove",ci)}function li(){if(null==ni){for(ni=new ii;ri<256;){var e=Math.floor(65536*Math.random());si[ri++]=255&e}for(ni.init(si),ri=0;ri<si.length;++ri)si[ri]=0;ri=0}return ni.next()}var ui=function(){function e(){}return e.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=li()},e}(),di=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},e.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=Jr(e,16),this.e=parseInt(t,16))},e.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)return null;for(var n=[],r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var s=new ui,o=[];t>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new Hr(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 1&r.length?"0"+r:r},e.prototype.setPrivate=function(e,t,n){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=Jr(e,16),this.e=parseInt(t,16),this.d=Jr(n,16))},e.prototype.setPrivateEx=function(e,t,n,r,i,s,o,a){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=Jr(e,16),this.e=parseInt(t,16),this.d=Jr(n,16),this.p=Jr(r,16),this.q=Jr(i,16),this.dmp1=Jr(s,16),this.dmq1=Jr(o,16),this.coeff=Jr(a,16))},e.prototype.generate=function(e,t){var n=new ui,r=e>>1;this.e=parseInt(t,16);for(var i=new Hr(t,16);;){for(;this.p=new Hr(e-r,1,n),0!=this.p.subtract(Hr.ONE).gcd(i).compareTo(Hr.ONE)||!this.p.isProbablePrime(10););for(;this.q=new Hr(r,1,n),0!=this.q.subtract(Hr.ONE).gcd(i).compareTo(Hr.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(Hr.ONE),a=this.q.subtract(Hr.ONE),c=o.multiply(a);if(0==c.gcd(i).compareTo(Hr.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(e){var t=Jr(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(e,t,n){var r=new ui,i=e>>1;this.e=parseInt(t,16);var s=new Hr(t,16),o=this,a=function(){var t=function(){if(o.p.compareTo(o.q)<=0){var e=o.p;o.p=o.q,o.q=e}var t=o.p.subtract(Hr.ONE),r=o.q.subtract(Hr.ONE),i=t.multiply(r);0==i.gcd(s).compareTo(Hr.ONE)?(o.n=o.p.multiply(o.q),o.d=s.modInverse(i),o.dmp1=o.d.mod(t),o.dmq1=o.d.mod(r),o.coeff=o.q.modInverse(o.p),setTimeout(function(){n()},0)):setTimeout(a,0)},c=function(){o.q=Zr(),o.q.fromNumberAsync(i,1,r,function(){o.q.subtract(Hr.ONE).gcda(s,function(e){0==e.compareTo(Hr.ONE)&&o.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(c,0)})})},l=function(){o.p=Zr(),o.p.fromNumberAsync(e-i,1,r,function(){o.p.subtract(Hr.ONE).gcda(s,function(e){0==e.compareTo(Hr.ONE)&&o.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(l,0)})})};setTimeout(l,0)};setTimeout(a,0)},e.prototype.sign=function(e,t,n){var r=function(e,t){if(t<e.length+22)return null;for(var n=t-e.length-6,r="",i=0;i<n;i+=2)r+="ff";return Jr("0001"+r+"00"+e,16)}((hi[n]||"")+t(e).toString(),this.n.bitLength()/4);if(null==r)return null;var i=this.doPrivate(r);if(null==i)return null;var s=i.toString(16);return 1&s.length?"0"+s:s},e.prototype.verify=function(e,t,n){var r=Jr(t,16),i=this.doPublic(r);return null==i?null:function(e){for(var t in hi)if(hi.hasOwnProperty(t)){var n=hi[t],r=n.length;if(e.substr(0,r)==n)return e.substr(r)}return e}(i.toString(16).replace(/^1f+00/,""))==n(e).toString()},e}(),hi={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"},pi={};pi.lang={extend:function(e,t,n){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),n){var i;for(i in n)e.prototype[i]=n[i];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test("Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1")&&(s=function(e,t){for(i=0;i<o.length;i+=1){var n=o[i],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(a){}s(e.prototype,n)}}};var fi={};function mi(e){var t=di.call(this)||this;return e&&("string"==typeof e?t.parseKey(e):(mi.hasPrivateKeyProperty(e)||mi.hasPublicKeyProperty(e))&&t.parsePropertiesFrom(e)),t}function gi(e){e=e||{},this.default_key_size=parseInt(e.default_key_size,10)||1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}void 0!==fi.asn1&&fi.asn1||(fi.asn1={}),fi.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new Hr(r,16).xor(e).add(Hr.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t=fi.asn1,n=t.DERBoolean,r=t.DERInteger,i=t.DERBitString,s=t.DEROctetString,o=t.DERNull,a=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,u=t.DERNumericString,d=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,f=t.DERUTCTime,m=t.DERGeneralizedTime,g=t.DERSequence,v=t.DERSet,y=t.DERTaggedObject,x=t.ASN1Util.newObject,b=Object.keys(e);if(1!=b.length)throw"key of param shall be only one.";var w=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+w+":"))throw"undefined key: "+w;if("bool"==w)return new n(e[w]);if("int"==w)return new r(e[w]);if("bitstr"==w)return new i(e[w]);if("octstr"==w)return new s(e[w]);if("null"==w)return new o(e[w]);if("oid"==w)return new a(e[w]);if("enum"==w)return new c(e[w]);if("utf8str"==w)return new l(e[w]);if("numstr"==w)return new u(e[w]);if("prnstr"==w)return new d(e[w]);if("telstr"==w)return new h(e[w]);if("ia5str"==w)return new p(e[w]);if("utctime"==w)return new f(e[w]);if("gentime"==w)return new m(e[w]);if("seq"==w){for(var j=e[w],N=[],T=0;T<j.length;T++){var S=x(j[T]);N.push(S)}return new g({array:N})}if("set"==w){for(j=e[w],N=[],T=0;T<j.length;T++)S=x(j[T]),N.push(S);return new v({array:N})}if("tag"==w){var C=e[w];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var k=x(C[2]);return new y({tag:C[0],explicit:C[1],obj:k})}var E={};if(void 0!==C.explicit&&(E.explicit=C.explicit),void 0!==C.tag&&(E.tag=C.tag),void 0===C.obj)throw"obj shall be specified for 'tag'.";return E.obj=x(C.obj),new y(E)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},fi.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var s=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(t=t+"."+new Hr(r,2).toString(10),r="")}return t},fi.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new Hr(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},fi.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},fi.asn1.DERAbstractString=function(e){fi.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},pi.lang.extend(fi.asn1.DERAbstractString,fi.asn1.ASN1Object),fi.asn1.DERAbstractTime=function(e){fi.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),s=String(i.getFullYear());"utc"==t&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var c=r(String(a),3);o=o+"."+(c=c.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,n,r,i,s){var o=new Date(Date.UTC(e,t-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},pi.lang.extend(fi.asn1.DERAbstractTime,fi.asn1.ASN1Object),fi.asn1.DERAbstractStructured=function(e){fi.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},pi.lang.extend(fi.asn1.DERAbstractStructured,fi.asn1.ASN1Object),fi.asn1.DERBoolean=function(){fi.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},pi.lang.extend(fi.asn1.DERBoolean,fi.asn1.ASN1Object),fi.asn1.DERInteger=function(e){fi.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fi.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new Hr(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},pi.lang.extend(fi.asn1.DERInteger,fi.asn1.ASN1Object),fi.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fi.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}fi.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},pi.lang.extend(fi.asn1.DERBitString,fi.asn1.ASN1Object),fi.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=fi.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}fi.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},pi.lang.extend(fi.asn1.DEROctetString,fi.asn1.DERAbstractString),fi.asn1.DERNull=function(){fi.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},pi.lang.extend(fi.asn1.DERNull,fi.asn1.ASN1Object),fi.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new Hr(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};fi.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=fi.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},pi.lang.extend(fi.asn1.DERObjectIdentifier,fi.asn1.ASN1Object),fi.asn1.DEREnumerated=function(e){fi.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=fi.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new Hr(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},pi.lang.extend(fi.asn1.DEREnumerated,fi.asn1.ASN1Object),fi.asn1.DERUTF8String=function(e){fi.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},pi.lang.extend(fi.asn1.DERUTF8String,fi.asn1.DERAbstractString),fi.asn1.DERNumericString=function(e){fi.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},pi.lang.extend(fi.asn1.DERNumericString,fi.asn1.DERAbstractString),fi.asn1.DERPrintableString=function(e){fi.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},pi.lang.extend(fi.asn1.DERPrintableString,fi.asn1.DERAbstractString),fi.asn1.DERTeletexString=function(e){fi.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},pi.lang.extend(fi.asn1.DERTeletexString,fi.asn1.DERAbstractString),fi.asn1.DERIA5String=function(e){fi.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},pi.lang.extend(fi.asn1.DERIA5String,fi.asn1.DERAbstractString),fi.asn1.DERUTCTime=function(e){fi.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},pi.lang.extend(fi.asn1.DERUTCTime,fi.asn1.DERAbstractTime),fi.asn1.DERGeneralizedTime=function(e){fi.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},pi.lang.extend(fi.asn1.DERGeneralizedTime,fi.asn1.DERAbstractTime),fi.asn1.DERSequence=function(e){fi.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},pi.lang.extend(fi.asn1.DERSequence,fi.asn1.DERAbstractStructured),fi.asn1.DERSet=function(e){fi.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},pi.lang.extend(fi.asn1.DERSet,fi.asn1.DERAbstractStructured),fi.asn1.DERTaggedObject=function(e){fi.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},pi.lang.extend(fi.asn1.DERTaggedObject,fi.asn1.ASN1Object),function(e,t){function n(){this.constructor=e}Ar(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(mi,di),mi.prototype.parseKey=function(e){try{var t=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){var t;if(void 0===Ir){var n="0123456789ABCDEF";for(Ir={},t=0;t<16;++t)Ir[n.charAt(t)]=t;for(n=n.toLowerCase(),t=10;t<16;++t)Ir[n.charAt(t)]=t;for(t=0;t<8;++t)Ir[" \f\n\r\t \u2028\u2029".charAt(t)]=-1}var r=[],i=0,s=0;for(t=0;t<e.length;++t){var o=e.charAt(t);if("="==o)break;if(-1!=(o=Ir[o])){if(void 0===o)throw new Error("Illegal character at offset "+t);i|=o,++s>=2?(r[r.length]=i,i=0,s=0):i<<=4}}if(s)throw new Error("Hex encoding incomplete: 4 bits missing");return r}(e):_r.unarmor(e),i=Vr.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){t=i.sub[1].getHexStringValue(),this.n=Jr(t,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var s=i.sub[3].getHexStringValue();this.d=Jr(s,16);var o=i.sub[4].getHexStringValue();this.p=Jr(o,16);var a=i.sub[5].getHexStringValue();this.q=Jr(a,16);var c=i.sub[6].getHexStringValue();this.dmp1=Jr(c,16);var l=i.sub[7].getHexStringValue();this.dmq1=Jr(l,16);var u=i.sub[8].getHexStringValue();this.coeff=Jr(u,16)}else{if(2!==i.sub.length)return!1;var d=i.sub[1].sub[0];t=d.sub[0].getHexStringValue(),this.n=Jr(t,16),n=d.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(h){return!1}},mi.prototype.getPrivateBaseKey=function(){var e={array:[new fi.asn1.DERInteger({int:0}),new fi.asn1.DERInteger({bigint:this.n}),new fi.asn1.DERInteger({int:this.e}),new fi.asn1.DERInteger({bigint:this.d}),new fi.asn1.DERInteger({bigint:this.p}),new fi.asn1.DERInteger({bigint:this.q}),new fi.asn1.DERInteger({bigint:this.dmp1}),new fi.asn1.DERInteger({bigint:this.dmq1}),new fi.asn1.DERInteger({bigint:this.coeff})]};return new fi.asn1.DERSequence(e).getEncodedHex()},mi.prototype.getPrivateBaseKeyB64=function(){return kr(this.getPrivateBaseKey())},mi.prototype.getPublicBaseKey=function(){var e=new fi.asn1.DERSequence({array:[new fi.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new fi.asn1.DERNull]}),t=new fi.asn1.DERSequence({array:[new fi.asn1.DERInteger({bigint:this.n}),new fi.asn1.DERInteger({int:this.e})]}),n=new fi.asn1.DERBitString({hex:"00"+t.getEncodedHex()});return new fi.asn1.DERSequence({array:[e,n]}).getEncodedHex()},mi.prototype.getPublicBaseKeyB64=function(){return kr(this.getPublicBaseKey())},mi.wordwrap=function(e,t){if(!e)return e;var n="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})";return e.match(RegExp(n,"g")).join("\n")},mi.prototype.getPrivateKey=function(){var e="-----BEGIN RSA PRIVATE KEY-----\n";return(e+=mi.wordwrap(this.getPrivateBaseKeyB64())+"\n")+"-----END RSA PRIVATE KEY-----"},mi.prototype.getPublicKey=function(){var e="-----BEGIN PUBLIC KEY-----\n";return(e+=mi.wordwrap(this.getPublicBaseKeyB64())+"\n")+"-----END PUBLIC KEY-----"},mi.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},mi.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},mi.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},gi.prototype.setKey=function(e){this.log&&this.key,this.key=new mi(e)},gi.prototype.setPrivateKey=function(e){this.setKey(e)},gi.prototype.setPublicKey=function(e){this.setKey(e)},gi.prototype.decrypt=function(e){try{return this.getKey().decrypt(Er(e))}catch(t){return!1}},gi.prototype.encrypt=function(e){try{return kr(this.getKey().encrypt(e))}catch(t){return!1}},gi.prototype.sign=function(e,t,n){try{return kr(this.getKey().sign(e,t,n))}catch(r){return!1}},gi.prototype.verify=function(e,t,n){try{return this.getKey().verify(e,Er(t),n)}catch(r){return!1}},gi.prototype.getKey=function(e){if(!this.key){if(this.key=new mi,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},gi.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},gi.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},gi.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},gi.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},gi.version="3.0.0-rc.1";var vi,yi,xi={exports:{}},bi=(vi||(vi=1,yi=xi,function(){var e;function t(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new t(null)}var r="undefined"!=typeof navigator;r&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=function(e,t,n,r,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var c=32767&this[e],l=this[e++]>>15,u=a*c+l*o;i=((c=o*c+((32767&u)<<15)+n[r]+(1073741823&i))>>>30)+(u>>>15)+a*l+(i>>>30),n[r++]=1073741823&c}return i},e=30):r&&"Netscape"!=navigator.appName?(t.prototype.am=function(e,t,n,r,i,s){for(;--s>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},e=26):(t.prototype.am=function(e,t,n,r,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var c=16383&this[e],l=this[e++]>>14,u=a*c+l*o;i=((c=o*c+((16383&u)<<14)+n[r]+i)>>28)+(u>>14)+a*l,n[r++]=268435455&c}return i},e=28),t.prototype.DB=e,t.prototype.DM=(1<<e)-1,t.prototype.DV=1<<e,t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-e,t.prototype.F2=2*e-52;var i,s,o=new Array;for(i="0".charCodeAt(0),s=0;s<=9;++s)o[i++]=s;for(i="a".charCodeAt(0),s=10;s<36;++s)o[i++]=s;for(i="A".charCodeAt(0),s=10;s<36;++s)o[i++]=s;function a(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function c(e,t){var n=o[e.charCodeAt(t)];return null==n?-1:n}function l(e){var t=n();return t.fromInt(e),t}function u(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function d(e){this.m=e}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function p(e,t){return e&t}function f(e,t){return e|t}function m(e,t){return e^t}function g(e,t){return e&~t}function v(e){if(0==e)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function y(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function x(){}function b(e){return e}function w(e){this.r2=n(),this.q3=n(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},h.prototype.convert=function(e){var r=n();return e.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),e.s<0&&r.compareTo(t.ZERO)>0&&this.m.subTo(r,r),r},h.prototype.revert=function(e){var t=n();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},t.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},t.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,o=0;--i>=0;){var a=8==r?255&e[i]:c(e,i);a<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&128&e[0]&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},t.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},t.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},t.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},t.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}},t.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),s=r.t;for(n.t=s+i.t;--s>=0;)n[s]=0;for(s=0;s<i.t;++s)n[s+r.t]=r.am(0,i[s],n,s,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},t.prototype.divRemTo=function(e,r,i){var s=e.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),c=this.s,l=e.s,d=this.DB-u(s[s.t-1]);d>0?(s.lShiftTo(d,a),o.lShiftTo(d,i)):(s.copyTo(a),o.copyTo(i));var h=a.t,p=a[h-1];if(0!=p){var f=p*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),m=this.FV/f,g=(1<<this.F1)/f,v=1<<this.F2,y=i.t,x=y-h,b=null==r?n():r;for(a.dlShiftTo(x,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),t.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--x>=0;){var w=i[--y]==p?this.DM:Math.floor(i[y]*m+(i[y-1]+v)*g);if((i[y]+=a.am(0,w,i,x,0,h))<w)for(a.dlShiftTo(x,b),i.subTo(b,i);i[y]<--w;)i.subTo(b,i)}null!=r&&(i.drShiftTo(h,r),c!=l&&t.ZERO.subTo(r,r)),i.t=h,i.clamp(),d>0&&i.rShiftTo(d,i),c<0&&t.ZERO.subTo(i,i)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,r){if(e>4294967295||e<1)return t.ONE;var i=n(),s=n(),o=r.convert(this),a=u(e)-1;for(o.copyTo(i);--a>=0;)if(r.sqrTo(i,s),(e&1<<a)>0)r.mulTo(s,o,i);else{var c=i;i=s,s=c}return r.revert(i)},t.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,s="",o=this.t,c=this.DB-o*this.DB%t;if(o-- >0)for(c<this.DB&&(n=this[o]>>c)>0&&(i=!0,s=a(n));o>=0;)c<t?(n=(this[o]&(1<<c)-1)<<t-c,n|=this[--o]>>(c+=this.DB-t)):(n=this[o]>>(c-=t)&r,c<=0&&(c+=this.DB,--o)),n>0&&(i=!0),i&&(s+=a(n));return i?s:"0"},t.prototype.negate=function(){var e=n();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var r=n();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r},t.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new d(t):new h(t),this.exp(e,n)},t.ZERO=l(0),t.ONE=l(1),x.prototype.convert=b,x.prototype.revert=b,x.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},x.prototype.sqrTo=function(e,t){e.squareTo(t)},w.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},w.prototype.revert=function(e){return e},w.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},w.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},w.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var j,N,T,S=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/S[S.length-1];function k(){var e;e=(new Date).getTime(),N[T++]^=255&e,N[T++]^=e>>8&255,N[T++]^=e>>16&255,N[T++]^=e>>24&255,T>=O&&(T-=O)}if(t.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},t.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=l(r),s=n(),o=n(),a="";for(this.divRemTo(i,s,o);s.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,s.divRemTo(i,s,o);return o.intValue().toString(e)+a},t.prototype.fromRadix=function(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),i=Math.pow(n,r),s=!1,o=0,a=0,l=0;l<e.length;++l){var u=c(e,l);u<0?"-"==e.charAt(l)&&0==this.signum()&&(s=!0):(a=n*a+u,++o>=r&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(n,o)),this.dAddOffset(a,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,n,r){if("number"==typeof n)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),f,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,s=7&e;i.length=1+(e>>3),n.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},t.prototype.bitwiseTo=function(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},t.prototype.changeBit=function(e,n){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,n,r),r},t.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},t.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},t.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},t.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},t.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},t.prototype.millerRabin=function(e){var r=this.subtract(t.ONE),i=r.getLowestSetBit();if(i<=0)return!1;var s=r.shiftRight(i);(e=e+1>>1)>S.length&&(e=S.length);for(var o=n(),a=0;a<e;++a){o.fromInt(S[Math.floor(Math.random()*S.length)]);var c=o.modPow(s,this);if(0!=c.compareTo(t.ONE)&&0!=c.compareTo(r)){for(var l=1;l++<i&&0!=c.compareTo(r);)if(0==(c=c.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=c.compareTo(r))return!1}}return!0},t.prototype.clone=function(){var e=n();return this.copyTo(e),e},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),128&n&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},t.prototype.equals=function(e){return 0==this.compareTo(e)},t.prototype.min=function(e){return this.compareTo(e)<0?this:e},t.prototype.max=function(e){return this.compareTo(e)>0?this:e},t.prototype.and=function(e){var t=n();return this.bitwiseTo(e,p,t),t},t.prototype.or=function(e){var t=n();return this.bitwiseTo(e,f,t),t},t.prototype.xor=function(e){var t=n();return this.bitwiseTo(e,m,t),t},t.prototype.andNot=function(e){var t=n();return this.bitwiseTo(e,g,t),t},t.prototype.not=function(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},t.prototype.shiftLeft=function(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},t.prototype.shiftRight=function(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},t.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+v(this[e]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=y(this[n]^t);return e},t.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},t.prototype.setBit=function(e){return this.changeBit(e,f)},t.prototype.clearBit=function(e){return this.changeBit(e,g)},t.prototype.flipBit=function(e){return this.changeBit(e,m)},t.prototype.add=function(e){var t=n();return this.addTo(e,t),t},t.prototype.subtract=function(e){var t=n();return this.subTo(e,t),t},t.prototype.multiply=function(e){var t=n();return this.multiplyTo(e,t),t},t.prototype.divide=function(e){var t=n();return this.divRemTo(e,t,null),t},t.prototype.remainder=function(e){var t=n();return this.divRemTo(e,null,t),t},t.prototype.divideAndRemainder=function(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)},t.prototype.modPow=function(e,t){var r,i,s=e.bitLength(),o=l(1);if(s<=0)return o;r=s<18?1:s<48?3:s<144?4:s<768?5:6,i=s<8?new d(t):t.isEven()?new w(t):new h(t);var a=new Array,c=3,p=r-1,f=(1<<r)-1;if(a[1]=i.convert(this),r>1){var m=n();for(i.sqrTo(a[1],m);c<=f;)a[c]=n(),i.mulTo(m,a[c-2],a[c]),c+=2}var g,v,y=e.t-1,x=!0,b=n();for(s=u(e[y])-1;y>=0;){for(s>=p?g=e[y]>>s-p&f:(g=(e[y]&(1<<s+1)-1)<<p-s,y>0&&(g|=e[y-1]>>this.DB+s-p)),c=r;!(1&g);)g>>=1,--c;if((s-=c)<0&&(s+=this.DB,--y),x)a[g].copyTo(o),x=!1;else{for(;c>1;)i.sqrTo(o,b),i.sqrTo(b,o),c-=2;c>0?i.sqrTo(o,b):(v=o,o=b,b=v),i.mulTo(b,a[g],o)}for(;y>=0&&!(e[y]&1<<s);)i.sqrTo(o,b),v=o,o=b,b=v,--s<0&&(s=this.DB-1,--y)}return i.revert(o)},t.prototype.modInverse=function(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var r=e.clone(),i=this.clone(),s=l(1),o=l(0),a=l(0),c=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(i)>=0?(r.subTo(i,r),n&&s.subTo(a,s),o.subTo(c,o)):(i.subTo(r,i),n&&a.subTo(s,a),c.subTo(o,c))}return 0!=i.compareTo(t.ONE)?t.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},t.prototype.pow=function(e){return this.exp(e,new x)},t.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},t.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=S[S.length-1]){for(t=0;t<S.length;++t)if(n[0]==S[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<S.length;){for(var r=S[t],i=t+1;i<S.length&&r<C;)r*=S[i++];for(r=n.modInt(r);t<i;)if(r%S[t++]==0)return!1}return n.millerRabin(e)},t.prototype.square=function(){var e=n();return this.squareTo(e),e},t.prototype.Barrett=w,null==N){var E;if(N=new Array,T=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var I=new Uint8Array(32);for(window.crypto.getRandomValues(I),E=0;E<32;++E)N[T++]=I[E]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var P=window.crypto.random(32);for(E=0;E<P.length;++E)N[T++]=255&P.charCodeAt(E)}for(;T<O;)E=Math.floor(65536*Math.random()),N[T++]=E>>>8,N[T++]=255&E;T=0,k()}function A(){if(null==j){for(k(),(j=new D).init(N),T=0;T<N.length;++T)N[T]=0;T=0}return j.next()}function _(){}function D(){this.i=0,this.j=0,this.S=new Array}_.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=A()},D.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},D.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var O=256;yi.exports={default:t,BigInteger:t,SecureRandom:_}}.call(xi.exports)),xi.exports),wi=new bi.BigInteger("3"),ji=function(){function e(e,t){this.x=t,this.q=e}return e.prototype.equals=function(e){return e===this||this.q.equals(e.q)&&this.x.equals(e.x)},e.prototype.toBigInteger=function(){return this.x},e.prototype.negate=function(){return new e(this.q,this.x.negate().mod(this.q))},e.prototype.add=function(t){return new e(this.q,this.x.add(t.toBigInteger()).mod(this.q))},e.prototype.subtract=function(t){return new e(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},e.prototype.multiply=function(t){return new e(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},e.prototype.divide=function(t){return new e(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},e.prototype.square=function(){return new e(this.q,this.x.square().mod(this.q))},e}(),Ni=function(){function e(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?bi.BigInteger.ONE:r,this.zinv=null}return e.prototype.getX=function(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},e.prototype.getY=function(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},e.prototype.equals=function(e){return e===this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(bi.BigInteger.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(bi.BigInteger.ZERO))},e.prototype.isInfinity=function(){return null===this.x&&null===this.y||this.z.equals(bi.BigInteger.ZERO)&&!this.y.toBigInteger().equals(bi.BigInteger.ZERO)},e.prototype.negate=function(){return new e(this.curve,this.x,this.y.negate(),this.z)},e.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var n=this.x.toBigInteger(),r=this.y.toBigInteger(),i=this.z,s=t.x.toBigInteger(),o=t.y.toBigInteger(),a=t.z,c=this.curve.q,l=n.multiply(a).mod(c),u=s.multiply(i).mod(c),d=l.subtract(u),h=r.multiply(a).mod(c),p=o.multiply(i).mod(c),f=h.subtract(p);if(bi.BigInteger.ZERO.equals(d))return bi.BigInteger.ZERO.equals(f)?this.twice():this.curve.infinity;var m=l.add(u),g=i.multiply(a).mod(c),v=d.square().mod(c),y=d.multiply(v).mod(c),x=g.multiply(f.square()).subtract(m.multiply(v)).mod(c),b=d.multiply(x).mod(c),w=f.multiply(v.multiply(l).subtract(x)).subtract(h.multiply(y)).mod(c),j=y.multiply(g).mod(c);return new e(this.curve,this.curve.fromBigInteger(b),this.curve.fromBigInteger(w),j)},e.prototype.twice=function(){if(this.isInfinity())return this;if(!this.y.toBigInteger().signum())return this.curve.infinity;var t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=this.z,i=this.curve.q,s=this.curve.a.toBigInteger(),o=t.square().multiply(wi).add(s.multiply(r.square())).mod(i),a=n.shiftLeft(1).multiply(r).mod(i),c=n.square().mod(i),l=c.multiply(t).multiply(r).mod(i),u=a.square().mod(i),d=o.square().subtract(l.shiftLeft(3)).mod(i),h=a.multiply(d).mod(i),p=o.multiply(l.shiftLeft(2).subtract(d)).subtract(u.shiftLeft(1).multiply(c)).mod(i),f=a.multiply(u).mod(i);return new e(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(p),f)},e.prototype.multiply=function(e){if(this.isInfinity())return this;if(!e.signum())return this.curve.infinity;for(var t=e.multiply(wi),n=this.negate(),r=this,i=t.bitLength()-2;i>0;i--){r=r.twice();var s=t.testBit(i);s!==e.testBit(i)&&(r=r.add(s?this:n))}return r},e}(),Ti=function(){function e(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new Ni(this,null,null)}return e.prototype.equals=function(e){return e===this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},e.prototype.fromBigInteger=function(e){return new ji(this.q,e)},e.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new Ni(this,this.fromBigInteger(new bi.BigInteger(n,16)),this.fromBigInteger(new bi.BigInteger(r,16)))}},e}(),Si=new bi.SecureRandom,Ci=Pi(),ki=Ci.curve,Ei=Ci.G,Ii=Ci.n;function Pi(){var e=new bi.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),t=new bi.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),n=new bi.BigInteger("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),r=new Ti(e,t,n),i=r.decodePointHex("0432C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0");return{curve:r,G:i,n:new bi.BigInteger("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16)}}function Ai(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}function _i(e){return e.map(function(e){return 1===(e=e.toString(16)).length?"0"+e:e}).join("")}function Di(e){var t=[],n=e.length;n%2!=0&&(e=Ai(e,n+1)),n=e.length;for(var r=0;r<n;r+=2)t.push(parseInt(e.substr(r,2),16));return t}function Oi(e,t){for(var n=[],r=~~(t/8),i=t%8,s=0,o=e.length;s<o;s++)n[s]=(e[(s+r)%o]<<i&255)+(e[(s+r+1)%o]>>>8-i&255);return n}function Li(e,t){for(var n=[],r=e.length-1;r>=0;r--)n[r]=255&(e[r]^t[r]);return n}function Ri(e,t){for(var n=[],r=e.length-1;r>=0;r--)n[r]=e[r]&t[r]&255;return n}function Bi(e,t){for(var n=[],r=e.length-1;r>=0;r--)n[r]=255&(e[r]|t[r]);return n}function Fi(e,t){for(var n=[],r=0,i=e.length-1;i>=0;i--){var s=e[i]+t[i]+r;s>255?(r=1,n[i]=255&s):(r=0,n[i]=255&s)}return n}function Vi(e){return Li(Li(e,Oi(e,9)),Oi(e,17))}function Mi(e){return Li(Li(e,Oi(e,15)),Oi(e,23))}function Ui(e,t,n,r){return r>=0&&r<=15?Li(Li(e,t),n):Bi(Bi(Ri(e,t),Ri(e,n)),Ri(t,n))}function qi(e,t,n,r){return r>=0&&r<=15?Li(Li(e,t),n):Bi(Ri(e,t),Ri(function(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=255&~e[n];return t}(e),n))}function Hi(e,t){for(var n=[],r=[],i=0;i<16;i++){var s=4*i;n.push(t.slice(s,s+4))}for(var o=16;o<68;o++)n.push(Li(Li(Mi(Li(Li(n[o-16],n[o-9]),Oi(n[o-3],15))),Oi(n[o-13],7)),n[o-6]));for(o=0;o<64;o++)r.push(Li(n[o],n[o+4]));var a,c,l,u,d=[121,204,69,25],h=[122,135,157,138],p=e.slice(0,4),f=e.slice(4,8),m=e.slice(8,12),g=e.slice(12,16),v=e.slice(16,20),y=e.slice(20,24),x=e.slice(24,28),b=e.slice(28,32);for(o=0;o<64;o++){var w=o>=0&&o<=15?d:h;c=Li(a=Oi(Fi(Fi(Oi(p,12),v),Oi(w,o)),7),Oi(p,12)),l=Fi(Fi(Fi(Ui(p,f,m,o),g),c),r[o]),u=Fi(Fi(Fi(qi(v,y,x,o),b),a),n[o]),g=m,m=Oi(f,9),f=p,p=l,b=x,x=Oi(y,19),y=v,v=Vi(u)}return Li([].concat(p,f,m,g,v,y,x,b),e)}function zi(e){var t=8*e.length,n=t%512;n=n>=448?512-n%448-1:448-n-1;for(var r=new Array((n-7)/8),i=0,s=r.length;i<s;i++)r[i]=0;var o=[];for(t=t.toString(2),i=7;i>=0;i--)if(t.length>8){var a=t.length-8;o[i]=parseInt(t.substr(a),2),t=t.substr(0,a)}else t.length>0?(o[i]=parseInt(t,2),t=""):o[i]=0;var c=[].concat(e,[128],r,o),l=c.length/64,u=[115,128,22,111,73,20,178,185,23,36,66,215,218,138,6,0,169,111,48,188,22,49,56,170,227,141,238,77,176,251,14,78];for(i=0;i<l;i++)a=64*i,u=Hi(u,c.slice(a,a+64));return u}var $i=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Pi();var Wi=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Gi=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function Zi(){for(var e=navigator.mimeTypes,t=[],n=0;n<e.length;n++){var r=e[n];t.push({type:r.type,description:r.description,suffixes:r.suffixes})}return JSON.stringify(t)}function Ji(){if(navigator.cookieEnabled)return navigator.cookieEnabled;document.cookie="__testAuthingCookie=1";var e=-1!==document.cookie.indexOf("__testAuthingCookie=");return document.cookie="__testAuthingCookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e}function Yi(){var e=navigator.userAgent,t="Unknown";return e.includes("Chrome")?t="Google":e.includes("Firefox")?t="Mozilla":e.includes("Trident")||e.includes("MSIE")?t="Microsoft":e.includes("Edge")?t="Microsoft (EdgeHTML)":e.includes("Edg")?t="Microsoft (Chromium)":e.includes("Safari")&&(t="Apple"),t}function Ki(){var e=navigator.userAgent,t="Unknown";return-1!==e.indexOf("Trident")?t="Trident":-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML")?t="Gecko":-1!==e.indexOf("WebKit")?t="WebKit":-1!==e.indexOf("Blink")&&(t="Blink"),t}function Xi(){var e=navigator.userAgent;return e.includes("Firefox")||e.includes("Chrome")?"20030107":e.includes("Trident")||e.includes("MSIE")?"20000101":"0"}function Qi(){var e=navigator.userAgent,t="Unknown";return/Chrome\/([\d.]+)/.test(e)?t=e.match(/Chrome\/([\d.]+)/)[1]:/Firefox\/([\d.]+)/.test(e)?t=e.match(/Firefox\/([\d.]+)/)[1]:/MSIE ([\d.]+)/.test(e)?t=e.match(/MSIE ([\d.]+)/)[1]:/Trident\/[\d](?:[\d.]+)?; rv:([0-9.]+)/.test(e)&&(t=e.match(/Trident\/[\d](?:[\d.]+)?; rv:([0-9.]+)/)[1]),t}function es(){var e=navigator.userAgent,t="Unknown";return-1!==e.indexOf("Chrome")?t="Chrome":-1!==e.indexOf("Firefox")?t="Firefox":-1!==e.indexOf("Safari")?t="Safari":-1!==e.indexOf("Edge")?t="Edge":-1!==e.indexOf("Trident")&&(t="Internet Explorer"),t}var ts=function(e){return{userAgentFingerprint:e.userAgent,audioFingerprint:e.audio,canvasFingerprint:e.canvas,screenResolutionFingerprint:e.screenResolution,webglFingerprint:e.webgl,fontsFingerprint:e.fonts,pluginsFingerprint:e.plugins}},ns=function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t?{renderer:t.getParameter(t.RENDERER),vendor:t.getParameter(t.VENDOR),version:t.getParameter(t.VERSION),shadingLanguageVersion:t.getParameter(t.SHADING_LANGUAGE_VERSION),maxVertexAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE)}:""},rs=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},is=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ss=function(e,t){var n=void 0===t?{w:585,h:649}:t,r=n.w,i=n.h,s=void 0!==window.screenLeft?window.screenLeft:window.screenX,o=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=a/window.screen.availWidth,u=(a-r)/2/l+s,d=(c-i)/2/l+o,h=window.open(e,"_blank","\n      toolbar=no,\n      menubar=no,\n      scrollbars=no,\n      resizable=no,\n      location=no,\n      status=no\n      width=".concat(r/l,",\n      height=").concat(i/l,",\n      top=").concat(d,",\n      left=").concat(u,"\n      "));return null==h||h.focus(),h},os=function(e,t){var n=document.createElement("style"),r="\n    .".concat(e," {\n      ").concat(t,"\n    }\n  "),i=document.createTextNode(r);n.appendChild(i),document.head.appendChild(n)},as=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},cs=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.dataType,s=r.value;i===hn.Number||i===hn.Boolean?r.value=JSON.parse(s):i===hn.Datetime?r.value=new Date(parseInt(s)):i===hn.Object&&(r.value=JSON.parse(s))}return e},ls=function(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))},us=function(e){for(var t=0,n=e=e||[];t<n.length;t++){var r=(c=n[t]).dataType,i=c.value;r===hn.Number||r===hn.Boolean?c.value=JSON.parse(i):r===hn.Datetime?c.value=ls(i)?new Date(parseInt(i)):new Date(i):r===hn.Object&&(c.value=JSON.parse(i))}for(var s={},o=0,a=e;o<a.length;o++){var c;s[(c=a[o]).key]=c.value}return s},ds=function(){return"undefined"!=typeof navigator&&/MicroMessenger/i.test(null===navigator||void 0===navigator?void 0:navigator.userAgent)};function hs(e){for(var t=[],n=97;n<123;n++)t.push(String.fromCharCode(n));for(var r=[];e--;){var i=Math.floor(16*Math.random());r.push(t[i])}return r.join("")}var ps=function(e,t){return new Promise(function(n,r){var i=new FormData;i.append("file",e,e instanceof Blob?"personal.jpeg":void 0);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===this.readyState)try{var e=JSON.parse(this.responseText),t=e.code,i=e.message,s=e.data;200!==t&&r({code:t,message:i}),n(s)}catch(o){t=500,i="上传图片失败, error = ".concat(o.message),r({code:t,message:i})}},s.open("POST",t),s.send(i)})};function fs(e){var t=e.url,n=e.accept,r=e.multiple;return new Promise(function(e,i){var s=document.createElement("input");s.type="file",s.accept=n,s.multiple=r,s.onchange=function(){var n=s.files;if(r){for(var o=[],a=0;a<n.length;)o.push(ps(n[a],t)),a++;Promise.all(o).then(function(t){return e(t)}).catch(function(e){return i(e)})}else{var c=n[0];ps(c,t).then(function(t){return e(t)}).catch(function(e){return i(e)})}},s.click()})}var ms=function(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.push({key:i,value:e[i]})}return t};function gs(e,t){return void 0===t&&(t=32),$.SHA256(e).toString($.enc.Hex).substring(0,t)}function vs(e){void 0===e&&(e=30);for(var t="",n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}var ys,xs,bs,ws,js,Ns,Ts,Ss,Cs,ks,Es,Is,Ps,As,_s,Ds,Os,Ls,Rs,Bs,Fs,Vs,Ms,Us,qs,Hs,zs,$s,Ws,Gs,Zs,Js,Ys,Ks,Xs,Qs,eo,to,no,ro,io,so,oo,ao,co,lo,uo,ho,po,fo,mo,go,vo,yo,xo,bo,wo,jo,No,To=function(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var s=i[r];t(e[s],s)&&(n[s]=e[s])}return n},So=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Co=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ko=function(e,t,n){return So(void 0,void 0,void 0,function(){var r,i;return Co(this,function(s){switch(s.label){case 0:return r="\n    mutation resetPassword($phone: String, $phoneCountryCode: String, $email: String, $code: String!, $newPassword: String!) {\n  resetPassword(phone: $phone, phoneCountryCode: $phoneCountryCode, email: $email, code: $code, newPassword: $newPassword) {\n    message\n    code\n  }\n}\n    ",[4,t.getToken()];case 1:return i=s.sent(),[2,e.request({query:r,token:i,variables:n})]}})})},Eo=function(e,t,n){return So(void 0,void 0,void 0,function(){var r,i;return Co(this,function(s){switch(s.label){case 0:return r="\n    query udv($targetType: UDFTargetType!, $targetId: String!) {\n  udv(targetType: $targetType, targetId: $targetId) {\n    key\n    dataType\n    value\n    label\n  }\n}\n    ",[4,t.getToken()];case 1:return i=s.sent(),[2,e.request({query:r,token:i,variables:n})]}})})},Io=function(e,t,n){return So(void 0,void 0,void 0,function(){var r,i;return Co(this,function(s){switch(s.label){case 0:return r="\n    mutation removeUdv($targetType: UDFTargetType!, $targetId: String!, $key: String!) {\n  removeUdv(targetType: $targetType, targetId: $targetId, key: $key) {\n    key\n    dataType\n    value\n    label\n  }\n}\n    ",[4,t.getToken()];case 1:return i=s.sent(),[2,e.request({query:r,token:i,variables:n})]}})})},Po="4.21.8",Ao={exports:{}};function _o(){return xs||(xs=1,ys=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}),ys}function Do(){if(ws)return bs;ws=1;var e=_o(),t=Object.prototype.toString;function n(e){return Array.isArray(e)}function r(e){return void 0===e}function i(e){return"[object ArrayBuffer]"===t.call(e)}function s(e){return null!==e&&"object"==typeof e}function o(e){if("[object Object]"!==t.call(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function a(e){return"[object Function]"===t.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}return bs={isArray:n,isArrayBuffer:i,isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===t.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&i(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:o,isUndefined:r,isDate:function(e){return"[object Date]"===t.call(e)},isFile:function(e){return"[object File]"===t.call(e)},isBlob:function(e){return"[object Blob]"===t.call(e)},isFunction:a,isStream:function(e){return s(e)&&a(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===t.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,i){o(t[i])&&o(r)?t[i]=e(t[i],r):o(r)?t[i]=e({},r):n(r)?t[i]=r.slice():t[i]=r}for(var i=0,s=arguments.length;i<s;i++)c(arguments[i],r);return t},extend:function(t,n,r){return c(n,function(n,i){t[i]=r&&"function"==typeof n?e(n,r):n}),t},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},bs}function Oo(){if(Ns)return js;Ns=1;var e=Do();function t(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return js=function(n,r,i){if(!r)return n;var s;if(i)s=i(r);else if(e.isURLSearchParams(r))s=r.toString();else{var o=[];e.forEach(r,function(n,r){null!=n&&(e.isArray(n)?r+="[]":n=[n],e.forEach(n,function(n){e.isDate(n)?n=n.toISOString():e.isObject(n)&&(n=JSON.stringify(n)),o.push(t(r)+"="+t(n))}))}),s=o.join("&")}if(s){var a=n.indexOf("#");-1!==a&&(n=n.slice(0,a)),n+=(-1===n.indexOf("?")?"?":"&")+s}return n}}function Lo(){return Is?Es:(Is=1,Es=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e})}function Ro(){return As?Ps:(As=1,Ps={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1})}function Bo(){if(Ds)return _s;Ds=1;var e=Lo();return _s=function(t,n,r,i,s){var o=new Error(t);return e(o,n,r,i,s)}}function Fo(){if(Js)return Zs;function e(e){this.message=e}return Js=1,e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Zs=e}function Vo(){if(Ks)return Ys;Ks=1;var e=Do(),t=function(){if(Ls)return Os;Ls=1;var e=Bo();return Os=function(t,n,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?n(e("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}}(),n=function(){if(Bs)return Rs;Bs=1;var e=Do();return Rs=e.isStandardBrowserEnv()?function(){return{write:function(t,n,r,i,s,o){var a=[];a.push(t+"="+encodeURIComponent(n)),e.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),e.isString(i)&&a.push("path="+i),e.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()}(),r=Oo(),i=function(){if(Hs)return qs;Hs=1;var e=Vs?Fs:(Vs=1,Fs=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),t=Us?Ms:(Us=1,Ms=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e});return qs=function(n,r){return n&&!e(r)?t(n,r):r}}(),s=function(){if($s)return zs;$s=1;var e=Do(),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zs=function(n){var r,i,s,o={};return n?(e.forEach(n.split("\n"),function(n){if(s=n.indexOf(":"),r=e.trim(n.substr(0,s)).toLowerCase(),i=e.trim(n.substr(s+1)),r){if(o[r]&&t.indexOf(r)>=0)return;o[r]="set-cookie"===r?(o[r]?o[r]:[]).concat([i]):o[r]?o[r]+", "+i:i}}),o):o}}(),o=function(){if(Gs)return Ws;Gs=1;var e=Do();return Ws=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(n){var r=e.isString(n)?i(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()}(),a=Bo(),c=Ro(),l=Fo();return Ys=function(u){return new Promise(function(d,h){var p,f=u.data,m=u.headers,g=u.responseType;function v(){u.cancelToken&&u.cancelToken.unsubscribe(p),u.signal&&u.signal.removeEventListener("abort",p)}e.isFormData(f)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(u.auth){var x=u.auth.username||"",b=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";m.Authorization="Basic "+btoa(x+":"+b)}var w=i(u.baseURL,u.url);function j(){if(y){var e="getAllResponseHeaders"in y?s(y.getAllResponseHeaders()):null,n={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:e,config:u,request:y};t(function(e){d(e),v()},function(e){h(e),v()},n),y=null}}if(y.open(u.method.toUpperCase(),r(w,u.params,u.paramsSerializer),!0),y.timeout=u.timeout,"onloadend"in y?y.onloadend=j:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(j)},y.onabort=function(){y&&(h(a("Request aborted",u,"ECONNABORTED",y)),y=null)},y.onerror=function(){h(a("Network Error",u,null,y)),y=null},y.ontimeout=function(){var e=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",t=u.transitional||c;u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),h(a(e,u,t.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},e.isStandardBrowserEnv()){var N=(u.withCredentials||o(w))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;N&&(m[u.xsrfHeaderName]=N)}"setRequestHeader"in y&&e.forEach(m,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)}),e.isUndefined(u.withCredentials)||(y.withCredentials=!!u.withCredentials),g&&"json"!==g&&(y.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&y.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(p=function(e){y&&(h(!e||e&&e.type?new l("canceled"):e),y.abort(),y=null)},u.cancelToken&&u.cancelToken.subscribe(p),u.signal&&(u.signal.aborted?p():u.signal.addEventListener("abort",p))),f||(f=null),y.send(f)})}}function Mo(){if(Qs)return Xs;Qs=1;var e=Do(),t=function(){if(ks)return Cs;ks=1;var e=Do();return Cs=function(t,n){e.forEach(t,function(e,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(t[n]=e,delete t[r])})}}(),n=Lo(),r=Ro(),i={"Content-Type":"application/x-www-form-urlencoded"};function s(t,n){!e.isUndefined(t)&&e.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}var o,a={transitional:r,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(o=Vo()),o),transformRequest:[function(n,r){return t(r,"Accept"),t(r,"Content-Type"),e.isFormData(n)||e.isArrayBuffer(n)||e.isBuffer(n)||e.isStream(n)||e.isFile(n)||e.isBlob(n)?n:e.isArrayBufferView(n)?n.buffer:e.isURLSearchParams(n)?(s(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):e.isObject(n)||r&&"application/json"===r["Content-Type"]?(s(r,"application/json"),function(t){if(e.isString(t))try{return(0,JSON.parse)(t),e.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(0,JSON.stringify)(t)}(n)):n}],transformResponse:[function(t){var r=this.transitional||a.transitional,i=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||s&&e.isString(t)&&t.length)try{return JSON.parse(t)}catch(c){if(o){if("SyntaxError"===c.name)throw n(c,this,"E_JSON_PARSE");throw c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(e){a.headers[e]={}}),e.forEach(["post","put","patch"],function(t){a.headers[t]=e.merge(i)}),Xs=a}function Uo(){return ro?no:(ro=1,no=function(e){return!(!e||!e.__CANCEL__)})}function qo(){if(ao)return oo;ao=1;var e=Do();return oo=function(t,n){n=n||{};var r={};function i(t,n){return e.isPlainObject(t)&&e.isPlainObject(n)?e.merge(t,n):e.isPlainObject(n)?e.merge({},n):e.isArray(n)?n.slice():n}function s(r){return e.isUndefined(n[r])?e.isUndefined(t[r])?void 0:i(void 0,t[r]):i(t[r],n[r])}function o(t){if(!e.isUndefined(n[t]))return i(void 0,n[t])}function a(r){return e.isUndefined(n[r])?e.isUndefined(t[r])?void 0:i(void 0,t[r]):i(void 0,n[r])}function c(e){return e in n?i(t[e],n[e]):e in t?i(void 0,t[e]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return e.forEach(Object.keys(t).concat(Object.keys(n)),function(t){var n=l[t]||s,i=n(t);e.isUndefined(i)&&n!==c||(r[t]=i)}),r}}function Ho(){return lo?co:(lo=1,co={version:"0.26.1"})}function zo(){if(fo)return po;fo=1;var e=Do(),t=Oo(),n=function(){if(Ss)return Ts;Ss=1;var e=Do();function t(){this.handlers=[]}return t.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},t.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},t.prototype.forEach=function(t){e.forEach(this.handlers,function(e){null!==e&&t(e)})},Ts=t}(),r=function(){if(so)return io;so=1;var e=Do(),t=function(){if(to)return eo;to=1;var e=Do(),t=Mo();return eo=function(n,r,i){var s=this||t;return e.forEach(i,function(e){n=e.call(s,n,r)}),n}}(),n=Uo(),r=Mo(),i=Fo();function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new i("canceled")}return io=function(i){return s(i),i.headers=i.headers||{},i.data=t.call(i,i.data,i.headers,i.transformRequest),i.headers=e.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete i.headers[e]}),(i.adapter||r.adapter)(i).then(function(e){return s(i),e.data=t.call(i,e.data,e.headers,i.transformResponse),e},function(e){return n(e)||(s(i),e&&e.response&&(e.response.data=t.call(i,e.response.data,e.response.headers,i.transformResponse))),Promise.reject(e)})}}(),i=qo(),s=function(){if(ho)return uo;ho=1;var e=Ho().version,t={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){t[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}});var n={};return t.transitional=function(t,r,i){return function(s,o,a){if(!1===t)throw new Error(function(t,n){return"[Axios v"+e+"] Transitional option '"+t+"'"+n+(i?". "+i:"")}(o," has been removed"+(r?" in "+r:"")));return r&&!n[o]&&(n[o]=!0),!t||t(s,o,a)}},uo={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var a=e[s],c=void 0===a||o(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:t}}(),o=s.validators;function a(e){this.defaults=e,this.interceptors={request:new n,response:new n}}return a.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=i(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&s.assertOptions(n,{silentJSONParsing:o.transitional(o.boolean),forcedJSONParsing:o.transitional(o.boolean),clarifyTimeoutError:o.transitional(o.boolean)},!1);var a=[],c=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});var l,u=[];if(this.interceptors.response.forEach(function(e){u.push(e.fulfilled,e.rejected)}),!c){var d=[r,void 0];for(Array.prototype.unshift.apply(d,a),d=d.concat(u),l=Promise.resolve(t);d.length;)l=l.then(d.shift(),d.shift());return l}for(var h=t;a.length;){var p=a.shift(),f=a.shift();try{h=p(h)}catch(m){f(m);break}}try{l=r(h)}catch(m){return Promise.reject(m)}for(;u.length;)l=l.then(u.shift(),u.shift());return l},a.prototype.getUri=function(e){return e=i(this.defaults,e),t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},e.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,n){return this.request(i(n||{},{method:e,url:t,data:(n||{}).data}))}}),e.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,n,r){return this.request(i(r||{},{method:e,url:t,data:n}))}}),po=a}const $o=O(No?jo:(No=1,jo=function(){if(wo)return Ao.exports;wo=1;var e=Do(),t=_o(),n=zo(),r=qo(),i=function i(s){var o=new n(s),a=t(n.prototype.request,o);return e.extend(a,n.prototype,o),e.extend(a,o),a.create=function(e){return i(r(s,e))},a}(Mo());return i.Axios=n,i.Cancel=Fo(),i.CancelToken=function(){if(go)return mo;go=1;var e=Fo();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var r=this;this.promise.then(function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}}),this.promise.then=function(e){var t,n=new Promise(function(e){r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t(function(t){r.reason||(r.reason=new e(t),n(r.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t(function(t){e=t}),cancel:e}},mo=t}(),i.isCancel=Uo(),i.VERSION=Ho().version,i.all=function(e){return Promise.all(e)},i.spread=yo?vo:(yo=1,vo=function(e){return function(t){return e.apply(null,t)}}),i.isAxiosError=function(){if(bo)return xo;bo=1;var e=Do();return xo=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),Ao.exports=i,Ao.exports.default=i,Ao.exports}()));var Wo,Go,Zo,Jo,Yo,Ko=function(){return Ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ko.apply(this,arguments)},Xo=function(){function e(e,t){this.endpoint=e,this.options=t,this.axios=$o.create({withCredentials:!0})}return e.prototype.setOptions=function(e){this.options=e},e.prototype.request=function(e){var t,n,r,i,s,o;return r=this,i=void 0,o=function(){var r,i,s,o,a,c,l,u,d,h,p,f,m,g=this;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(v){switch(v.label){case 0:r=e.query,i=e.token,s=e.variables,(o={"content-type":"application/json"})[this.options.headers["app-id"]]=this.options.appId||"",o[this.options.headers["tenant-id"]]=this.options.tenantId,o[this.options.headers["userpool-id"]]=this.options.userPoolId||"",o[this.options.headers["request-from"]]=this.options.requestFrom||"sdk",o[this.options.headers["sdk-version"]]="js:".concat(Po),o[this.options.headers.lang]=this.options.lang||"",i&&(o.Authorization="Bearer ".concat(i)),a=null,c=null,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.axios({url:this.endpoint,data:{query:r,variables:s},method:"post",headers:Ko({},To(o,function(e){return!!e})),timeout:this.options.timeout})];case 2:return l=v.sent().data,a=l.data,c=l.errors,[3,4];case 3:throw u=v.sent(),d=u.code||(null===(t=null==u?void 0:u.response)||void 0===t?void 0:t.status),h=u.message||(null===(n=null==u?void 0:u.response)||void 0===n?void 0:n.data),this.options.onError(d||500,u.message,h),{code:d||500,message:u.message,data:h};case 4:if((null==c?void 0:c.length)>0)throw p=null,f=null,m=null,c.map(function(e){var t=e.message,n=t.code,r=t.message,i=t.data;f=n,p=r,m=i,g.options.onError(n,r,m)}),{code:f,message:p,data:m};return[2,a]}})},new((s=void 0)||(s=Promise))(function(e,t){function n(e){try{c(o.next(e))}catch(n){t(n)}}function a(e){try{c(o.throw(e))}catch(n){t(n)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s(function(e){e(r)})).then(n,a)}c((o=o.apply(r,i||[])).next())})},e}(),Qo={exports:{}};const ea=O(function(){if(Yo)return Qo.exports;Yo=1;var e=function(){if(Jo)return Zo;Jo=1;var e=function(){if(Go)return Wo;function e(e){this.message=e}return Go=1,e.prototype=new Error,e.prototype.name="InvalidCharacterError",Wo="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,s=0,o=0,a="";i=n.charAt(o++);~i&&(r=s%4?64*r+i:i,s++%4)?a+=String.fromCharCode(255&r>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a}}();return Zo=function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(e(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(n)}catch(r){return e(n)}}}();function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidTokenError",Qo.exports=function(n,r){if("string"!=typeof n)throw new t("Invalid token specified");var i=!0===(r=r||{}).header?0:1;try{return JSON.parse(e(n.split(".")[i]))}catch(s){throw new t("Invalid token specified: "+s.message)}},Qo.exports.InvalidTokenError=t,Qo.exports}());var ta=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),na=function(){return na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},na.apply(this,arguments)},ra=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},ia=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},sa=function(){function e(e,t){this.options=e,this.tokenProvider=t,this.axios=$o.create({withCredentials:!0})}return e.prototype.setOptions=function(e){this.options=e},e.prototype.request=function(e){var t;return ra(this,void 0,void 0,function(){var n,r,i,s,o,a;return ia(this,function(c){switch(c.label){case 0:return(n={})[this.options.headers["app-id"]]=this.options.appId||"",n[this.options.headers["tenant-id"]]=this.options.tenantId,n[this.options.headers["userpool-id"]]=this.options.userPoolId||"",n[this.options.headers["request-from"]]=this.options.requestFrom||"sdk",n[this.options.headers["sdk-version"]]="js:".concat(Po),n[this.options.headers.lang]=this.options.lang||"",e.unSetToken?[3,3]:e&&e.headers&&e.headers.authorization?[3,2]:[4,null===(t=this.tokenProvider)||void 0===t?void 0:t.getToken()];case 1:return(r=c.sent())&&(n.Authorization="Bearer ".concat(r)),[3,3];case 2:n.authorization=e.headers.authorization,c.label=3;case 3:return e.headers=n,e.timeout=this.options.timeout,[4,this.axios.request(na(na({},e),{headers:na({},To(e.headers,function(e){return!!e}))}))];case 4:if(i=c.sent().data,s=i.code,o=i.message,a=i.statusCode,200===s||200===a)return[2,i.data];throw this.options.onError(s,o,i.data),new Error(JSON.stringify({code:s,message:o,data:i.data}))}})})},e}();!function(e){function t(t,n){return e.call(this,t,n)||this}ta(t,e),t.prototype.request=function(e){return ra(this,void 0,void 0,function(){var t,n;return ia(this,function(r){switch(r.label){case 0:return(t={})[this.options.headers["app-id"]]=this.options.appId||"",t[this.options.headers["tenant-id"]]=this.options.tenantId,t[this.options.headers["userpool-id"]]=this.options.userPoolId||"",t[this.options.headers["request-from"]]=this.options.requestFrom||"sdk",t[this.options.headers["sdk-version"]]="js:".concat(Po),t[this.options.headers.lang]=this.options.lang||"",e&&e.headers&&e.headers.authorization?[3,2]:[4,this.tokenProvider.getToken()];case 1:return(n=r.sent())&&(t.Authorization="Bearer ".concat(n)),[3,3];case 2:t.authorization=e.headers.authorization,r.label=3;case 3:return e.headers=t,e.timeout=this.options.timeout,[4,this.axios.request(na(na({},e),{headers:na({},To(e.headers,function(e){return!!e}))}))];case 4:return[2,r.sent().data]}})})}}(sa);var oa,aa,ca,la,ua,da,ha,pa,fa,ma,ga,va,ya,xa,ba,wa,ja,Na,Ta=function(e){function t(t,n){return e.call(this,t,n)||this}return ta(t,e),t.prototype.request=function(e){return ra(this,void 0,void 0,function(){var t;return ia(this,function(n){switch(n.label){case 0:return(t={})[this.options.headers["app-id"]]=this.options.appId||"",t[this.options.headers["userpool-id"]]=t[this.options.headers["tenant-id"]]=this.options.tenantId,this.options.userPoolId,t[this.options.headers["request-from"]]=this.options.requestFrom||"sdk",t[this.options.headers["sdk-version"]]="js:".concat(Po),t[this.options.headers.lang]=this.options.lang||"",e.headers=na(na({},t),e.headers),e.timeout=this.options.timeout,[4,this.axios.request(na(na({},e),{headers:na({},To(e.headers,function(e){return!!e}))}))];case 1:return[2,n.sent().data]}})})},t}(sa),Sa=function(){function e(e){this.options=e}return Object.defineProperty(e.prototype,"appHost",{get:function(){var e=this.options,t=e.appHost,n=e.domain,r=e.host;if(t)return t.replace(/\/$/,"");if(n){var i=new URL(this.options.host);return"".concat(i.protocol,"//").concat(this.options.domain)}return r},enumerable:!1,configurable:!0}),e}(),Ca=function(){function e(e,t){this.options=e,this.baseClient=new Sa(this.options),this.httpClient=t}return e.prototype.getPublicKey=function(){return e=this,t=void 0,r=function(){var e,t,n;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){switch(r.label){case 0:return this.options.publicKey?[2,this.options.publicKey]:this.publicKey?[2,this.publicKey]:(e="".concat(this.baseClient.appHost,"/api/v2/.well-known"),[4,this.httpClient.request({method:"GET",url:e})]);case 1:return t=r.sent(),n=t.publicKey,this.publicKey=n,[2,this.publicKey]}})},new((n=void 0)||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())});var e,t,n,r},e}();(aa=oa||(oa={}))[aa.LOW=1]="LOW",aa[aa.MIDDLE=2]="MIDDLE",aa[aa.HIGH=3]="HIGH",(la=ca||(ca={})).ALIPAY="alipay",la.GOOGLE="google",la.WECHATPC="wechat:pc",la.WECHATMP="wechat:webpage-authorization",la.WECHAT_MINIPROGRAM="wechat:miniprogram:default",la.WECHAT_MINIPROGRAM_QRCODE="wechat:miniprogram:qrconnect",la.WECHAT_MINIPROGRAM_APPLAUNCH="wechat:miniprogram:app-launch",la.WECHATMOBILE="wechat:mobile",la.GITHUB="github",la.QQ="qq",la.WECHATWORK_ADDRESS_BOOK="wechatwork:addressbook",la.WECHATWORK_CORP_QRCONNECT="wechatwork:corp:qrconnect",la.WECHATWORK_SERVICEPROVIDER_QRCONNECT="wechatwork:service-provider:qrconnect",la.DINGTALK="dingtalk",la.WEIBO="weibo",la.APPLE="apple",la.APPLE_WEB="apple:web",la.LARK_PUBLIC="lark-public",la.LARK_INTERNAL="lark-internal",la.BAIDU="baidu",la.LINKEDIN="linkedin",la.SLACK="slack",la.YIDUN="yidun",la.QINGCLOUD="qingcloud",la.FACEBOOK="facebook",(da=ua||(ua={})).OIDC="oidc",da.OAUTH="oauth",da.SAML="saml",da.CAS="cas",da.AZURE_AD="azure-ad",(pa=ha||(ha={}))[pa.NoCheck=0]="NoCheck",pa[pa.Low=1]="Low",pa[pa.Middle=2]="Middle",pa[pa.High=3]="High",(ma=fa||(fa={})).Email="email",ma.Phone="phone",(va=ga||(ga={})).LDAP="ldap",va.AppQr="app-qrcode",va.Password="password",va.PhoneCode="phone-code",va.WxMinQr="wechat-miniprogram-qrcode",va.AD="ad",(xa=ya||(ya={})).FRONT_CHANNEL="FRONT_CHANNEL",xa.BACK_CHANNEL="BACK_CHANNEL",(wa=ba||(ba={})).SCENE_TYPE_LOGIN="login",wa.SCENE_TYPE_REGISTER="register",wa.SCENE_TYPE_RESET="reset",wa.SCENE_TYPE_BIND="bind",wa.SCENE_TYPE_UNBIND="unbind",wa.SCENE_TYPE_MFA_BIND="mfa-bind",wa.SCENE_TYPE_MFA_VERIFY="mfa-verify",wa.SCENE_TYPE_MFA_UNBIND="mfa-unbind",wa.SCENE_TYPE_COMPLETE_PHONE="complete-phone",(Na=ja||(ja={})).WEB_MESSAGE="web_message",Na.FORM_POST="form_post",Na.QUERY="query";var ka="_authing_token",Ea="_authing_user",Ia=function(){function e(e){this.options=e,this.token=null,this.user=null}return e.prototype.setToken=function(e){"undefined"!=typeof localStorage?localStorage.setItem(ka,e):this.token=e},e.prototype.getToken=function(){if("undefined"!=typeof localStorage){var e=localStorage.getItem(ka);return"null"===e||"undefined"===e?null:e}return this.token},e.prototype.getUser=function(){return"undefined"!=typeof localStorage?localStorage.getItem(Ea)?JSON.parse(localStorage.getItem(Ea)):null:this.user},e.prototype.setUser=function(e){"undefined"!=typeof localStorage?(localStorage.setItem(Ea,JSON.stringify(e)),localStorage.setItem(ka,e.token)):(this.user=e,this.token=e.token)},e.prototype.clearUser=function(){"undefined"!=typeof localStorage?(localStorage.removeItem(Ea),localStorage.removeItem(ka)):(this.user=null,this.token=null)},e}();const Pa=O(W());var Aa=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},_a=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Da=function(){function e(e,t,n,r){this.options=e,this.tokenProvider=t,this.httpClient=n,this.scene=r,this.baseClient=new Sa(e)}return e.prototype.startScanning=function(e,t){return Aa(this,void 0,void 0,function(){var n,r,i,s,o,a,c,l,u,d,h,p,f,m,g,v,y,x,b,w,j,N,T,S,C,k,E,I,P,A,_,D,O,L,R,B,F,V,M,U,q,H,z,$,W,G,Z,J,Y,K,X,Q,ee,te,ne,re,ie,se,oe=this;return _a(this,function(ae){return n=(t=t||{}).autoExchangeUserInfo,r=void 0!==n&&n,i=t.size,s=void 0===i?{height:240,width:240}:i,o=t.containerSize,a=void 0===o?{height:300,width:300}:o,c=t.interval,l=void 0===c?800:c,u=t.onStart,d=t.onResult,h=t.onScanned,p=t.onExpired,f=t.onSuccess,m=t.onCancel,g=t.onError,v=t.onCodeShow,y=t.onCodeLoaded,x=t.onCodeLoadFailed,b=t.onRetry,w=t.onMfa,j=t.onAuthFlow,N=t.tips,T=void 0===N?{}:N,S=t.context,C=t.customData,k=t.extIdpConnId,E=t.withCustomData,I=this.options.lang,P="zh-CN"===I,A=T.title,_=void 0===A?P?"请在移动端确认账号登录":"Please be on the mobile":A,T.canceled,D=T.expired,O=void 0===D?P?"二维码已过期":"QR code has expired":D,L=T.succeed,R=void 0===L?P?"扫码成功":"Scan code successfully":L,B=T.retry,F=void 0===B?P?"重试":"Retry":B,V=T.middleTitle,M=void 0===V?P?"确认登录":"Confirm login":V,U=T.referText,q=void 0===U?P?"重新扫码":"Scan the code":U,H=document.getElementById(e),$=!1,H?H.style.position="relative":((H=document.createElement("div")).id=e,os("__authing-qrcode-node-mount","z-index: 65535;position: fixed;background: #fff;width: ".concat(a.width,"px;height: ").concat(a.height,"px;left: 50%;margin-left: -").concat(a.width/2,"px;display: flex;justify-content: center;align-items: center;top: 50%;margin-top: -").concat(a.height/2,"px;border: 1px solid #ccc;")),H.classList.add("__authing-qrcode-node-mount"),document.getElementsByTagName("body")[0].appendChild(H),$=!0),W=document.createElement("style"),G="#authing__retry a:hover{outline:0px;text-decoration:none;}#authing__spinner{position:absolute;left:50%;margin-left:-6px;}.spinner{margin:100px auto;width:20px;height:20px;position:relative}.container1>div,.container2>div,.container3>div{width:6px;height:6px;background-color:#00a1ea;border-radius:100%;position:absolute;-webkit-animation:bouncedelay 1.2s infinite ease-in-out;animation:bouncedelay 1.2s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner .spinner-container{position:absolute;width:100%;height:100%}.container2{-webkit-transform:rotateZ(45deg);transform:rotateZ(45deg)}.container3{-webkit-transform:rotateZ(90deg);transform:rotateZ(90deg)}.circle1{top:0;left:0}.circle2{top:0;right:0}.circle3{right:0;bottom:0}.circle4{left:0;bottom:0}.container2 .circle1{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.container3 .circle1{-webkit-animation-delay:-1.0s;animation-delay:-1.0s}.container1 .circle2{-webkit-animation-delay:-0.9s;animation-delay:-0.9s}.container2 .circle2{-webkit-animation-delay:-0.8s;animation-delay:-0.8s}.container3 .circle2{-webkit-animation-delay:-0.7s;animation-delay:-0.7s}.container1 .circle3{-webkit-animation-delay:-0.6s;animation-delay:-0.6s}.container2 .circle3{-webkit-animation-delay:-0.5s;animation-delay:-0.5s}.container3 .circle3{-webkit-animation-delay:-0.4s;animation-delay:-0.4s}.container1 .circle4{-webkit-animation-delay:-0.3s;animation-delay:-0.3s}.container2 .circle4{-webkit-animation-delay:-0.2s;animation-delay:-0.2s}.container3 .circle4{-webkit-animation-delay:-0.1s;animation-delay:-0.1s}@-webkit-keyframes bouncedelay{0%,80%,100%{-webkit-transform:scale(0.0)}40%{-webkit-transform:scale(1.0)}}@keyframes bouncedelay{0%,80%,100%{transform:scale(0.0);-webkit-transform:scale(0.0)}40%{transform:scale(1.0);-webkit-transform:scale(1.0)}}",W.type="text/css",W.style?W.style.cssText=G:W.innerHTML=G,document.getElementsByTagName("head")[0].appendChild(W),Z=function(){H.innerHTML='<div id="authing__spinner" class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>'},J=function(){var e=document.getElementById("authing__spinner");e&&H.removeChild(e)},Y=function(e){var t;try{t=JSON.parse(e).message||e}catch(r){t=e}var n=document.createElement("span");return n.className="authing__heading-subtitle",$?(os("__authing__heading-subtitle-style","display: block;font-weight: 400;font-size: 12px;color: #888;"),n.classList.add("__authing__heading-subtitle-style")):(os("__authing__heading-subtitle-style","display: block;font-weight: 400;font-size: 15px;color: #888;line-height: 20px;margin-top: 8px;"),n.classList.add("__authing__heading-subtitle-style")),n.id="authing__qrcode-tip-text",n.innerHTML=t,n},K=function(e){var t=document.getElementById("authing__qrcode-tip-text");t&&(t.innerText=e)},X=function(e){return new Promise(function(t){var n=document.createElement("img");n.src=e,n.width=s.width,n.height=s.height,n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){t(n)}})},Q=function(e){return new Promise(function(t){var n=document.createElement("img");n.src=e,n.setAttribute("crossOrigin","Anonymous"),n.width=s.width/2.4,n.height=s.height/2.4,n.onload=function(){n.style.display="inline",t(n)},n.onerror=function(){t(n)}})},ee=function(e){K(M);var t=document.createElement("div");os("__authing-shadow-inner-style-position","position:absolute;top:56%;left:50%;\n         width:64px;transform:translate(-50%,-50%);\n        background-position:center center;\n      align-items: center; /*垂直居中*/\n      justify-content: center; /*水平居中*/"),t.classList.add("__authing-shadow-inner-style-position");var n=document.createElement("div");os("__authing-shadow-inner-image-style-position","width:64px;height:64px;opacity:1;\n        background-position:center center;background-repeat:no-repeat;\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNTQiIHZpZXdCb3g9IjAgMCA1NCA1NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI3IDUzLjY2NjdDMTIuMjcyIDUzLjY2NjcgMC4zMzMzNzQgNDEuNzI4IDAuMzMzMzc0IDI3QzAuMzMzMzc0IDEyLjI3MiAxMi4yNzIgMC4zMzMzMzIgMjcgMC4zMzMzMzJDNDEuNzI4IDAuMzMzMzMyIDUzLjY2NjcgMTIuMjcyIDUzLjY2NjcgMjdDNTMuNjY2NyA0MS43MjggNDEuNzI4IDUzLjY2NjcgMjcgNTMuNjY2N1pNMjQuMzQxNCAzNy42NjY3TDQzLjE5NDcgMTguODEwN0wzOS40MjQgMTUuMDRMMjQuMzQxNCAzMC4xMjUzTDE2Ljc5NzQgMjIuNTgxM0wxMy4wMjY3IDI2LjM1MkwyNC4zNDE0IDM3LjY2NjdaIiBmaWxsPSIjMUVCNzZEIi8+Cjwvc3ZnPgo=);\n        margin-bottom: 10px;\n      align-items: center; /*垂直居中*/\n      justify-content: center; /*水平居中*/"),n.classList.add("__authing-shadow-inner-image-style-position"),n.id="authing_scan_success_image";var r=document.createElement("p");return os("__authing-shadow-inner-text-style-position","font-weight: 400;font-size: 14px;line-height: 20px;color: #282D3C;;align-items: center; /*垂直居中*/justify-content: center; /*水平居中*/"),r.classList.add("__authing-shadow-inner-text-style-position"),r.id="authing_scan_success_text",r.innerText=e,t.appendChild(n),t.appendChild(r),t},te=function(e){var t=document.createElement("p");return os("__authing-shadow-inner-refer-text-style-position","color: #215AE5;font-size: 14px;line-height:20px;font-weight: 400; text-align:center;cursor:pointer;padding-top:4px;"),t.classList.add("__authing-shadow-inner-refer-text-style-position"),t.id="authing_scan_success_refer_text",t.innerText=e,t.onclick=function(){oe.timer&&clearInterval(oe.timer),b&&b(),se()},t},ne=function(){var e=document.getElementById("authing_scan_success_refer_text");e&&e.parentNode.removeChild(e)},re=function(e,t,n){var r="authing__retry";document.getElementById(r)&&document.getElementById(r).remove();var i=document.createElement("div");i.id=r,os("__authing-shadow-style","text-align:center;width: ".concat(s.width,"px;height: ").concat(s.height,"px;position: absolute;left: 50%;top: 0px;margin-left: -").concat(s.width/2,"px;background-color: rgba(0,0,0, 0.5);line-height:").concat(s.height,"px;color:#fff;font-weight:600;")),i.classList.add("__authing-shadow-style");var o=document.createElement("a");return o.innerHTML=e,o.style.color="#fff",o.style.borderBottom="1px solid #fff",o.style.cursor="pointer",t&&o.addEventListener("click",t),o.id=n,i.appendChild(o),i},ie=function(e){var t="authing__retry";document.getElementById(t)&&document.getElementById(t).remove();var n=document.createElement("div");os("__authing-shadow-style-position","text-align:center;width:".concat(s.width,"px;height: ").concat(s.height,"px;background:rgba(255,255,255,.97);position: absolute;left: 50%;top: 0px;margin-left: -").concat(s.width/2,"px;line-height:").concat(s.height,"px;color:#fff;font-weight:600;display: flex;\n      align-items: center; /*垂直居中*/\n      justify-content: center; /*水平居中*/")),n.classList.add("__authing-shadow-style-position"),n.id=t;var r=ee(R),i=te(q);return z.appendChild(i),n.appendChild(r),n},se=function(){return Aa(oe,void 0,void 0,function(){var e,t,n,i,o,a,c,N,T,I,P,A,D,L,B,V,M,U,q,W,G,ee,te,oe=this;return _a(this,function(ae){switch(ae.label){case 0:Z(),e=null,t=null,n=null,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,this.geneCode({context:S,customData:C,extIdpConnId:k,withCustomData:E})];case 2:return i=ae.sent(),e=i.random,t=i.url,n=i.customLogo,[3,4];case 3:return o=ae.sent(),function(e,t){Aa(this,void 0,void 0,function(){var n,r,i,s;return _a(this,function(o){switch(o.label){case 0:return n=Y(t),(z=document.createElement("div")).id="authing__qrcode-wrapper",z.style.textAlign="center",z.style.position="relative",[4,X("https://usercontents.authing.cn/0ab3a1bf19c0d7106673e494d532f91a.png")];case 1:return(r=o.sent()).style.marginTop=$?"16px":"12px",r.onload=function(){J()},i=re(F,function(){b&&b(),se()},"__authing_retry_btn"),z.appendChild(r),z.appendChild(i),z.appendChild(n),(s=document.querySelector("#authing__qrcode-wrapper"))&&s.remove(),e.appendChild(z),[2]}})})}(H,o.message),x&&x(o),[2];case 4:return y&&y(e,t),(z=document.createElement("div")).id="authing__qrcode-wrapper",z.style.textAlign="center",z.style.position="relative",z.style.margin="auto",[4,X(t)];case 5:return a=ae.sent(),n?[4,Q(n)]:[3,7];case 6:c=ae.sent(),ae.label=7;case 7:(N=document.createElement("canvas")).width=s.width,N.height=s.height,T=N.getContext("2d"),t&&T.drawImage(a,0,0,s.width,s.height),I=function(e){var t=e.width/2,n=e.height/2,r=e.width/2.4,i=e.height/2.4;return{x:t-r/2,y:n-i/2,ww:r,hh:i}}(s),P=I.x,A=I.y,D=I.ww,L=I.hh,T.save(),function(e,t,n,r,i,s){e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath()}(T,P,A,D,L,D/2),T.clip();try{c&&T.drawImage(c,P,A,D,L)}catch(ce){}T.restore();try{B=N.toDataURL(),(V=document.createElement("img")).src=B,z.appendChild(V)}catch(le){z.appendChild(N)}return J(),v&&v(e,t),M=function(e,t){K(""),ne();var n=re(R,null,"__authing_success_tip");z.appendChild(n),f&&(r?e.token?f(e,t):oe.exchangeUserInfo(t).then(function(e){oe.tokenProvider.setUser(e),f(e,t)}):f(e,t))},U=function(e){var t=ie(e.nickname);z.appendChild(t),h&&h(e)},q=function(){se&&se(),m&&m()},W=function(){var e=re(O,function(){z.innerHTML="",se()},"__authing_success_tip");z.appendChild(e),p&&p()},G=function(e){var t=e.message;g&&g(t)},this.startPolling(e,{interval:l,onStart:u,onResult:d,onScanned:U,onExpired:W,onSuccess:M,onCancel:q,onError:G,onMfa:w,onAuthFlow:j}),ee=Y(_),z.appendChild(ee),(te=document.querySelector("#authing__qrcode-wrapper"))&&te.remove(),H.appendChild(z),[2]}})})},se(),[2]})})},e.prototype.geneCode=function(e){return Aa(this,void 0,void 0,function(){var t,n,r,i,s,o;return _a(this,function(a){switch(a.label){case 0:return n=(t=e||{}).context,r=t.customData,i=t.extIdpConnId,s=t.withCustomData,o="".concat(this.baseClient.appHost,"/api/v2/qrcode/gene"),[4,this.httpClient.request({method:"POST",url:o,data:{autoMergeQrCode:!1,scene:this.scene,context:n,params:r,extIdpConnId:i,withCustomData:s}})];case 1:return[2,a.sent()]}})})},e.prototype.checkStatus=function(e){return Aa(this,void 0,void 0,function(){var t;return _a(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/qrcode/check?random=").concat(e),[4,this.httpClient.request({method:"GET",url:t})];case 1:return[2,n.sent()]}})})},e.prototype.exchangeUserInfo=function(e){return Aa(this,void 0,void 0,function(){var t;return _a(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/qrcode/userinfo"),[4,this.httpClient.request({method:"POST",url:t,data:{ticket:e}})];case 1:return[2,n.sent()]}})})},e.prototype.startPolling=function(e,t){return Aa(this,void 0,void 0,function(){var n,r,i,s,o,a,c,l,u,d,h,p,f,m,g=this;return _a(this,function(v){return n=(t=t||{}).interval,r=void 0===n?800:n,i=t.onStart,s=t.onResult,o=t.onScanned,a=t.onExpired,c=t.onSuccess,l=t.onCancel,u=t.onError,d=t.onMfa,h=t.onAuthFlow,p=!1,f=!1,[2,m=this.timer=setInterval(function(){return Aa(g,void 0,void 0,function(){var t,n,r,g,v,y,x,b,w,j;return _a(this,function(N){switch(N.label){case 0:i&&!f&&(i(m),f=!0),N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.checkStatus(e)];case 2:return t=N.sent(),n=t.status,r=t.ticket,g=t.userInfo,s&&s(t),-1===n&&(clearInterval(m),a&&a()),1===n&&o&&!p&&(o(g),p=!0),2===n&&(clearInterval(m),c&&c(g,r)),3===n&&(clearInterval(m),l&&l()),4===n&&(clearInterval(m),d&&(b=t.scannedResult,v=b.code,y=b.message,x=b.data,d(v,y,x)),h&&(b=t.scannedResult,h(b))),5===n&&(clearInterval(m),u&&(b=t.scannedResult,w=b.errmsg,u(w))),[3,4];case 3:return j=N.sent(),u&&u(j),clearInterval(m),[2];case 4:return[2]}})})},r)]})})},e.prototype.stopPolling=function(e){return Aa(this,void 0,void 0,function(){return _a(this,function(t){return clearInterval(e),[2]})})},e}(),Oa=function(){return Oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Oa.apply(this,arguments)},La=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Ra=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Ba=function(){function e(e,t){this.baseClient=new Sa(e),this.options=e,this.httpClient=t}return e.prototype.getBrowserFingers=function(){return La(this,void 0,void 0,function(){var e,t,n,r,i,s;return Ra(this,function(o){switch(o.label){case 0:return e=localStorage.getItem("browserId"),t=localStorage.getItem("deviceFingers"),n=t&&JSON.parse(t),e&&t?[3,2]:[4,new Promise(function(e){return rs(void 0,void 0,void 0,function(){var t,n,r;return is(this,function(i){switch(i.label){case 0:return[4,vr.load()];case 1:return[4,i.sent().get()];case 2:return t=i.sent(),(n={canvas:"",webgl:"",plugins:"",audio:"",fonts:"",userAgent:"",screenResolution:""}).canvas=gs(t.components.canvas.value.toString()),n.webgl=ns()?gs(ns().toString()):"",n.plugins=gs(t.components.plugins.value.toString()),n.audio=gs(t.components.audio.value.toString()),n.fonts=gs(t.components.fonts.value.toString()),n.userAgent=gs(navigator.userAgent.toString()),n.screenResolution=gs(t.components.screenResolution.value.toString()),r=t.visitorId,localStorage.setItem("deviceFingers",JSON.stringify(n)),localStorage.setItem("browserId",r),e({deviceFingers:n,browserId:r}),[2]}})})})];case 1:r=o.sent(),i=r.browserId,s=r.deviceFingers,e=i,n=s,o.label=2;case 2:return[2,{browserId:e,deviceFingers:ts(n)}]}})})},e.prototype.getDeviceInfo=function(){return La(this,void 0,void 0,function(){var e;return Ra(this,function(t){switch(t.label){case 0:return[4,this.getBrowserFingers()];case 1:return e=t.sent(),[2,Oa({},e)]}})})},e.prototype.createDevice=function(){var e;return La(this,void 0,void 0,function(){var t,n,r,i,s;return Ra(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,this.getBrowserFingers()];case 1:return t=o.sent(),n=t.browserId,r=t.deviceFingers,i=Oa({browserId:n},r),[4,Wi(void 0,void 0,void 0,function(){var e,t,n;return Gi(this,function(r){switch(r.label){case 0:return[4,new Promise(function(e){return Wi(void 0,void 0,void 0,function(){var t,n,r;return Gi(this,function(i){switch(i.label){case 0:return[4,vr.load()];case 1:return[4,i.sent().get()];case 2:return t=i.sent(),n=t.components.plugins.value.length,r=t.components.plugins.value,e({pluginCount:n,pluginList:JSON.stringify(r)}),[2]}})})})];case 1:return e=r.sent(),t=e.pluginCount,n=e.pluginList,[2,{os:(o=navigator.userAgent,-1!==o.indexOf("Windows NT 10.0")?"Windows 10":-1!==o.indexOf("Windows NT 6.2")?"Windows 8":-1!==o.indexOf("Windows NT 6.1")?"Windows 7":-1!==o.indexOf("Windows NT 6.0")?"Windows Vista":-1!==o.indexOf("Windows NT 5.1")?"Windows XP":-1!==o.indexOf("Windows NT 5.0")?"Windows 2000":-1!==o.indexOf("Mac")?"Mac OS":-1!==o.indexOf("X11")?"UNIX":-1!==o.indexOf("Linux")?"Linux":"Other"),version:Qi(),appCodeName:es(),vendor:Yi(),screenHeight:-1!==navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Firefox")?window.screen.height:-1!==navigator.userAgent.indexOf("Trident")||-1!==navigator.userAgent.indexOf("MSIE")?screen.height:window.innerHeight,screenWidth:(s=0,"number"==typeof window.innerWidth?s=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?s=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(s=document.body.clientWidth),s),colorDepth:(i=window.screen.colorDepth||window.screen.pixelDepth,-1!==navigator.userAgent.indexOf("Chrome")?i*window.devicePixelRatio:-1!==navigator.userAgent.indexOf("Firefox")?i:-1!==navigator.userAgent.indexOf("Trident")?screen.deviceXDPI:i),product:Ki(),language:navigator.language,onLine:!navigator.onLine||navigator.onLine,mimeTypes:Zi(),mimeTypesLength:navigator.mimeTypes.length?navigator.mimeTypes.length:0,productSub:Xi(),cookie:Ji(),pluginsLength:t,plugins:n,userAgent:navigator.userAgent,type:"Browser"}]}var i,s,o})})];case 2:return s=o.sent(),[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v3/create-device"),data:Oa(Oa({deviceUniqueId:i.browserId,name:null===(a=navigator.userAgent.toLowerCase(),e=a.indexOf("msie")>0?a.match(/msie [\d.]+;/gi):a.indexOf("firefox")>0?a.match(/firefox\/[\d.]+/gi):a.indexOf("edg")>0?a.match(/edg\/[\d.]+/gi):a.indexOf("chrome")>0?a.match(/chrome\/[\d.]+/gi):a.indexOf("safari")>0&&a.indexOf("chrome")<0?[a.match(/safari\/[\d.]+/gi)[0].split("/")[0]+"/"+a.match(/version\/[\d.]+/gi)[0].split("/")[1]]:void 0)||void 0===e?void 0:e.toString()},s),i)})];case 3:return o.sent(),[2,!0];case 4:return o.sent(),[2,!1];case 5:return[2]}var a})})},e.prototype.myDevicesList=function(){return La(this,void 0,void 0,function(){return Ra(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v3/mydevices/list")})];case 1:return[2,e.sent()]}})})},e.prototype.myDevicesUnbind=function(e){return La(this,void 0,void 0,function(){return Ra(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v3/mydevices/unbind"),data:{deviceId:e}})];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},e.prototype.myDevicesLogout=function(e){return La(this,void 0,void 0,function(){return Ra(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v3/mydevices/revoke-session"),data:{deviceId:e}})];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},e}(),Fa=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Va=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Ma=function(){function e(e,t,n){this.options=e,this.tokenProvider=t,this.httpClient=n,this.baseClient=new Sa(e)}return e.prototype.getMfaAuthenticators=function(e){return void 0===e&&(e={type:"totp",source:"SELF"}),Fa(this,void 0,void 0,function(){var t,n,r,i,s;return Va(this,function(o){switch(o.label){case 0:return t=e.type,n=e.mfaToken,r=e.source,i="".concat(this.baseClient.appHost,"/api/v2/mfa/authenticator"),s={},n&&(s.authorization="Bearer ".concat(n)),[4,this.httpClient.request({method:"GET",url:i,params:{type:t,source:r},headers:s})];case 1:return[2,o.sent()]}})})},e.prototype.assosicateMfaAuthenticator=function(e){return void 0===e&&(e={authenticatorType:"totp",source:"SELF"}),Fa(this,void 0,void 0,function(){var t,n,r,i,s;return Va(this,function(o){switch(o.label){case 0:return t=e.authenticatorType,n=e.mfaToken,r=e.source,i={},n&&(i.authorization="Bearer ".concat(n)),s="".concat(this.baseClient.appHost,"/api/v2/mfa/totp/associate"),[4,this.httpClient.request({method:"POST",url:s,data:{authenticator_type:t,source:r},headers:i})];case 1:return[2,o.sent()]}})})},e.prototype.deleteMfaAuthenticator=function(){return Fa(this,void 0,void 0,function(){var e;return Va(this,function(t){switch(t.label){case 0:return e="".concat(this.baseClient.appHost,"/api/v2/mfa/totp/associate"),[4,this.httpClient.request({method:"DELETE",url:e})];case 1:return t.sent(),[2,{code:200,message:"TOTP MFA 解绑成功"}]}})})},e.prototype.confirmAssosicateMfaAuthenticator=function(e){return void 0===e&&(e={authenticatorType:"totp",source:"SELF"}),Fa(this,void 0,void 0,function(){var t,n,r,i,s,o;return Va(this,function(a){switch(a.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/mfa/totp/associate/confirm"),n=e.authenticatorType,r=e.totp,i=e.source,s=e.mfaToken,o={},s&&(o.authorization="Bearer ".concat(s)),[4,this.httpClient.request({method:"POST",url:t,data:{authenticator_type:n,totp:r,source:i}})];case 1:return a.sent(),[2,{code:200,message:"TOTP MFA 绑定成功"}]}})})},e.prototype.verifyTotpMfa=function(e){return Fa(this,void 0,void 0,function(){var t;return Va(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/mfa/totp/verify"),[4,this.httpClient.request({method:"POST",url:t,data:{totp:e.totp},headers:{authorization:"Bearer "+e.mfaToken}})];case 1:return[2,n.sent()]}})})},e.prototype.verifyAppSmsMfa=function(e){return Fa(this,void 0,void 0,function(){var t;return Va(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/applications/mfa/sms/verify"),[4,this.httpClient.request({method:"POST",url:t,data:{phone:e.phone,code:e.code,phoneCountryCode:e.phoneCountryCode},headers:{authorization:"Bearer "+e.mfaToken}})];case 1:return[2,n.sent()]}})})},e.prototype.verifyAppEmailMfa=function(e){return Fa(this,void 0,void 0,function(){var t;return Va(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/applications/mfa/email/verify"),[4,this.httpClient.request({method:"POST",url:t,data:{email:e.email,code:e.code},headers:{authorization:"Bearer "+e.mfaToken}})];case 1:return[2,n.sent()]}})})},e.prototype.phoneOrEmailBindable=function(e){var t=e.phone,n=e.email,r=e.mfaToken;return Fa(this,void 0,void 0,function(){var e;return Va(this,function(i){switch(i.label){case 0:return e="".concat(this.baseClient.appHost,"/api/v2/applications/mfa/check"),[4,this.httpClient.request({method:"POST",url:e,data:{email:n,phone:t},headers:{authorization:"Bearer "+r}})];case 1:return[2,i.sent()]}})})},e.prototype.verifyTotpRecoveryCode=function(e){return Fa(this,void 0,void 0,function(){var t;return Va(this,function(n){switch(n.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/mfa/totp/recovery"),[4,this.httpClient.request({method:"POST",url:t,data:{recoveryCode:e.recoveryCode},headers:{authorization:"Bearer "+e.mfaToken}})];case 1:return[2,n.sent()]}})})},e.prototype.associateFaceByUrl=function(e){return Fa(this,void 0,void 0,function(){var t,n,r,i,s;return Va(this,function(o){switch(o.label){case 0:return t=e.baseFace,n=e.compareFace,r=e.mfaToken,i={},r&&(i.authorization="Bearer ".concat(r)),s="".concat(this.baseClient.appHost,"/api/v2/mfa/face/associate"),[4,this.httpClient.request({method:"POST",url:s,data:{photoA:t,photoB:n,isExternal:!0},headers:i})];case 1:return[2,o.sent()]}})})},e.prototype.associateFaceByLocalFile=function(e){return Fa(this,void 0,void 0,function(){var t,n,r,i;return Va(this,function(s){switch(s.label){case 0:t={},e&&(t.authorization="Bearer ".concat(e)),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fs({accept:".jpeg,.jpg,.png,.bmp",url:"".concat(this.baseClient.appHost,"/api/v2/upload?folder=face-photo&private=true")})];case 2:return r=s.sent().key,n=r,[3,4];case 3:return i=s.sent(),this.options.onError(i.code,i.message),[3,4];case 4:return[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v2/mfa/face/associate"),data:{photoA:n,photoB:n},headers:t})];case 5:return[2,s.sent()]}})})},e.prototype.associateFaceByBlob=function(e){return Fa(this,void 0,void 0,function(){var t,n,r,i,s,o,a,c,l,u;return Va(this,function(d){switch(d.label){case 0:t=e.baseFace,n=e.compareFace,r=e.mfaToken,i={},r&&(i.authorization="Bearer ".concat(r)),a="".concat(this.baseClient.appHost,"/api/v2/upload?folder=face-photo&private=true"),d.label=1;case 1:return d.trys.push([1,6,,7]),[4,ps(t,a)];case 2:return c=d.sent().key,s=c,n?[4,ps(n,a)]:[3,4];case 3:return l=d.sent().key,o=l,[3,5];case 4:o=c,d.label=5;case 5:return[3,7];case 6:return u=d.sent(),this.options.onError(u.code,u.message),[3,7];case 7:return[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v2/mfa/face/associate"),data:{photoA:s,photoB:o},headers:i})];case 8:return[2,d.sent()]}})})},e.prototype.verifyFaceMfa=function(e,t){return Fa(this,void 0,void 0,function(){var n;return Va(this,function(r){switch(r.label){case 0:return n="".concat(this.baseClient.appHost,"/api/v2/mfa/face/verify"),[4,this.httpClient.request({method:"POST",url:n,data:{photo:e},headers:{authorization:"Bearer ".concat(t)}})];case 1:return[2,r.sent()]}})})},e}(),Ua=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},qa=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Ha=function(){function e(e,t,n){this.options=e,this.tokenProvider=t,this.httpClient=n,this.baseClient=new Sa(e)}return e.prototype.authorize=function(e,t){var n=this,r=(t=t||{}).position,i=t.popup,s=void 0===i||i,o=t.onSuccess,a=t.onError,c=t.authorization_params,l=t.authorizationParams,u=t.context,d=t.customData,h=t.withIdentities,p=void 0!==h&&h,f=t.protocol,m=void 0===f?"oidc":f,g=t.uuid,v=t.withCustomData,y=void 0!==v&&v,x=t.targetUrl,b=t.relayMethod,w=t.guardVersion;g||(g=vs(20));var j={from_guard:"1",app_id:this.options.appId,authorization_params:JSON.stringify(c||l),with_identities:p?"1":"0",with_custom_data:y?"1":"0",protocol:m,uuid:g,target_url:x,relay_method:b,guard_version:w};u&&(j.context=JSON.stringify(u)),this.options.tenantId&&(j.tenant_id=this.options.tenantId),d&&(j.custom_data=JSON.stringify(d));var N="".concat(this.baseClient.appHost,"/connections/social/").concat(e,"?").concat(as(j)),T=function(e){var t=e.data,r=t.code,i=t.message,s=t.data,c=t.event,l=(c=c||{}).source,u=c.eventType;if("authing"===l&&"socialLogin"===u){try{r=JSON.parse(i).code}catch(d){}200===r?(n.tokenProvider.setUser(s),o&&o(s)):a&&a(r,i,s),window.removeEventListener("message",T)}};return window.addEventListener("message",T),ds()||"undefined"!=typeof navigator&&/Lark/i.test(navigator.userAgent)?(N="".concat(N,"&redirected=1&from_hosted_guard=1&redirect_url=").concat(this.baseClient.appHost,"/interaction/oidc/").concat(g,"/login"),window.location.href=N):s?ss(N,r):window.open(N),Promise.resolve()},e.prototype.generateLinkExtIdpUrl=function(e){return Ua(this,void 0,void 0,function(){var t,n;return qa(this,function(r){switch(r.label){case 0:return t=e.extIdpConnIdentifier,n=e.idToken,[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v3/generate-link-extidp-url"),params:{ext_idp_conn_identifier:t,id_token:n,app_id:this.options.appId}})];case 1:return[2,r.sent()]}})})},e.prototype.unlinkExtIdp=function(e){return Ua(this,void 0,void 0,function(){var t;return qa(this,function(n){switch(n.label){case 0:return t=e.extIdpId,[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v3/unlink-extidp"),data:{extIdpId:t}})];case 1:return[2,n.sent()]}})})},e.prototype.getIdentities=function(){return Ua(this,void 0,void 0,function(){return qa(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v3/get-identities")})];case 1:return[2,e.sent()]}})})},e}(),za=function(){function e(e,t,n){this.options=e,this.baseClient=new Sa(e),this.tokenProvider=t,this.httpClient=n}return e.prototype.initProviderContext=function(e){return t=this,n=void 0,i=function(){return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(t){switch(t.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v2/applications/").concat(e,"/public-config")})];case 1:return[2,t.sent()]}})},new((r=void 0)||(r=Promise))(function(e,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function a(e){try{c(i.throw(e))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,a)}c((i=i.apply(t,n||[])).next())});var t,n,r,i},e.prototype.getProviderConfigAndError=function(e,t,n){var r,i,s=null===(i=null===(r=t.identityProviders)||void 0===r?void 0:r.find(function(t){return t.protocol===e&&t.identifier===n}))||void 0===i?void 0:i.config;if(!s)throw new Error("身份源配置不存在");return s},e.prototype.getLoginUrl=function(e,t,n,r){var i=this.getProviderConfigAndError(e,t,n);switch(e){case ua.OIDC:var s=as({state:r,client_id:i.clientId,redirect_uri:i.redirectUri,scope:i.scopes,response_type:i.responseType,nonce:hs(32)});return"".concat(i.authorizationEdpoint,"?").concat(s);case ua.SAML:return i.samlRequest;case ua.CAS:return i.casConnectionLoginUrl;case ua.OAUTH:return i.authUrl;case ua.AZURE_AD:return i.authorizationUrl;default:return""}},e.prototype.authorize=function(e,t,n){var r,i=this,s=(n=n||{}).position,o=n.popup,a=void 0===o||o,c=n.onSuccess,l=n.onError,u=this.options.appId,d=hs(32);return r=ds()?window:a?ss("",s):window.open(""),this.initProviderContext(u).then(function(n){(e===ua.OIDC?i.httpClient.request({method:"POST",url:"".concat(i.baseClient.appHost,"/api/v2/connections/oidc/start-interaction"),data:{state:d,protocol:e,userPoolId:n.userPoolId,appId:u,referer:window.location.href,connection:{providerIentifier:t}}}):Promise.resolve()).then(function(){var s=i.getLoginUrl(e,n,t,d),o=function(e){var t=e.data,n=t.code,r=t.message,s=t.data,a=t.event,u=(a=a||{}).source,d=a.eventType;if("authing"===u&&"enterpriseLogin"===d){try{var h=JSON.parse(r);r=h.message,n=h.code}catch(p){}200===n?(i.tokenProvider.setUser(s),c&&c(s)):l&&l(n,r),window.removeEventListener("message",o)}};window.addEventListener("message",o),r.location.assign(s)})}),Promise.resolve()},e}(),$a=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Wa=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Ga=function(){function e(e,t,n){this.options=e,this.tokenProvider=t,this.httpClient=n,this.baseClient=new Sa(e)}return e.prototype.detail=function(){return $a(this,void 0,void 0,function(){var e;return Wa(this,function(t){switch(t.label){case 0:return e="".concat(this.baseClient.appHost,"/api/v2/users/principal_authentication"),[4,this.httpClient.request({method:"GET",url:e})];case 1:return[2,t.sent()]}})})},e.prototype.authenticate=function(e){return $a(this,void 0,void 0,function(){var t,n;return Wa(this,function(r){switch(r.label){case 0:return t="".concat(this.baseClient.appHost,"/api/v2/users/principal_authentication"),n="P"===e.type?{type:"P",name:e.name,idCard:e.idCard,ext:e.bankCard}:{type:"E",name:e.enterpriseName,idCard:e.enterpriseCode,ext:e.legalPersonName},[4,this.httpClient.request({method:"POST",url:t,data:n})];case 1:return r.sent(),[2,!0]}})})},e}(),Za=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Ja=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},Ya=function(){function e(e,t,n){this.options=e,this.tokenProvider=t,this.httpClient=n,this.wsMap={},this.eventBus={},this.baseClient=new Sa(e)}return e.prototype.reconnect=function(e){var t=this;return new Promise(function(n,r){t.options.retryTimes&&t.wsMap[e].timeConnect<t.options.retryTimes?t.wsMap[e].lockConnect||(t.wsMap[e].lockConnect=!0,t.wsMap[e].timeConnect++,setTimeout(function(){t.wsMap[e].lockConnect=!1,t.initWebSocket(e,!0).then(function(){n(!0)}).catch(function(e){r(e)})},2e3)):r("socket 服务器连接超时")})},e.prototype.initWebSocket=function(e,t){var n=this;return new Promise(function(r,i){return Za(n,void 0,void 0,function(){var n,s=this;return Ja(this,function(o){switch(o.label){case 0:return this.wsMap[e]&&!t?[3,2]:[4,this.tokenProvider.getToken()];case 1:return n=o.sent(),this.wsMap[e]={socket:new WebSocket("".concat(this.options.socketUri,"/events/v1/authentication/sub?code=").concat(e,"&token=").concat(n)),timeConnect:t?this.wsMap[e].timeConnect:0,lockConnect:!1},this.wsMap[e].socket.onopen=function(){r(!0)},this.wsMap[e].socket.addEventListener("message",function(t){try{s.eventBus[e]&&s.eventBus[e].forEach(function(e){e[0](t.data.toString("utf8"))})}catch(n){return i("数据格式化错误，检查传输数据格式！！！ ".concat(n))}}),this.wsMap[e].socket.addEventListener("error",function(t){return Za(s,void 0,void 0,function(){return Ja(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.reconnect(e)];case 1:return n.sent(),r(!0),[3,3];case 2:return n.sent(),[2,i("socket 连接异常：".concat(JSON.stringify(t)))];case 3:return[2]}})})}),this.wsMap[e].socket.onclose=function(){return Za(s,void 0,void 0,function(){return Ja(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.reconnect(e)];case 1:return t.sent(),r(!0),[3,3];case 2:return t.sent(),[2,i("socket 服务器连接超时")];case 3:return[2]}})})},[3,3];case 2:r(!0),o.label=3;case 3:return[2]}})})})},e.prototype.sub=function(e,t,n){var r=this;if("string"!=typeof e)throw new Error("订阅事件名称为 string 类型！！！");if("function"!=typeof t)throw new Error("订阅事件回调函数需要为 function 类型！！！");if(!this.options.socketUri)throw new Error("订阅事件需要添加 socketUri 连接地址！！！");this.initWebSocket(e).catch(function(t){r.eventBus[e].forEach(function(e){var n;null===(n=e[1])||void 0===n||n.call(e,t)})}),this.eventBus[e]?this.eventBus[e].push([t,n]):this.eventBus[e]=[[t,n]]},e.prototype.pub=function(e,t){return Za(this,void 0,void 0,function(){return Ja(this,function(n){switch(n.label){case 0:if("string"!=typeof e)throw new Error("事件名称为 string 类型！！！");if("string"!=typeof t)throw new Error("发布数据为 string 类型！！！");return[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v3/pub-userEvent"),data:{eventType:e,source:"authing-js-sdk: ".concat(Po),eventData:t}})];case 1:return[2,n.sent()]}})})},e}(),Ka=function(){return Ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ka.apply(this,arguments)},Xa=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})},Qa=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ec={appId:void 0,tenantId:void 0,appHost:void 0,protocol:"oidc",tokenEndPointAuthMethod:"client_secret_post",introspectionEndPointAuthMethod:"client_secret_post",revocationEndPointAuthMethod:"client_secret_post",timeout:1e4,onError:function(e,t,n){throw{code:e,message:t,data:n}},requestFrom:"sdk",encryptFunction:function(e,t,n){return rs(void 0,void 0,void 0,function(){return is(this,function(r){return[2,new Promise(function(r,i){if(n&&"sm2"===(null==n?void 0:n.type)){if(!n.publicKey)throw new Error("未配置: encryption.publicKey");var s=function(e,t,n){void 0===n&&(n=1),e="string"==typeof e?Di(function(e){for(var t=(e=unescape(encodeURIComponent(e))).length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;var i=[];for(r=0;r<t;r++){var s=n[r>>>2]>>>24-r%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")}(e)):Array.prototype.slice.call(e),t=ki.decodePointHex(t);var r,i,s={privateKey:Ai((r=new bi.BigInteger(Ii.bitLength(),Si).mod(Ii.subtract(bi.BigInteger.ONE)).add(bi.BigInteger.ONE)).toString(16),64),publicKey:"04"+Ai((i=Ei.multiply(r)).getX().toBigInteger().toString(16),64)+Ai(i.getY().toBigInteger().toString(16),64)},o=new bi.BigInteger(s.privateKey,16),a=s.publicKey;a.length>128&&(a=a.substr(a.length-128));var c=t.multiply(o),l=Di(Ai(c.getX().toBigInteger().toRadix(16),64)),u=Di(Ai(c.getY().toBigInteger().toRadix(16),64)),d=_i(zi([].concat(l,e,u))),h=1,p=0,f=[],m=[].concat(l,u),g=function(){f=zi($i($i([],m,!0),[h>>24&255,h>>16&255,h>>8&255,255&h],!1)),h++,p=0};g();for(var v=0,y=e.length;v<y;v++)p===f.length&&g(),e[v]^=255&f[p++];var x=_i(e);return 0===n?a+x+d:a+d+x}(e,n.publicKey);return r("sm2:".concat(s))}var o=new gi({});o.setPublicKey(t);var a=o.encrypt(e);!1!==a?r(a):i(a)})]})})},host:"https://core.authing.cn",headers:{"userpool-id":"x-authing-userpool-id","app-id":"x-authing-app-id","request-from":"x-authing-request-from","sdk-version":"x-authing-sdk-version","tenant-id":"x-authing-app-tenant-id",lang:"x-authing-lang"},lang:"zh-CN",socketUri:"wss://openevent.authing.cn",retryTimes:5},tc=function(){function e(e){Object.keys(e).forEach(function(t){return!e[t]&&delete e[t]}),this.options=Object.assign({},ec,e),this.baseClient=new Sa(this.options);var t="".concat(this.baseClient.appHost,"/graphql/v2");this.graphqlClient=new(this.options.graphqlClient||Xo)(t,this.options),this.tokenProvider=new(this.options.tokenProvider||Ia)(this.options),this.httpClient=new(this.options.httpClient||sa)(this.options,this.tokenProvider),this.naiveHttpClient=new Ta(this.options,this.tokenProvider),this.publicKeyManager=new Ca(this.options,this.httpClient),this.browserFingerprint=new Ba(this.options,this.httpClient),this.wxqrcode=new Da(this.options,this.tokenProvider,this.httpClient,"WXAPP_AUTH"),this.qrcode=new Da(this.options,this.tokenProvider,this.httpClient,"APP_AUTH"),this.wechatmpqrcode=new Da(this.options,this.tokenProvider,this.httpClient,"WECHATMP_AUTH"),this.mfa=new Ma(this.options,this.tokenProvider,this.httpClient),this.social=new Ha(this.options,this.tokenProvider,this.httpClient),this.enterprise=new za(this.options,this.tokenProvider,this.httpClient),this.principal=new Ga(this.options,this.tokenProvider,this.httpClient),this.options.token&&this.setToken(this.options.token),this.event=new Ya(this.options,this.tokenProvider,this.httpClient)}return e.prototype.checkLoggedIn=function(){var e,t=this.tokenProvider.getUser();if(t)return t.id;var n=this.tokenProvider.getToken();if(!n)throw new Error("请先登录！");var r=ea(n),i=r.sub||(null===(e=r.data)||void 0===e?void 0:e.id);if(!i)throw new Error("不合法的 accessToken");return i},e.prototype.setCurrentUser=function(e){this.tokenProvider.setUser(e)},e.prototype.setToken=function(e){this.tokenProvider.setToken(e)},e.prototype.setRequestFrom=function(e){this.options.requestFrom=e,this.graphqlClient.setOptions(this.options),this.httpClient.setOptions(this.options)},e.prototype.registerByEmail=function(e,t,n,r){return Xa(this,void 0,void 0,function(){var i,s,o,a,c,l,u,d,h,p,f,m,g,v,y;return Qa(this,function(x){switch(x.label){case 0:return n=n||{},i=(r=r||{}).forceLogin,s=void 0!==i&&i,o=r.generateToken,a=void 0!==o&&o,c=r.clientIp,l=r.params,u=r.context,d=r.customData,h=r.phoneToken,f=(p=this.options).encryptFunction,m=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,f.apply(p,m.concat([x.sent(),this.options.encryption]))];case 2:return t=x.sent(),g=null,d?g=JSON.stringify(ms(d)):l&&(g=JSON.stringify(l)),v=null,u&&(v=JSON.stringify(u)),[4,(b=this.graphqlClient,w=this.tokenProvider,j={input:{email:e,password:t,profile:n,forceLogin:s,generateToken:a,clientIp:c,params:g,context:v,phoneToken:h}},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation registerByEmail($input: RegisterByEmailInput!) {\n  registerByEmail(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n  }\n}\n    ",[4,w.getToken()];case 1:return t=n.sent(),[2,b.request({query:e,token:t,variables:j})]}})}))];case 3:return y=x.sent().registerByEmail,this.setCurrentUser(y),[2,y]}var b,w,j})})},e.prototype.registerByEmailCode=function(e,t,n,r){return Xa(this,void 0,void 0,function(){var i,s;return Qa(this,function(o){switch(o.label){case 0:return i="".concat(this.baseClient.appHost,"/api/v2/register/email-code"),s=Ka({email:e,code:t,profile:n},r),[4,this.httpClient.request({method:"POST",url:i,data:s})];case 1:return[2,o.sent()]}})})},e.prototype.registerByUsername=function(e,t,n,r){return Xa(this,void 0,void 0,function(){var i,s,o,a,c,l,u,d,h,p,f,m,g,v,y,x;return Qa(this,function(b){switch(b.label){case 0:return n=n||{},i=(r=r||{}).forceLogin,s=void 0!==i&&i,o=r.generateToken,a=void 0!==o&&o,c=r.clientIp,l=r.params,u=r.context,d=r.customData,h=r.phoneToken,p=r.emailToken,m=(f=this.options).encryptFunction,g=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,m.apply(f,g.concat([b.sent(),this.options.encryption]))];case 2:return t=b.sent(),v=null,d?v=JSON.stringify(ms(d)):l&&(v=JSON.stringify(l)),y=null,u&&(y=JSON.stringify(u)),[4,(w=this.graphqlClient,j=this.tokenProvider,N={input:{username:e,password:t,profile:n,forceLogin:s,generateToken:a,clientIp:c,params:v,context:y,phoneToken:h,emailToken:p}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=j.getToken(),[2,w.request({query:"\n    mutation registerByUsername($input: RegisterByUsernameInput!) {\n  registerByUsername(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n  }\n}\n    ",token:e,variables:N})]})}))];case 3:return x=b.sent().registerByUsername,this.setCurrentUser(x),[2,x]}var w,j,N})})},e.prototype.registerByPhoneCode=function(e,t,n,r,i){return Xa(this,void 0,void 0,function(){var s,o,a,c,l,u,d,h,p,f,m,g,v,y,x,b;return Qa(this,function(w){switch(w.label){case 0:return r=r||{},s=(i=i||{}).forceLogin,o=void 0!==s&&s,a=i.generateToken,c=void 0!==a&&a,l=i.clientIp,u=i.params,d=i.context,h=i.customData,p=i.phoneCountryCode,f=i.emailToken,n?(g=(m=this.options).encryptFunction,v=[n],[4,this.publicKeyManager.getPublicKey()]):[3,3];case 1:return[4,g.apply(m,v.concat([w.sent(),this.options.encryption]))];case 2:n=w.sent(),w.label=3;case 3:return y=null,h?y=JSON.stringify(ms(h)):u&&(y=JSON.stringify(u)),x=null,d&&(x=JSON.stringify(d)),[4,(j=this.graphqlClient,N=this.tokenProvider,T={input:{phone:e,code:t,phoneCountryCode:p,password:n,profile:r,forceLogin:o,generateToken:c,clientIp:l,params:y,context:x,emailToken:f}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=N.getToken(),[2,j.request({query:"\n    mutation registerByPhoneCode($input: RegisterByPhoneCodeInput!) {\n  registerByPhoneCode(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n  }\n}\n    ",token:e,variables:T})]})}))];case 4:return b=w.sent().registerByPhoneCode,this.setCurrentUser(b),[2,b]}var j,N,T})})},e.prototype.checkPasswordStrength=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:return[4,(n=this.graphqlClient,r=this.tokenProvider,i={password:e},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    query checkPasswordStrength($password: String!) {\n  checkPasswordStrength(password: $password) {\n    valid\n    message\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return[2,t.sent().checkPasswordStrength]}var n,r,i})})},e.prototype.sendSmsCode=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i;return Qa(this,function(s){switch(s.label){case 0:return r="".concat(this.baseClient.appHost,"/api/v2/sms/send"),i={phone:e},t&&(i.phoneCountryCode=t),n&&(i.scene=n),[4,this.httpClient.request({method:"POST",url:r,data:i})];case 1:return[2,s.sent()]}})})},e.prototype.loginByEmail=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c,l,u,d,h,p,f,m;return Qa(this,function(g){switch(g.label){case 0:return r=(n=n||{}).autoRegister,i=void 0!==r&&r,s=n.captchaCode,o=n.clientIp,a=n.params,c=n.context,l=n.customData,d=(u=this.options).encryptFunction,h=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,d.apply(u,h.concat([g.sent(),this.options.encryption]))];case 2:return t=g.sent(),p=null,l?p=JSON.stringify(ms(l)):a&&(p=JSON.stringify(a)),f=null,c&&(f=JSON.stringify(c)),[4,(v=this.graphqlClient,y=this.tokenProvider,x={input:{email:e,password:t,autoRegister:i,captchaCode:s,clientIp:o,params:p,context:f}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=y.getToken(),[2,v.request({query:"\n    mutation loginByEmail($input: LoginByEmailInput!) {\n  loginByEmail(input: $input) {\n    id\n    arn\n    status\n    userPoolId\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    newlyCreated\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",token:e,variables:x})]})}))];case 3:return(m=g.sent().loginByEmail).customData&&(m.customData=us(m.customData)),this.setCurrentUser(m),[2,m]}var v,y,x})})},e.prototype.loginByUsername=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c,l,u,d,h,p,f,m;return Qa(this,function(g){switch(g.label){case 0:return r=(n=n||{}).autoRegister,i=void 0!==r&&r,s=n.captchaCode,o=n.clientIp,a=n.params,c=n.context,l=n.customData,d=(u=this.options).encryptFunction,h=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,d.apply(u,h.concat([g.sent(),this.options.encryption]))];case 2:return t=g.sent(),p=null,l?p=JSON.stringify(ms(l)):a&&(p=JSON.stringify(a)),f=null,c&&(f=JSON.stringify(c)),[4,(v=this.graphqlClient,y=this.tokenProvider,x={input:{username:e,password:t,autoRegister:i,captchaCode:s,clientIp:o,params:p,context:f}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=y.getToken(),[2,v.request({query:"\n    mutation loginByUsername($input: LoginByUsernameInput!) {\n  loginByUsername(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    newlyCreated\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",token:e,variables:x})]})}))];case 3:return(m=g.sent().loginByUsername).customData&&(m.customData=us(m.customData)),this.setCurrentUser(m),[2,m]}var v,y,x})})},e.prototype.loginByPhoneCode=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c,l,u;return Qa(this,function(d){switch(d.label){case 0:return r=(n=n||{}).clientIp,i=n.params,s=n.context,o=n.customData,a=n.phoneCountryCode,c=null,o?c=JSON.stringify(ms(o)):i&&(c=JSON.stringify(i)),l=null,s&&(l=JSON.stringify(s)),[4,(h=this.graphqlClient,p=this.tokenProvider,f={input:{phone:e,code:t,phoneCountryCode:a,clientIp:r,params:c,context:l}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=p.getToken(),[2,h.request({query:"\n    mutation loginByPhoneCode($input: LoginByPhoneCodeInput!) {\n  loginByPhoneCode(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    newlyCreated\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",token:e,variables:f})]})}))];case 1:return(u=d.sent().loginByPhoneCode).customData&&(u.customData=us(u.customData)),this.setCurrentUser(u),[2,u]}var h,p,f})})},e.prototype.loginByEmailCode=function(e,t,n){var r;return Xa(this,void 0,void 0,function(){var i,s,o,a,c,l,u,d,h;return Qa(this,function(p){switch(p.label){case 0:return i=(n=n||{}).clientIp,s=n.params,o=n.context,a=n.customData,c=n.phoneCountryCode,l=null,a?l=JSON.stringify(ms(a)):s&&(l=JSON.stringify(s)),u=null,o&&(u=JSON.stringify(o)),d="".concat(null!==(r=this.options.appHost)&&void 0!==r?r:"","/api/v2/login/email-code"),[4,this.httpClient.request({method:"POST",url:d,data:{email:e,code:t,phoneCountryCode:c,clientIp:i,params:l,context:u},unSetToken:!0})];case 1:return(h=p.sent()).customData&&(h.customData=us(h.customData)),this.setCurrentUser(h),[2,h]}})})},e.prototype.loginByPhonePassword=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c,l,u,d,h,p,f,m;return Qa(this,function(g){switch(g.label){case 0:return r=(n=n||{}).captchaCode,i=n.autoRegister,s=void 0!==i&&i,o=n.clientIp,a=n.params,c=n.context,l=n.customData,d=(u=this.options).encryptFunction,h=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,d.apply(u,h.concat([g.sent(),this.options.encryption]))];case 2:return t=g.sent(),p=null,l?p=JSON.stringify(ms(l)):a&&(p=JSON.stringify(a)),f=null,c&&(f=JSON.stringify(c)),[4,(v=this.graphqlClient,y=this.tokenProvider,x={input:{phone:e,password:t,captchaCode:r,autoRegister:s,clientIp:o,params:p,context:f}},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=y.getToken(),[2,v.request({query:"\n    mutation loginByPhonePassword($input: LoginByPhonePasswordInput!) {\n  loginByPhonePassword(input: $input) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    newlyCreated\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",token:e,variables:x})]})}))];case 3:return(m=g.sent().loginByPhonePassword).customData&&(m.customData=us(m.customData)),this.setCurrentUser(m),[2,m]}var v,y,x})})},e.prototype.loginBySubAccount=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c;return Qa(this,function(l){switch(l.label){case 0:return r=(n=n||{}).captchaCode,i=n.clientIp,o=(s=this.options).encryptFunction,a=[t],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,o.apply(s,a.concat([l.sent(),this.options.encryption]))];case 2:return t=l.sent(),[4,(u=this.graphqlClient,d=this.tokenProvider,h={account:e,password:t,captchaCode:r,clientIp:i},So(void 0,void 0,void 0,function(){var e;return Co(this,function(t){return e=d.getToken(),[2,u.request({query:"\n    mutation loginBySubAccount($account: String!, $password: String!, $captchaCode: String, $clientIp: String) {\n  loginBySubAccount(account: $account, password: $password, captchaCode: $captchaCode, clientIp: $clientIp) {\n    id\n    arn\n    status\n    userPoolId\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    newlyCreated\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",token:e,variables:h})]})}))];case 3:return c=l.sent().loginBySubAccount,this.setCurrentUser(c),[2,c]}var u,d,h})})},e.prototype.checkLoginStatus=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:return[4,(n=this.graphqlClient,r=this.tokenProvider,i={token:e},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    query checkLoginStatus($token: String) {\n  checkLoginStatus(token: $token) {\n    code\n    message\n    status\n    exp\n    iat\n    data {\n      id\n      userPoolId\n      arn\n    }\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return[2,t.sent().checkLoginStatus]}var n,r,i})})},e.prototype.sendEmail=function(e,t){return Xa(this,void 0,void 0,function(){return Qa(this,function(n){switch(n.label){case 0:return[4,(r=this.graphqlClient,i=this.tokenProvider,s={email:e,scene:t},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation sendEmail($email: String!, $scene: EmailScene!) {\n  sendEmail(email: $email, scene: $scene) {\n    message\n    code\n  }\n}\n    ",[4,i.getToken()];case 1:return t=n.sent(),[4,r.request({query:e,token:t,variables:s})];case 2:return[2,n.sent()]}})}))];case 1:return[2,n.sent().sendEmail]}var r,i,s})})},e.prototype.resetPasswordByPhoneCode=function(e,t,n,r){return Xa(this,void 0,void 0,function(){var i,s,o;return Qa(this,function(a){switch(a.label){case 0:return s=(i=this.options).encryptFunction,o=[n],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,s.apply(i,o.concat([a.sent(),this.options.encryption]))];case 2:return n=a.sent(),[4,ko(this.graphqlClient,this.tokenProvider,{phone:e,code:t,newPassword:n,phoneCountryCode:r})];case 3:return[2,a.sent().resetPassword]}})})},e.prototype.resetPasswordByEmailCode=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s;return Qa(this,function(o){switch(o.label){case 0:return i=(r=this.options).encryptFunction,s=[n],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,i.apply(r,s.concat([o.sent(),this.options.encryption]))];case 2:return n=o.sent(),[4,ko(this.graphqlClient,this.tokenProvider,{email:e,code:t,newPassword:n})];case 3:return[2,o.sent().resetPassword]}})})},e.prototype.resetPasswordByFirstLoginToken=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i,s;return Qa(this,function(o){switch(o.label){case 0:return t=e.token,n=e.password,i=(r=this.options).encryptFunction,s=[n],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,i.apply(r,s.concat([o.sent(),this.options.encryption]))];case 2:return n=o.sent(),[4,(a=this.graphqlClient,c=this.tokenProvider,l={token:t,password:n},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation resetPasswordByFirstLoginToken($token: String!, $password: String!) {\n  resetPasswordByFirstLoginToken(token: $token, password: $password) {\n    message\n    code\n  }\n}\n    ",[4,c.getToken()];case 1:return t=n.sent(),[2,a.request({query:e,token:t,variables:l})]}})}))];case 3:return[2,o.sent().resetPasswordByFirstLoginToken]}var a,c,l})})},e.prototype.resetPasswordByForceResetToken=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i,s,o,a,c,l;return Qa(this,function(u){switch(u.label){case 0:return t=e.token,n=e.newPassword,r=e.oldPassword,s=(i=this.options).encryptFunction,o=[n],[4,this.publicKeyManager.getPublicKey()];case 1:return[4,s.apply(i,o.concat([u.sent(),this.options.encryption]))];case 2:return n=u.sent(),c=(a=this.options).encryptFunction,l=[r],[4,this.publicKeyManager.getPublicKey()];case 3:return[4,c.apply(a,l.concat([u.sent(),this.options.encryption]))];case 4:return r=u.sent(),[4,(d=this.graphqlClient,h=this.tokenProvider,p={token:t,oldPassword:r,newPassword:n},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation resetPasswordByForceResetToken($token: String!, $oldPassword: String!, $newPassword: String!) {\n  resetPasswordByForceResetToken(token: $token, oldPassword: $oldPassword, newPassword: $newPassword) {\n    message\n    code\n  }\n}\n    ",[4,h.getToken()];case 1:return t=n.sent(),[2,d.request({query:e,token:t,variables:p})]}})}))];case 5:return[2,u.sent().resetPasswordByForceResetToken]}var d,h,p})})},e.prototype.updateProfile=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i,s,o;return Qa(this,function(a){switch(a.label){case 0:return n=this.checkLoggedIn(),i=(r=t||{}).emailToken,s=r.phoneToken,e&&e.password&&delete e.password,[4,(c=this.graphqlClient,l=this.tokenProvider,u={id:n,input:e,emailToken:i,phoneToken:s},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation updateUser($id: String, $input: UpdateUserInput!, $emailToken: String, $phoneToken: String) {\n  updateUser(id: $id, input: $input, emailToken: $emailToken, phoneToken: $phoneToken) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n  }\n}\n    ",[4,l.getToken()];case 1:return t=n.sent(),[2,c.request({query:e,token:t,variables:u})]}})}))];case 1:return o=a.sent().updateUser,this.setCurrentUser(o),[2,o]}var c,l,u})})},e.prototype.updatePassword=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i,s,o,a,c,l;return Qa(this,function(u){switch(u.label){case 0:return(n=e)?(i=(r=this.options).encryptFunction,s=[e],[4,this.publicKeyManager.getPublicKey()]):[3,3];case 1:return[4,i.apply(r,s.concat([u.sent(),this.options.encryption]))];case 2:n=u.sent(),u.label=3;case 3:return e=n,(o=t)?(c=(a=this.options).encryptFunction,l=[t],[4,this.publicKeyManager.getPublicKey()]):[3,6];case 4:return[4,c.apply(a,l.concat([u.sent(),this.options.encryption]))];case 5:o=u.sent(),u.label=6;case 6:return t=o,[4,(d=this.graphqlClient,h=this.tokenProvider,p={newPassword:e,oldPassword:t},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation updatePassword($newPassword: String!, $oldPassword: String) {\n  updatePassword(newPassword: $newPassword, oldPassword: $oldPassword) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,h.getToken()];case 1:return t=n.sent(),[2,d.request({query:e,token:t,variables:p})]}})}))];case 7:return[2,u.sent().updatePassword]}var d,h,p})})},e.prototype.updatePhone=function(e,t,n,r,i,s){return Xa(this,void 0,void 0,function(){return Qa(this,function(o){switch(o.label){case 0:return[4,(a=this.graphqlClient,c=this.tokenProvider,l={phone:e,phoneCode:t,oldPhone:n,oldPhoneCode:r,phoneCountryCode:i,oldPhoneCountryCode:s},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation updatePhone($phone: String!, $phoneCode: String!, $oldPhone: String, $oldPhoneCode: String, $phoneCountryCode: String, $oldPhoneCountryCode: String) {\n  updatePhone(phone: $phone, phoneCode: $phoneCode, oldPhone: $oldPhone, oldPhoneCode: $oldPhoneCode, phoneCountryCode: $phoneCountryCode, oldPhoneCountryCode: $oldPhoneCountryCode) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,c.getToken()];case 1:return t=n.sent(),[2,a.request({query:e,token:t,variables:l})]}})}))];case 1:return[2,o.sent().updatePhone]}var a,c,l})})},e.prototype.updateEmail=function(e,t,n,r){return Xa(this,void 0,void 0,function(){return Qa(this,function(i){switch(i.label){case 0:return[4,(s=this.graphqlClient,o=this.tokenProvider,a={email:e,emailCode:t,oldEmail:n,oldEmailCode:r},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation updateEmail($email: String!, $emailCode: String!, $oldEmail: String, $oldEmailCode: String) {\n  updateEmail(email: $email, emailCode: $emailCode, oldEmail: $oldEmail, oldEmailCode: $oldEmailCode) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,o.getToken()];case 1:return t=n.sent(),[2,s.request({query:e,token:t,variables:a})]}})}))];case 1:return[2,i.sent().updateEmail]}var s,o,a})})},e.prototype.refreshToken=function(){return Xa(this,void 0,void 0,function(){var e;return Qa(this,function(t){switch(t.label){case 0:return[4,(n=this.graphqlClient,r=this.tokenProvider,i={},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    mutation refreshToken($id: String) {\n  refreshToken(id: $id) {\n    token\n    iat\n    exp\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return e=t.sent().refreshToken,this.setToken(e.token),[2,e]}var n,r,i})})},e.prototype.linkAccount=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:return[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v2/users/link"),data:{primaryUserToken:e.primaryUserToken,secondaryUserToken:e.secondaryUserToken}})];case 1:return t.sent(),[2,{code:200,message:"绑定成功"}]}})})},e.prototype.unLinkAccount=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:return[4,this.httpClient.request({method:"POST",url:"".concat(this.baseClient.appHost,"/api/v2/users/unlink"),data:{primaryUserToken:e.primaryUserToken,provider:e.provider}})];case 1:return t.sent(),[2,{code:200,message:"解绑成功"}]}})})},e.prototype.bindPhone=function(e,t,n){return Xa(this,void 0,void 0,function(){var r;return Qa(this,function(i){switch(i.label){case 0:return[4,(s=this.graphqlClient,o=this.tokenProvider,a={phone:e,phoneCode:t,phoneCountryCode:n},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation bindPhone($phone: String!, $phoneCode: String!, $phoneCountryCode: String) {\n  bindPhone(phone: $phone, phoneCode: $phoneCode, phoneCountryCode: $phoneCountryCode) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,o.getToken()];case 1:return t=n.sent(),[2,s.request({query:e,token:t,variables:a})]}})}))];case 1:return r=i.sent().bindPhone,this.setCurrentUser(r),[2,r]}var s,o,a})})},e.prototype.unbindPhone=function(){return Xa(this,void 0,void 0,function(){var e;return Qa(this,function(t){switch(t.label){case 0:return[4,(n=this.graphqlClient,r=this.tokenProvider,i={},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    mutation unbindPhone {\n  unbindPhone {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return e=t.sent().unbindPhone,this.setCurrentUser(e),[2,e]}var n,r,i})})},e.prototype.bindEmail=function(e,t){return Xa(this,void 0,void 0,function(){var n;return Qa(this,function(r){switch(r.label){case 0:return[4,(i=this.graphqlClient,s=this.tokenProvider,o={email:e,emailCode:t},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation bindEmail($email: String!, $emailCode: String!) {\n  bindEmail(email: $email, emailCode: $emailCode) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,s.getToken()];case 1:return t=n.sent(),[2,i.request({query:e,token:t,variables:o})]}})}))];case 1:return n=r.sent().bindEmail,this.setCurrentUser(n),[2,n]}var i,s,o})})},e.prototype.unbindEmail=function(){return Xa(this,void 0,void 0,function(){var e;return Qa(this,function(t){switch(t.label){case 0:return[4,(n=this.graphqlClient,r=this.tokenProvider,i={},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    mutation unbindEmail {\n  unbindEmail {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    phoneCountryCode\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return e=t.sent().unbindEmail,this.setCurrentUser(e),[2,e]}var n,r,i})})},e.prototype.getCurrentUser=function(){return Xa(this,void 0,void 0,function(){var e;return Qa(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(n=this.graphqlClient,r=this.tokenProvider,i={},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    query user($id: String) {\n  user(id: $id) {\n    id\n    arn\n    userPoolId\n    status\n    username\n    email\n    emailVerified\n    phone\n    phoneVerified\n    identities {\n      openid\n      userIdInIdp\n      userId\n      connectionId\n      isSocial\n      provider\n      type\n      userPoolId\n      extIdpId\n    }\n    unionid\n    openid\n    nickname\n    registerSource\n    photo\n    password\n    oauth\n    token\n    tokenExpiredAt\n    loginsCount\n    lastLogin\n    lastIP\n    signedUp\n    blocked\n    isDeleted\n    device\n    browser\n    company\n    name\n    givenName\n    familyName\n    middleName\n    profile\n    preferredUsername\n    website\n    gender\n    birthdate\n    zoneinfo\n    locale\n    address\n    formatted\n    streetAddress\n    locality\n    region\n    postalCode\n    city\n    province\n    country\n    createdAt\n    updatedAt\n    externalId\n    phoneCountryCode\n    customData {\n      key\n      value\n      dataType\n      label\n    }\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[4,n.request({query:e,token:t,variables:i})];case 2:return[2,s.sent()]}})}))];case 1:return(e=t.sent().user).customData&&(e.customData=us(e.customData)),this.setCurrentUser(e),[2,e];case 2:return t.sent(),[2,null];case 3:return[2]}var n,r,i})})},e.prototype.logout=function(){return Xa(this,void 0,void 0,function(){return Qa(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v2/logout?app_id=").concat(this.options.appId),withCredentials:!0})];case 1:return e.sent(),this.tokenProvider.clearUser(),[2]}})})},e.prototype.logoutCurrent=function(){return Xa(this,void 0,void 0,function(){return Qa(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/logout?appId=").concat(this.options.appId,"&deviceId=current"),withCredentials:!0})];case 1:return e.sent(),this.tokenProvider.clearUser(),[2]}})})},e.prototype.listUdv=function(){return Xa(this,void 0,void 0,function(){var e,t;return Qa(this,function(n){switch(n.label){case 0:return e=this.checkLoggedIn(),[4,Eo(this.graphqlClient,this.tokenProvider,{targetType:gn.User,targetId:e})];case 1:return t=n.sent().udv,[2,cs(t)]}})})},e.prototype.setUdv=function(e,t){return Xa(this,void 0,void 0,function(){var n,r;return Qa(this,function(i){switch(i.label){case 0:return n=this.checkLoggedIn(),t=JSON.stringify(t),[4,(s=this.graphqlClient,o=this.tokenProvider,a={targetType:gn.User,targetId:n,key:e,value:t},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation setUdv($targetType: UDFTargetType!, $targetId: String!, $key: String!, $value: String!) {\n  setUdv(targetType: $targetType, targetId: $targetId, key: $key, value: $value) {\n    key\n    dataType\n    value\n    label\n  }\n}\n    ",[4,o.getToken()];case 1:return t=n.sent(),[2,s.request({query:e,token:t,variables:a})]}})}))];case 1:return r=i.sent().setUdv,[2,cs(r)]}var s,o,a})})},e.prototype.removeUdv=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t=this.checkLoggedIn(),[4,Io(this.graphqlClient,this.tokenProvider,{targetType:gn.User,targetId:t,key:e})];case 1:return n=r.sent().removeUdv,[2,cs(n)]}})})},e.prototype.listOrgs=function(){return Xa(this,void 0,void 0,function(){return Qa(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v2/users/me/orgs")})];case 1:return[2,e.sent()]}})})},e.prototype.listDepartments=function(){return Xa(this,void 0,void 0,function(){var e;return Qa(this,function(t){switch(t.label){case 0:return e=this.checkLoggedIn(),[4,(n=this.graphqlClient,r=this.tokenProvider,i={id:e},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(s){switch(s.label){case 0:return e="\n    query getUserDepartments($id: String!, $orgId: String) {\n  user(id: $id) {\n    departments(orgId: $orgId) {\n      totalCount\n      list {\n        department {\n          id\n          orgId\n          name\n          nameI18n\n          description\n          descriptionI18n\n          order\n          code\n          root\n          depth\n          path\n          codePath\n          namePath\n          createdAt\n          updatedAt\n          children\n          isVirtualNode\n        }\n        isMainDepartment\n        joinedAt\n      }\n    }\n  }\n}\n    ",[4,r.getToken()];case 1:return t=s.sent(),[2,n.request({query:e,token:t,variables:i})]}})}))];case 1:return[2,t.sent().user.departments]}var n,r,i})})},e.prototype.loginByLdap=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o;return Qa(this,function(a){switch(a.label){case 0:return r=(n=n||{}).clientIp,i=n.withCustomData,s="".concat(this.baseClient.appHost,"/api/v2/ldap/verify-user"),[4,this.httpClient.request({method:"POST",url:s,data:{username:e,password:t,clientIp:r,withCustomData:i}})];case 1:return o=a.sent(),this.setCurrentUser(o),[2,o]}})})},e.prototype.loginByAd=function(e,t,n){return Xa(this,void 0,void 0,function(){var r,i,s,o,a,c;return Qa(this,function(l){switch(l.label){case 0:return r=(n=n||{}).clientIp,i=n.withCustomData,s=new URL(this.baseClient.appHost).hostname.split(".").slice(1).join("."),o=this.options.websocketHost||"https://ws.".concat(s),a="".concat(o,"/api/v2/ad/verify-user"),[4,this.httpClient.request({method:"POST",url:a,data:{username:e,password:t,clientIp:r,withCustomData:i}})];case 1:return c=l.sent(),this.setCurrentUser(c),[2,c]}})})},e.prototype.uploadPhoto=function(e,t){var n=this;fs({accept:e=e||"image/*",url:"".concat(this.baseClient.appHost,"/api/v2/upload?folder=avatar")}).then(function(e){var n=e.url;return t(n)}).catch(function(e){var t=e.code,r=e.message;return n.options.onError(t,r)})},e.prototype.updateAvatar=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:return[4,this.uploadAvatar(e)];case 1:return[2,t.sent()]}})})},e.prototype.uploadAvatar=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i=this;return Qa(this,function(s){switch(s.label){case 0:return t=(e||{}).accept,this.checkLoggedIn(),[4,new Promise(function(e){i.uploadPhoto(t,function(t){e(t)})})];case 1:return n=s.sent(),[4,this.updateProfile({photo:n})];case 2:return r=s.sent(),this.setCurrentUser(r),[2,r]}})})},e.prototype.getUdfValue=function(){return Xa(this,void 0,void 0,function(){var e,t;return Qa(this,function(n){switch(n.label){case 0:return e=this.checkLoggedIn(),[4,Eo(this.graphqlClient,this.tokenProvider,{targetType:gn.User,targetId:e})];case 1:return t=n.sent().udv,[2,us(t)]}})})},e.prototype.setUdfValue=function(e){return Xa(this,void 0,void 0,function(){var t;return Qa(this,function(n){switch(n.label){case 0:if(0===Object.keys(e).length)throw new Error("empty udf value list");return t=this.checkLoggedIn(),[4,(r=this.graphqlClient,i=this.tokenProvider,s={targetType:gn.User,targetId:t,udvList:Object.keys(e).map(function(t){return{key:t,value:JSON.stringify(e[t])}})},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    mutation setUdvBatch($targetType: UDFTargetType!, $targetId: String!, $udvList: [UserDefinedDataInput!]) {\n  setUdvBatch(targetType: $targetType, targetId: $targetId, udvList: $udvList) {\n    key\n    dataType\n    value\n    label\n  }\n}\n    ",[4,i.getToken()];case 1:return t=n.sent(),[2,r.request({query:e,token:t,variables:s})]}})}))];case 1:return[2,n.sent().setUdvBatch]}var r,i,s})})},e.prototype.removeUdfValue=function(e){return Xa(this,void 0,void 0,function(){var t;return Qa(this,function(n){switch(n.label){case 0:return t=this.checkLoggedIn(),[4,Io(this.graphqlClient,this.tokenProvider,{targetType:gn.User,targetId:t,key:e})];case 1:return n.sent(),[2]}})})},e.prototype.getSecurityLevel=function(){return Xa(this,void 0,void 0,function(){return Qa(this,function(e){switch(e.label){case 0:return[4,this.httpClient.request({method:"GET",url:"".concat(this.baseClient.appHost,"/api/v2/users/me/security-level")})];case 1:return[2,e.sent()]}})})},e.prototype.listAuthorizedResources=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i,s,o,a;return Qa(this,function(c){switch(c.label){case 0:return n=this.checkLoggedIn(),r=(t||{}).resourceType,[4,(l=this.graphqlClient,u=this.tokenProvider,d={id:n,namespace:e,resourceType:r},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    query listUserAuthorizedResources($id: String!, $namespace: String, $resourceType: String) {\n  user(id: $id) {\n    authorizedResources(namespace: $namespace, resourceType: $resourceType) {\n      totalCount\n      list {\n        code\n        type\n        actions\n        apiIdentifier\n      }\n    }\n  }\n}\n    ",[4,u.getToken()];case 1:return t=n.sent(),[2,l.request({query:e,token:t,variables:d})]}})}))];case 1:if(!(i=c.sent().user))throw new Error("用户不存在");return s=i.authorizedResources,o=s.list,a=s.totalCount,[2,{list:o=o.map(function(e){for(var t in e)e[t]||delete e[t];return e}),totalCount:a}]}var l,u,d})})},e.prototype.isUserExists=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i;return Qa(this,function(s){switch(s.label){case 0:return t=e.username,n=e.email,r=e.phone,i=e.externalId,[4,(o=this.graphqlClient,a=this.tokenProvider,c={username:t,email:n,phone:r,externalId:i},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    query isUserExists($email: String, $phone: String, $username: String, $externalId: String) {\n  isUserExists(email: $email, phone: $phone, username: $username, externalId: $externalId)\n}\n    ",[4,a.getToken()];case 1:return t=n.sent(),[2,o.request({query:e,token:t,variables:c})]}})}))];case 1:return[2,s.sent().isUserExists]}var o,a,c})})},e.prototype.computedPasswordSecurityLevel=function(e){if("string"!=typeof e)throw"password must be a `string`";var t=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{12,}$/g),n=new RegExp(/^(?=.*[a-zA-Z])(?=.*\d)[^]{8,}$/g);return null!==e.match(t)?oa.HIGH:null!==e.match(n)?oa.MIDDLE:oa.LOW},e.prototype._generateTokenRequest=function(e){var t={};return Object.keys(e).map(function(n){void 0!==e[n]&&(t[n]=e[n])}),new URLSearchParams(t).toString()},e.prototype._generateBasicAuthToken=function(e,t){var n=e||this.options.appId,r=t||this.options.secret;return"Basic "+Buffer.from(n+":"+r).toString("base64")},e.prototype._getAccessTokenByCodeWithClientSecretPost=function(e,t){return Xa(this,void 0,void 0,function(){var n,r;return Qa(this,function(i){switch(i.label){case 0:return n=this._generateTokenRequest({client_id:this.options.appId,client_secret:this.options.secret,grant_type:"authorization_code",code:e,redirect_uri:this.options.redirectUri,code_verifier:t}),r="","oidc"===this.options.protocol?r="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(r="".concat(this.baseClient.appHost,"/oauth/token")),[4,this.naiveHttpClient.request({method:"POST",url:r,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,i.sent()]}})})},e.prototype._getAccessTokenByCodeWithClientSecretBasic=function(e,t){return Xa(this,void 0,void 0,function(){var n,r;return Qa(this,function(i){switch(i.label){case 0:return n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/token")),r=this._generateTokenRequest({grant_type:"authorization_code",code:e,redirect_uri:this.options.redirectUri,code_verifier:t}),[4,this.naiveHttpClient.request({data:r,method:"POST",url:n,headers:{Authorization:this._generateBasicAuthToken()}})];case 1:return[2,i.sent()]}})})},e.prototype._getAccessTokenByCodeWithNone=function(e,t){return Xa(this,void 0,void 0,function(){var n,r;return Qa(this,function(i){switch(i.label){case 0:return n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/token")),r=this._generateTokenRequest({client_id:this.options.appId,grant_type:"authorization_code",code:e,redirect_uri:this.options.redirectUri,code_verifier:t}),[4,this.naiveHttpClient.request({method:"POST",url:n,data:r})];case 1:return[2,i.sent()]}})})},e.prototype.getAccessTokenByIdToken=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i,s,o;return Qa(this,function(a){switch(a.label){case 0:return t=e.redirectUri,n=e.idToken,r=e.scope,i=void 0===r?"":r,s={oidc:"/oidc/token",oauth:"/oauth/token"},o=this.baseClient.appHost+s[this.options.protocol]||"",[4,this.naiveHttpClient.request({method:"POST",url:o,data:this._generateTokenRequest({client_id:this.options.appId,grant_type:"http://authing.cn/oidc/grant_type/authing_token",redirect_uri:t,token:n,scope:i}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,a.sent()]}})})},e.prototype.getAccessTokenByCode=function(e,t){return Xa(this,void 0,void 0,function(){return Qa(this,function(n){switch(n.label){case 0:if(!["oauth","oidc"].includes(this.options.protocol))throw new Error("初始化 AuthenticationClient 时传入的 protocol 参数必须为 oauth 或 oidc，请检查参数");if(!this.options.secret&&"none"!==this.options.tokenEndPointAuthMethod)throw new Error("请在初始化 AuthenticationClient 时传入 appId 和 secret 参数");return"client_secret_post"!==this.options.tokenEndPointAuthMethod?[3,2]:[4,this._getAccessTokenByCodeWithClientSecretPost(e,null==t?void 0:t.codeVerifier)];case 1:case 3:case 5:return[2,n.sent()];case 2:return"client_secret_basic"!==this.options.tokenEndPointAuthMethod?[3,4]:[4,this._getAccessTokenByCodeWithClientSecretBasic(e,null==t?void 0:t.codeVerifier)];case 4:return"none"!==this.options.tokenEndPointAuthMethod?[3,6]:[4,this._getAccessTokenByCodeWithNone(e,null==t?void 0:t.codeVerifier)];case 6:return[2]}})})},e.prototype.generateCodeChallenge=function(){return vs(43)},e.prototype.getCodeChallengeDigest=function(e){if(!e)throw new Error("请提供 options 参数，options.codeChallenge 为一个长度大于等于 43 的字符串，options.method 可选值为 S256、plain");if(!e.codeChallenge)throw new Error("请提供 options.codeChallenge，值为一个长度大于等于 43 的字符串");var t=e.method,n=void 0===t?"S256":t;if("S256"===n)return Pa(e.codeChallenge).toString($.enc.Base64).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");if("plain"===n)return e.codeChallenge;throw new Error("不支持的 options.method，可选值为 S256、plain")},e.prototype.getAccessTokenByClientCredentials=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i,s;return Qa(this,function(o){switch(o.label){case 0:if(!e)throw new Error("请传入 scope 参数，请看文档：https://docs.authing.cn/v2/guides/authorization/m2m-authz.html");if(!t)throw new Error("请在调用本方法时传入 { accessKey: string, accessSecret: string }，请看文档：https://docs.authing.cn/v2/guides/authorization/m2m-authz.html");return n=(null==t?void 0:t.accessKey)||this.options.appId,r=(null==t?void 0:t.accessSecret)||this.options.secret,i=this._generateTokenRequest({client_id:n,client_secret:r,grant_type:"client_credentials",scope:e}),s="","oidc"===this.options.protocol?s="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(s="".concat(this.baseClient.appHost,"/oauth/token")),[4,this.naiveHttpClient.request({method:"POST",url:s,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,o.sent()]}})})},e.prototype.getUserInfoByAccessToken=function(e,t){return Xa(this,void 0,void 0,function(){var n;return Qa(this,function(r){switch(r.label){case 0:if(t){if(t.method&&!["POST","GET"].includes(t.method))throw new Error("options.method 参数的可选值为 POST、GET，请检查输入");if(t.tokenPlace&&!["query","header","body"].includes(t.tokenPlace))throw new Error("options.tokenPlace 参数的可选值为 query、header、body，请检查输入");if("GET"===t.method&&"body"===t.tokenPlace)throw new Error("options.method 参数为 GET 时，options.tokenPlace 参数不能为 body");t.method=t.method||"GET",t.tokenPlace=t.tokenPlace||"query"}return n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/me"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/me")),"POST"!==(null==t?void 0:t.method)?[3,7]:"header"!==(null==t?void 0:t.tokenPlace)?[3,2]:[4,this.naiveHttpClient.request({method:"POST",url:n,headers:{Authorization:"Bearer "+e}})];case 1:case 3:case 5:case 8:case 10:case 13:return[2,r.sent()];case 2:return"query"!==(null==t?void 0:t.tokenPlace)?[3,4]:[4,this.naiveHttpClient.request({method:"POST",url:n,params:{access_token:e}})];case 4:return"body"!==(null==t?void 0:t.tokenPlace)?[3,6]:[4,this.naiveHttpClient.request({method:"POST",url:n,data:as({access_token:e})})];case 6:case 11:return[3,14];case 7:return"GET"!==(null==t?void 0:t.method)?[3,12]:"header"!==(null==t?void 0:t.tokenPlace)?[3,9]:[4,this.naiveHttpClient.request({method:"GET",url:n,headers:{Authorization:"Bearer "+e}})];case 9:return"query"!==(null==t?void 0:t.tokenPlace)?[3,11]:[4,this.naiveHttpClient.request({method:"GET",url:n,params:{access_token:e}})];case 12:return[4,this.naiveHttpClient.request({method:"GET",url:n,params:{access_token:e}})];case 14:return[2]}})})},e.prototype.buildAuthorizeUrl=function(e){if(!this.baseClient.appHost)throw new Error("请在初始化 AuthenticationClient 时传入应用域名 appHost 参数，形如：https://app1.authing.cn");if("oidc"===this.options.protocol)return this._buildOidcAuthorizeUrl(e);if("oauth"===this.options.protocol)return this._buildOauthAuthorizeUrl(e);if("saml"===this.options.protocol)return this._buildSamlAuthorizeUrl();if("cas"===this.options.protocol)return this._buildCasAuthorizeUrl(e);throw new Error("不支持的协议类型，请在初始化 AuthenticationClient 时传入 protocol 参数，可选值为 oidc、oauth、saml、cas")},e.prototype._buildOidcAuthorizeUrl=function(e){var t={appId:"client_id",scope:"scope",state:"state",nonce:"nonce",responseMode:"response_mode",responseType:"response_type",redirectUri:"redirect_uri",codeChallenge:"code_challenge",codeChallengeMethod:"code_challenge_method",tenantId:"tenant_id"},n={nonce:Math.random().toString().slice(2),state:Math.random().toString().slice(2),scope:"openid profile email phone address",client_id:this.options.appId,redirect_uri:this.options.redirectUri,response_type:"code"};Object.keys(t).forEach(function(r){e&&e[r]&&("scope"===r&&e.scope.includes("offline_access")&&(n.prompt="consent"),n[t[r]]=e[r])});var r=new URLSearchParams(n);return this.baseClient.appHost+"/oidc/auth?"+r.toString()},e.prototype._buildOauthAuthorizeUrl=function(e){var t={appId:"client_id",scope:"scope",state:"state",responseType:"response_type",redirectUri:"redirect_uri"},n={state:Math.random().toString().slice(2),scope:"user",client_id:this.options.appId,redirect_uri:this.options.redirectUri,response_type:"code"};Object.keys(t).forEach(function(r){e&&e[r]&&(n[t[r]]=e[r])});var r=new URLSearchParams(n);return this.baseClient.appHost+"/oauth/auth?"+r.toString()},e.prototype._buildSamlAuthorizeUrl=function(){return this.baseClient.appHost+"/api/v2/saml-idp/"+this.options.appId},e.prototype._buildCasAuthorizeUrl=function(e){return(null==e?void 0:e.service)?"".concat(this.baseClient.appHost,"/cas-idp/").concat(this.options.appId,"?service=").concat(null==e?void 0:e.service):"".concat(this.baseClient.appHost,"/cas-idp/").concat(this.options.appId)},e.prototype._buildCasLogoutUrl=function(e){return(null==e?void 0:e.redirectUri)?this.baseClient.appHost+"/cas-idp/logout?url="+e.redirectUri:"".concat(this.baseClient.appHost,"/cas-idp/logout")},e.prototype._buildOidcLogoutUrl=function(e){if(e&&(!e.idToken||!e.redirectUri))throw new Error("必须同时传入 idToken 和 redirectUri 参数，或者同时都不传入");return(null==e?void 0:e.redirectUri)?"".concat(this.baseClient.appHost,"/oidc/session/end?id_token_hint=").concat(e.idToken,"&post_logout_redirect_uri=").concat(e.redirectUri):"".concat(this.baseClient.appHost,"/oidc/session/end")},e.prototype._buildEasyLogoutUrl=function(e){return(null==e?void 0:e.redirectUri)?"".concat(this.baseClient.appHost,"/login/profile/logout?redirect_uri=").concat(e.redirectUri):"".concat(this.baseClient.appHost,"/login/profile/logout")},e.prototype.buildLogoutUrl=function(e){return"cas"===this.options.protocol?this._buildCasLogoutUrl(e):"oidc"===this.options.protocol&&(null==e?void 0:e.expert)?this._buildOidcLogoutUrl(e):this._buildEasyLogoutUrl(e)},e.prototype._getNewAccessTokenByRefreshTokenWithClientSecretPost=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t=this._generateTokenRequest({client_id:this.options.appId,client_secret:this.options.secret,grant_type:"refresh_token",refresh_token:e}),n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/token")),[4,this.naiveHttpClient.request({method:"POST",url:n,data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,r.sent()]}})})},e.prototype._getNewAccessTokenByRefreshTokenWithClientSecretBasic=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t="","oidc"===this.options.protocol?t="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(t="".concat(this.baseClient.appHost,"/oauth/token")),n=this._generateTokenRequest({grant_type:"refresh_token",refresh_token:e}),[4,this.naiveHttpClient.request({data:n,method:"POST",url:t,headers:{Authorization:this._generateBasicAuthToken()}})];case 1:return[2,r.sent()]}})})},e.prototype._getNewAccessTokenByRefreshTokenWithNone=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t="","oidc"===this.options.protocol?t="".concat(this.baseClient.appHost,"/oidc/token"):"oauth"===this.options.protocol&&(t="".concat(this.baseClient.appHost,"/oauth/token")),n=this._generateTokenRequest({client_id:this.options.appId,grant_type:"refresh_token",refresh_token:e}),[4,this.naiveHttpClient.request({method:"POST",url:t,data:n})];case 1:return[2,r.sent()]}})})},e.prototype.getNewAccessTokenByRefreshToken=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:if(!["oauth","oidc"].includes(this.options.protocol))throw new Error("初始化 AuthenticationClient 时传入的 protocol 参数必须为 oauth 或 oidc，请检查参数");if(!this.options.secret&&"none"!==this.options.tokenEndPointAuthMethod)throw new Error("请在初始化 AuthenticationClient 时传入 appId 和 secret 参数");return"client_secret_post"!==this.options.tokenEndPointAuthMethod?[3,2]:[4,this._getNewAccessTokenByRefreshTokenWithClientSecretPost(e)];case 1:case 3:case 5:return[2,t.sent()];case 2:return"client_secret_basic"!==this.options.tokenEndPointAuthMethod?[3,4]:[4,this._getNewAccessTokenByRefreshTokenWithClientSecretBasic(e)];case 4:return"none"!==this.options.tokenEndPointAuthMethod?[3,6]:[4,this._getNewAccessTokenByRefreshTokenWithNone(e)];case 6:return[2]}})})},e.prototype._revokeTokenWithClientSecretPost=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t=this._generateTokenRequest({client_id:this.options.appId,client_secret:this.options.secret,token:e}),n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/token/revocation"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/token/revocation")),[4,this.naiveHttpClient.request({method:"POST",url:n,data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,r.sent()]}})})},e.prototype._revokeTokenWithClientSecretBasic=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:if(t="","oidc"===this.options.protocol)t="".concat(this.baseClient.appHost,"/oidc/token/revocation");else if("oauth"===this.options.protocol)throw new Error("OAuth 2.0 暂不支持用 client_secret_basic 模式身份验证撤回 Token");return n=this._generateTokenRequest({token:e}),[4,this.naiveHttpClient.request({data:n,method:"POST",url:t,headers:{Authorization:this._generateBasicAuthToken()}})];case 1:return[2,r.sent()]}})})},e.prototype._revokeTokenWithNone=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t="","oidc"===this.options.protocol?t="".concat(this.baseClient.appHost,"/oidc/token/revocation"):"oauth"===this.options.protocol&&(t="".concat(this.baseClient.appHost,"/oauth/token/revocation")),n=this._generateTokenRequest({client_id:this.options.appId,token:e}),[4,this.naiveHttpClient.request({method:"POST",url:t,data:n})];case 1:return[2,r.sent()]}})})},e.prototype.revokeToken=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:if(!["oauth","oidc"].includes(this.options.protocol))throw new Error("初始化 AuthenticationClient 时传入的 protocol 参数必须为 oauth 或 oidc，请检查参数");if(!this.options.secret&&"none"!==this.options.revocationEndPointAuthMethod)throw new Error("请在初始化 AuthenticationClient 时传入 appId 和 secret 参数");return"client_secret_post"!==this.options.revocationEndPointAuthMethod?[3,2]:[4,this._revokeTokenWithClientSecretPost(e)];case 1:case 3:case 5:return t.sent(),[2,!0];case 2:return"client_secret_basic"!==this.options.revocationEndPointAuthMethod?[3,4]:[4,this._revokeTokenWithClientSecretBasic(e)];case 4:return"none"!==this.options.revocationEndPointAuthMethod?[3,6]:[4,this._revokeTokenWithNone(e)];case 6:throw new Error("初始化 AuthenticationClient 时传入的 revocationEndPointAuthMethod 参数可选值为 client_secret_base、client_secret_post、none，请检查参数")}})})},e.prototype._introspectTokenWithClientSecretPost=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t=this._generateTokenRequest({client_id:this.options.appId,client_secret:this.options.secret,token:e}),n="","oidc"===this.options.protocol?n="".concat(this.baseClient.appHost,"/oidc/token/introspection"):"oauth"===this.options.protocol&&(n="".concat(this.baseClient.appHost,"/oauth/token/introspection")),[4,this.naiveHttpClient.request({method:"POST",url:n,data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 1:return[2,r.sent()]}})})},e.prototype._introspectTokenWithClientSecretBasic=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t="","oidc"===this.options.protocol?t="".concat(this.baseClient.appHost,"/oidc/token/introspection"):"oauth"===this.options.protocol&&(t="".concat(this.baseClient.appHost,"/oauth/token/introspection")),n=this._generateTokenRequest({token:e}),[4,this.naiveHttpClient.request({data:n,method:"POST",url:t,headers:{Authorization:this._generateBasicAuthToken()}})];case 1:return[2,r.sent()]}})})},e.prototype._introspectTokenWithNone=function(e){return Xa(this,void 0,void 0,function(){var t,n;return Qa(this,function(r){switch(r.label){case 0:return t="","oidc"===this.options.protocol?t="".concat(this.baseClient.appHost,"/oidc/token/introspection"):"oauth"===this.options.protocol&&(t="".concat(this.baseClient.appHost,"/oauth/token/introspection")),n=this._generateTokenRequest({client_id:this.options.appId,token:e}),[4,this.naiveHttpClient.request({method:"POST",url:t,data:n})];case 1:return[2,r.sent()]}})})},e.prototype.introspectToken=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:if(!["oauth","oidc"].includes(this.options.protocol))throw new Error("初始化 AuthenticationClient 时传入的 protocol 参数必须为 oauth 或 oidc，请检查参数");if(!this.options.secret&&"none"!==this.options.introspectionEndPointAuthMethod)throw new Error("请在初始化 AuthenticationClient 时传入 appId 和 secret 参数");return"client_secret_post"!==this.options.introspectionEndPointAuthMethod?[3,2]:[4,this._introspectTokenWithClientSecretPost(e)];case 1:case 3:case 5:return[2,t.sent()];case 2:return"client_secret_basic"!==this.options.introspectionEndPointAuthMethod?[3,4]:[4,this._introspectTokenWithClientSecretBasic(e)];case 4:return"none"!==this.options.introspectionEndPointAuthMethod?[3,6]:[4,this._introspectTokenWithNone(e)];case 6:throw new Error("初始化 AuthenticationClient 时传入的 introspectionEndPointAuthMethod 参数可选值为 client_secret_base、client_secret_post、none，请检查参数")}})})},e.prototype.validateTicketV1=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i;return Qa(this,function(s){switch(s.label){case 0:return n="".concat(this.baseClient.appHost,"/cas-idp/").concat(this.options.appId,"/validate"),[4,this.naiveHttpClient.request({method:"GET",url:n,params:{service:t,ticket:e}})];case 1:return r=s.sent(),i=r.split("\n")[0],[2,Ka({valid:"yes"===i},"yes"!==i&&{message:"ticket 不合法"})]}})})},e.prototype.validateTicketV2=function(e,t,n){return void 0===n&&(n="JSON"),Xa(this,void 0,void 0,function(){var r;return Qa(this,function(i){switch(i.label){case 0:if(!e)throw new Error("请传入 ticket 一次性票据");if(!t)throw new Error("请传入 service 服务地址");if("XML"!==n&&"JSON"!==n)throw new Error("format 参数可选值为 XML、JSON，请检查输入");return r="".concat(this.baseClient.appHost,"/cas-idp/").concat(this.options.appId,"/serviceValidate"),[4,this.naiveHttpClient.request({method:"GET",url:r,params:{service:t,ticket:e,format:n}})];case 1:return[2,i.sent()]}})})},e.prototype.hasRole=function(e,t){return Xa(this,void 0,void 0,function(){var n,r,i;return Qa(this,function(s){switch(s.label){case 0:return[4,(o=this.graphqlClient,a=this.tokenProvider,c={id:this.checkLoggedIn(),namespace:t},So(void 0,void 0,void 0,function(){var e,t;return Co(this,function(n){switch(n.label){case 0:return e="\n    query getUserRoles($id: String!, $namespace: String) {\n  user(id: $id) {\n    roles(namespace: $namespace) {\n      totalCount\n      list {\n        id\n        code\n        namespace\n        arn\n        description\n        createdAt\n        updatedAt\n        parent {\n          code\n          namespace\n          arn\n          description\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  }\n}\n    ",[4,a.getToken()];case 1:return t=n.sent(),[2,o.request({query:e,token:t,variables:c})]}})}))];case 1:return(n=s.sent().user)?(r=n.roles).totalCount<1?[2,!1]:(i=!1,r.list.forEach(function(t){t.code===e&&(i=!0)}),[2,i]):[2,!1]}var o,a,c})})},e.prototype.listApplications=function(e){return Xa(this,void 0,void 0,function(){var t,n,r,i,s;return Qa(this,function(o){switch(o.label){case 0:return n=(t=e||{}).page,r=void 0===n?1:n,i=t.limit,s=void 0===i?10:i,[4,this.httpClient.request({url:"".concat(this.baseClient.appHost,"/api/v2/users/me/applications/allowed?page=").concat(r,"&limit=").concat(s),method:"GET"})];case 1:return[2,o.sent()]}})})},e.prototype.validateToken=function(e){return Xa(this,void 0,void 0,function(){return Qa(this,function(t){switch(t.label){case 0:if(!e)throw new Error("请在传入的参数对象中包含 accessToken 或 idToken 字段");if(e.accessToken&&e.idToken)throw new Error("accessToken 和 idToken 只能传入一个，不能同时传入");return e.idToken?[4,this.naiveHttpClient.request({url:"".concat(this.baseClient.appHost,"/api/v2/oidc/validate_token"),method:"GET",params:{id_token:e.idToken}})]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e.accessToken?[4,this.naiveHttpClient.request({url:"".concat(this.baseClient.appHost,"/api/v2/oidc/validate_token"),method:"GET",params:{access_token:e.accessToken}})]:[3,4];case 4:return[2]}})})},e.prototype.trackSession=function(){return Xa(this,void 0,void 0,function(){return Qa(this,function(e){switch(e.label){case 0:return[4,this.naiveHttpClient.request({url:"".concat(this.baseClient.appHost,"/cas/session"),method:"GET"})];case 1:return[2,e.sent()]}})})},e.prototype.setLang=function(e){this.options.lang=e},e}();function nc(){const[e,t]=T.useState("login"),[n,r]=T.useState(!1),[i,o]=T.useState(!1),[a,c]=T.useState(0),{login:l}=V(),{toast:u}=B(),d=C(),h=G(),p=new tc({appId:h.appId,appHost:h.host,onError:(e,t,n)=>{u({title:"认证错误",description:t,variant:"destructive"})}}),[f,m]=T.useState({email:"",password:""}),[g,v]=T.useState({nickname:"",email:"",password:"",confirmPassword:"",code:""});return k.useEffect(()=>{if(a>0){const e=setTimeout(()=>c(a-1),1e3);return()=>clearTimeout(e)}},[a]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs(F,{variant:"ghost",onClick:()=>d("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(ae,{className:"h-4 w-4"})," 返回首页"]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"欢迎使用文派"}),s.jsx("p",{className:"text-gray-600",children:"登录或注册您的账户"})]}),s.jsx(M,{className:"shadow-lg",children:s.jsx(z,{className:"p-6",children:s.jsxs(Oe,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(Le,{className:"grid w-full grid-cols-2 mb-6",children:[s.jsx(Re,{value:"login",children:"登录"}),s.jsx(Re,{value:"register",children:"注册"})]}),s.jsx(Be,{value:"login",className:"space-y-4",children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),f.email&&f.password){r(!0);try{const e=await p.loginByEmail(f.email,f.password);localStorage.setItem("authing_user",JSON.stringify(e));const t={id:String(e.id||""),username:String(e.username||e.nickname||""),email:String(e.email||""),phone:String(e.phone||""),nickname:String(e.nickname||e.username||""),avatar:String(e.photo||""),...e};l(t),u({title:"登录成功",description:"欢迎回来！"}),setTimeout(()=>d("/"),800)}catch(t){u({title:"登录失败",description:t.message||"请检查邮箱和密码",variant:"destructive"})}finally{r(!1)}}else u({title:"请填写完整信息",variant:"destructive"})},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"login-email",children:"邮箱"}),s.jsxs("div",{className:"relative",children:[s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"login-email",type:"email",value:f.email,onChange:e=>m(t=>({...t,email:e.target.value})),placeholder:"请输入邮箱",className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"login-password",children:"密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"login-password",type:"password",value:f.password,onChange:e=>m(t=>({...t,password:e.target.value})),placeholder:"请输入密码",className:"pl-10",required:!0})]})]}),s.jsx(F,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:n?"登录中...":"登录"})]})}),s.jsx(Be,{value:"register",className:"space-y-4",children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g.email&&g.password&&g.nickname&&g.code)if(g.password===g.confirmPassword){r(!0);try{const e=await p.registerByEmailCode(g.email,g.code,{nickname:g.nickname});localStorage.setItem("authing_user",JSON.stringify(e));const t=Date.now();localStorage.setItem("promo_start",t.toString()),localStorage.setItem("registration_time",t.toString());const n={id:String(e.id||""),username:String(e.username||e.nickname||""),email:String(e.email||""),phone:String(e.phone||""),nickname:String(e.nickname||e.username||""),avatar:String(e.photo||""),...e};l(n),u({title:"注册成功",description:"请前往邮箱设置初始密码或通过找回密码功能设置密码。"}),setTimeout(()=>d("/"),1200)}catch(t){u({title:"注册失败",description:t.message||"请检查输入信息",variant:"destructive"})}finally{r(!1)}}else u({title:"两次密码不一致",variant:"destructive"});else u({title:"请填写完整信息",variant:"destructive"})},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"register-nickname",children:"昵称"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"register-nickname",value:g.nickname,onChange:e=>v(t=>({...t,nickname:e.target.value})),placeholder:"请输入昵称",className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"register-email",children:"邮箱"}),s.jsxs("div",{className:"relative",children:[s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"register-email",type:"email",value:g.email,onChange:e=>v(t=>({...t,email:e.target.value})),placeholder:"请输入邮箱",className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"register-code",children:"验证码"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"register-code",value:g.code,onChange:e=>v(t=>({...t,code:e.target.value})),placeholder:"请输入验证码",className:"pl-10",required:!0})]}),s.jsx(F,{type:"button",variant:"outline",disabled:i||a>0,onClick:async()=>{if(g.email){o(!0);try{await p.sendEmail(g.email,"REGISTER"),c(60),u({title:"验证码已发送",description:"请查看您的邮箱"})}catch(e){u({title:"发送失败",description:e.message||"验证码发送失败，请重试",variant:"destructive"})}finally{o(!1)}}else u({title:"请输入邮箱",variant:"destructive"})},className:"w-24",children:i?"发送中...":a>0?`${a}s`:"发送"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"register-password",children:"密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"register-password",type:"password",value:g.password,onChange:e=>v(t=>({...t,password:e.target.value})),placeholder:"请设置密码",className:"pl-10",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"register-confirm-password",children:"确认密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"register-confirm-password",type:"password",value:g.confirmPassword,onChange:e=>v(t=>({...t,confirmPassword:e.target.value})),placeholder:"请再次输入密码",className:"pl-10",required:!0})]})]}),s.jsx(F,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700",disabled:n,children:n?"注册中...":"注册"})]})})]})})}),s.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[s.jsx("p",{children:"使用第三方账户快速登录/注册"}),s.jsx("p",{className:"mt-1",children:"支持微信、QQ、微博等主流平台"})]})]})})}function rc(){const[e,t]=T.useState("phone"),[n,r]=T.useState(!1),[i,o]=T.useState(!1),[a,c]=T.useState(!1),[l,u]=T.useState(0),[d,h]=T.useState(!1),[p,f]=T.useState(null),[m,g]=T.useState(""),[v,y]=T.useState({phone:"",code:"",password:"",confirmPassword:"",nickname:""}),[x,b]=T.useState({email:"",code:"",password:"",confirmPassword:"",nickname:""}),{toast:w}=B(),{login:j}=V(),{processReferralReward:N,trackInviteSuccess:S}=Z(),k=C();T.useEffect(()=>{const e=J(),t=Y();f(e),g(t)},[]);const I=(e,t)=>{y(n=>({...n,[e]:t}))},P=(e,t)=>{b(n=>({...n,[e]:t}))},A=async e=>{if(l>0)return;const t="phone"===e?v.phone:x.email;if(t)if("phone"!==e||/^1[3-9]\d{9}$/.test(t))if("email"!==e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))try{w({title:"验证码已发送",description:"验证码已发送到您的"+("phone"===e?"手机":"邮箱")}),u(60);const t=setInterval(()=>{u(e=>e<=1?(clearInterval(t),0):e-1)},1e3)}catch(n){w({title:"发送失败",description:"请稍后重试",variant:"destructive"})}else w({title:"请输入正确的邮箱地址",variant:"destructive"});else w({title:"请输入正确的手机号",variant:"destructive"});else w({title:"请输入"+("phone"===e?"手机号":"邮箱"),variant:"destructive"})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(F,{variant:"ghost",onClick:()=>k("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(ae,{className:"h-4 w-4"}),"返回首页"]}),s.jsxs(M,{className:"shadow-xl",children:[s.jsxs(U,{className:"text-center",children:[s.jsx(q,{className:"text-2xl font-bold",children:"注册账号"}),s.jsx(H,{children:"加入文派，开启智能内容创作之旅"}),p&&s.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-green-700",children:[s.jsx(fe,{className:"h-4 w-4"}),s.jsx("span",{children:"通过推荐链接注册，注册成功后将获得20次使用机会奖励"})]}),s.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:["推荐人ID: ",p," | 推荐人也将获得20次使用机会奖励"]})]}),!1]}),s.jsxs(z,{children:[s.jsxs(Oe,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(Le,{className:"grid w-full grid-cols-2",children:[s.jsx(Re,{value:"phone",children:"手机号注册"}),s.jsx(Re,{value:"email",children:"邮箱注册"})]}),s.jsxs(Be,{value:"phone",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"phone",className:"flex items-center",children:["手机号 ",s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone",type:"tel",placeholder:"请输入手机号",value:v.phone,onChange:e=>I("phone",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"phone-code",className:"flex items-center",children:["验证码 ",s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx(Ve,{id:"phone-code",placeholder:"请输入验证码",value:v.code,onChange:e=>I("code",e.target.value)})}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>A("phone"),disabled:l>0,className:"w-24",children:l>0?`${l}s`:"发送验证码"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-nickname",children:"昵称"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone-nickname",placeholder:"请输入昵称（可选）",value:v.nickname,onChange:e=>I("nickname",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-password",children:"密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone-password",type:n?"text":"password",placeholder:"请输入密码",value:v.password,onChange:e=>I("password",e.target.value),className:"pl-10 pr-10"}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>r(!n),children:n?s.jsx(de,{className:"h-4 w-4"}):s.jsx(he,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-confirm-password",children:"确认密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone-confirm-password",type:i?"text":"password",placeholder:"请再次输入密码",value:v.confirmPassword,onChange:e=>I("confirmPassword",e.target.value),className:"pl-10 pr-10"}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),children:i?s.jsx(de,{className:"h-4 w-4"}):s.jsx(he,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Me,{id:"phone-terms",checked:d,onCheckedChange:e=>h(e)}),s.jsxs(Fe,{htmlFor:"phone-terms",className:"text-sm",children:["我已阅读并同意",s.jsx(E,{to:"/terms",className:"text-blue-600 hover:underline ml-1",children:"《用户协议》"}),"和",s.jsx(E,{to:"/privacy",className:"text-blue-600 hover:underline ml-1",children:"《隐私政策》"})]})]}),s.jsx(F,{onClick:async()=>{if(v.phone&&v.code&&v.password&&v.confirmPassword)if(v.password===v.confirmPassword)if(d){c(!0);try{const e=Date.now();localStorage.setItem("promo_start",e.toString()),localStorage.setItem("registration_time",e.toString());const t=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v.nickname,password:v.password,phone:v.phone,verificationCode:v.code,tempUserId:m,referrerId:p})});if(!t.ok)throw new Error(`注册失败: ${t.status}`);const n=await t.json();if(!n.success)throw new Error(n.message||"注册失败");await j({id:n.user.id||m,phone:v.phone,username:v.nickname,nickname:v.nickname,plan:"free",isProUser:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),referrerId:p}),N(),p&&S(p,n.user.id||m),w({title:"注册成功",description:p?"欢迎加入文派！您和推荐人都获得了20次使用机会奖励":"欢迎加入文派！"}),k("/")}catch(e){w({title:"注册失败",description:e.message||"请稍后重试",variant:"destructive"})}finally{c(!1)}}else w({title:"请同意用户协议",variant:"destructive"});else w({title:"两次密码不一致",variant:"destructive"});else w({title:"请填写完整信息",variant:"destructive"})},disabled:a,className:"w-full",children:a?"注册中...":"立即注册"})]}),s.jsxs(Be,{value:"email",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"email",children:["邮箱 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email",type:"email",placeholder:"请输入邮箱",value:x.email,onChange:e=>P("email",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"email-code",children:["验证码 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx(Ve,{id:"email-code",placeholder:"请输入验证码",value:x.code,onChange:e=>P("code",e.target.value)})}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>A("email"),disabled:l>0,className:"w-24",children:l>0?`${l}s`:"发送验证码"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"email-nickname",children:"昵称（可选）"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email-nickname",placeholder:"请输入昵称（可选）",value:x.nickname,onChange:e=>P("nickname",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"email-password",children:["密码 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email-password",type:n?"text":"password",placeholder:"请输入密码",value:x.password,onChange:e=>P("password",e.target.value),className:"pl-10 pr-10"}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>r(!n),children:n?s.jsx(de,{className:"h-4 w-4"}):s.jsx(he,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"email-confirm-password",children:["确认密码 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email-confirm-password",type:i?"text":"password",placeholder:"请再次输入密码",value:x.confirmPassword,onChange:e=>P("confirmPassword",e.target.value),className:"pl-10 pr-10"}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),children:i?s.jsx(de,{className:"h-4 w-4"}):s.jsx(he,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Me,{id:"email-terms",checked:d,onCheckedChange:e=>h(e)}),s.jsxs(Fe,{htmlFor:"email-terms",className:"text-sm",children:["我已阅读并同意",s.jsx(E,{to:"/terms",className:"text-blue-600 hover:underline ml-1",children:"《用户协议》"}),"和",s.jsx(E,{to:"/privacy",className:"text-blue-600 hover:underline ml-1",children:"《隐私政策》"})]})]}),s.jsx(F,{onClick:async()=>{if(x.email&&x.code&&x.password&&x.confirmPassword)if(x.password===x.confirmPassword)if(d){c(!0);try{const e=Date.now();localStorage.setItem("promo_start",e.toString()),localStorage.setItem("registration_time",e.toString());const t=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x.nickname,password:x.password,email:x.email,verificationCode:x.code,tempUserId:m,referrerId:p})});if(!t.ok)throw new Error(`注册失败: ${t.status}`);const n=await t.json();if(!n.success)throw new Error(n.message||"注册失败");await j({id:n.user.id||m,email:x.email,username:x.nickname,nickname:x.nickname,plan:"free",isProUser:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),referrerId:p}),N(),p&&S(p,n.user.id||m),w({title:"注册成功",description:p?"欢迎加入文派！您和推荐人都获得了20次使用机会奖励":"欢迎加入文派！"}),k("/")}catch(e){w({title:"注册失败",description:e.message||"请稍后重试",variant:"destructive"})}finally{c(!1)}}else w({title:"请同意用户协议",variant:"destructive"});else w({title:"两次密码不一致",variant:"destructive"});else w({title:"请填写完整信息",variant:"destructive"})},disabled:a,className:"w-full",children:a?"注册中...":"立即注册"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["已有账号？",s.jsx(E,{to:"/login",className:"text-blue-600 hover:underline ml-1",children:"立即登录"})]})})]})]})]})})}function ic(){const[e,t]=T.useState("phone"),[n,r]=T.useState(!1),[i,o]=T.useState(0),[a,c]=T.useState("input"),[l,u]=T.useState({phone:"",code:"",newPassword:"",confirmPassword:""}),[d,h]=T.useState({email:"",code:"",newPassword:"",confirmPassword:""}),{toast:p}=B(),f=C(),m=(e,t)=>{u(n=>({...n,[e]:t}))},g=(e,t)=>{h(n=>({...n,[e]:t}))},v=async e=>{if(i>0)return;const t="phone"===e?l.phone:d.email;if(t)if("phone"!==e||/^1[3-9]\d{9}$/.test(t))if("email"!==e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))try{p({title:"验证码已发送",description:"验证码已发送到您的"+("phone"===e?"手机":"邮箱")}),o(60);const t=setInterval(()=>{o(e=>e<=1?(clearInterval(t),0):e-1)},1e3);c("verify")}catch(n){p({title:"发送失败",description:"请稍后重试",variant:"destructive"})}else p({title:"请输入正确的邮箱",variant:"destructive"});else p({title:"请输入正确的手机号",variant:"destructive"});else p({title:"请输入"+("phone"===e?"手机号":"邮箱"),variant:"destructive"})},y=async e=>{if(("phone"===e?l:d).code)try{p({title:"验证成功",description:"验证码验证成功，请设置新密码"}),c("reset")}catch(t){p({title:"验证失败",description:"请检查验证码是否正确",variant:"destructive"})}else p({title:"请输入验证码",variant:"destructive"})},x=async e=>{const t="phone"===e?l:d;if(t.newPassword&&t.confirmPassword)if(t.newPassword===t.confirmPassword)if(t.newPassword.length<6)p({title:"密码长度不足",description:"密码至少需要6位字符",variant:"destructive"});else{r(!0);try{p({title:"密码重置成功",description:"请使用新密码登录"}),u({phone:"",code:"",newPassword:"",confirmPassword:""}),h({email:"",code:"",newPassword:"",confirmPassword:""}),c("input"),setTimeout(()=>{f("/login")},1500)}catch(n){p({title:"重置失败",description:n.message||"请稍后重试",variant:"destructive"})}finally{r(!1)}}else p({title:"两次密码不一致",variant:"destructive"});else p({title:"请填写完整信息",variant:"destructive"})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(F,{variant:"ghost",onClick:()=>f("/login"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(ae,{className:"h-4 w-4"}),"返回登录"]}),s.jsxs(M,{className:"shadow-xl",children:[s.jsxs(U,{className:"text-center",children:[s.jsx(q,{className:"text-2xl font-bold",children:"找回密码"}),s.jsx(H,{children:"通过手机号或邮箱验证身份，重新设置密码"})]}),s.jsxs(z,{children:[s.jsxs(Oe,{value:e,onValueChange:t,className:"w-full",children:[s.jsxs(Le,{className:"grid w-full grid-cols-2",children:[s.jsx(Re,{value:"phone",children:"手机号找回"}),s.jsx(Re,{value:"email",children:"邮箱找回"})]}),s.jsxs(Be,{value:"phone",className:"space-y-4",children:["input"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone",children:"手机号"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone",type:"tel",placeholder:"请输入手机号",value:l.phone,onChange:e=>m("phone",e.target.value),className:"pl-10"})]})]}),s.jsx(F,{onClick:()=>v("phone"),disabled:i>0,className:"w-full",children:i>0?`${i}秒后重发`:"发送验证码"})]}),"verify"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-code",children:"验证码"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx(Ve,{id:"phone-code",placeholder:"请输入验证码",value:l.code,onChange:e=>m("code",e.target.value)})}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>v("phone"),disabled:i>0,className:"w-24",children:i>0?`${i}s`:"重发"})]})]}),s.jsx(F,{onClick:()=>y("phone"),className:"w-full",children:"验证验证码"})]}),"reset"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-new-password",children:"新密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone-new-password",type:"password",placeholder:"请输入新密码",value:l.newPassword,onChange:e=>m("newPassword",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"phone-confirm-password",children:"确认新密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"phone-confirm-password",type:"password",placeholder:"请再次输入新密码",value:l.confirmPassword,onChange:e=>m("confirmPassword",e.target.value),className:"pl-10"})]})]}),s.jsx(F,{onClick:()=>x("phone"),disabled:n,className:"w-full",children:n?"重置中...":"重置密码"})]})]}),s.jsxs(Be,{value:"email",className:"space-y-4",children:["input"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"email",children:"邮箱"}),s.jsxs("div",{className:"relative",children:[s.jsx(le,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email",type:"email",placeholder:"请输入邮箱",value:d.email,onChange:e=>g("email",e.target.value),className:"pl-10"})]})]}),s.jsx(F,{onClick:()=>v("email"),disabled:i>0,className:"w-full",children:i>0?`${i}秒后重发`:"发送验证码"})]}),"verify"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"email-code",children:"验证码"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsx(Ve,{id:"email-code",placeholder:"请输入验证码",value:d.code,onChange:e=>g("code",e.target.value)})}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>v("email"),disabled:i>0,className:"w-24",children:i>0?`${i}s`:"重发"})]})]}),s.jsx(F,{onClick:()=>y("email"),className:"w-full",children:"验证验证码"})]}),"reset"===a&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"email-new-password",children:"新密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email-new-password",type:"password",placeholder:"请输入新密码",value:d.newPassword,onChange:e=>g("newPassword",e.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"email-confirm-password",children:"确认新密码"}),s.jsxs("div",{className:"relative",children:[s.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(Ve,{id:"email-confirm-password",type:"password",placeholder:"请再次输入新密码",value:d.confirmPassword,onChange:e=>g("confirmPassword",e.target.value),className:"pl-10"})]})]}),s.jsx(F,{onClick:()=>x("email"),disabled:n,className:"w-full",children:n?"重置中...":"重置密码"})]})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["想起密码了？",s.jsx(E,{to:"/login",className:"text-blue-600 hover:underline ml-1",children:"立即登录"})]})})]})]})]})})}const sc=()=>{const e=C(),[t]=I(),{login:n}=V(),[r,i]=T.useState("loading"),[o,a]=T.useState("正在处理认证回调...");return T.useEffect(()=>{(async()=>{try{i("loading"),a("正在验证认证信息...");const r=t.get("error"),s=t.get("error_description");if(r)return i("error"),void a(`认证失败: ${s||r}`);const o=t.get("code"),c=t.get("state");if(!o)return i("error"),void a("缺少授权码");const l=G();new tc({appId:l.appId,appHost:l.host});try{i("success"),a("认证成功！正在获取用户信息...");try{const e={id:o,username:"用户",email:"",phone:"",nickname:"用户",avatar:"",authCode:o,state:c,loginTime:(new Date).toISOString()};localStorage.setItem("authing_user",JSON.stringify(e)),localStorage.setItem("authing_code",o),localStorage.setItem("authing_state",c),a("用户信息获取成功！正在跳转...")}catch(n){a("认证成功！正在跳转...")}setTimeout(()=>{e("/",{replace:!0})},1500)}catch(n){i("error"),a(`获取访问令牌失败: ${n instanceof Error?n.message:"未知错误"}`)}}catch(r){i("error"),a(`处理认证回调失败: ${r instanceof Error?r.message:"未知错误"}`)}})()},[t,n,e]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:["loading"===r&&s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),"success"===r&&s.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===r&&s.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),s.jsxs("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:["loading"===r&&"处理中...","success"===r&&"认证成功","error"===r&&"认证失败"]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:o})]}),"error"===r&&s.jsxs("div",{className:"mt-8 space-y-4",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"认证回调处理失败"}),s.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[s.jsx("p",{children:"请检查以下可能的原因："}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"认证链接已过期"}),s.jsx("li",{children:"网络连接问题"}),s.jsx("li",{children:"认证服务暂时不可用"})]})]})]})]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"重试"}),s.jsx("button",{onClick:()=>e("/"),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"返回首页"})]})]})]})})},oc=T.forwardRef(({className:e,...t},n)=>s.jsx(w,{className:R("grid gap-2",e),...t,ref:n}));oc.displayName=w.displayName;const ac=T.forwardRef(({className:e,...t},n)=>s.jsx(j,{ref:n,className:R("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(N,{className:"flex items-center justify-center",children:s.jsx(me,{className:"h-3.5 w-3.5 fill-primary"})})}));ac.displayName=j.displayName;const cc=()=>{var e;const[t,n]=T.useState("这是一段测试内容，用于检查API连接是否正常工作。希望能够顺利适配到各个平台。"),[r,i]=T.useState(!1),[o,a]=T.useState(null),[c,l]=T.useState({provider:"openai",model:"gpt-4o",available:!0}),[u,d]=T.useState(!1),[h,p]=T.useState("openai"),[f,m]=T.useState("gpt-4o"),[g,v]=T.useState("free"),{toast:y}=B();return s.jsxs(Ye,{children:[s.jsx(Ke,{title:"API连接测试",description:"测试与AI API的连接情况，支持OpenAI、Google Gemini和DeepSeek",showAdaptButton:!1,actions:s.jsxs(F,{variant:"outline",children:[s.jsx(ge,{className:"h-4 w-4 mr-2"}),"API配置"]})}),s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"多模型 API 连接测试工具"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"本页面用于测试与 AI API 的连接情况，支持 OpenAI、Google Gemini 和 DeepSeek，验证内容生成功能是否正常工作。"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"API 提供商选择"}),s.jsx(H,{children:"选择用于内容生成的 AI 模型提供商"})]}),s.jsx(z,{children:s.jsxs(oc,{className:"flex flex-col space-y-4",value:h,onValueChange:e=>(e=>{p(e);const t={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[e]||[];t.length>0&&(m(t[0]),t[0]),y({title:"API 提供商已更改",description:`现在使用 ${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[e]} API`,variant:"default"}),l({provider:e,model:f,available:!0})})(e),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ac,{value:"openai",id:"openai"}),s.jsxs(Fe,{htmlFor:"openai",className:"flex items-center",children:[s.jsx("span",{className:"text-blue-600 font-semibold",children:"OpenAI"}),s.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(GPT-3.5/4系列)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ac,{value:"deepseek",id:"deepseek"}),s.jsxs(Fe,{htmlFor:"deepseek",className:"flex items-center",children:[s.jsx("span",{className:"text-orange-600 font-semibold",children:"DeepSeek"}),s.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(DeepSeek系列)"}),s.jsxs(Ue,{variant:"secondary",className:"ml-2",children:[s.jsx(ve,{className:"h-3 w-3 mr-1"})," 新增"]})]})]})]})})]}),s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"API 连接状态"}),s.jsxs(H,{children:["检查与 ","openai"===h?"OpenAI":"gemini"===h?"Google Gemini":"DeepSeek"," API 的连接状态"]})]}),s.jsxs(z,{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{children:"当前状态:"}),c.available?s.jsxs(Ue,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[s.jsx(ye,{className:"w-4 h-4 mr-1"})," 可用"]}):s.jsxs(Ue,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[s.jsx(xe,{className:"w-4 h-4 mr-1"})," 不可用"]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["提供商: ",c.provider]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["模型: ",c.model]})]}),s.jsx(K,{children:s.jsxs(F,{onClick:async()=>{d(!0);try{l({provider:h,model:f,available:!0}),y({title:"API连接正常",description:`成功连接到${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[h]} API`,variant:"default"})}catch(e){y({title:"API检查出错",description:e instanceof Error?e.message:"未知错误",variant:"destructive"})}finally{d(!1)}},disabled:u,children:[u&&s.jsx(be,{className:"mr-2 h-4 w-4 animate-spin"}),"检查API连接"]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"用户计划"}),s.jsx(H,{children:"选择您的用户计划以确定可用模型"})]}),s.jsx(z,{children:s.jsxs(oc,{className:"flex flex-col space-y-4",value:g,onValueChange:e=>(e=>{v(e);const t={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[h]||[];!t.includes(f)&&t.length>0&&(m(t[0]),t[0]),y({title:"用户计划已更改",description:`现在使用 ${"free"===e?"免费版":"专业版"} 权限`,variant:"default"})})(e),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ac,{value:"free",id:"free"}),s.jsxs(Fe,{htmlFor:"free",className:"flex items-center",children:[s.jsx("span",{className:"text-gray-600 font-semibold",children:"免费版"}),s.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(基础模型)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ac,{value:"pro",id:"pro"}),s.jsxs(Fe,{htmlFor:"pro",className:"flex items-center",children:[s.jsx("span",{className:"text-blue-600 font-semibold",children:"专业版"}),s.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(所有模型)"}),s.jsxs(Ue,{variant:"secondary",className:"ml-2",children:[s.jsx(ve,{className:"h-3 w-3 mr-1"})," 推荐"]})]})]})]})})]}),s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"AI 模型选择"}),s.jsx(H,{children:"选择适合您需求的AI模型"})]}),s.jsx(z,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs(qe,{value:f,onValueChange:e=>{m(e),y({title:"模型已更改",description:`现在使用 ${e} 模型`,variant:"default"})},children:[s.jsx(He,{children:s.jsx(ze,{placeholder:"选择模型"})}),s.jsx($e,{children:null==(e={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[h])?void 0:e.map(e=>s.jsx(We,{value:e,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:e}),s.jsx("span",{className:"text-xs text-gray-500",children:"模型描述"})]})},e))})]}),f&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:f}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"模型描述"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"适用场景:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.jsx(Ue,{variant:"outline",className:"text-xs",children:"通用场景"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"优势:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.jsx(Ue,{variant:"secondary",className:"text-xs",children:"性能优秀"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-gray-500",children:"最适合:"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"通用内容生成"})]})]})]})]})})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"内容生成测试"}),s.jsx(H,{children:"测试AI内容生成功能"})]}),s.jsx(z,{children:s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"testContent",className:"block text-sm font-medium text-gray-700 mb-1",children:"测试内容:"}),s.jsx(Ge,{id:"testContent",value:t,onChange:e=>n(e.target.value),placeholder:"输入需要测试的内容...",className:"min-h-[100px]"})]})}),s.jsx(K,{children:s.jsxs(F,{onClick:async()=>{var e;if(t.trim()){i(!0),a(null);try{const n=(null==(e=(await(async e=>({results:[{platform:"zhihu",content:`模拟生成的内容 - ${e.substring(0,50)}...`,success:!0}]}))(t)).results)?void 0:e[0])||{content:"生成失败",error:"未知错误"},r="error"in n&&n.error;a({success:!r,content:n.content,error:r?n.error:void 0,platform:"platform"in n?n.platform:void 0,title:"title"in n?n.title:void 0,hashtags:"hashtags"in n?n.hashtags:void 0,suggestions:"suggestions"in n?n.suggestions:void 0}),y({title:r?"使用模拟内容":"内容生成成功",description:r?`使用了模拟内容: ${r||"API可能不可用"}`:`${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[h]} API成功生成内容`,variant:r?"destructive":"default"})}catch(n){y({title:"内容生成失败",description:n instanceof Error?n.message:"未知错误",variant:"destructive"})}finally{i(!1)}}else y({title:"内容不能为空",description:"请输入测试内容",variant:"destructive"})},disabled:r,className:"w-full",children:[r&&s.jsx(be,{className:"mr-2 h-4 w-4 animate-spin"}),"测试内容生成"]})})]})}),o&&s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsx(q,{children:"生成结果"}),s.jsxs(H,{children:["内容生成源: "," ","openai"===h?"OpenAI API":"gemini"===h?"Google Gemini API":"DeepSeek API",o.error&&s.jsxs("span",{className:"ml-2 text-red-500",children:["(错误: ",o.error,")"]})]})]}),s.jsx(z,{children:s.jsx("div",{className:"bg-gray-50 p-4 rounded-md whitespace-pre-wrap",children:o.content||"内容为空"})})]})]})]})};function lc(){const{user:e,isAuthenticated:t,isLoading:n,error:r,login:i,logout:o,updateUser:a}=V();return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsx(q,{children:"认证状态测试"})}),s.jsxs(z,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"错误信息:"})," ",r||"无"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"是否已认证:"})," ",t?"是":"否"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"是否加载中:"})," ",n?"是":"否"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"按钮状态:"})," 已启用"]})]}),e&&s.jsxs("div",{className:"border rounded p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"用户信息:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(e,null,2)})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(F,{onClick:async()=>{try{await i({id:"test-user-id",username:"testuser",email:"test@example.com",nickname:"测试用户",plan:"free",isProUser:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()})}catch(e){}},children:"显示登录窗口"}),t&&s.jsx(F,{onClick:o,variant:"outline",children:"退出登录"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:"调试信息:"}),s.jsx("p",{children:'- 如果点击"显示登录窗口"没有反应，请检查浏览器控制台的错误信息'}),s.jsx("p",{children:"- 确保 Authing 配置正确，网络连接正常"}),s.jsx("p",{children:"- 使用 authing-js-sdk 的 AuthenticationClient"}),s.jsx("p",{children:"- 按钮状态: 已启用"})]})]})]})})}function uc(){const{user:e,isAuthenticated:t,isLoading:n,error:r,login:i,logout:o,updateUser:a}=V();return T.useEffect(()=>{},[r,t,e]),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsx(q,{children:"用户状态调试"})}),s.jsxs(z,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"错误信息:"})," ",r||"无"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"是否已认证:"})," ",t?"是":"否"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"是否加载中:"})," ",n?"是":"否"]})]}),e&&s.jsxs("div",{className:"border rounded p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"用户信息:"}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto",children:JSON.stringify(e,null,2)})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(F,{onClick:async()=>{},children:"刷新认证状态"}),s.jsx(F,{onClick:async()=>{},variant:"outline",children:"测试 checkAuth"}),s.jsx(F,{onClick:()=>{localStorage.removeItem("authing_user"),localStorage.removeItem("authing_code"),localStorage.removeItem("authing_state"),window.location.reload()},variant:"destructive",children:"清除存储并刷新"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:"调试信息:"}),s.jsx("p",{children:"- 查看浏览器控制台的详细日志"}),s.jsx("p",{children:'- 点击"测试 getCurrentUser"查看原始用户数据'}),s.jsx("p",{children:"- 如果用户信息为空，可能需要重新登录"})]})]})]})})}const dc=()=>{const[e,t]=T.useState(!1),[n,r]=T.useState("info");let i={user:null,isAuthenticated:!1};try{const{user:e,isAuthenticated:t}=V();i={user:e,isAuthenticated:t}}catch(o){}let s={hasRole:e=>!1,loading:!1};try{const{hasRole:e,loading:t}=X();s={hasRole:e,loading:t}}catch(o){}return null},hc=new class{constructor(){t(this,"baseURL"),this.baseURL="/.netlify/functions"}async createOrder(e){try{Q.secureLog("创建支付订单",{planId:e.planId,amount:e.amount,paymentMethod:e.paymentMethod});const t=await Qe.post(`${this.baseURL}/payment-create`,{planId:e.planId,period:e.period,paymentMethod:e.paymentMethod,userId:e.userId,amount:e.amount,currency:e.currency||"CNY",returnUrl:e.returnUrl||window.location.origin+"/payment-success"});if(t.data.success)return Q.secureLog("支付订单创建成功",{orderId:t.data.order.orderId}),t.data.order;throw new Error(t.data.message||"创建订单失败")}catch(t){throw Q.secureLog("创建支付订单失败",{error:t instanceof Error?t.message:"未知错误"},"error"),t}}async getOrderStatus(e){try{const t=await Qe.get(`${this.baseURL}/payment-status`,{params:{orderId:e}});if(t.data.success)return t.data.order;throw new Error(t.data.message||"查询订单状态失败")}catch(t){throw Q.secureLog("查询支付订单状态失败",{orderId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async cancelOrder(e){try{Q.secureLog("取消支付订单",{orderId:e});const t=await Qe.post(`${this.baseURL}/payment-cancel`,{orderId:e});if(!t.data.success)throw new Error(t.data.message||"取消订单失败");Q.secureLog("支付订单取消成功",{orderId:e})}catch(t){throw Q.secureLog("取消支付订单失败",{orderId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async getPaymentQRCode(e,t){try{const n=await Qe.post(`${this.baseURL}/payment-qrcode`,{orderId:e,paymentMethod:t});if(n.data.success)return{qrCode:n.data.qrCode,qrCodeUrl:n.data.qrCodeUrl};throw new Error(n.data.message||"获取支付二维码失败")}catch(n){throw Q.secureLog("获取支付二维码失败",{orderId:e,paymentMethod:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async verifyPaymentCallback(e){try{return(await Qe.post(`${this.baseURL}/payment-verify`,e)).data.success}catch(t){return Q.secureLog("验证支付回调失败",{orderId:e.out_trade_no,error:t instanceof Error?t.message:"未知错误"},"error"),!1}}async getPaymentHistory(e,t=1,n=10){try{const r=await Qe.get(`${this.baseURL}/payment-history`,{params:{userId:e,page:t,limit:n}});if(r.data.success)return{orders:r.data.orders,total:r.data.total};throw new Error(r.data.message||"获取支付历史失败")}catch(r){throw Q.secureLog("获取支付历史失败",{userId:e,error:r instanceof Error?r.message:"未知错误"},"error"),r}}async pollPaymentStatus(e,t=30,n=2e3){return new Promise((r,i)=>{let s=0;const o=async()=>{try{s++;const a=await this.getOrderStatus(e);if("success"===a.status)return Q.secureLog("支付成功",{orderId:e}),void r(a);if("failed"===a.status||"cancelled"===a.status)return Q.secureLog("支付失败或取消",{orderId:e,status:a.status}),void i(new Error("支付"+("failed"===a.status?"失败":"已取消")));if(s>=t)return Q.secureLog("支付状态轮询超时",{orderId:e,attempts:s}),void i(new Error("支付状态查询超时"));setTimeout(o,n)}catch(a){i(a)}};o()})}formatAmount(e,t="CNY"){return new Intl.NumberFormat("zh-CN",{style:"currency",currency:t}).format(e)}getPaymentMethodName(e){return{alipay:"支付宝",wechat:"微信支付",card:"银行卡"}[e]||e}getPaymentStatusName(e){return{pending:"待支付",success:"支付成功",failed:"支付失败",cancelled:"已取消"}[e]||e}};function pc(){const[e]=I(),t=C(),{toast:n}=B(),{user:r}=V(),{getOrderStatus:i,formatAmount:o,getPaymentMethodName:a}=function(){const{toast:e}=B();return{createOrder:async t=>{try{const n=await hc.createOrder(t);return e({title:"订单创建成功",description:`订单号: ${n.orderId}`}),n}catch(n){const t=n instanceof Error?n.message:"创建订单失败";throw e({title:"创建订单失败",description:t,variant:"destructive"}),n}},pollPaymentStatus:async t=>{try{const n=await hc.pollPaymentStatus(t);return e({title:"支付成功",description:"您的订阅已激活，请刷新页面查看最新状态"}),n}catch(n){const t=n instanceof Error?n.message:"支付状态查询失败";throw e({title:"支付状态查询失败",description:t,variant:"destructive"}),n}},cancelOrder:async t=>{try{await hc.cancelOrder(t),e({title:"订单已取消",description:"支付订单已成功取消"})}catch(n){const t=n instanceof Error?n.message:"取消订单失败";throw e({title:"取消订单失败",description:t,variant:"destructive"}),n}},getOrderStatus:hc.getOrderStatus.bind(hc),getPaymentQRCode:hc.getPaymentQRCode.bind(hc),getPaymentHistory:hc.getPaymentHistory.bind(hc),formatAmount:hc.formatAmount.bind(hc),getPaymentMethodName:hc.getPaymentMethodName.bind(hc),getPaymentStatusName:hc.getPaymentStatusName.bind(hc)}}(),[c,l]=T.useState(null),[u,d]=T.useState(!0),[h,p]=T.useState(!1),f=e.get("orderId"),m=e.get("trade_no"),g=e.get("payment_method");T.useEffect(()=>{(async()=>{try{if(d(!0),f){const e=await i(f);l(e)}else m&&l({orderId:m,status:"success",amount:e.get("total_amount")||"0",currency:e.get("currency")||"CNY",paymentMethod:g||"unknown",planId:e.get("plan_id")||"pro",createdAt:(new Date).toISOString()});await v()}catch(t){n({title:"加载订单信息失败",description:"请稍后重试",variant:"destructive"})}finally{d(!1)}})()},[f,m,g,e]);const v=async()=>{try{p(!0),n({title:"用户信息已更新",description:"您的订阅状态已同步"})}catch(e){}finally{p(!1)}};if(u)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"正在处理支付结果..."})]})});const y=c?(x=c.planId,ee.find(e=>e.id===x)):null;var x;const b=r?r.isVip||r.isProUser?{status:"active",text:"已激活",color:"green"}:{status:"pending",text:"处理中",color:"yellow"}:{status:"unknown",text:"未知",color:"gray"};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 py-16",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(we,{className:"w-12 h-12 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"支付成功！"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"感谢您的订阅，我们正在为您激活相关功能"})]}),c&&s.jsxs(M,{className:"mb-8",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(je,{className:"w-5 h-5"}),"订单详情"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"订单号："}),s.jsx("span",{className:"font-mono text-sm",children:c.orderId})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"支付金额："}),s.jsx("span",{className:"font-bold text-green-600",children:o(parseFloat(c.amount),c.currency)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"支付方式："}),s.jsx("span",{children:a(c.paymentMethod)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"支付时间："}),s.jsx("span",{children:new Date(c.createdAt).toLocaleString("zh-CN")})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"订阅计划："}),s.jsxs("div",{className:"flex items-center gap-2",children:["premium"===(null==y?void 0:y.tier)&&s.jsx(Ne,{className:"w-4 h-4 text-yellow-500"}),"pro"===(null==y?void 0:y.tier)&&s.jsx(Te,{className:"w-4 h-4 text-purple-500"}),s.jsx("span",{className:"font-semibold",children:(null==y?void 0:y.name)||"未知计划"})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"订阅状态："}),s.jsx(Ue,{variant:"green"===b.color?"default":"secondary",children:b.text})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户ID："}),s.jsx("span",{className:"font-mono text-sm",children:(null==r?void 0:r.id)||"未知"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户名："}),s.jsx("span",{children:(null==r?void 0:r.nickname)||(null==r?void 0:r.username)||"未知"})]})]})]})})]}),y&&s.jsxs(M,{className:"mb-8",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5"}),"订阅计划详情"]})}),s.jsx(z,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:["premium"===y.tier&&s.jsx(Ne,{className:"w-6 h-6 text-yellow-600"}),"pro"===y.tier&&s.jsx(Te,{className:"w-6 h-6 text-purple-600"}),s.jsx("h3",{className:"text-xl font-semibold",children:y.name}),y.recommended&&s.jsx(Ue,{className:"bg-blue-500",children:"推荐"})]}),s.jsx("p",{className:"text-gray-600",children:y.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"功能限制"}),s.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("li",{children:["AI内容适配器：",-1===y.limits.adaptUsageLimit?"不限次数":`${y.limits.adaptUsageLimit}次/月`]}),s.jsxs("li",{children:["Token限制：",y.limits.tokenLimit.toLocaleString()]}),s.jsxs("li",{children:["可用模型：",y.limits.availableModels.join(", ")]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2",children:"可用功能"}),s.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:y.limits.availableFeatures.map((e,t)=>s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),e]},t))})]})]})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(F,{onClick:()=>t("/"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[s.jsx(Se,{className:"w-4 h-4"}),"返回首页"]}),s.jsxs(F,{onClick:()=>t("/profile"),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(pe,{className:"w-4 h-4"}),"个人中心"]}),s.jsxs(F,{onClick:v,variant:"outline",disabled:h,className:"flex items-center gap-2",children:[h?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):s.jsx(Ce,{className:"w-4 h-4"}),"刷新状态"]})]}),s.jsx("div",{className:"mt-12 text-center",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"温馨提示"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-2 text-left",children:[s.jsx("li",{children:"• 您的订阅已成功激活，可以立即使用所有相关功能"}),s.jsx("li",{children:"• 如果功能未立即生效，请尝试刷新页面或等待几分钟"}),s.jsx("li",{children:"• 订阅到期前我们会通过邮件提醒您续费"}),s.jsx("li",{children:"• 如有任何问题，请联系我们的客服团队"})]})]})}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"接下来您可以："}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"体验AI内容适配器"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"使用AI技术为不同平台优化内容"}),s.jsx(F,{size:"sm",onClick:()=>t("/adapt"),className:"w-full",children:"开始使用"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"探索创意魔方"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"生成创意内容和营销素材"}),s.jsx(F,{size:"sm",onClick:()=>t("/creative"),className:"w-full",children:"创意工具"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"查看使用统计"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"了解您的使用情况和剩余额度"}),s.jsx(F,{size:"sm",onClick:()=>t("/profile"),className:"w-full",children:"个人中心"})]})]})]})]})})}function fc(e={}){const{autoCheck:t=!0,enableSecurityLog:n=!0,vipRoleCode:r="vip",adminRoleCode:i="admin"}=e,[s,o]=T.useState([]),[a,c]=T.useState([]),[l,u]=T.useState(!0),[d,h]=T.useState(null),{getCurrentUser:p}=te(),{toast:f}=B(),m=T.useCallback((e,t,r="info")=>{n&&Q.secureLog(e,t,r)},[n]),g=T.useCallback(e=>a.includes(e),[a]),v=T.useCallback(e=>e.some(e=>a.includes(e)),[a]),y=T.useCallback(e=>e.every(e=>a.includes(e)),[a]),x=T.useCallback(e=>s.find(t=>t.code===e),[s]),b=T.useCallback(async()=>{try{u(!0),h(null),m("开始刷新用户角色");const e=await p();if(!e)throw new Error("用户未登录");const t=[];if(t&&Array.isArray(t)){const n=t.map(e=>({id:String(e.id||""),name:String(e.name||""),description:String(e.description||""),code:String(e.code||""),createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString(),...e})),r=n.map(e=>e.code);o(n),c(r),m("用户角色刷新成功",{userId:e.id,roleCount:n.length,roleCodes:r}),f({title:"角色信息已更新",description:`您当前拥有 ${n.length} 个角色`})}else o([]),c([]),m("用户无角色信息")}catch(e){const t=e instanceof Error?e.message:"刷新角色失败";h(t),m("刷新用户角色失败",{error:t,timestamp:(new Date).toISOString()},"error"),f({title:"角色刷新失败",description:t,variant:"destructive"})}finally{u(!1)}},[p,m,f]),w=g(r),j=g(i),N=!w&&!j;return T.useEffect(()=>{t&&b()},[t,b]),{roles:s,roleCodes:a,loading:l,error:d,hasRole:g,hasAnyRole:v,hasAllRoles:y,refreshRoles:b,getRoleInfo:x,isVip:w,isAdmin:j,isNormalUser:N}}function mc(){const[e,t]=T.useState(!1),[n,r]=T.useState(!0),[i,s]=T.useState(!0),[o,a]=T.useState(null),{getCurrentUser:c}=te();return T.useEffect(()=>{(async()=>{try{if(s(!0),!(await c()))throw new Error("用户未登录");const e=[];e&&Array.isArray(e)&&e.map(e=>String(e.code||"")).includes("vip")?(t(!0),r(!1)):(t(!1),r(!0))}catch(e){a(e instanceof Error?e.message:"检查角色失败"),t(!1),r(!0)}finally{s(!1)}})()},[c]),{isVip:e,isNormalUser:n,loading:i,error:o}}function gc(){const{roles:e,roleCodes:t,hasRole:n,hasAnyRole:r,hasAllRoles:i}=fc(),s=T.useCallback(()=>r(["admin","editor","vip"]),[r]),o=T.useCallback(()=>r(["admin","super_admin"]),[r]),a=T.useCallback(()=>r(["admin","editor","viewer","vip","normal"]),[r]),c=T.useCallback(()=>r(["admin","super_admin","manager"]),[r]);return{roles:e,roleCodes:t,hasRole:n,hasAnyRole:r,hasAllRoles:i,canEdit:s,canDelete:o,canView:a,canManage:c}}function vc(){const e=C(),{toast:t}=B(),{user:n,isAuthenticated:r}=V(),{isVip:i,isAdmin:o,roles:a,loading:c,refreshRoles:l}=fc({autoCheck:!0,enableSecurityLog:!0,vipRoleCode:"vip"}),[u,d]=T.useState(!1),[h,p]=T.useState(!0);return T.useEffect(()=>{(async()=>{try{if(p(!0),Q.secureLog("开始检查VIP访问权限"),!r||!n)return Q.secureLog("用户未登录，重定向到登录页面"),t({title:"需要登录",description:"请先登录后再访问VIP页面",variant:"destructive"}),void e("/login");if(c)return;if(!i&&!o)return Q.secureLog("非VIP用户尝试访问VIP页面",{userId:n.id,roles:a},"error"),t({title:"访问被拒绝",description:"此页面仅限VIP用户访问，请升级您的账户",variant:"destructive"}),void setTimeout(()=>{e("/payment")},2e3);d(!0),Q.secureLog("VIP用户访问权限验证通过",{userId:n.id,roles:a,isVip:i,isAdmin:o}),t({title:"欢迎VIP用户",description:"您已成功访问VIP专属页面"})}catch(s){Q.secureLog("VIP权限检查失败",{error:s instanceof Error?s.message:"未知错误",userId:null==n?void 0:n.id},"error"),t({title:"权限检查失败",description:"请稍后重试或联系客服",variant:"destructive"})}finally{p(!1)}})()},[r,n,i,o,a,c,e,t]),h||c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"正在验证VIP权限..."})]})}):u?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 py-16",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Ne,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"VIP专属页面"}),s.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"欢迎尊贵的VIP用户，这里是您的专属功能区域"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs(Ue,{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:[s.jsx(Ne,{className:"w-3 h-3 mr-1"}),"VIP用户"]}),o&&s.jsxs(Ue,{className:"bg-red-600 text-white",children:[s.jsx(ke,{className:"w-3 h-3 mr-1"}),"管理员"]}),s.jsxs(F,{variant:"outline",size:"sm",onClick:async()=>{try{await l(),t({title:"角色信息已刷新",description:"您的权限状态已更新"})}catch(e){t({title:"刷新失败",description:"请稍后重试",variant:"destructive"})}},disabled:c,children:[s.jsx(Ce,{className:"w-3 h-3 mr-1"}),"刷新权限"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[s.jsxs(M,{className:"border-2 border-purple-200 hover:border-purple-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-5 h-5 text-purple-600"}),"无限AI调用"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"享受无限制的AI内容生成和适配功能，提升您的工作效率。"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{children:"已激活"})]})]})]}),s.jsxs(M,{className:"border-2 border-blue-200 hover:border-blue-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Te,{className:"w-5 h-5 text-blue-600"}),"高级模型"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"使用最新的AI模型，获得更高质量的内容生成结果。"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{children:"已激活"})]})]})]}),s.jsxs(M,{className:"border-2 border-green-200 hover:border-green-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ee,{className:"w-5 h-5 text-green-600"}),"专属客服"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"享受7×24小时专属客服支持，快速解决您的问题。"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{children:"已激活"})]})]})]}),s.jsxs(M,{className:"border-2 border-yellow-200 hover:border-yellow-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ie,{className:"w-5 h-5 text-yellow-600"}),"数据分析"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"查看详细的使用统计和数据分析报告。"}),s.jsx(F,{size:"sm",variant:"outline",children:"查看报告"})]})]}),s.jsxs(M,{className:"border-2 border-red-200 hover:border-red-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ge,{className:"w-5 h-5 text-red-600"}),"高级设置"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"自定义AI参数和高级配置选项。"}),s.jsx(F,{size:"sm",variant:"outline",children:"配置设置"})]})]}),s.jsxs(M,{className:"border-2 border-indigo-200 hover:border-indigo-300 transition-all",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(je,{className:"w-5 h-5 text-indigo-600"}),"优先处理"]})}),s.jsxs(z,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"享受优先处理队列，快速获得AI生成结果。"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{children:"已激活"})]})]})]})]}),s.jsxs(M,{className:"mb-8",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5 text-purple-600"}),"VIP用户信息"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户ID："}),s.jsx("span",{className:"font-mono text-sm",children:null==n?void 0:n.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户名："}),s.jsx("span",{children:(null==n?void 0:n.nickname)||(null==n?void 0:n.username)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"邮箱："}),s.jsx("span",{children:(null==n?void 0:n.email)||"未设置"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"手机："}),s.jsx("span",{children:(null==n?void 0:n.phone)||"未设置"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"VIP状态："}),s.jsx(Ue,{className:"bg-green-600",children:"已激活"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户角色："}),s.jsx("div",{className:"flex gap-1",children:a.map((e,t)=>s.jsx(Ue,{variant:"outline",className:"text-xs",children:"string"==typeof e?e:e.name||e.code},t))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"权限级别："}),s.jsx("span",{className:"font-semibold",children:o?"管理员":"VIP用户"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"最后更新："}),s.jsx("span",{className:"text-sm",children:(new Date).toLocaleString("zh-CN")})]})]})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(F,{onClick:()=>e("/adapt"),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[s.jsx(ve,{className:"w-4 h-4"}),"开始使用AI功能"]}),s.jsxs(F,{onClick:()=>e("/creative"),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Te,{className:"w-4 h-4"}),"创意工作室"]}),s.jsxs(F,{onClick:()=>e("/profile"),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(ge,{className:"w-4 h-4"}),"个人设置"]})]}),s.jsx("div",{className:"mt-12",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5 text-purple-600"}),"VIP特权说明"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-purple-600",children:"功能特权"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"无限制AI内容生成"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"高级AI模型访问"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"优先处理队列"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"专属客服支持"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-blue-600",children:"服务特权"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"7×24小时技术支持"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"专属功能优先体验"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"个性化定制服务"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"高级数据分析报告"]})]})]})]})})]})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-50",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(xe,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"访问被拒绝"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"此页面仅限VIP用户访问，请升级您的账户以享受专属功能。"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(F,{onClick:()=>e("/payment"),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[s.jsx(Ne,{className:"w-4 h-4 mr-2"}),"立即升级VIP"]}),s.jsx(F,{variant:"outline",onClick:()=>e("/"),className:"w-full",children:"返回首页"})]})]})})}function yc({children:e,redirectTo:t="/payment",showUpgradePrompt:n=!0,customCheck:r,onAccessDenied:i,onAccessGranted:o,enableSecurityLog:a=!0,vipRoleCode:c="vip"}){const l=C(),{toast:u}=B(),{user:d,isAuthenticated:h}=V(),{isVip:p,isAdmin:f,roles:m,loading:g}=fc({autoCheck:!0,enableSecurityLog:a,vipRoleCode:c}),[v,y]=T.useState(!1),[x,b]=T.useState(!0);return T.useEffect(()=>{(async()=>{try{if(b(!0),a&&Q.secureLog("开始VIP权限检查",{userId:null==d?void 0:d.id,isAuthenticated:h}),!h||!d)return a&&Q.secureLog("用户未登录，重定向到登录页面"),u({title:"需要登录",description:"请先登录后再访问此功能",variant:"destructive"}),void l("/login");if(g)return;if(!(r?r(p,f):p||f))return a&&Q.secureLog("非VIP用户尝试访问VIP功能",{userId:d.id,roles:m,isVip:p,isAdmin:f},"error"),null==i||i(),void(n?(u({title:"需要VIP权限",description:"此功能仅限VIP用户使用，请升级您的账户",variant:"destructive"}),setTimeout(()=>{l(t)},2e3)):l(t));y(!0),a&&Q.secureLog("VIP权限检查通过",{userId:d.id,roles:m,isVip:p,isAdmin:f}),null==o||o()}catch(e){a&&Q.secureLog("VIP权限检查失败",{error:e instanceof Error?e.message:"未知错误",userId:null==d?void 0:d.id},"error"),u({title:"权限检查失败",description:"请稍后重试或联系客服",variant:"destructive"})}finally{b(!1)}})()},[h,d,p,f,m,g,l,u,t,n,r,i,o,a]),x||g?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"正在验证VIP权限..."})]})}):!v&&n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-50",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(xe,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"需要VIP权限"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"此功能仅限VIP用户使用，请升级您的账户以享受专属功能。"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(F,{onClick:()=>l(t),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[s.jsx(Ne,{className:"w-4 h-4 mr-2"}),"立即升级VIP"]}),s.jsx(F,{variant:"outline",onClick:()=>l("/"),className:"w-full",children:"返回首页"})]})]})}):v?s.jsx(s.Fragment,{children:e}):null}function xc(){const{toast:e}=B(),{user:t,isAuthenticated:n}=V(),{isVip:r,isAdmin:i,roles:o,loading:a,error:c,refreshRoles:l}=fc({autoCheck:!0,enableSecurityLog:!0}),{hasVIPAccess:u}=function(e="vip"){const{isVip:t,isAdmin:n,loading:r}=fc({autoCheck:!0,enableSecurityLog:!0,vipRoleCode:e});return{hasVIPAccess:t||n,isVip:t,isAdmin:n,loading:r}}(),[d,h]=T.useState([]),p=(e,t,n)=>{h(r=>[...r,{id:Date.now(),test:e,result:t,details:n,timestamp:(new Date).toISOString()}])};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 py-16",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(Ne,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"VIP功能测试页面"}),s.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"测试VIP权限检查、角色管理和安全日志功能"})]}),s.jsxs(M,{className:"mb-8",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ke,{className:"w-5 h-5"}),"用户状态信息"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"登录状态："}),s.jsx(Ue,{variant:n?"default":"secondary",children:n?"已登录":"未登录"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户ID："}),s.jsx("span",{className:"font-mono text-sm",children:(null==t?void 0:t.id)||"未登录"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户名："}),s.jsx("span",{children:(null==t?void 0:t.nickname)||(null==t?void 0:t.username)||"未登录"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"邮箱："}),s.jsx("span",{children:(null==t?void 0:t.email)||"未设置"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"VIP状态："}),s.jsx(Ue,{variant:r?"default":"secondary",children:r?"VIP用户":"普通用户"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"管理员："}),s.jsx(Ue,{variant:i?"default":"secondary",children:i?"是":"否"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"VIP权限："}),s.jsx(Ue,{variant:u?"default":"secondary",children:u?"有权限":"无权限"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"用户角色："}),s.jsx("div",{className:"flex gap-1",children:o.map((e,t)=>s.jsx(Ue,{variant:"outline",className:"text-xs",children:"string"==typeof e?e:e.name||e.code},t))})]})]})]})})]}),s.jsxs(Oe,{defaultValue:"vip-guard",className:"mb-8",children:[s.jsxs(Le,{className:"grid w-full grid-cols-3",children:[s.jsx(Re,{value:"vip-guard",children:"VIP权限保护"}),s.jsx(Re,{value:"role-test",children:"角色测试"}),s.jsx(Re,{value:"security-test",children:"安全测试"})]}),s.jsx(Be,{value:"vip-guard",className:"space-y-6",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5"}),"VIP权限保护组件测试"]})}),s.jsxs(z,{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"测试VIP权限保护组件的各种功能，包括权限检查、重定向和升级提示。"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"完整VIP保护"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"包含权限检查、升级提示和重定向功能"}),s.jsx(yc,{redirectTo:"/payment",showUpgradePrompt:!0,onAccessGranted:()=>{e({title:"权限验证通过",description:"您拥有访问此功能的权限"})},onAccessDenied:()=>{e({title:"权限被拒绝",description:"您没有访问此功能的权限",variant:"destructive"})},children:s.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"VIP权限验证通过，此内容仅VIP用户可见"})]})})})]}),s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"简化VIP保护"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"仅进行权限检查，无升级提示"}),s.jsx(yc,{redirectTo:"/payment",showUpgradePrompt:!1,children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"简化权限验证通过"})]})})})]})]})]})]})}),s.jsx(Be,{value:"role-test",className:"space-y-6",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ee,{className:"w-5 h-5"}),"角色管理测试"]})}),s.jsxs(z,{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"测试用户角色获取、刷新和权限检查功能。"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(F,{onClick:()=>{try{const t=o.map(e=>"string"==typeof e?e:e.code),n=function(e,t="vip"){return e.includes(t)||e.includes("admin")}(t,"vip");p("VIP权限检查",n,{roles:t,expectedRole:"vip"}),e({title:n?"权限检查通过":"权限检查失败",description:n?"您拥有VIP权限":"您没有VIP权限",variant:n?"default":"destructive"})}catch(t){p("VIP权限检查",!1,{error:t instanceof Error?t.message:"未知错误"})}},disabled:a,className:"flex items-center gap-2",children:[s.jsx(ke,{className:"w-4 h-4"}),"测试VIP权限检查"]}),s.jsxs(F,{onClick:async()=>{try{await l(),p("角色刷新",!0,{roles:o}),e({title:"角色刷新成功",description:"用户角色信息已更新"})}catch(t){p("角色刷新",!1,{error:t instanceof Error?t.message:"未知错误"}),e({title:"角色刷新失败",description:"请稍后重试",variant:"destructive"})}},disabled:a,className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"w-4 h-4"}),"刷新角色信息"]})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[s.jsx(xe,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:["错误: ",c]})]})})]})]})}),s.jsx(Be,{value:"security-test",className:"space-y-6",children:s.jsxs(M,{children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ke,{className:"w-5 h-5"}),"安全功能测试"]})}),s.jsxs(z,{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"测试安全日志记录和权限验证功能。"}),s.jsxs(F,{onClick:()=>{try{Q.secureLog("VIP测试页面安全日志测试",{userId:null==t?void 0:t.id,isVip:r,isAdmin:i,roles:o,timestamp:(new Date).toISOString()}),p("安全日志",!0,{message:"安全日志记录成功"}),e({title:"安全日志测试",description:"安全日志记录成功"})}catch(n){p("安全日志",!1,{error:n instanceof Error?n.message:"未知错误"})}},className:"flex items-center gap-2",children:[s.jsx(ke,{className:"w-4 h-4"}),"测试安全日志"]})]})]})})]}),s.jsxs(M,{children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-5 h-5"}),"测试结果"]}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>{h([])},children:"清除结果"})]})}),s.jsx(z,{children:0===d.length?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"暂无测试结果"}):s.jsx("div",{className:"space-y-3",children:d.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border "+(e.result?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[e.result?s.jsx(we,{className:"w-4 h-4 text-green-600"}):s.jsx(xe,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.test}),e.details&&s.jsx("div",{className:"text-sm text-gray-600",children:"object"==typeof e.details?JSON.stringify(e.details,null,2):e.details})]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})})]}),s.jsxs(M,{className:"mt-8",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ge,{className:"w-5 h-5"}),"使用说明"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-purple-600",children:"VIP权限保护组件"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"自动检查用户VIP权限"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"支持自定义重定向路径"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"可配置升级提示显示"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"支持权限检查回调"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3 text-blue-600",children:"角色管理功能"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"实时获取用户角色"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"支持角色刷新"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"权限状态管理"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(we,{className:"w-4 h-4 text-green-500"}),"安全日志记录"]})]})]})]})})]})]})})}const bc=new class{constructor(){t(this,"guard",null),t(this,"authingClient",null),t(this,"config"),t(this,"apiBaseUrl"),this.config=G(),this.apiBaseUrl="/api",this.initAuthing()}initAuthing(){try{this.guard=new ne(this.config),this.authingClient=new tc({appId:this.config.appId,appHost:this.config.host}),Q.secureLog("Authing客户端初始化成功")}catch(e){Q.secureLog("Authing客户端初始化失败",{error:e instanceof Error?e.message:"未知错误"},"error")}}async login(e,t){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{let n;switch(e){case"password":n=await this.authingClient.loginByEmail(t.email,t.password);break;case"code":n=await this.authingClient.loginByPhoneCode(t.phone,t.code);break;case"social":throw new Error("社交登录暂不支持");default:throw new Error("不支持的登录方式")}const r=this.convertAuthingUser(n);return await this.syncUserToBackend(r),Q.secureLog("用户登录成功",{userId:r.id,method:e}),r}catch(n){throw Q.secureLog("用户登录失败",{method:e,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async register(e,t){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{let n;"email"===e?n=await this.authingClient.registerByEmailCode(t.email,t.code,t.nickname):"phone"===e&&(n=await this.authingClient.registerByPhoneCode(t.phone,t.code,t.nickname));const r=this.convertAuthingUser(n);return await this.createUserInBackend(r,t.inviterId),Q.secureLog("用户注册成功",{userId:r.id,method:e}),r}catch(n){throw Q.secureLog("用户注册失败",{method:e,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async getCurrentUser(){if(!this.guard)return null;try{const e=await this.guard.trackSession();if(e){const t=this.convertAuthingUser(e);return Q.secureLog("获取当前用户成功",{userId:t.id}),t}return null}catch(e){return Q.secureLog("获取当前用户失败",{error:e instanceof Error?e.message:"未知错误"},"error"),null}}async updateUserInfo(e){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{if(!(await this.getCurrentUser()))throw new Error("用户未登录");const t=await this.authingClient.updateProfile({nickname:e.nickname,photo:e.avatar}),n=this.convertAuthingUser(t);return await this.updateUserProfile(n.id,e),Q.secureLog("用户信息更新成功",{userId:n.id,updates:e}),n}catch(t){throw Q.secureLog("用户信息更新失败",{updates:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async checkLoginStatus(){if(!this.guard)return!1;try{const e=await this.guard.checkLoginStatus(),t=Boolean(e);return Q.secureLog("检查登录状态",{isLoggedIn:t}),t}catch(e){return Q.secureLog("检查登录状态失败",{error:e instanceof Error?e.message:"未知错误"},"error"),!1}}async getUserRoles(){if(!this.authingClient)return[];try{const e=await this.getCurrentUser();if(!e)return[];const t=[];return Q.secureLog("获取用户角色成功",{userId:e.id,roles:t}),t.map(e=>e.code)}catch(e){return Q.secureLog("获取用户角色失败",{error:e instanceof Error?e.message:"未知错误"},"error"),[]}}async assignRole(e){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{const t=await this.getCurrentUser();if(!t)throw new Error("用户未登录");Q.secureLog("角色分配成功",{userId:t.id,roleCode:e})}catch(t){throw Q.secureLog("角色分配失败",{roleCode:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async logout(){if(this.guard)try{await this.guard.logout(),Q.secureLog("用户登出成功")}catch(e){throw Q.secureLog("用户登出失败",{error:e instanceof Error?e.message:"未知错误"},"error"),e}}async refreshToken(){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{await this.authingClient.refreshToken(),Q.secureLog("Token刷新成功")}catch(e){throw Q.secureLog("Token刷新失败",{error:e instanceof Error?e.message:"未知错误"},"error"),e}}async getUserProfile(e){try{const t=await fetch(`${this.apiBaseUrl}/user/profile/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("获取用户资料失败");const n=await t.json();return Q.secureLog("获取用户资料成功",{userId:e,profile:n}),n}catch(t){throw Q.secureLog("获取用户资料失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async updateUserProfile(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/user/profile/${e}`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify(t)})).ok)throw new Error("更新用户资料失败");Q.secureLog("用户资料更新成功",{userId:e,updates:t})}catch(n){throw Q.secureLog("用户资料更新失败",{userId:e,updates:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async generateInviteLink(e){try{const t=await fetch(`${this.apiBaseUrl}/invite/link/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("生成邀请链接失败");const{inviteLink:n}=await t.json();return Q.secureLog("生成邀请链接成功",{userId:e,inviteLink:n}),n}catch(t){throw Q.secureLog("生成邀请链接失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async bindInviteRelation(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/invite/bind`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({inviterId:e,inviteeId:t,timestamp:(new Date).toISOString()})})).ok)throw new Error("绑定邀请关系失败");Q.secureLog("邀请关系绑定成功",{inviterId:e,inviteeId:t})}catch(n){throw Q.secureLog("邀请关系绑定失败",{inviterId:e,inviteeId:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async processInviteReward(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/invite/reward`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({inviterId:e,inviteeId:t,timestamp:(new Date).toISOString()})})).ok)throw new Error("处理邀请奖励失败");Q.secureLog("邀请奖励处理成功",{inviterId:e,inviteeId:t})}catch(n){throw Q.secureLog("邀请奖励处理失败",{inviterId:e,inviteeId:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async getInviteRelations(e){try{const t=await fetch(`${this.apiBaseUrl}/invite/relations/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("获取邀请关系失败");const n=await t.json();return Q.secureLog("获取邀请关系成功",{userId:e,relations:n}),n}catch(t){throw Q.secureLog("获取邀请关系失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async getUserUsage(e){try{const t=await fetch(`${this.apiBaseUrl}/user/usage/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("获取用户使用情况失败");const n=await t.json();return Q.secureLog("获取用户使用情况成功",{userId:e,usage:n}),n}catch(t){throw Q.secureLog("获取用户使用情况失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async distributeMonthlyUsage(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/usage/distribute`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,userTier:t,distributionType:"monthly",timestamp:(new Date).toISOString()})})).ok)throw new Error("发放使用次数失败");Q.secureLog("每月使用次数发放成功",{userId:e,userTier:t})}catch(n){throw Q.secureLog("每月使用次数发放失败",{userId:e,userTier:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async consumeUsage(e,t,n){try{if(!(await fetch(`${this.apiBaseUrl}/usage/consume`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,feature:t,amount:n,timestamp:(new Date).toISOString()})})).ok)throw new Error("消费使用次数失败");Q.secureLog("使用次数消费成功",{userId:e,feature:t,amount:n})}catch(r){throw Q.secureLog("使用次数消费失败",{userId:e,feature:t,amount:n,error:r instanceof Error?r.message:"未知错误"},"error"),r}}async getUserBalance(e){try{const t=await fetch(`${this.apiBaseUrl}/user/balance/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("获取用户余额失败");const n=await t.json();return Q.secureLog("获取用户余额成功",{userId:e,balance:n}),n}catch(t){throw Q.secureLog("获取用户余额失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async updateUserBalance(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/user/balance/${e}`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify(t)})).ok)throw new Error("更新用户余额失败");Q.secureLog("用户余额更新成功",{userId:e,updates:t})}catch(n){throw Q.secureLog("用户余额更新失败",{userId:e,updates:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async recordUserAction(e,t,n){try{if(!(await fetch(`${this.apiBaseUrl}/user/action`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,action:t,data:n,timestamp:(new Date).toISOString()})})).ok)throw new Error("记录用户行为失败");Q.secureLog("用户行为记录成功",{userId:e,action:t,data:n})}catch(r){throw Q.secureLog("用户行为记录失败",{userId:e,action:t,data:n,error:r instanceof Error?r.message:"未知错误"},"error"),r}}async getUserActions(e,t){try{const n=new URLSearchParams;t&&Object.entries(t).forEach(([e,t])=>{n.append(e,String(t))});const r=await fetch(`${this.apiBaseUrl}/user/actions/${e}?${n}`,{headers:await this.getAuthHeaders()});if(!r.ok)throw new Error("获取用户行为记录失败");const i=await r.json();return Q.secureLog("获取用户行为记录成功",{userId:e,actions:i}),i}catch(n){throw Q.secureLog("获取用户行为记录失败",{userId:e,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async getUserSubscription(e){try{const t=await fetch(`${this.apiBaseUrl}/user/subscription/${e}`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("获取用户订阅信息失败");const n=await t.json();return Q.secureLog("获取用户订阅信息成功",{userId:e,subscription:n}),n}catch(t){throw Q.secureLog("获取用户订阅信息失败",{userId:e,error:t instanceof Error?t.message:"未知错误"},"error"),t}}async upgradeSubscription(e,t){try{if(!(await fetch(`${this.apiBaseUrl}/user/subscription/upgrade`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,planId:t,timestamp:(new Date).toISOString()})})).ok)throw new Error("升级订阅失败");Q.secureLog("订阅升级成功",{userId:e,planId:t})}catch(n){throw Q.secureLog("订阅升级失败",{userId:e,planId:t,error:n instanceof Error?n.message:"未知错误"},"error"),n}}async createPaymentOrder(e,t,n){try{const r=await fetch(`${this.apiBaseUrl}/payment/order`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({userId:e,planId:t,amount:n,timestamp:(new Date).toISOString()})});if(!r.ok)throw new Error("创建支付订单失败");const i=await r.json();return Q.secureLog("支付订单创建成功",{userId:e,planId:t,amount:n,orderId:i.id}),i}catch(r){throw Q.secureLog("支付订单创建失败",{userId:e,planId:t,amount:n,error:r instanceof Error?r.message:"未知错误"},"error"),r}}async verifyPayment(e,t){try{const n=await fetch(`${this.apiBaseUrl}/payment/verify`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({orderId:e,paymentData:t,timestamp:(new Date).toISOString()})});if(!n.ok)throw new Error("验证支付失败");const{verified:r}=await n.json();return Q.secureLog("支付验证完成",{orderId:e,verified:r}),r}catch(n){throw Q.secureLog("支付验证失败",{orderId:e,error:n instanceof Error?n.message:"未知错误"},"error"),n}}convertAuthingUser(e){return{id:String(e.id||e.userId||""),username:String(e.username||e.nickname||""),email:String(e.email||""),phone:String(e.phone||""),nickname:String(e.nickname||e.username||""),avatar:String(e.photo||e.avatar||""),plan:e.plan||"free",isProUser:e.isProUser||!1,...e}}async getAuthHeaders(){const e=await this.getCurrentUser();return{"Content-Type":"application/json",Authorization:`Bearer ${await this.getAuthToken()}`,"X-User-ID":(null==e?void 0:e.id)||""}}async getAuthToken(){if(!this.authingClient)throw new Error("Authing客户端未初始化");try{const e="";return Q.secureLog("获取认证Token成功"),e}catch(e){throw Q.secureLog("获取认证Token失败",{error:e instanceof Error?e.message:"未知错误"},"error"),e}}async syncUserToBackend(e){try{await fetch(`${this.apiBaseUrl}/user/sync`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(e)})}catch(t){}}async createUserInBackend(e,t){try{await fetch(`${this.apiBaseUrl}/user/create`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({...e,inviterId:t,timestamp:(new Date).toISOString()})})}catch(n){}}getGuard(){return this.guard}getAuthingClient(){return this.authingClient}},wc=T.createContext(void 0);function jc(){const{user:e,isAuthenticated:t,loading:n,error:r,login:i,register:o,logout:a,updateUserInfo:c,getUserRoles:l,assignRole:u,generateInviteLink:d,bindInviteRelation:h,processInviteReward:p,distributeMonthlyUsage:f,getUserBalance:m,updateUserBalance:g,getInviteRelations:v,getUserUsage:y,recordUserAction:x,refreshUser:b,clearError:w}=(()=>{const e=T.useContext(wc);if(void 0===e)throw new Error("useUnifiedAuthContext必须在UnifiedAuthProvider内部使用");return e})(),[j,N]=T.useState({}),[S,C]=T.useState({}),[k,E]=T.useState({email:"test@example.com",password:"password123"}),[I,P]=T.useState({email:"newuser@example.com",nickname:"新用户",code:"123456"}),[A,_]=T.useState({inviterId:"test-inviter-id",inviteeId:"test-invitee-id"}),D=async(e,t)=>{C(t=>({...t,[e]:!0})),N(t=>({...t,[e]:null}));try{const n=await t();N(t=>({...t,[e]:{success:!0,data:n}}))}catch(n){N(t=>({...t,[e]:{success:!1,error:n instanceof Error?n.message:"未知错误"}}))}finally{C(t=>({...t,[e]:!1}))}},O=e=>{const t=j[e];return S[e]?s.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[s.jsx(be,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"测试中..."})]}):t?t.success?s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(we,{className:"w-4 h-4"}),s.jsx("span",{children:"成功"}),t.data&&s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),alert("已复制到剪贴板")}catch(t){alert("复制失败")}})(JSON.stringify(t.data,null,2)),children:[s.jsx(De,{className:"w-3 h-3 mr-1"}),"复制结果"]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[s.jsx(_e,{className:"w-4 h-4"}),s.jsx("span",{children:t.error})]}):s.jsx("span",{className:"text-gray-500",children:"未测试"})};return s.jsx("div",{className:"container mx-auto py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"统一认证系统测试"}),s.jsx("p",{className:"text-gray-600",children:"测试Authing和自建后台功能的统一接口"})]}),s.jsxs(M,{className:"mb-6",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(Ae,{className:"w-5 h-5"}),"当前状态"]})}),s.jsxs(z,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"认证状态:"}),s.jsx(Ue,{variant:t?"default":"secondary",children:t?"已登录":"未登录"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"加载状态:"}),s.jsx(Ue,{variant:n?"default":"secondary",children:n?"加载中":"就绪"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"用户ID:"}),s.jsx("span",{className:"font-mono text-sm",children:(null==e?void 0:e.id)||"无"})]})]}),r&&s.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[s.jsx(_e,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"错误:"}),s.jsx("span",{children:r})]}),s.jsx(F,{variant:"outline",size:"sm",className:"mt-2",onClick:w,children:"清除错误"})]})]})]}),s.jsxs(Oe,{defaultValue:"authing",className:"space-y-6",children:[s.jsxs(Le,{className:"grid w-full grid-cols-2",children:[s.jsx(Re,{value:"authing",children:"Authing功能"}),s.jsx(Re,{value:"backend",children:"自建后台功能"})]}),s.jsx(Be,{value:"authing",className:"space-y-6",children:s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(pe,{className:"w-5 h-5"}),"用户认证测试"]}),s.jsx(H,{children:"测试Authing的登录、注册、登出等功能"})]}),s.jsxs(z,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"登录测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"login-email",children:"邮箱"}),s.jsx(Ve,{id:"login-email",value:k.email,onChange:e=>E(t=>({...t,email:e.target.value})),placeholder:"test@example.com"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"login-password",children:"密码"}),s.jsx(Ve,{id:"login-password",type:"password",value:k.password,onChange:e=>E(t=>({...t,password:e.target.value})),placeholder:"password123"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{onClick:()=>D("login",()=>i("password",k)),disabled:S.login,children:[S.login&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"测试登录"]}),O("login")]})]}),s.jsx(et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"注册测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"register-email",children:"邮箱"}),s.jsx(Ve,{id:"register-email",value:I.email,onChange:e=>P(t=>({...t,email:e.target.value})),placeholder:"newuser@example.com"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"register-nickname",children:"昵称"}),s.jsx(Ve,{id:"register-nickname",value:I.nickname,onChange:e=>P(t=>({...t,nickname:e.target.value})),placeholder:"新用户"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"register-code",children:"验证码"}),s.jsx(Ve,{id:"register-code",value:I.code,onChange:e=>P(t=>({...t,code:e.target.value})),placeholder:"123456"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{onClick:()=>D("register",()=>o("email",I)),disabled:S.register,children:[S.register&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"测试注册"]}),O("register")]})]}),s.jsx(et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"其他功能测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("getUserRoles",l),disabled:S.getUserRoles,children:[S.getUserRoles&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"获取用户角色"]}),O("getUserRoles")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("assignRole",()=>u("pro")),disabled:S.assignRole,children:[S.assignRole&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"分配角色"]}),O("assignRole")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("refreshToken",b),disabled:S.refreshToken,children:[S.refreshToken&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"刷新Token"]}),O("refreshToken")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"destructive",onClick:()=>D("logout",a),disabled:S.logout,children:[S.logout&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"登出"]}),O("logout")]})]})]})]})]})}),s.jsx(Be,{value:"backend",className:"space-y-6",children:s.jsxs(M,{children:[s.jsxs(U,{children:[s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(fe,{className:"w-5 h-5"}),"自建后台功能测试"]}),s.jsx(H,{children:"测试邀请、余额、使用次数等自建后台功能"})]}),s.jsxs(z,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"邀请功能测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("generateInviteLink",d),disabled:S.generateInviteLink,children:[S.generateInviteLink&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"生成邀请链接"]}),O("generateInviteLink")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("bindInviteRelation",()=>h(A.inviterId,A.inviteeId)),disabled:S.bindInviteRelation,children:[S.bindInviteRelation&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"绑定邀请关系"]}),O("bindInviteRelation")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("processInviteReward",()=>p(A.inviterId,A.inviteeId)),disabled:S.processInviteReward,children:[S.processInviteReward&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"处理邀请奖励"]}),O("processInviteReward")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("getInviteRelations",v),disabled:S.getInviteRelations,children:[S.getInviteRelations&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"获取邀请关系"]}),O("getInviteRelations")]})]})]}),s.jsx(et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"余额和使用次数测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("getUserBalance",m),disabled:S.getUserBalance,children:[S.getUserBalance&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"获取用户余额"]}),O("getUserBalance")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("updateUserBalance",()=>g({points:100})),disabled:S.updateUserBalance,children:[S.updateUserBalance&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"更新用户余额"]}),O("updateUserBalance")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("getUserUsage",y),disabled:S.getUserUsage,children:[S.getUserUsage&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"获取使用情况"]}),O("getUserUsage")]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("distributeMonthlyUsage",()=>f("pro")),disabled:S.distributeMonthlyUsage,children:[S.distributeMonthlyUsage&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"发放月度次数"]}),O("distributeMonthlyUsage")]})]})]}),s.jsx(et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"用户行为记录测试"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>D("recordUserAction",()=>x("test_action",{test:!0})),disabled:S.recordUserAction,children:[S.recordUserAction&&s.jsx(be,{className:"w-4 h-4 mr-2 animate-spin"}),"记录用户行为"]}),O("recordUserAction")]})]})]})]})})]}),e&&s.jsxs(M,{className:"mt-6",children:[s.jsx(U,{children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(pe,{className:"w-5 h-5"}),"当前用户信息"]})}),s.jsx(z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"用户ID"}),s.jsx("p",{className:"font-mono text-sm",children:e.id})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"用户名"}),s.jsx("p",{children:e.username})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"昵称"}),s.jsx("p",{children:e.nickname})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"邮箱"}),s.jsx("p",{children:e.email})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"手机号"}),s.jsx("p",{children:e.phone})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-medium",children:"用户等级"}),s.jsx(Ue,{variant:"outline",children:e.plan})]})]})})]})]})})}const Nc=k.lazy(()=>L(()=>import("./pages-adapt-TpxL9qXl.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Tc=k.lazy(()=>L(()=>import("./InvitePage-X8MIy3Zc.js"),__vite__mapDeps([12,1,2,3,5,6,4,0,8,9,10,11,7]))),Sc=k.lazy(()=>L(()=>import("./pages-brand-BFAxHyKh.js").then(e=>e.B),__vite__mapDeps([7,1,2,3,5,6,4,0,8,9,10,11]))),Cc=k.lazy(()=>L(()=>import("./pages-hot-topics-Bfl9l8w8.js").then(e=>e.H),__vite__mapDeps([13,1,2,3,5,6,4,0,8,9,10,11,7]))),kc=k.lazy(()=>L(()=>import("./HotTopicDetailPage-DNqqWyWv.js"),__vite__mapDeps([14,1,2,3,5,6,4,0,8,9,10,11,7,13]))),Ec=k.lazy(()=>L(()=>import("./PaymentPage-pWmg3EWo.js"),__vite__mapDeps([15,1,2,3,5,6,4,0,8,9,10,11,7]))),Ic=k.lazy(()=>L(()=>import("./ProfilePage-HyG8rNrZ.js"),__vite__mapDeps([16,1,2,3,5,6,4,0,8,9,10,11,7]))),Pc=k.lazy(()=>L(()=>import("./SettingsPage-DlGiil25.js"),__vite__mapDeps([17,1,2,3,5,6,4,0,8,9,10,11,7,13]))),Ac=k.lazy(()=>L(()=>import("./UserDataPage-DuRg-FlT.js"),__vite__mapDeps([18,1,2,3,5,6,4,0,8,9,10,11,7]))),_c=k.lazy(()=>L(()=>import("./UserProfilePage-Bz-8S22P.js"),__vite__mapDeps([19,1,2,3,5,6,4,0,8,9,10,11,7,20,13]))),Dc=k.lazy(()=>L(()=>import("./UserProfileTestPage-CCCHMM30.js"),__vite__mapDeps([21,1,2,3,5,6,4,0,8,9,10,11,7,20,13]))),Oc=k.lazy(()=>L(()=>import("./LoginButtonTestPage-DuzjUuX1.js"),__vite__mapDeps([22,1,2,3,5,6,4,0,8,9,10,11,7,13]))),Lc=k.lazy(()=>L(()=>import("./AuthingStatusTestPage-D_OzQCfM.js"),__vite__mapDeps([23,1,2,3,5,6,4,0,8,9,10,11,7,13,24]))),Rc=k.lazy(()=>L(()=>import("./LogoutButtonTestPage-BPPRzg4e.js"),__vite__mapDeps([25,1,2,3,5,6,4,0,8,9,10,11,7,13,24,26]))),Bc=k.lazy(()=>L(()=>import("./UserEditFormTestPage-BCH_Ihjt.js"),__vite__mapDeps([27,1,2,3,5,6,4,0,8,9,10,11,7,13,24,26,28]))),Fc=k.lazy(()=>L(()=>import("./PrivacyPage-ftaara1D.js"),__vite__mapDeps([29,1,2,3,5,6,4,0,8,9,10,11,7]))),Vc=k.lazy(()=>L(()=>import("./TermsPage-4bf6wxK9.js"),__vite__mapDeps([30,1,2,3,5,6,4,0,8,9,10,11,7]))),Mc=k.lazy(()=>L(()=>import("./ChangelogPage-RiB9yTN3.js"),__vite__mapDeps([31,1,2,3,5,6,4,0,8,9,10,11,7]))),Uc=k.lazy(()=>L(()=>import("./HistoryPage-BAGwrnXI.js"),__vite__mapDeps([32,1,2,3,5,6,4,0,8,9,10,11,7]))),qc=k.lazy(()=>L(()=>import("./pages-library-CEVmJXQ7.js"),__vite__mapDeps([33,1,2,3,5,6,4,0,8,9,10,11,7]))),Hc=k.lazy(()=>L(()=>import("./pages-creative-CqCYIXck.js").then(e=>e.W),__vite__mapDeps([34,1,2,3,0,4,5,6,7,8,9,10,11,35,28]))),zc=k.lazy(()=>L(()=>import("./TestNewFeaturesPage-DaOYcark.js"),__vite__mapDeps([36,1,2,3,5,6,4,0,8,9,10,11,7]))),$c=k.lazy(()=>L(()=>import("./pages-content-extractor-COXy_-Wy.js").then(e=>e.C),__vite__mapDeps([10,1,2,3,5,6,4,0,8,9,11,7]))),Wc=k.lazy(()=>L(()=>import("./pages-creative-CqCYIXck.js").then(e=>e.C),__vite__mapDeps([34,1,2,3,0,4,5,6,7,8,9,10,11,35,28]))),Gc=k.lazy(()=>L(()=>import("./pages-share-BbDWSVGe.js"),__vite__mapDeps([37,1,2,3,5,6,4,0,8,9,10,11,7]))),Zc=k.lazy(()=>L(()=>import("./pages-emoji-DFlKZb1r.js").then(e=>e.a),__vite__mapDeps([28,1,2,3,5,6,4,0,8,9,10,11,7]))),Jc=k.lazy(()=>L(()=>import("./AboutPage-w7hgi4sp.js"),__vite__mapDeps([38,1,2,3,5,6,4,0,8,9,10,11,7]))),Yc=k.lazy(()=>L(()=>import("./TestPage-Cw4W0omJ.js"),__vite__mapDeps([39,1,2,3,9,10,5,6,4,0,8,11,7]))),Kc=k.lazy(()=>L(()=>import("./AITestPage-BvPQeQiX.js"),__vite__mapDeps([40,1,2,3,5,6,4,0,8,9,10,11,7]))),Xc=k.lazy(()=>L(()=>import("./ReferrerTestPage-B9ygelap.js"),__vite__mapDeps([41,1,2,3,5,6,4,0,8,9,10,11,7]))),Qc=k.lazy(()=>L(()=>import("./ArchitectureTestPage-yEc2R1_n.js"),__vite__mapDeps([42,1,2,3,5,6,4,0,8,9,10,11,7,13,28]))),el=k.lazy(()=>L(()=>import("./AuthingSystemTestPage-CIS-zZMa.js"),__vite__mapDeps([43,1,2,3,5,6,4,0,8,9,10,11,7]))),tl=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"加载中..."})]})}),nl=()=>{const{initializeUserData:e,saveReferrer:t}=Z();return T.useEffect(()=>{e(),t()},[e,t]),s.jsxs("div",{children:[s.jsx(Xe,{}),s.jsxs(A,{children:[s.jsx(_,{path:"/",element:s.jsx(ie,{})}),s.jsx(_,{path:"/privacy",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Fc,{})})}),s.jsx(_,{path:"/terms",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Vc,{})})}),s.jsx(_,{path:"/changelog",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Mc,{})})}),s.jsx(_,{path:"/login",element:s.jsx(Xt,{})}),s.jsx(_,{path:"/login-register",element:s.jsx(nc,{})}),s.jsx(_,{path:"/register",element:s.jsx(rc,{})}),s.jsx(_,{path:"/forgot-password",element:s.jsx(ic,{})}),s.jsx(_,{path:"/callback",element:s.jsx(sc,{})}),s.jsx(_,{path:"/api-test",element:s.jsx(cc,{})}),s.jsx(_,{path:"/auth-test",element:s.jsx(lc,{})}),s.jsx(_,{path:"/user-status",element:s.jsx(uc,{})}),s.jsx(_,{path:"/referrer-test",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Xc,{})})}),s.jsx(_,{path:"/adapt",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Nc,{})})})})}),s.jsx(_,{path:"/invite",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Tc,{})})})}),s.jsx(_,{path:"/brand-library",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Sc,{})})})})}),s.jsx(_,{path:"/hot-topics",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Cc,{})})})})}),s.jsx(_,{path:"/hot-topics/detail/:platform/:title",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(kc,{})})})})}),s.jsx(_,{path:"/vip",element:s.jsx(vc,{})}),s.jsx(_,{path:"/vip-test",element:s.jsx(xc,{})}),s.jsx(_,{path:"/payment",element:s.jsx(Ec,{})}),s.jsx(_,{path:"/payment-success",element:s.jsx(pc,{})}),s.jsx(_,{path:"/profile",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Ic,{})})})})}),s.jsx(_,{path:"/user-profile",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(_c,{})})})})}),s.jsx(_,{path:"/user-profile-test",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Dc,{})})})})}),s.jsx(_,{path:"/login-button-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Oc,{})})})}),s.jsx(_,{path:"/authing-status-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Lc,{})})})}),s.jsx(_,{path:"/logout-button-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Rc,{})})})}),s.jsx(_,{path:"/user-edit-form-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Bc,{})})})}),s.jsx(_,{path:"/unified-auth-test",element:s.jsx(Ye,{children:s.jsx(jc,{})})}),s.jsx(_,{path:"/architecture-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Qc,{})})})}),s.jsx(_,{path:"/authing-system-test",element:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(el,{})})})}),s.jsx(_,{path:"/settings",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Pc,{})})})})}),s.jsx(_,{path:"/user-data",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Ac,{})})})})}),s.jsx(_,{path:"/history",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Uc,{})})})})}),s.jsx(_,{path:"/library",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(qc,{})})})})}),s.jsx(_,{path:"/wechat-templates",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Hc,{})})})})}),s.jsx(_,{path:"/test-new-features",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(zc,{})})})})}),s.jsx(_,{path:"/content-extractor",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx($c,{})})})})}),s.jsx(_,{path:"/creative-studio",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Wc,{})})})})}),s.jsx(_,{path:"/share-manager",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Gc,{})})})})}),s.jsx(_,{path:"/emoji-generator",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Zc,{})})})})}),s.jsx(_,{path:"/about",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Jc,{})})}),s.jsx(_,{path:"/test",element:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Yc,{})})}),s.jsx(_,{path:"/ai-test",element:s.jsx(Je,{requireAuth:!0,redirectTo:"/login",children:s.jsx(Ye,{children:s.jsx(T.Suspense,{fallback:s.jsx(tl,{}),children:s.jsx(Kc,{})})})})}),s.jsx(_,{path:"*",element:s.jsx(Kt,{})})]}),s.jsx(dc,{})]})},rl=()=>s.jsx(P,{children:s.jsx(re,{children:s.jsxs(Ze,{children:[s.jsx(nl,{}),s.jsx(Yt,{})]})})});class il extends k.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"😵 应用出现错误"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"抱歉，应用遇到了一个意外错误"}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"刷新页面"}),!1]})}):this.props.children}}rt.createRoot(document.getElementById("root")).render(s.jsx(k.StrictMode,{children:s.jsx(il,{children:s.jsx(rl,{})})}));export{fc as a,gc as b,bc as c,mc as u};
