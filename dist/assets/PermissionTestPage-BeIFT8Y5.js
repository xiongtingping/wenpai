import{c as e,i as s,r as a,an as l,ao as r,ap as i,j as n,n as c,o as d,B as t,aq as m,ar as x}from"./index-Cu70HESd.js";import{C as o,a as h,b as j,d as g,c as p}from"./card-C_loCoFD.js";import{B as u}from"./badge-CIOmyheZ.js";import{T as N}from"./triangle-alert-CKSzkCD3.js";import{L as f}from"./lock-CQJwpD2-.js";import{S as v}from"./shield-Bm1xaTfP.js";import{Z as b}from"./zap-B-n6G30_.js";import{S as y}from"./star-S72kKK2c.js";import{C as w}from"./circle-check-big-P3EWXA1B.js";import{C as _}from"./circle-x-Wo4NID7o.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=e("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);function C(){const{user:e}=s(),[C,P]=a.useState(null),[A,S]=a.useState([]),[q,z]=a.useState([]);a.useEffect(()=>{const s=l();P(s);const a=(null==e?void 0:e.plan)||"trial",n=r(a),c=i(a);S(n),z(c)},[e]);const I=e=>{switch(e){case"premium":return"高级版";case"pro":return"专业版";default:return"试用版"}},$=e=>e?n.jsx(w,{className:"h-4 w-4 text-green-500"}):n.jsx(_,{className:"h-4 w-4 text-red-500"}),B=s=>{var a;const l=(null==e?void 0:e.plan)||"trial",r=m(s,l);alert(`功能: ${null==(a=x[s])?void 0:a.name}\n权限: ${r.hasPermission?"有权限":"无权限"}\n原因: ${r.message||"无"}`)};return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"权限测试页面"}),n.jsx("p",{className:"text-gray-600",children:"测试和展示所有功能的权限状态"})]}),n.jsxs(o,{className:"mb-6",children:[n.jsx(h,{children:n.jsxs(j,{className:"flex items-center gap-2",children:[n.jsx(c,{className:"h-5 w-5"}),"用户信息"]})}),n.jsx(g,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"用户ID:"}),n.jsx("span",{className:"text-sm text-gray-600",children:(null==e?void 0:e.id)||"未登录"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"用户名:"}),n.jsx("span",{className:"text-sm text-gray-600",children:(null==e?void 0:e.username)||"未登录"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"当前计划:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[(e=>{switch(e){case"premium":return n.jsx(y,{className:"h-4 w-4 text-yellow-500"});case"pro":return n.jsx(b,{className:"h-4 w-4 text-blue-500"});default:return n.jsx(c,{className:"h-4 w-4 text-gray-500"})}})((null==e?void 0:e.plan)||"trial"),n.jsx(u,{variant:"premium"===(null==e?void 0:e.plan)?"default":"pro"===(null==e?void 0:e.plan)?"secondary":"outline",children:I((null==e?void 0:e.plan)||"trial")})]})]})]})})]}),n.jsxs(o,{className:"mb-6",children:[n.jsx(h,{children:n.jsxs(j,{className:"flex items-center gap-2",children:[n.jsx(d,{className:"h-5 w-5"}),"系统配置状态"]})}),n.jsxs(g,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"OpenAI API"}),$(null==C?void 0:C.openai)]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Authing认证"}),$(null==C?void 0:C.authing)]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Creem支付"}),$(null==C?void 0:C.creem)]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"DeepSeek API"}),$(null==C?void 0:C.deepseek)]})]}),n.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800",children:[n.jsx(N,{className:"h-4 w-4"}),n.jsxs("span",{children:["整体配置状态: ",(null==C?void 0:C.overall)?"正常":"异常"]})]})})]})]}),n.jsxs(o,{className:"mb-6",children:[n.jsxs(h,{children:[n.jsxs(j,{className:"flex items-center gap-2",children:[n.jsx(k,{className:"h-5 w-5 text-green-500"}),"可用功能 (",A.length,")"]}),n.jsx(p,{children:"您当前计划可以使用的功能"})]}),n.jsx(g,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(e=>n.jsxs("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-green-900",children:e.name}),n.jsx(u,{variant:"outline",className:"text-green-700 border-green-300",children:I(e.requiredPlan)})]}),n.jsx("p",{className:"text-sm text-green-700 mb-3",children:e.description}),n.jsx(t,{size:"sm",variant:"outline",onClick:()=>B(e.id),className:"text-green-700 border-green-300 hover:bg-green-100",children:"测试权限"})]},e.id))})})]}),n.jsxs(o,{className:"mb-6",children:[n.jsxs(h,{children:[n.jsxs(j,{className:"flex items-center gap-2",children:[n.jsx(f,{className:"h-5 w-5 text-red-500"}),"不可用功能 (",q.length,")"]}),n.jsx(p,{children:"需要升级计划或配置才能使用的功能"})]}),n.jsx(g,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(e=>n.jsxs("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-red-900",children:e.name}),n.jsx(u,{variant:"outline",className:"text-red-700 border-red-300",children:I(e.requiredPlan)})]}),n.jsx("p",{className:"text-sm text-red-700 mb-2",children:e.description}),n.jsxs("p",{className:"text-xs text-red-600 mb-3",children:["原因: ",e.reason]}),n.jsx(t,{size:"sm",variant:"outline",onClick:()=>B(e.id),className:"text-red-700 border-red-300 hover:bg-red-100",children:"测试权限"})]},e.id))})})]}),n.jsxs(o,{children:[n.jsxs(h,{children:[n.jsxs(j,{className:"flex items-center gap-2",children:[n.jsx(v,{className:"h-5 w-5"}),"全局权限检查"]}),n.jsx(p,{children:"在浏览器控制台中运行权限检查命令"})]}),n.jsx(g,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-2",children:"可用命令:"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"__checkPermission__('content-adaptation')"}),n.jsx("span",{className:"text-gray-600",children:"检查特定功能权限"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"__checkAllPermissions__()"}),n.jsx("span",{className:"text-gray-600",children:"检查所有功能权限"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"__validateConfig__()"}),n.jsx("span",{className:"text-gray-600",children:"验证系统配置"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(t,{onClick:()=>{"undefined"!=typeof window&&window.__checkAllPermissions__&&window.__checkAllPermissions__()},children:"运行全局检查"}),n.jsx(t,{variant:"outline",onClick:()=>{"undefined"!=typeof window&&window.__validateConfig__&&window.__validateConfig__()},children:"验证配置"})]})]})})]})]})})}export{C as default};
