import{j as e}from"./ui-core-DvCHSSHi.js";import{r as s,u as t}from"./router-C2V8BG2_.js";import{C as a,a as l,b as i,d as n,B as c,e as r,S as d,u as x}from"./pages-home-BppkB_BK.js";import{S as m,e as h,f as o,g as j,h as u,B as N,D as f,a as g,b as p,c as v,d as w,m as y,L as b,I as k,i as S,j as C,k as $,l as z}from"./pages-adapt-QlWqecYb.js";import{P as H}from"./components-layout-wBk4MFkI.js";import{Q as A,W as q,O as I,Y as O,_ as D,$ as M,a0 as _,j as E,f as L,a1 as T,a2 as P,a3 as U,E as R,X as J,k as V,o as B,a4 as F,l as G,P as Q,H as W,G as Y,a5 as Z,a6 as K,a7 as X,a8 as ee,a9 as se,aa as te,ab as ae,ac as le,ad as ie,Z as ne,ae as ce,V as re}from"./utils-OoJFdsFh.js";import{g as de,a as xe,b as me,c as he,d as oe,e as je,f as ue,t as Ne,m as fe,h as ge}from"./api-services-yBnNgddQ.js";const pe=({keyword:t,trends:d,timeRange:x="7d",loading:f=!1,onRefresh:g})=>{const p=s.useMemo(()=>{if(0===d.length)return null;const e=[...d].sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()),s=e[0].heat,t=e[e.length-1].heat,a=t-s;return{current:t,change:a,changePercent:s>0?a/s*100:0,max:Math.max(...e.map(e=>e.heat)),min:Math.min(...e.map(e=>e.heat)),average:Math.round(e.reduce((e,s)=>e+s.heat,0)/e.length),trend:a>0?"up":a<0?"down":"stable"}},[d]),v=s.useMemo(()=>d.map(e=>({date:new Date(e.date).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}),heat:e.heat,mentions:e.mentions,platforms:e.platforms.length})),[d]);return e.jsxs(a,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),"çƒ­åº¦è¶‹åŠ¿"]}),e.jsxs(n,{children:['è¯é¢˜"',t,'"çš„çƒ­åº¦å˜åŒ–è¶‹åŠ¿']})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{value:x,onValueChange:e=>{},children:[e.jsx(h,{className:"w-24",children:e.jsx(o,{})}),e.jsxs(j,{children:[e.jsx(u,{value:"7d",children:"7å¤©"}),e.jsx(u,{value:"30d",children:"30å¤©"}),e.jsx(u,{value:"90d",children:"90å¤©"})]})]}),g&&e.jsx(c,{variant:"outline",size:"sm",onClick:g,disabled:f,children:e.jsx(q,{className:"w-4 h-4"})})]})]})}),e.jsx(r,{children:f?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.current.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"å½“å‰çƒ­åº¦"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-lg font-semibold flex items-center justify-center gap-1 ${(e=>{switch(e){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})(p.trend)}`,children:[(s=>{switch(s){case"up":return e.jsx(M,{className:"w-4 h-4 text-green-600"});case"down":return e.jsx(D,{className:"w-4 h-4 text-red-600"});default:return e.jsx(O,{className:"w-4 h-4 text-gray-600"})}})(p.trend),p.changePercent>0?"+":"",p.changePercent.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"å˜åŒ–è¶‹åŠ¿"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:p.average.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"å¹³å‡çƒ­åº¦"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:p.max.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-500",children:"æœ€é«˜çƒ­åº¦"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"çƒ­åº¦å˜åŒ–"}),e.jsxs(N,{variant:"outline",className:"text-xs",children:[d.length," ä¸ªæ•°æ®ç‚¹"]})]}),(()=>{if(0===v.length)return null;const s=Math.max(...v.map(e=>e.heat)),t=Math.min(...v.map(e=>e.heat)),a=s-t;return e.jsx("div",{className:"flex items-end justify-between h-32 mt-4 space-x-1",children:v.map((s,l)=>{const i=a>0?(s.heat-t)/a*100:50,n=l===v.length-1;return e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:"w-full rounded-t transition-all duration-300 "+(n?"bg-blue-500":"bg-gray-300 hover:bg-gray-400"),style:{height:`${Math.max(i,10)}%`},title:`${s.date}: ${s.heat.toLocaleString()}`}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 transform rotate-45 origin-left",children:s.date})]},l)})})})()]}),d.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"å¹³å°åˆ†å¸ƒ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(d.flatMap(e=>e.platforms))).map(s=>e.jsx(N,{variant:"secondary",className:"text-xs",children:s},s))})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"æš‚æ— çƒ­åº¦è¶‹åŠ¿æ•°æ®"}),e.jsx("p",{className:"text-sm",children:"å¼€å§‹ç›‘æŽ§è¯é¢˜åŽå³å¯æŸ¥çœ‹çƒ­åº¦å˜åŒ–"})]})})]})},ve={enabled:!0,sound:!0,desktop:!0,email:!1,push:!1,quietHours:{enabled:!1,start:"22:00",end:"08:00"}};function we(){try{const e=localStorage.getItem("notification-config");return e?{...ve,...JSON.parse(e)}:ve}catch(e){return ve}}function ye(){try{const e=localStorage.getItem("notifications");return e?JSON.parse(e):[]}catch(e){return[]}}function be(e){try{localStorage.setItem("notifications",JSON.stringify(e))}catch(s){}}function ke(e){const s=ye(),t={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2),createdAt:(new Date).toISOString()};return s.unshift(t),s.length>100&&s.splice(100),be(s),function(e){const s=we();s.enabled&&(s.quietHours.enabled&&function(){const e=we();if(!e.quietHours.enabled)return!1;const s=new Date,t=60*s.getHours()+s.getMinutes(),[a,l]=e.quietHours.start.split(":").map(Number),[i,n]=e.quietHours.end.split(":").map(Number),c=60*a+l,r=60*i+n;return c<=r?t>=c&&t<=r:t>=c||t<=r}()||(s.desktop&&"Notification"in window&&("granted"===Notification.permission?new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id,requireInteraction:"error"===e.level}):"default"===Notification.permission&&Notification.requestPermission().then(s=>{"granted"===s&&new Notification(e.title,{body:e.message,icon:"/favicon.ico"})})),s.sound&&function(){try{const e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(e=>{})}catch(e){}}(),document.hidden&&function(e){const s=document.title;let t=0;const a=()=>{t>=5?document.title=s:(document.title=t%2==0?`ðŸ”” ${e}`:s,t++,setTimeout(a,1e3))};a()}(e.title)))}(t),t}function Se(e,s,t){const a=s.length;ke({type:"topic_update",level:a>0?"success":"info",title:`è¯é¢˜æ›´æ–°: ${e}`,message:a>0?`å‘çŽ° ${a} æ¡å…³äºŽ"${e}"çš„æ–°å†…å®¹`:`"${e}"æš‚æ— æ–°å†…å®¹`,data:{keyword:e,subscriptionName:t,resultCount:a},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}function Ce(e,s,t){ke({type:"heat_alert",level:"warning",title:`çƒ­åº¦è­¦æŠ¥: ${e}`,message:`"${e}"çƒ­åº¦è¾¾åˆ° ${s.toLocaleString()}ï¼Œè¶…è¿‡é˜ˆå€¼ ${t.toLocaleString()}`,data:{keyword:e,heat:s,threshold:t},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}function $e(e,s){const t={created:"åˆ›å»ºæˆåŠŸ",updated:"æ›´æ–°æˆåŠŸ",deleted:"åˆ é™¤æˆåŠŸ",enabled:"å·²å¯ç”¨",disabled:"å·²ç¦ç”¨"};ke({type:"subscription",level:"success",title:`è®¢é˜…${t[e]}`,message:`è¯é¢˜è®¢é˜…"${s}"${t[e]}`,data:{action:e,subscriptionName:s}})}const ze=()=>{const[t,l]=s.useState([]),[i,n]=s.useState(we()),[x,S]=s.useState(!1),[C,$]=s.useState("all");s.useEffect(()=>{z()},[]),s.useEffect(()=>{const e=setInterval(()=>{z()},3e4);return()=>clearInterval(e)},[]);const z=()=>{l(ye())},H=e=>{const s={...i,...e};n(s),function(e){try{localStorage.setItem("notification-config",JSON.stringify(e))}catch(s){}}(s)},A=t.filter(e=>{switch(C){case"unread":return!e.readAt;case"topic_update":return"topic_update"===e.type;case"heat_alert":return"heat_alert"===e.type;default:return!0}}),q=(s,t)=>{switch(t){case"error":return e.jsx(F,{className:"w-4 h-4 text-red-600"});case"warning":return e.jsx(F,{className:"w-4 h-4 text-yellow-600"});case"success":return e.jsx(B,{className:"w-4 h-4 text-green-600"});default:return e.jsx(V,{className:"w-4 h-4 text-blue-600"})}},I=e=>{switch(e){case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}},O=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime();return t<6e4?"åˆšåˆš":t<36e5?`${Math.floor(t/6e4)}åˆ†é’Ÿå‰`:t<864e5?`${Math.floor(t/36e5)}å°æ—¶å‰`:s.toLocaleDateString("zh-CN")},D=ye().filter(e=>!e.readAt).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"é€šçŸ¥ä¸­å¿ƒ"}),D>0&&e.jsx(N,{variant:"destructive",className:"ml-2",children:D})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{value:C,onValueChange:e=>$(e),children:[e.jsx(h,{className:"w-32",children:e.jsx(o,{})}),e.jsxs(j,{children:[e.jsx(u,{value:"all",children:"å…¨éƒ¨"}),e.jsx(u,{value:"unread",children:"æœªè¯»"}),e.jsx(u,{value:"topic_update",children:"è¯é¢˜æ›´æ–°"}),e.jsx(u,{value:"heat_alert",children:"çƒ­åº¦è­¦æŠ¥"})]})]}),e.jsxs(f,{open:x,onOpenChange:S,children:[e.jsx(g,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(E,{className:"w-4 h-4"})})}),e.jsxs(p,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"é€šçŸ¥è®¾ç½®"}),e.jsx(y,{children:"é…ç½®é€šçŸ¥çš„æ˜¾ç¤ºæ–¹å¼å’Œæ—¶é—´"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"å¯ç”¨é€šçŸ¥"}),e.jsx(d,{checked:i.enabled,onCheckedChange:e=>H({enabled:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"æ¡Œé¢é€šçŸ¥"}),e.jsx(d,{checked:i.desktop,onCheckedChange:e=>H({desktop:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"å£°éŸ³æé†’"}),e.jsx(d,{checked:i.sound,onCheckedChange:e=>H({sound:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"é™éŸ³æ—¶é—´"}),e.jsx(d,{checked:i.quietHours.enabled,onCheckedChange:e=>H({quietHours:{...i.quietHours,enabled:e}})})]}),i.quietHours.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm",children:"å¼€å§‹æ—¶é—´"}),e.jsx(k,{type:"time",value:i.quietHours.start,onChange:e=>H({quietHours:{...i.quietHours,start:e.target.value}})})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-sm",children:"ç»“æŸæ—¶é—´"}),e.jsx(k,{type:"time",value:i.quietHours.end,onChange:e=>H({quietHours:{...i.quietHours,end:e.target.value}})})]})]})]})]})]}),D>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{!function(){const e=ye(),s=(new Date).toISOString();e.forEach(e=>{e.readAt||(e.readAt=s)}),be(e)}(),z()},children:[e.jsx(L,{className:"w-4 h-4"}),"å…¨éƒ¨å·²è¯»"]}),t.length>0&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{be([]),z()},children:[e.jsx(T,{className:"w-4 h-4"}),"æ¸…ç©º"]})]})]}),0===A.length?e.jsx(a,{children:e.jsxs(r,{className:"text-center py-8",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"æš‚æ— é€šçŸ¥"}),e.jsx("p",{className:"text-sm text-gray-400",children:"å½“æœ‰è¯é¢˜æ›´æ–°æˆ–çƒ­åº¦å˜åŒ–æ—¶ä¼šæ”¶åˆ°é€šçŸ¥"})]})}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(s=>e.jsx(a,{className:`transition-all duration-200 hover:shadow-md ${s.readAt?"opacity-75":""} ${I(s.level)}`,children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:q(s.type,s.level)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),!s.readAt&&e.jsx(N,{variant:"secondary",className:"text-xs",children:"æ–°"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),O(s.createdAt)]}),s.actionUrl&&e.jsxs(c,{variant:"ghost",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>window.open(s.actionUrl,"_blank"),children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"æŸ¥çœ‹è¯¦æƒ…"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[!s.readAt&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>(function(e){const s=ye(),t=s.findIndex(s=>s.id===e);-1!==t&&(s[t].readAt=(new Date).toISOString(),be(s))}(s.id),void z()),className:"h-8 w-8 p-0",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>(function(e){be(ye().filter(s=>s.id!==e))}(s.id),void z()),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(J,{className:"w-4 h-4"})})]})]})})},s.id))})]})},He=Object.freeze(Object.defineProperty({__proto__:null,default:function(){t();const{toast:m}=x(),[h,o]=s.useState(null),[j,u]=s.useState("all"),[f,g]=s.useState(!0),[p,v]=s.useState(!1),[w,y]=s.useState(""),[b,k]=s.useState(null),[A,q]=s.useState("hot"),[I,O]=s.useState([]),[E,L]=s.useState({}),[J,V]=s.useState(null),[B,F]=s.useState(!1),[ve,we]=s.useState(!1),[ye,be]=s.useState(!1),[ke,Se]=s.useState(de()),[Ce,$e]=s.useState({}),[He,Ae]=s.useState({}),[qe,Ie]=s.useState({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),[Oe]=s.useState(xe()),De=me(),Me=async()=>{try{g(!0),k(null);const e=await oe();o(e)}catch(e){const s=e instanceof Error?e.message:"ç½‘ç»œè¿žæŽ¥å¼‚å¸¸";k(s),m({title:"èŽ·å–æ•°æ®å¤±è´¥",description:s,variant:"destructive"})}finally{g(!1)}},_e=async()=>{v(!0),await Me(),v(!1),b||m({title:"æ•°æ®å·²åˆ·æ–°",description:"å…¨ç½‘çƒ­ç‚¹æ•°æ®å·²æ›´æ–°"})},Ee=s=>{switch(s){case"weibo":case"baidu":case"github":return e.jsx(Y,{className:"w-4 h-4"});case"zhihu":case"ithome":case"csdn":return e.jsx(le,{className:"w-4 h-4"});case"douyin":return e.jsx(re,{className:"w-4 h-4"});case"bilibili":return e.jsx(ce,{className:"w-4 h-4"});case"36kr":return e.jsx(ne,{className:"w-4 h-4"});case"sspai":return e.jsx(ie,{className:"w-4 h-4"});case"juejin":return e.jsx(ee,{className:"w-4 h-4"});default:return e.jsx(W,{className:"w-4 h-4"})}},Le=()=>{const e=je();O(e),Se(de())},Te=async e=>{if(!Ce[e]){Ae(s=>({...s,[e]:!0}));try{const s=await ge(e,7);$e(t=>({...t,[e]:s}))}catch(s){}finally{Ae(s=>({...s,[e]:!1}))}}};s.useEffect(()=>{Me(),Le()},[]);const Pe=(()=>{if(!h)return[];if("all"===j){const e=[];return Object.values(h.data).forEach(s=>{e.push(...s)}),e.slice(0,50)}return h.data[j]||[]})(),Ue=h?{total:Object.values(h.data).reduce((e,s)=>e+s.length,0),platforms:Object.keys(h.data).length}:{total:0,platforms:0};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(H,{title:"å…¨ç½‘é›·è¾¾",description:"å®žæ—¶ç›‘æŽ§å„å¹³å°çƒ­é—¨è¯é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯é¢˜è®¢é˜…å’Œæ™ºèƒ½è¿½è¸ª",showAdaptButton:!1,actions:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:_e,disabled:p,children:[e.jsx(G,{className:"h-4 w-4 mr-2 "+(p?"animate-spin":"")}),"åˆ·æ–°"]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(S,{value:A,onValueChange:e=>q(e),className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs(C,{className:"grid w-full grid-cols-3 max-w-md",children:[e.jsxs($,{value:"hot",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(M,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"å…¨ç½‘çƒ­ç‚¹"}),e.jsx("span",{className:"sm:hidden",children:"çƒ­ç‚¹"})]}),e.jsxs($,{value:"subscriptions",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"è¯é¢˜è®¢é˜…"}),e.jsx("span",{className:"sm:hidden",children:"è®¢é˜…"})]}),e.jsxs($,{value:"notifications",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"é€šçŸ¥ä¸­å¿ƒ"}),e.jsx("span",{className:"sm:hidden",children:"é€šçŸ¥"})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>F(!0),className:"text-xs sm:text-sm",children:[e.jsx(Q,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"æ·»åŠ è®¢é˜…"}),e.jsx("span",{className:"sm:hidden",children:"æ·»åŠ "})]})})]}),e.jsxs(z,{value:"hot",children:[b&&e.jsx(a,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(D,{className:"w-4 h-4 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"èŽ·å–çƒ­ç‚¹æ•°æ®å¤±è´¥"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:b}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"å¯èƒ½åŽŸå› ï¼šç½‘ç»œè¿žæŽ¥å¼‚å¸¸ã€APIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€æˆ–é˜²ç«å¢™é™åˆ¶"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:_e,disabled:p,className:"border-red-300 text-red-700 hover:bg-red-100",children:[e.jsx(G,{className:"h-4 w-4 mr-2 "+(p?"animate-spin":"")}),"é‡è¯•"]})]})})}),e.jsxs(a,{className:"mb-6",children:[e.jsxs(l,{children:[e.jsx(i,{className:"text-lg",children:"é€‰æ‹©å¹³å°"}),e.jsx(n,{children:"æŸ¥çœ‹ä¸åŒå¹³å°çš„çƒ­é—¨è¯é¢˜"})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{variant:"all"===j?"default":"outline",size:"sm",onClick:()=>u("all"),children:"å…¨éƒ¨å¹³å°"}),De.map(s=>e.jsxs(c,{variant:j===s?"default":"outline",size:"sm",onClick:()=>u(s),children:[Ee(s),he(s)]},s))]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"æ€»è¯é¢˜æ•°"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ue.total})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-4 h-4 text-blue-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"å¹³å°æ•°é‡"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ue.platforms})]}),e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-green-600"})})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"æ›´æ–°æ—¶é—´"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:(new Date).toLocaleTimeString("zh-CN")})]}),e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-4 h-4 text-purple-600"})})]})})})]}),f?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"åŠ è½½ä¸­..."})]}):e.jsx("div",{className:"grid gap-4",children:Pe.map((s,t)=>e.jsx(a,{className:"hover:shadow-md transition-shadow",children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),e.jsx(N,{variant:"outline",className:"text-xs",children:s.platform}),s.hot&&e.jsxs(N,{variant:"destructive",className:"text-xs",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"çƒ­"]})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.desc}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["çƒ­åº¦: ",s.hot]}),e.jsxs("span",{children:["å¹³å°: ",s.platform||"æœªçŸ¥"]}),e.jsxs("span",{children:["åºå·: ",s.index||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(X,{className:"w-4 h-4"})})]})]})})},t))})]}),e.jsxs(z,{value:"subscriptions",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ke.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"æ€»è®¢é˜…æ•°"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:ke.active}),e.jsx("p",{className:"text-sm text-gray-600",children:"æ´»è·ƒè®¢é˜…"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ke.notificationEnabled}),e.jsx("p",{className:"text-sm text-gray-600",children:"é€šçŸ¥å¼€å¯"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.values(E).flat().length}),e.jsx("p",{className:"text-sm text-gray-600",children:"ç›‘æŽ§ç»“æžœ"})]})})})]}),0===I.length?e.jsx(a,{children:e.jsxs(r,{className:"text-center py-12",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— è¯é¢˜è®¢é˜…"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"åˆ›å»ºè¯é¢˜è®¢é˜…ï¼Œå®žæ—¶ç›‘æŽ§æ„Ÿå…´è¶£çš„å†…å®¹"}),e.jsxs(c,{onClick:()=>F(!0),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"æ·»åŠ ç¬¬ä¸€ä¸ªè®¢é˜…"]})]})}):e.jsx("div",{className:"space-y-4",children:I.map(s=>e.jsxs(a,{className:"hover:shadow-md transition-shadow",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["å…³é”®è¯: ",s.keyword]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{checked:s.isActive,onCheckedChange:e=>{return t=s.id,Ne(t,e),void Le();var t}}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const s=await fe(e);L(t=>({...t,[e.id]:s})),m({title:"ç›‘æŽ§å®Œæˆ",description:`å‘çŽ° ${s.length} æ¡ç›¸å…³å†…å®¹`})}catch(s){m({title:"ç›‘æŽ§å¤±è´¥",description:"è¯·é‡è¯•",variant:"destructive"})}})(s),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"æ£€æŸ¥"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{V(s),Te(s.keyword)},children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"è¶‹åŠ¿"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>(e=>{const s=I.find(s=>s.id===e);s&&confirm(`ç¡®å®šè¦åˆ é™¤è¯é¢˜è®¢é˜…"${s.name}"å—ï¼Ÿ`)&&(ue(e),Le(),m({title:"åˆ é™¤æˆåŠŸ",description:`è¯é¢˜è®¢é˜…"${s.name}"å·²åˆ é™¤`}))})(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(T,{className:"w-4 h-4"})})]})]})}),e.jsxs(r,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"çŠ¶æ€:"}),e.jsx(N,{variant:s.isActive?"default":"secondary",className:"ml-2",children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"ç›‘æŽ§ä¸­"]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"å·²æš‚åœ"]})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"æ£€æŸ¥é—´éš”:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.checkInterval,"åˆ†é’Ÿ"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"æœç´¢æº:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.sources.length,"ä¸ª"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"é€šçŸ¥:"}),e.jsx(N,{variant:s.notificationEnabled?"default":"secondary",className:"ml-2",children:s.notificationEnabled?"å¼€å¯":"å…³é—­"})]})]}),E[s.id]&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["æœ€æ–°ç›‘æŽ§ç»“æžœ (",E[s.id].length," æ¡)"]}),e.jsx("div",{className:"space-y-2",children:E[s.id].slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.platform," â€¢ çƒ­åº¦: ",s.heat]})]}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(R,{className:"w-3 h-3"})})]},s.id))})]})]})]},s.id))}),J&&Ce[J.keyword]&&e.jsx("div",{className:"mt-6",children:e.jsx(pe,{keyword:J.keyword,trends:Ce[J.keyword],loading:He[J.keyword],onRefresh:()=>Te(J.keyword)})})]}),e.jsx(z,{value:"notifications",children:e.jsx(ze,{})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{He as H,Ce as a,Se as b,$e as n};
