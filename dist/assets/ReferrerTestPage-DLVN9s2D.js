import{j as s}from"./ui-core-BEqq4eN-.js";import{r as e,u as a}from"./router-CDHmMMQ-.js";import{u as t,f as l,l as i,v as r,w as c,m as n,B as x,C as d,a as m,b as o,d as j,e as h,x as p,y as g,z as u}from"./pages-home-BoZVsFKO.js";import{B as v,I as N}from"./pages-adapt-CiCh1UVu.js";import{aK as f,aJ as y,x as w,aU as b,n as I,a5 as D,U as k,E as C}from"./utils-U1evx29U.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-sEIB86A8.js";import"./components-layout-LKVIGOSA.js";import"./components-auth-valB4v-J.js";import"./pages-brand-CflPsgWd.js";import"./api-services-Ciw7WX26.js";import"./pages-content-extractor-DtDkVS7Z.js";function S(){const[S,z]=e.useState(null),[R,U]=e.useState(null),[B,E]=e.useState(!1),[F,L]=e.useState(""),[$,J]=e.useState({}),[K,O]=e.useState(""),[T,_]=e.useState(null),[q,A]=e.useState(null),{toast:G}=t(),H=a(),{getReferrer:M,clearReferrer:P}=l();e.useEffect(()=>{Q()},[]);const Q=()=>{z(i()),U(r()),E(c()),L(n());const s={};for(let e=0;e<localStorage.length;e++){const a=localStorage.key(e);a&&(s[a]=localStorage.getItem(a)||"")}J(s)},V=s=>{navigator.clipboard.writeText(s),G({title:"已复制到剪贴板",description:s})},W=s=>`${window.location.origin}/register?ref=${s}`;return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(x,{variant:"ghost",onClick:()=>H("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(f,{className:"h-4 w-4"}),"返回首页"]}),s.jsxs(d,{className:"shadow-xl",children:[s.jsxs(m,{children:[s.jsxs(o,{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(y,{className:"h-6 w-6 text-green-600"}),"推荐人ID测试页面"]}),s.jsx(j,{children:"测试推荐人ID的识别、存储和处理功能"})]}),s.jsxs(h,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(d,{className:"border-2 border-blue-200",children:[s.jsx(m,{className:"pb-3",children:s.jsx(o,{className:"text-lg",children:"当前状态"})}),s.jsxs(h,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"URL包含推荐人参数:"}),s.jsx(v,{variant:B?"default":"secondary",children:B?"是":"否"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"localStorage推荐人ID:"}),s.jsx("div",{className:"flex items-center gap-2",children:S?s.jsxs(s.Fragment,{children:[s.jsx(v,{variant:"default",className:"text-xs",children:S}),s.jsx(x,{size:"sm",variant:"ghost",onClick:()=>V(S),children:s.jsx(w,{className:"h-3 w-3"})})]}):s.jsx(v,{variant:"secondary",children:"无"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"URL推荐人ID:"}),s.jsx("div",{className:"flex items-center gap-2",children:R?s.jsxs(s.Fragment,{children:[s.jsx(v,{variant:"default",className:"text-xs",children:R}),s.jsx(x,{size:"sm",variant:"ghost",onClick:()=>V(R),children:s.jsx(w,{className:"h-3 w-3"})})]}):s.jsx(v,{variant:"secondary",children:"无"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"临时用户ID:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(v,{variant:"outline",className:"text-xs font-mono",children:F}),s.jsx(x,{size:"sm",variant:"ghost",onClick:()=>V(F),children:s.jsx(w,{className:"h-3 w-3"})})]})]})]})]}),s.jsxs(d,{className:"mt-6",children:[s.jsxs(m,{children:[s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5"}),"功能测试"]}),s.jsx(j,{children:"测试推荐人ID验证和处理状态功能"})]}),s.jsxs(h,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"测试推荐人ID"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(N,{value:K,onChange:s=>O(s.target.value),placeholder:"输入要测试的推荐人ID",className:"flex-1"}),s.jsx(x,{onClick:()=>{if(!K.trim())return void G({title:"请输入测试ID",variant:"destructive"});const s=p(K.trim());_(s),G({title:s?"验证通过":"验证失败",description:s?"推荐人ID格式正确":"推荐人ID格式不正确",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"验证格式"}),s.jsx(x,{onClick:()=>{if(!K.trim())return void G({title:"请输入测试ID",variant:"destructive"});const s=g(K.trim());A(s),G({title:s?"已处理":"未处理",description:s?"该推荐奖励已处理过":"该推荐奖励未处理",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"检查状态"}),s.jsx(x,{onClick:()=>{K.trim()?(u(K.trim()),Q(),G({title:"标记成功",description:"推荐奖励已标记为已处理"})):G({title:"请输入测试ID",variant:"destructive"})},size:"sm",variant:"outline",children:"标记已处理"})]})]}),null!==T&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"验证结果:"}),s.jsx(v,{variant:T?"default":"destructive",children:T?"有效":"无效"})]}),null!==q&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"处理状态:"}),s.jsx(v,{variant:q?"default":"secondary",children:q?"已处理":"未处理"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[s.jsxs(x,{onClick:Q,variant:"outline",size:"sm",children:[s.jsx(I,{className:"h-4 w-4 mr-2"}),"刷新数据"]}),s.jsxs(x,{onClick:()=>{P(),Q(),G({title:"已清除",description:"推荐人ID已清除"})},variant:"outline",size:"sm",children:[s.jsx(D,{className:"h-4 w-4 mr-2"}),"清除推荐人ID"]}),s.jsxs(x,{onClick:()=>{localStorage.clear(),Q(),G({title:"已清除",description:"所有本地数据已清除"})},variant:"destructive",size:"sm",children:[s.jsx(D,{className:"h-4 w-4 mr-2"}),"清除所有数据"]})]})]}),s.jsxs(d,{className:"border-2 border-purple-200",children:[s.jsxs(m,{children:[s.jsx(o,{className:"text-lg",children:"测试链接生成"}),s.jsx(j,{children:"生成包含推荐人ID的测试链接"})]}),s.jsx(h,{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["user123","invite456","test789"].map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(k,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{className:"text-sm font-medium",children:["推荐人ID: ",e]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(x,{size:"sm",variant:"outline",onClick:()=>{const s=W(e);V(s)},className:"flex-1",children:[s.jsx(w,{className:"h-3 w-3 mr-1"}),"复制链接"]}),s.jsx(x,{size:"sm",variant:"outline",onClick:()=>{const s=W(e);window.open(s,"_blank")},children:s.jsx(C,{className:"h-3 w-3"})})]})]},e))})})]}),s.jsxs(d,{className:"border-2 border-orange-200",children:[s.jsxs(m,{children:[s.jsx(o,{className:"text-lg",children:"localStorage数据"}),s.jsx(j,{children:"查看localStorage中存储的所有数据"})]}),s.jsx(h,{children:s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries($).map(([e,a])=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm font-mono text-gray-700",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 max-w-40 truncate",children:a}),s.jsx(x,{size:"sm",variant:"ghost",onClick:()=>V(a),children:s.jsx(w,{className:"h-3 w-3"})})]})]},e))})})]})]})]})]})})}export{S as default};
