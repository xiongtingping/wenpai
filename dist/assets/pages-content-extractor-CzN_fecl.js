var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{j as t}from"./ui-core-CAB0i5kI.js";import{u as a,r}from"./router-CDHmMMQ-.js";import{u as n,B as i,C as c,a as o,b as l,d as m,e as d}from"./pages-home-BHK5UR8N.js";import{L as u,I as h,T as x}from"./pages-adapt-DD3tr1QX.js";import{P as p}from"./components-layout-Bl-K3hGA.js";import{ag as g,Z as j,G as y,ac as w,d as v,ab as f,ad as N,z as T,a5 as b,C,ap as S,aq as k,x as A,ar as I,s as E,a9 as P,a7 as O,f as $}from"./utils-yUmPvHGu.js";const z="/.netlify/functions/api",D={model:"gpt-4o",temperature:.7,maxTokens:1e3,timeout:3e4,maxRetries:3,retryDelay:1e3},R=new class{constructor(){s(this,"apiKey"),s(this,"useDevProxy"),this.apiKey="sk-your-actual-openai-api-key-here",this.useDevProxy=!1}async checkStatus(e="openai"){try{const s=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,action:"status"})}),t=await s.json();return{success:s.ok,available:t.available||!1,provider:e,message:t.message,error:t.error}}catch(s){return{success:!1,available:!1,provider:e,error:s instanceof Error?s.message:"ç½‘ç»œè¿æ¥å¤±è´¥"}}}async generateText(e){const{messages:s,model:t=D.model,temperature:a=D.temperature,maxTokens:r=D.maxTokens,provider:n="openai"}=e;for(let c=1;c<=D.maxRetries;c++)try{return this.useDevProxy&&"openai"===n?await this.callOpenAIDevProxy({messages:s,model:t,temperature:a,maxTokens:r}):await this.callNetlifyProxy({provider:n,action:"generate",messages:s,model:t,temperature:a,maxTokens:r})}catch(i){if(c===D.maxRetries)return{success:!1,error:i instanceof Error?i.message:"æ–‡æœ¬ç”Ÿæˆå¤±è´¥",message:`ç»è¿‡${D.maxRetries}æ¬¡å°è¯•åä»ç„¶å¤±è´¥`};await new Promise(e=>setTimeout(e,D.retryDelay*c))}return{success:!1,error:"æ–‡æœ¬ç”Ÿæˆå¤±è´¥"}}async generateImage(e){const{prompt:s,n:t=1,size:a="512x512",response_format:r="url",reference_image:n}=e;for(let c=1;c<=D.maxRetries;c++)try{const e=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"openai",action:"generate-image",prompt:s,n:t,size:a,response_format:r,reference_image:n})});if(!e.ok)throw new Error(`HTTPé”™è¯¯: ${e.status}`);return await e.json()}catch(i){if(c===D.maxRetries)return{success:!1,error:i instanceof Error?i.message:"å›¾åƒç”Ÿæˆå¤±è´¥",message:`ç»è¿‡${D.maxRetries}æ¬¡å°è¯•åä»ç„¶å¤±è´¥`};await new Promise(e=>setTimeout(e,D.retryDelay*c))}return{success:!1,error:"å›¾åƒç”Ÿæˆå¤±è´¥"}}async generateImagesBatch(e,s={}){const t=[];for(const r of e)try{const a=await this.generateImage({...s,prompt:r});t.push(a),e.length>1&&await new Promise(e=>setTimeout(e,1e3))}catch(a){t.push({success:!1,error:a instanceof Error?a.message:"æ‰¹é‡å›¾åƒç”Ÿæˆå¤±è´¥"})}return t}async callOpenAIDevProxy(e){var s;const{messages:t,model:a="gpt-4o",temperature:r=.7,maxTokens:n=1e3}=e;try{if(!this.apiKey)throw new Error("OpenAI API Keyæœªé…ç½®ï¼Œè¯·åœ¨.env.localä¸­è®¾ç½®VITE_OPENAI_API_KEY");const e=new AbortController,i=setTimeout(()=>e.abort(),D.timeout),c=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:a,messages:t,temperature:r,max_tokens:n,stream:!1}),signal:e.signal});if(clearTimeout(i),!c.ok){const e=await c.json().catch(()=>({}));throw new Error(`OpenAI APIè°ƒç”¨å¤±è´¥: ${(null==(s=e.error)?void 0:s.message)||`HTTP ${c.status}`}`)}return{success:!0,data:{data:await c.json()},provider:"openai",timestamp:(new Date).toISOString()}}catch(i){if(i instanceof Error&&"AbortError"===i.name)throw new Error("OpenAI APIè¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•");throw new Error(`OpenAI APIè¿æ¥å¤±è´¥: ${i instanceof Error?i.message:"æœªçŸ¥é”™è¯¯"}`)}}async callNetlifyProxy(e){try{const s=new AbortController,t=setTimeout(()=>s.abort(),D.timeout),a=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:s.signal});if(clearTimeout(t),!a.ok)throw new Error(`HTTPé”™è¯¯: ${a.status}`);return{success:!0,data:await a.json(),provider:e.provider,timestamp:(new Date).toISOString()}}catch(s){if(s instanceof Error&&"AbortError"===s.name)throw new Error("Netlifyä»£ç†è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥");throw new Error(`Netlifyä»£ç†è°ƒç”¨å¤±è´¥: ${s instanceof Error?s.message:"æœªçŸ¥é”™è¯¯"}`)}}async adaptContent(e,s,t){try{const t=[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†…å®¹é€‚é…ä¸“å®¶ï¼Œèƒ½å¤Ÿå°†å†…å®¹é€‚é…åˆ°ä¸åŒçš„å¹³å°ã€‚"},{role:"user",content:`è¯·å°†ä»¥ä¸‹å†…å®¹é€‚é…åˆ°å¹³å°ï¼š${s.join(", ")}\n\nå†…å®¹ï¼š${e}`}];return await this.generateText({messages:t,provider:"openai"})}catch(a){return{success:!1,error:a instanceof Error?a.message:"å†…å®¹é€‚é…å¤±è´¥"}}}async summarizeContent(e){try{const s=[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†…å®¹æ€»ç»“ä¸“å®¶ï¼Œèƒ½å¤Ÿç”Ÿæˆç®€æ´æœ‰ç”¨çš„æ€»ç»“ã€‚"},{role:"user",content:`è¯·ä¸ºä»¥ä¸‹å†…å®¹ç”ŸæˆAIæ™ºèƒ½æ€»ç»“ï¼š\n\n${e}`}];return await this.generateText({messages:s,provider:"openai"})}catch(s){return{success:!1,error:s instanceof Error?s.message:"å†…å®¹æ€»ç»“å¤±è´¥"}}}async analyzeBrandContent(e){try{const s=[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å“ç‰Œåˆ†æä¸“å®¶ï¼Œèƒ½å¤Ÿåˆ†æå“ç‰Œè°ƒæ€§ã€å…³é”®è¯å’Œå»ºè®®ã€‚è¯·ä»¥JSONæ ¼å¼è¿”å›ç»“æœã€‚"},{role:"user",content:`è¯·åˆ†æä»¥ä¸‹å“ç‰Œå†…å®¹ï¼š\n\n${e}\n\nè¯·è¿”å›JSONæ ¼å¼çš„åˆ†æç»“æœï¼ŒåŒ…å«ï¼škeywordsï¼ˆå…³é”®è¯æ•°ç»„ï¼‰ã€toneï¼ˆè¯­æ°”åˆ†æï¼‰ã€suggestionsï¼ˆå»ºè®®æ•°ç»„ï¼‰`}];return await this.generateText({messages:s,provider:"openai"})}catch(s){return{success:!1,error:s instanceof Error?s.message:"å“ç‰Œå†…å®¹åˆ†æå¤±è´¥"}}}async checkContentTone(e,s){try{const t=[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å“ç‰Œè°ƒæ€§æ£€æŸ¥ä¸“å®¶ï¼Œèƒ½å¤Ÿè¯„ä¼°å†…å®¹æ˜¯å¦ç¬¦åˆå“ç‰Œè°ƒæ€§ã€‚"},{role:"user",content:`è¯·æ£€æŸ¥ä»¥ä¸‹å†…å®¹æ˜¯å¦ç¬¦åˆå“ç‰Œè°ƒæ€§ï¼š\n\nå†…å®¹ï¼š${e}\n\nå“ç‰Œæ¡£æ¡ˆï¼š${JSON.stringify(s)}`}];return await this.generateText({messages:t,provider:"openai"})}catch(t){return{success:!1,error:t instanceof Error?t.message:"å†…å®¹è°ƒæ€§æ£€æŸ¥å¤±è´¥"}}}async recommendEmojis(e){try{const s=[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„Emojiæ¨èä¸“å®¶ï¼Œèƒ½å¤Ÿä¸ºå†…å®¹æ¨èåˆé€‚çš„Emojiã€‚"},{role:"user",content:`è¯·ä¸ºä»¥ä¸‹å†…å®¹æ¨èåˆé€‚çš„Emojiï¼š\n\n${e}`}];return await this.generateText({messages:s,provider:"openai"})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Emojiæ¨èå¤±è´¥"}}}async generateCreativeContent(e,s="text"){try{const t=[{role:"system",content:"video"===s?"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è§†é¢‘è„šæœ¬åˆ›ä½œä¸“å®¶ï¼Œèƒ½å¤Ÿç”Ÿæˆç»“æ„åŒ–çš„è§†é¢‘è„šæœ¬ã€‚":"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åˆ›æ„å†…å®¹åˆ›ä½œä¸“å®¶ï¼Œèƒ½å¤Ÿç”Ÿæˆæœ‰åˆ›æ„çš„æ–‡æœ¬å†…å®¹ã€‚"},{role:"user",content:e}];return await this.generateText({messages:t,provider:"openai"})}catch(t){return{success:!1,error:t instanceof Error?t.message:"åˆ›æ„å†…å®¹ç”Ÿæˆå¤±è´¥"}}}},L=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=a(),{toast:s}=n(),z=r.useRef(null),[D,L]=r.useState("url"),[_,U]=r.useState(""),[F,J]=r.useState(""),[K,B]=r.useState(null),[H,q]=r.useState([]),[G,M]=r.useState(!1),[V,Y]=r.useState(!1),[Z,Q]=r.useState(!0),W=e=>{const s=e.includes("xiaohongshu")?"å°çº¢ä¹¦":e.includes("zhihu")?"çŸ¥ä¹":e.includes("weibo")?"å¾®åš":"ç½‘é¡µ";return`# ${s}å†…å®¹æå–\n\n## ä¸»è¦å†…å®¹\n\nè¿™æ˜¯ä» ${e} æå–çš„å†…å®¹ã€‚\n\n### æ ¸å¿ƒè§‚ç‚¹\n- **è§‚ç‚¹ä¸€**ï¼šè¯¦ç»†é˜è¿°äº†é‡è¦æ¦‚å¿µå’ŒåŸºæœ¬åŸç†ï¼Œä¸ºè¯»è€…æä¾›äº†æ·±å…¥çš„ç†è§£\n- **è§‚ç‚¹äºŒ**ï¼šåˆ†æäº†å½“å‰å¸‚åœºçŠ¶å†µå’Œå‘å±•è¶‹åŠ¿ï¼Œå…·æœ‰å¾ˆå¼ºçš„å‰ç»æ€§\n- **è§‚ç‚¹ä¸‰**ï¼šæä¾›äº†å®ç”¨çš„æ–¹æ³•å’Œå»ºè®®ï¼Œå¯ä»¥ç›´æ¥åº”ç”¨åˆ°å®é™…å·¥ä½œä¸­\n\n### å…³é”®ä¿¡æ¯\n- å‘å¸ƒæ—¶é—´ï¼š2024å¹´2æœˆ15æ—¥\n- ä½œè€…ï¼š${s}ç”¨æˆ·\n- é˜…è¯»é‡ï¼š10.2ä¸‡\n- ç‚¹èµæ•°ï¼š3.5åƒ\n\n### æ·±åº¦åˆ†æ\n\n#### å®ç”¨ä»·å€¼\nè¿™ç¯‡å†…å®¹å…·æœ‰å¾ˆå¼ºçš„å®ç”¨ä»·å€¼ï¼Œä¸ä»…æä¾›äº†ç†è®ºåŸºç¡€ï¼Œè¿˜ç»“åˆäº†å®é™…æ¡ˆä¾‹è¿›è¡Œåˆ†æã€‚å¯¹äºç›¸å…³é¢†åŸŸçš„ä»ä¸šè€…æ¥è¯´ï¼Œæ˜¯ä¸€ä»½å¾ˆå¥½çš„å‚è€ƒèµ„æ–™ã€‚\n\n#### åº”ç”¨å»ºè®®\n1. **ç›´æ¥åº”ç”¨**ï¼šå¯ä»¥å°†å…¶ä¸­çš„æ–¹æ³•è®ºç›´æ¥åº”ç”¨åˆ°å®é™…å·¥ä½œä¸­\n2. **æ·±å…¥ç ”ç©¶**ï¼šå»ºè®®è¿›ä¸€æ­¥æ·±å…¥ç ”ç©¶ç›¸å…³é¢†åŸŸçš„æœ€æ–°å‘å±•\n3. **æŒç»­å…³æ³¨**ï¼šå…³æ³¨ä½œè€…çš„åç»­æ›´æ–°å’Œç›¸å…³è®¨è®º\n\n### ç›¸å…³é“¾æ¥\n- [åŸæ–‡é“¾æ¥](${e})\n- [ä½œè€…ä¸»é¡µ](${e}/author)\n- [ç›¸å…³è¯é¢˜](${e}/topics)\n\n---\n\n*æå–æ—¶é—´ï¼š${(new Date).toLocaleString("zh-CN")}*\n*æ•°æ®æ¥æºï¼š${e}*`},X=e=>`## ğŸ¤– AIæ™ºèƒ½æ€»ç»“\n\n### ğŸ“‹ å†…å®¹æ¦‚è¦\nè¿™æ˜¯ä¸€ä»½é«˜è´¨é‡çš„å†…å®¹ï¼ŒåŒ…å«äº†ä¸°å¯Œçš„ä¿¡æ¯å’Œæ·±å…¥çš„åˆ†æã€‚å†…å®¹ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘ä¸¥è°¨ï¼Œå…·æœ‰å¾ˆå¼ºçš„å‚è€ƒä»·å€¼ã€‚\n\n### ğŸ” æ ¸å¿ƒè§‚ç‚¹\n- **ä¸»è¦è®ºç‚¹**ï¼šå†…å®¹å›´ç»•æ ¸å¿ƒä¸»é¢˜å±•å¼€ï¼Œæä¾›äº†å…¨é¢çš„åˆ†æè§†è§’\n- **å…³é”®ä¿¡æ¯**ï¼šåŒ…å«äº†é‡è¦çš„æ•°æ®å’Œäº‹å®ä¾æ®ï¼Œæ”¯æ’‘äº†ä¸»è¦è§‚ç‚¹\n- **å®ç”¨å»ºè®®**ï¼šæä¾›äº†å…·ä½“å¯è¡Œçš„æ–¹æ³•å’Œå»ºè®®ï¼Œå…·æœ‰å¾ˆå¼ºçš„æ“ä½œæ€§\n\n### ğŸ’¡ å…³é”®è¦ç‚¹\n1. **ç†è®ºåŸºç¡€æ‰å®**ï¼šå†…å®¹å…·å¤‡å®Œæ•´çš„ç†è®ºä½“ç³»æ”¯æ’‘\n2. **å®è·µæŒ‡å¯¼æ€§å¼º**ï¼šæä¾›äº†å…·ä½“çš„æ“ä½œæŒ‡å—å’Œå®æ–½æ­¥éª¤\n3. **æ¡ˆä¾‹åˆ†æè¯¦ç»†**ï¼šé€šè¿‡å®é™…æ¡ˆä¾‹åŠ æ·±ç†è§£å’Œåº”ç”¨\n4. **å‰ç»æ€§å¼º**ï¼šå¯¹æœªæ¥å‘å±•è¶‹åŠ¿æœ‰æ·±å…¥çš„åˆ†æå’Œé¢„æµ‹\n\n### ğŸ“ˆ åº”ç”¨ä»·å€¼\n- **å†³ç­–å‚è€ƒ**ï¼šå¯ä½œä¸ºç›¸å…³å†³ç­–çš„é‡è¦å‚è€ƒä¾æ®\n- **å­¦ä¹ èµ„æ–™**ï¼šé€‚åˆä½œä¸ºå­¦ä¹ å’Œç ”ç©¶çš„å‚è€ƒææ–™\n- **å®è·µæŒ‡å¯¼**ï¼šæä¾›äº†å…·ä½“çš„å®è·µæŒ‡å¯¼å’Œæ“ä½œå»ºè®®\n\n### ğŸ¯ æ¨èæŒ‡æ•°\n**â­â­â­â­â­ äº”æ˜Ÿæ¨è**\n\nè¿™ä»½å†…å®¹è´¨é‡ä¼˜ç§€ï¼Œä¿¡æ¯ä¸°å¯Œï¼Œå…·æœ‰å¾ˆé«˜çš„å‚è€ƒä»·å€¼ã€‚å»ºè®®æ”¶è—å¹¶æ·±å…¥å­¦ä¹ åº”ç”¨ã€‚\n\n---\n\n*AIæ€»ç»“ç”Ÿæˆæ—¶é—´ï¼š${(new Date).toLocaleString("zh-CN")}*`,ee=async e=>{try{await navigator.clipboard.writeText(e),s({title:"å¤åˆ¶æˆåŠŸ",description:"å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch{s({title:"å¤åˆ¶å¤±è´¥",description:"è¯·æ‰‹åŠ¨å¤åˆ¶",variant:"destructive"})}},se=()=>{switch(D){case"url":(async()=>{var e,t,a;if(!_.trim())return void s({title:"è¯·è¾“å…¥URL",description:"è¯·æä¾›æœ‰æ•ˆçš„ç½‘é¡µåœ°å€",variant:"destructive"});M(!0);const r=Date.now().toString();try{await new Promise(e=>setTimeout(e,2e3));const i={id:r,source:_,sourceType:"url",title:`ç½‘é¡µå†…å®¹ï¼š${_.includes("xiaohongshu")?"å°çº¢ä¹¦":_.includes("zhihu")?"çŸ¥ä¹":"ç½‘é¡µ"}å†…å®¹æå–`,content:W(_),metadata:{description:"ä»ç½‘é¡µä¸­æå–çš„ç»“æ„åŒ–å†…å®¹",keywords:["å†…å®¹æå–","ç½‘é¡µè§£æ","æ•°æ®æŠ“å–"],author:"ç½‘ç«™ç¼–è¾‘",date:"2024-02-15",wordCount:350,charCount:1200},extractedAt:(new Date).toISOString(),status:"success"};if(Z)try{await new Promise(e=>setTimeout(e,500)),i.content;const s=await R.summarizeContent(i.content),r=s.data,n=null==r?void 0:r.data;s.success&&(null==(a=null==(t=null==(e=null==n?void 0:n.choices)?void 0:e[0])?void 0:t.message)?void 0:a.content)?i.summary=n.choices[0].message.content:i.summary=X(i.content)}catch(n){i.summary=X(i.content)}q(e=>[i,...e]),U(""),s({title:"å†…å®¹æå–æˆåŠŸ",description:Z?"å·²æˆåŠŸæå–ç½‘é¡µå†…å®¹å¹¶ç”ŸæˆAIæ€»ç»“":"å·²æˆåŠŸæå–ç½‘é¡µå†…å®¹"})}catch{const e={id:r,source:_,sourceType:"url",title:"æå–å¤±è´¥",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"æå–å¤±è´¥ï¼Œè¯·æ£€æŸ¥URLæ˜¯å¦æœ‰æ•ˆ"};q(s=>[e,...s]),s({title:"æå–å¤±è´¥",description:"è¯·æ£€æŸ¥URLæ˜¯å¦æœ‰æ•ˆæˆ–ç¨åé‡è¯•",variant:"destructive"})}finally{M(!1)}})();break;case"file":(async()=>{if(!K)return void s({title:"è¯·é€‰æ‹©æ–‡ä»¶",description:"è¯·ä¸Šä¼ è¦æå–å†…å®¹çš„æ–‡ä»¶",variant:"destructive"});M(!0);const e=Date.now().toString();try{await new Promise(e=>setTimeout(e,1500));const a=await(t=K,new Promise((e,s)=>{const a=new FileReader;a.onload=t=>{var a;const r=null==(a=t.target)?void 0:a.result;r?e(r):s(new Error("æ— æ³•è¯»å–æ–‡ä»¶å†…å®¹"))},a.onerror=()=>s(new Error("æ–‡ä»¶è¯»å–å¤±è´¥")),a.readAsText(t)})),r={id:e,source:K.name,sourceType:"file",title:`æ–‡ä»¶å†…å®¹ï¼š${K.name}`,content:a,metadata:{description:`ä»æ–‡ä»¶ ${K.name} æå–çš„å†…å®¹`,wordCount:a.split(/\s+/).length,charCount:a.length},extractedAt:(new Date).toISOString(),status:"success"};Z&&(await new Promise(e=>setTimeout(e,1500)),r.summary=X(r.content)),q(e=>[r,...e]),B(null),s({title:"æ–‡ä»¶æå–æˆåŠŸ",description:Z?`å·²æˆåŠŸæå– ${K.name} çš„å†…å®¹å¹¶ç”ŸæˆAIæ€»ç»“`:`å·²æˆåŠŸæå– ${K.name} çš„å†…å®¹`})}catch{const t={id:e,source:K.name,sourceType:"file",title:"æå–å¤±è´¥",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼"};q(e=>[t,...e]),s({title:"æ–‡ä»¶æå–å¤±è´¥",description:"è¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼æˆ–ç¨åé‡è¯•",variant:"destructive"})}finally{M(!1)}var t})();break;case"text":(async()=>{if(!F.trim())return void s({title:"è¯·è¾“å…¥æ–‡æœ¬",description:"è¯·æä¾›è¦å¤„ç†çš„æ–‡æœ¬å†…å®¹",variant:"destructive"});M(!0);const e=Date.now().toString();try{await new Promise(e=>setTimeout(e,1e3));const t={id:e,source:"æ‰‹åŠ¨è¾“å…¥",sourceType:"text",title:"æ–‡æœ¬å†…å®¹å¤„ç†",content:F,metadata:{description:"ä»æ‰‹åŠ¨è¾“å…¥çš„æ–‡æœ¬ä¸­æå–çš„å†…å®¹",wordCount:F.split(/\s+/).length,charCount:F.length},extractedAt:(new Date).toISOString(),status:"success"};Z&&(await new Promise(e=>setTimeout(e,1500)),t.summary=X(t.content)),q(e=>[t,...e]),J(""),s({title:"æ–‡æœ¬å¤„ç†æˆåŠŸ",description:Z?"å·²æˆåŠŸå¤„ç†æ–‡æœ¬å†…å®¹å¹¶ç”ŸæˆAIæ€»ç»“":"å·²æˆåŠŸå¤„ç†æ–‡æœ¬å†…å®¹"})}catch{const t={id:e,source:"æ‰‹åŠ¨è¾“å…¥",sourceType:"text",title:"å¤„ç†å¤±è´¥",content:"",extractedAt:(new Date).toISOString(),status:"error",error:"æ–‡æœ¬å¤„ç†å¤±è´¥"};q(e=>[t,...e]),s({title:"æ–‡æœ¬å¤„ç†å¤±è´¥",description:"è¯·ç¨åé‡è¯•",variant:"destructive"})}finally{M(!1)}})()}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(p,{title:"å†…å®¹æå–ä¸AIæ€»ç»“",description:"ä»ç½‘é¡µã€æ–‡ä»¶æˆ–æ–‡æœ¬ä¸­æå–å†…å®¹ï¼Œå¹¶ç”ŸæˆAIæ™ºèƒ½æ€»ç»“",actions:t.jsx("div",{className:"flex gap-2",children:t.jsxs(i,{variant:"outline",onClick:()=>e("/bookmarks"),children:[t.jsx(g,{className:"w-4 h-4 mr-2"}),"æˆ‘çš„èµ„æ–™åº“"]})})}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1 space-y-6",children:t.jsxs(c,{children:[t.jsxs(o,{children:[t.jsxs(l,{className:"flex items-center gap-2",children:[t.jsx(j,{className:"w-5 h-5"}),"å†…å®¹æå–"]}),t.jsx(m,{children:"é€‰æ‹©å†…å®¹æ¥æºï¼Œå¼€å§‹æå–å’Œæ€»ç»“"})]}),t.jsxs(d,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(u,{className:"text-sm font-medium",children:"æå–æ–¹å¼"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[t.jsxs(i,{variant:"url"===D?"default":"outline",size:"sm",onClick:()=>L("url"),className:"flex items-center gap-2",children:[t.jsx(y,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"ç½‘é¡µURL"}),t.jsx("span",{className:"sm:hidden",children:"URL"})]}),t.jsxs(i,{variant:"file"===D?"default":"outline",size:"sm",onClick:()=>L("file"),className:"flex items-center gap-2",children:[t.jsx(w,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"æ–‡ä»¶ä¸Šä¼ "}),t.jsx("span",{className:"sm:hidden",children:"æ–‡ä»¶"})]}),t.jsxs(i,{variant:"text"===D?"default":"outline",size:"sm",onClick:()=>L("text"),className:"flex items-center gap-2",children:[t.jsx(v,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"æ–‡æœ¬è¾“å…¥"}),t.jsx("span",{className:"sm:hidden",children:"æ–‡æœ¬"})]})]})]}),"url"===D&&t.jsxs("div",{children:[t.jsx(u,{children:"ç½‘é¡µURL"}),t.jsx(h,{placeholder:"https://example.com",value:_,onChange:e=>U(e.target.value),className:"mt-2"})]}),"file"===D&&t.jsxs("div",{children:[t.jsx(u,{children:"é€‰æ‹©æ–‡ä»¶"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("input",{type:"file",ref:z,onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&B(t)},accept:".txt,.md,.doc,.docx,.pdf",className:"hidden"}),t.jsxs(i,{variant:"outline",onClick:()=>{var e;return null==(e=z.current)?void 0:e.click()},className:"w-full",children:[t.jsx(f,{className:"w-4 h-4 mr-2"}),K?K.name:"é€‰æ‹©æ–‡ä»¶"]})]})]}),"text"===D&&t.jsxs("div",{children:[t.jsx(u,{children:"æ–‡æœ¬å†…å®¹"}),t.jsx(x,{placeholder:"è¾“å…¥è¦æå–å’Œæ€»ç»“çš„æ–‡æœ¬å†…å®¹...",value:F,onChange:e=>J(e.target.value),rows:6,className:"mt-2"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"auto-summary",checked:Z,onChange:e=>Q(e.target.checked),className:"rounded"}),t.jsx("label",{htmlFor:"auto-summary",className:"text-sm font-medium",children:"è‡ªåŠ¨ç”ŸæˆAIæ€»ç»“"})]}),t.jsx(i,{onClick:se,disabled:G,className:"w-full",children:G?t.jsxs(t.Fragment,{children:[t.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}),"æå–ä¸­..."]}):t.jsxs(t.Fragment,{children:[t.jsx(T,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æå–"]})})]})]})}),t.jsx("div",{className:"lg:col-span-2 space-y-6",children:H.length>0?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["æå–ç»“æœ (",H.length,")"]}),t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>q([]),children:[t.jsx(b,{className:"w-4 h-4 mr-2"}),"æ¸…ç©ºæ‰€æœ‰"]})]}),H.map(e=>{var a,r;return t.jsxs(c,{className:"border",children:[t.jsxs(o,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:["success"===e.status&&t.jsx(C,{className:"w-5 h-5 text-green-500"}),"error"===e.status&&t.jsx(S,{className:"w-5 h-5 text-red-500"}),t.jsx(l,{className:"text-lg",children:e.title})]}),t.jsxs("div",{className:"flex gap-2",children:["error"===e.status&&t.jsxs(i,{variant:"outline",size:"sm",onClick:se,children:[t.jsx(k,{className:"w-4 h-4 mr-1"}),"é‡è¯•"]}),"success"===e.status&&t.jsxs(t.Fragment,{children:[t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>ee(e.content),children:[t.jsx(A,{className:"w-4 h-4 mr-1"}),"å¤åˆ¶"]}),t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>((e,t)=>{const a=new Blob([e],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),URL.revokeObjectURL(r),document.body.removeChild(n),s({title:"ä¸‹è½½æˆåŠŸ",description:"å†…å®¹å·²ä¸‹è½½åˆ°æœ¬åœ°"})})(e.content,`${e.title}.md`),children:[t.jsx(I,{className:"w-4 h-4 mr-1"}),"ä¸‹è½½"]}),t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),s({title:"ä¿å­˜æˆåŠŸ",description:"å†…å®¹å·²ä¿å­˜åˆ°æˆ‘çš„èµ„æ–™åº“"})}catch{s({title:"ä¿å­˜å¤±è´¥",description:"è¯·ç¨åé‡è¯•",variant:"destructive"})}})(),children:[t.jsx(E,{className:"w-4 h-4 mr-1"}),"ä¿å­˜"]})]}),t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,q(e=>e.filter(e=>e.id!==t)),void s({title:"å·²åˆ é™¤",description:"æå–ç»“æœå·²åˆ é™¤"});var t},children:[t.jsx(b,{className:"w-4 h-4 mr-1"}),"åˆ é™¤"]})]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:["url"===e.sourceType&&t.jsx(P,{className:"w-4 h-4"}),"file"===e.sourceType&&t.jsx(w,{className:"w-4 h-4"}),"text"===e.sourceType&&t.jsx(v,{className:"w-4 h-4"}),e.source]}),t.jsx("span",{children:(r=e.extractedAt,new Date(r).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(null==(a=e.metadata)?void 0:a.wordCount)&&t.jsxs("span",{children:["å­—æ•°: ",e.metadata.wordCount]})]})]}),t.jsx(d,{children:"success"===e.status?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"æå–å†…å®¹"}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:t.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:e.content})})]}),e.summary?t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(O,{className:"w-4 h-4 text-purple-500"}),t.jsx("h4",{className:"font-medium",children:"AIæ™ºèƒ½æ€»ç»“"}),t.jsxs(i,{variant:"outline",size:"sm",onClick:()=>ee(e.summary),children:[t.jsx(A,{className:"w-4 h-4 mr-1"}),"å¤åˆ¶æ€»ç»“"]})]}),t.jsx("div",{className:"bg-purple-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:t.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:e.summary})})]}):t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(i,{variant:"outline",onClick:()=>(async e=>{var t,a,r;const n=H.find(s=>s.id===e);if(n&&"success"===n.status){Y(!0);try{const i=await R.summarizeContent(n.content);let c;const o=i.data,l=null==o?void 0:o.data;c=i.success&&(null==(r=null==(a=null==(t=null==l?void 0:l.choices)?void 0:t[0])?void 0:a.message)?void 0:r.content)?l.choices[0].message.content:X(n.content),q(s=>s.map(s=>s.id===e?{...s,summary:c}:s)),s({title:"AIæ€»ç»“å®Œæˆ",description:"å·²ä¸ºæ‚¨ç”Ÿæˆæ™ºèƒ½å†…å®¹æ€»ç»“"})}catch(i){const t=X(n.content);q(s=>s.map(s=>s.id===e?{...s,summary:t}:s)),s({title:"æ€»ç»“å¤±è´¥",description:"è¯·ç¨åé‡è¯•AIæ€»ç»“åŠŸèƒ½",variant:"destructive"})}finally{Y(!1)}}})(e.id),disabled:V,children:V?t.jsxs(t.Fragment,{children:[t.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}),"ç”Ÿæˆä¸­..."]}):t.jsxs(t.Fragment,{children:[t.jsx($,{className:"w-4 h-4 mr-2"}),"ç”ŸæˆAIæ€»ç»“"]})})})]}):t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded",children:e.error||"æå–å¤±è´¥"})})]},e.id)})]}):t.jsx(c,{className:"border-dashed",children:t.jsxs(d,{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[t.jsx(j,{className:"w-12 h-12 mb-4"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"ç­‰å¾…å†…å®¹æå–"}),t.jsxs("p",{className:"text-sm text-center",children:["è¯·åœ¨å·¦ä¾§é€‰æ‹©å†…å®¹æ¥æºå¹¶å¼€å§‹æå–",t.jsx("br",{}),"æ”¯æŒç½‘é¡µURLã€æ–‡ä»¶ä¸Šä¼ å’Œæ–‡æœ¬è¾“å…¥"]})]})})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{L as C,R as a};
