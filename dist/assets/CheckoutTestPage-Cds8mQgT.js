import{j as e}from"./ui-core-BoM6Gtru.js";import{r as s,R as a}from"./router-CDHmMMQ-.js";import{u as i,B as r,j as c,C as l,a as t,b as d,e as n}from"./pages-home-DBDkeS6P.js";import{B as m,L as o,I as x,i as p,j,k as h,l as u}from"./pages-adapt-D91yLQsN.js";import{S as f}from"./pages-hot-topics-BG8BbuZW.js";import{A as N}from"./AlipayQRCode-CPAgSh_0.js";import{r as v}from"./creemClientService-DNWMJNoV.js";import{ad as g,aO as b,E as y}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B0lu_Zdo.js";import"./components-layout-GdDGmkJW.js";import"./pages-brand-Y2nduvKa.js";import"./api-services-sC6AUvc1.js";import"./pages-content-extractor-UQ_Zkhev.js";import"./components-auth-BdwTK_yH.js";import"./browser-C5-Pn058.js";function I({priceId:a,customerEmail:c,children:l="立即支付",variant:t="default",size:d="default",className:n="",disabled:m=!1,showIcon:o=!0}){const[x,p]=s.useState(!1),{toast:j}=i();return e.jsx(r,{onClick:async()=>{if(a){p(!0);try{await v(a,c),j({title:"正在跳转",description:"正在跳转到支付页面..."})}catch(e){j({title:"支付失败",description:e.message||"无法跳转到支付页面，请稍后重试",variant:"destructive"})}finally{p(!1)}}else j({title:"错误",description:"产品ID不能为空",variant:"destructive"})},variant:t,size:d,className:n,disabled:m||x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}),"处理中..."]}):e.jsxs(e.Fragment,{children:[o&&e.jsx(b,{className:"w-4 h-4 mr-2"}),l,o&&e.jsx(y,{className:"w-4 h-4 ml-2"})]})})}function C(){const[i,v]=s.useState("prod_3nJOuQeVStqkp6JaDcrKHf"),[g,b]=s.useState(""),[y,C]=s.useState(!1),{user:w}=c();return a.useEffect(()=>{(null==w?void 0:w.email)&&!g&&b(w.email)},[w,g]),e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:e.jsxs(l,{children:[e.jsxs(t,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:["💳 完整支付流程测试",e.jsx(m,{variant:"secondary",children:"Creem支付"})]}),e.jsx("p",{className:"text-muted-foreground",children:"测试Creem支付的完整流程，包括二维码支付和跳转支付"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"选择产品"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"专业版月付",priceId:"prod_3nJOuQeVStqkp6JaDcrKHf",price:"¥29.00",description:"适合个人用户使用"},{name:"专业版年付",priceId:"prod_5qBlDTLpD3h9gvOZFd4Rgu",price:"¥299.00",description:"年付享受更多优惠"},{name:"高级版月付",priceId:"prod_4HYBfvrcbXYnbxjlswMj28",price:"¥59.00",description:"适合团队使用"},{name:"高级版年付",priceId:"prod_6OfIoVnRg2pXsuYceVKOYk",price:"¥599.00",description:"年付享受更多优惠"}].map(s=>e.jsx(l,{className:"p-4 cursor-pointer transition-colors "+(i===s.priceId?"border-blue-500 bg-blue-50":"hover:border-gray-300"),onClick:()=>{return e=s.priceId,v(e),void C(!1);var e},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsx(m,{variant:"outline",className:"text-lg px-3 py-1",children:s.price})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s.priceId}),i===s.priceId&&e.jsx(m,{variant:"default",className:"mt-1",children:"已选择"})]})]})},s.priceId))})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"customerEmail",children:"客户邮箱"}),e.jsx(x,{id:"customerEmail",type:"email",placeholder:"customer@example.com",value:g,onChange:e=>b(e.target.value),className:"mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"用于支付通知和订单确认"})]}),e.jsxs(p,{defaultValue:"redirect",className:"w-full",children:[e.jsxs(j,{className:"grid w-full grid-cols-2",children:[e.jsx(h,{value:"redirect",children:"跳转支付"}),e.jsx(h,{value:"qrcode",children:"二维码支付"})]}),e.jsx(u,{value:"redirect",className:"space-y-4",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"跳转到Creem支付页面"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"点击支付按钮后，将跳转到Creem的支付页面完成支付"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"当前配置"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"价格ID:"})," ",i]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"客户邮箱:"})," ",g||"未设置"]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx(I,{priceId:i,customerEmail:g||void 0,className:"flex-1",size:"lg",children:"跳转到支付页面"})})]})})}),e.jsx(u,{value:"qrcode",className:"space-y-4",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"扫码支付"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"生成支付宝二维码，使用手机扫码完成支付"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(r,{onClick:()=>{C(!0)},className:"flex-1",size:"lg",children:"生成支付二维码"}),e.jsx(r,{variant:"outline",onClick:()=>C(!1),children:"隐藏二维码"})]}),y&&i&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h5",{className:"font-medium mb-4",children:"支付二维码"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{priceId:i,customerEmail:g||void 0,title:"使用支付宝扫码付款",showPrice:!0,onRefresh:()=>{}})})]})]})})})]}),e.jsx(f,{}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"支付流程说明"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-medium",children:"1."}),e.jsx("span",{children:"选择产品和支付方式"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-medium",children:"2."}),e.jsx("span",{children:"填写客户邮箱（用于支付通知）"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-medium",children:"3."}),e.jsx("span",{children:"点击支付按钮或扫描二维码"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-medium",children:"4."}),e.jsx("span",{children:"在Creem支付页面完成支付"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-medium",children:"5."}),e.jsx("span",{children:"支付成功后自动返回并激活服务"})]})]})]})]})]})})}export{C as default};
