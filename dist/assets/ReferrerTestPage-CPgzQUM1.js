import{c as s,aC as e,r as a,u as t,p as l,q as i,ba as r,bb as c,bc as n,bd as x,j as d,B as m,C as o,e as h,f as j,h as g,i as N,g as v,R as p,ay as u,be as f,bf as y,bg as b}from"./index-BuR5xlXm.js";import{I as w}from"./input-DXKrnJBr.js";import{A as k}from"./arrow-left-Cx2hbPOV.js";import{G as I}from"./gift-Dt6sROyp.js";import{C}from"./copy-DgfiJkCV.js";import{T as D}from"./trash-2-BeMaJGgV.js";import{E as S}from"./external-link-Bk1fLpvj.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=s("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);function R(){const{showLogin:s}=e(),[R,L]=a.useState(null),[M,E]=a.useState(null),[F,T]=a.useState(!1),[U,$]=a.useState(""),[q,A]=a.useState({}),[B,G]=a.useState(""),[O,V]=a.useState(null),[W,Y]=a.useState(null),{toast:_}=t(),H=l(),{getReferrer:J,clearReferrer:K}=i();a.useEffect(()=>{P()},[]);const P=()=>{L(r()),E(c()),T(n()),$(x());const s={};for(let e=0;e<localStorage.length;e++){const a=localStorage.key(e);a&&(s[a]=localStorage.getItem(a)||"")}A(s)},Q=s=>{navigator.clipboard.writeText(s),_({title:"已复制到剪贴板",description:s})},X=s=>`${window.location.origin}/register?ref=${s}`;return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs(m,{variant:"ghost",onClick:()=>H("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[d.jsx(k,{className:"h-4 w-4"}),"返回首页"]}),d.jsxs(o,{className:"shadow-xl",children:[d.jsxs(h,{children:[d.jsxs(j,{className:"text-2xl font-bold flex items-center gap-2",children:[d.jsx(I,{className:"h-6 w-6 text-green-600"}),"推荐人ID测试页面"]}),d.jsx(g,{children:"测试推荐人ID的识别、存储和处理功能"})]}),d.jsxs(N,{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs(o,{className:"border-2 border-blue-200",children:[d.jsx(h,{className:"pb-3",children:d.jsx(j,{className:"text-lg",children:"当前状态"})}),d.jsxs(N,{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"URL包含推荐人参数:"}),d.jsx(v,{variant:F?"default":"secondary",children:F?"是":"否"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"localStorage推荐人ID:"}),d.jsx("div",{className:"flex items-center gap-2",children:R?d.jsxs(d.Fragment,{children:[d.jsx(v,{variant:"default",className:"text-xs",children:R}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>Q(R),children:d.jsx(C,{className:"h-3 w-3"})})]}):d.jsx(v,{variant:"secondary",children:"无"})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"URL推荐人ID:"}),d.jsx("div",{className:"flex items-center gap-2",children:M?d.jsxs(d.Fragment,{children:[d.jsx(v,{variant:"default",className:"text-xs",children:M}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>Q(M),children:d.jsx(C,{className:"h-3 w-3"})})]}):d.jsx(v,{variant:"secondary",children:"无"})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"临时用户ID:"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(v,{variant:"outline",className:"text-xs font-mono",children:U}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>Q(U),children:d.jsx(C,{className:"h-3 w-3"})})]})]})]})]}),d.jsxs(o,{className:"mt-6",children:[d.jsxs(h,{children:[d.jsxs(j,{className:"flex items-center gap-2",children:[d.jsx(z,{className:"h-5 w-5"}),"功能测试"]}),d.jsx(g,{children:"测试推荐人ID验证和处理状态功能"})]}),d.jsxs(N,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"测试推荐人ID"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(w,{value:B,onChange:s=>G(s.target.value),placeholder:"输入要测试的推荐人ID",className:"flex-1"}),d.jsx(m,{onClick:()=>{if(!B.trim())return void _({title:"请输入测试ID",variant:"destructive"});const s=f(B.trim());V(s),_({title:s?"验证通过":"验证失败",description:s?"推荐人ID格式正确":"推荐人ID格式不正确",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"验证格式"}),d.jsx(m,{onClick:()=>{if(!B.trim())return void _({title:"请输入测试ID",variant:"destructive"});const s=y(B.trim());Y(s),_({title:s?"已处理":"未处理",description:s?"该推荐奖励已处理过":"该推荐奖励未处理",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"检查状态"}),d.jsx(m,{onClick:()=>{B.trim()?(b(B.trim()),P(),_({title:"标记成功",description:"推荐奖励已标记为已处理"})):_({title:"请输入测试ID",variant:"destructive"})},size:"sm",variant:"outline",children:"标记已处理"})]})]}),null!==O&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"验证结果:"}),d.jsx(v,{variant:O?"default":"destructive",children:O?"有效":"无效"})]}),null!==W&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"处理状态:"}),d.jsx(v,{variant:W?"default":"secondary",children:W?"已处理":"未处理"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[d.jsxs(m,{onClick:P,variant:"outline",size:"sm",children:[d.jsx(p,{className:"h-4 w-4 mr-2"}),"刷新数据"]}),d.jsxs(m,{onClick:()=>{K(),P(),_({title:"已清除",description:"推荐人ID已清除"})},variant:"outline",size:"sm",children:[d.jsx(D,{className:"h-4 w-4 mr-2"}),"清除推荐人ID"]}),d.jsxs(m,{onClick:()=>{localStorage.clear(),P(),_({title:"已清除",description:"所有本地数据已清除"})},variant:"destructive",size:"sm",children:[d.jsx(D,{className:"h-4 w-4 mr-2"}),"清除所有数据"]})]})]}),d.jsxs(o,{className:"border-2 border-purple-200",children:[d.jsxs(h,{children:[d.jsx(j,{className:"text-lg",children:"测试链接生成"}),d.jsx(g,{children:"生成包含推荐人ID的测试链接"})]}),d.jsx(N,{className:"space-y-4",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["user123","invite456","test789"].map(s=>d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(u,{className:"h-4 w-4 text-gray-500"}),d.jsxs("span",{className:"text-sm font-medium",children:["推荐人ID: ",s]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const e=X(s);Q(e)},className:"flex-1",children:[d.jsx(C,{className:"h-3 w-3 mr-1"}),"复制链接"]}),d.jsx(m,{size:"sm",variant:"outline",onClick:()=>{const e=X(s);window.open(e,"_blank")},children:d.jsx(S,{className:"h-3 w-3"})})]})]},s))})})]}),d.jsxs(o,{className:"border-2 border-orange-200",children:[d.jsxs(h,{children:[d.jsx(j,{className:"text-lg",children:"localStorage数据"}),d.jsx(g,{children:"查看localStorage中存储的所有数据"})]}),d.jsx(N,{children:d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries(q).map(([s,e])=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[d.jsx("span",{className:"text-sm font-mono text-gray-700",children:s}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-xs text-gray-500 max-w-40 truncate",children:e}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>Q(e),children:d.jsx(C,{className:"h-3 w-3"})})]})]},s))})})]})]})]})]})})}export{R as default};
