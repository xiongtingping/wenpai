import{c as e,u as s,r as t,j as a,S as r,T as i,a as l,b as n,d as c,B as o,R as d,C as m,e as h,f as x,g as u,h as p,i as j,k as g,l as f,L as b,m as N,n as v,A as w,o as y,p as I,q as k,s as S,M as C,V as A,t as z,v as O,w as T,G as E,Z as P,x as $,P as U,F as D,y as B,z as J,D as F,E as M,H as L,I as _,J as H,K,N as V,O as q,Q as W,U as G,W as R,X,Y as Z}from"./index-CYvVoP-H.js";import{S as Y}from"./slider-ROG4cFKn.js";import{C as Q}from"./checkbox-CEF6-z30.js";import ee from"./aiService-fGAwix_K.js";import{D as se,a as te,b as ae,c as re,d as ie}from"./dialog-XgOp7gnt.js";import{I as le}from"./input-C7T9kmHO.js";import{I as ne}from"./info-x65m4toA.js";import{E as ce}from"./external-link-Bguz_PIV.js";import{T as oe}from"./triangle-alert-CmYwpf4d.js";import{L as de}from"./lock-DYBiRvcQ.js";import{S as me}from"./save-DT5yk6UW.js";import{S as he}from"./square-pen-DqPou0km.js";import{H as xe}from"./heart-DnfFMmPh.js";import{C as ue}from"./copy-D3g8yJt7.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=e("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),je=e("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),ge={wechat:{name:"å¾®ä¿¡",description:"å¾®ä¿¡å…¬ä¼—å·ã€æœ‹å‹åœˆ",maxLength:2e3,hashtagCount:0,tone:"ä¸“ä¸šã€æƒå¨",features:["å›¾æ–‡å¹¶èŒ‚","æ·±åº¦å†…å®¹","ä¸“ä¸šæœ¯è¯­"]},weibo:{name:"å¾®åš",description:"æ–°æµªå¾®åš",maxLength:140,hashtagCount:3,tone:"ç®€æ´ã€çƒ­ç‚¹",features:["è¯é¢˜æ ‡ç­¾","@ç”¨æˆ·","è½¬å‘äº’åŠ¨"]},xiaohongshu:{name:"å°çº¢ä¹¦",description:"å°çº¢ä¹¦ç¬”è®°",maxLength:1e3,hashtagCount:20,tone:"ç§è‰ã€åˆ†äº«",features:["ä¸ªäººä½“éªŒ","å›¾ç‰‡å±•ç¤º","æ ‡ç­¾ä¸°å¯Œ"]},douyin:{name:"æŠ–éŸ³",description:"æŠ–éŸ³çŸ­è§†é¢‘",maxLength:300,hashtagCount:5,tone:"è½»æ¾ã€æœ‰è¶£",features:["è§†é¢‘è„šæœ¬","éŸ³ä¹é…åˆ","äº’åŠ¨å¼•å¯¼"]},zhihu:{name:"çŸ¥ä¹",description:"çŸ¥ä¹é—®ç­”",maxLength:5e3,hashtagCount:0,tone:"ä¸“ä¸šã€æ·±åº¦",features:["è¯¦ç»†è§£ç­”","ä¸“ä¸šæœ¯è¯­","å¼•ç”¨æ¥æº"]},bilibili:{name:"Bç«™",description:"Bç«™è§†é¢‘",maxLength:500,hashtagCount:10,tone:"å¹´è½»ã€æ´»åŠ›",features:["å¼¹å¹•äº’åŠ¨","è§†é¢‘æ ‡é¢˜","åˆ†åŒºæ ‡ç­¾"]}};let fe="gpt-4o-mini";const be={"gpt-4o":{id:"gpt-4o",name:"OpenAI GPT-4o",provider:"OpenAI",description:"æœ€æ–°æœ€å¼ºå¤§çš„AIæ¨¡å‹ï¼Œæ€§èƒ½å“è¶Šï¼Œåˆ›æ„ä¸°å¯Œï¼Œæ”¯æŒå¤šæ¨¡æ€è¾“å…¥è¾“å‡º",features:["è¶…å¼ºç†è§£èƒ½åŠ›","åˆ›æ„å†…å®¹ç”Ÿæˆ","å¤šæ¨¡æ€æ”¯æŒ","ä¸Šä¸‹æ–‡è®°å¿†ä¼˜ç§€","ä»£ç ç”Ÿæˆèƒ½åŠ›å¼º"],maxTokens:128e3,pricing:{input:.0025,output:.01}},"gpt-4o-mini":{id:"gpt-4o-mini",name:"OpenAI GPT-4o mini",provider:"OpenAI",description:"GPT-4oçš„è½»é‡ç‰ˆæœ¬ï¼Œæ€§ä»·æ¯”æé«˜ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨",features:["æ€§ä»·æ¯”æé«˜","å“åº”é€Ÿåº¦å¿«","ç†è§£èƒ½åŠ›ä¼˜ç§€","é€‚åˆæ—¥å¸¸å¯¹è¯","æˆæœ¬æ§åˆ¶å‹å¥½"],maxTokens:128e3,pricing:{input:15e-5,output:6e-4}},"deepseek-v3":{id:"deepseek-v3",name:"DeepSeek V3",provider:"DeepSeek",description:"ä¸­æ–‡ä¼˜åŒ–æ¨¡å‹ï¼Œç†è§£åŠ›å¼ºï¼Œé€‚åˆæœ¬åœ°åŒ–å†…å®¹å’Œä¸­æ–‡åˆ›ä½œ",features:["ä¸­æ–‡ç†è§£ä¼˜ç§€","æœ¬åœ°åŒ–å†…å®¹åˆ›ä½œ","æ–‡åŒ–è¯­å¢ƒç†è§£","ä¸­æ–‡è¡¨è¾¾è‡ªç„¶","é€‚åˆä¸­æ–‡ç”¨æˆ·"],maxTokens:128e3,pricing:{input:14e-5,output:56e-5}}},Ne={trial:["gpt-4o-mini","deepseek-v3"],pro:["gpt-4o","gpt-4o-mini","deepseek-v3"],premium:["gpt-4o","gpt-4o-mini","deepseek-v3"]};function ve(e){return be[e]}const we={weibo:{platformId:"weibo",platformName:"å¾®åš",authUrl:"https://open.weibo.com/oauth2/authorize",apiBaseUrl:"https://api.weibo.com/2",isAuthorized:!1},zhihu:{platformId:"zhihu",platformName:"çŸ¥ä¹",authUrl:"https://www.zhihu.com/oauth/authorize",apiBaseUrl:"https://api.zhihu.com",isAuthorized:!1},xiaohongshu:{platformId:"xiaohongshu",platformName:"å°çº¢ä¹¦",authUrl:"https://oauth.xiaohongshu.com/oauth/authorize",apiBaseUrl:"https://api.xiaohongshu.com",isAuthorized:!1},bilibili:{platformId:"bilibili",platformName:"Bç«™",authUrl:"https://passport.bilibili.com/login",apiBaseUrl:"https://api.bilibili.com",isAuthorized:!1},douyin:{platformId:"douyin",platformName:"æŠ–éŸ³",authUrl:"https://open.douyin.com/oauth/authorize",apiBaseUrl:"https://open.douyin.com",isAuthorized:!1},twitter:{platformId:"twitter",platformName:"Twitter",authUrl:"https://twitter.com/i/oauth2/authorize",apiBaseUrl:"https://api.twitter.com/2",isAuthorized:!1},linkedin:{platformId:"linkedin",platformName:"LinkedIn",authUrl:"https://www.linkedin.com/oauth/v2/authorization",apiBaseUrl:"https://api.linkedin.com/v2",isAuthorized:!1}};function ye(){return Object.values(we)}function Ie(e){const s=`platform_api_config_${e}`,t=localStorage.getItem(s);if(!t)return null;try{const s=JSON.parse(t);return{...we[e],...s}}catch{return null}}async function ke(e,s){const t=Ie(e);if(!t)return{success:!1,error:"å¹³å°é…ç½®ä¸å­˜åœ¨"};switch(e){case"weibo":return await async function(e,s){var t;try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®Œæˆå¾®åšæˆæƒ"};const a=await fetch(`${s.apiBaseUrl}/statuses/update.json`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${s.accessToken}`},body:new URLSearchParams({status:e.text,source:"wenpai-app"})}),r=await a.json();return r.id?{success:!0,publishId:r.id,publishUrl:`https://weibo.com/${null==(t=r.user)?void 0:t.id}/${r.id}`,response:r}:{success:!1,error:r.error||"å‘å¸ƒå¤±è´¥"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);case"zhihu":return await async function(e,s){try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®ŒæˆçŸ¥ä¹æˆæƒ"};const t=await fetch(`${s.apiBaseUrl}/drafts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`},body:JSON.stringify({title:e.title||"æ–°æ–‡ç« ",content:e.text,topics:e.hashtags||[]})}),a=await t.json();if(a.id){const e=await fetch(`${s.apiBaseUrl}/drafts/${a.id}/publish`,{method:"POST",headers:{Authorization:`Bearer ${s.accessToken}`}}),t=await e.json();if(t.url)return{success:!0,publishId:a.id,publishUrl:t.url,response:t}}return{success:!1,error:"å‘å¸ƒå¤±è´¥"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);case"twitter":return await async function(e,s){var t,a,r;try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®ŒæˆTwitteræˆæƒ"};const i=await fetch(`${s.apiBaseUrl}/tweets`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`},body:JSON.stringify({text:e.text})}),l=await i.json();return(null==(t=l.data)?void 0:t.id)?{success:!0,publishId:l.data.id,publishUrl:`https://twitter.com/user/status/${l.data.id}`,response:l}:{success:!1,error:(null==(r=null==(a=l.errors)?void 0:a[0])?void 0:r.message)||"å‘å¸ƒå¤±è´¥"}}catch(i){return{success:!1,error:i instanceof Error?i.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);default:return{success:!1,error:"æš‚ä¸æ”¯æŒè¯¥å¹³å°çš„APIç›´å‘"}}}function Se(e){const s=Ie(e);return(null==s?void 0:s.isAuthorized)||!1}function Ce({open:e,onOpenChange:v}){const{toast:w}=s(),[y,I]=t.useState([]),[k,S]=t.useState(null),[C,A]=t.useState(!1),[z,O]=t.useState(""),[T,E]=t.useState(""),[P,$]=t.useState("");t.useEffect(()=>{if(e){const e=ye().map(e=>Ie(e.platformId)||e);I(e)}},[e]);const U=e=>e.isAuthorized?a.jsx(N,{className:"w-4 h-4 text-green-500"}):e.accessToken?a.jsx(oe,{className:"w-4 h-4 text-yellow-500"}):a.jsx(f,{className:"w-4 h-4 text-gray-400"}),D=e=>e.isAuthorized?"å·²æˆæƒ":e.accessToken?"å¾…éªŒè¯":"æœªé…ç½®",B=e=>e.isAuthorized?"bg-green-100 text-green-800 border-green-200":e.accessToken?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-600 border-gray-200";return a.jsx(se,{open:e,onOpenChange:v,children:a.jsxs(te,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[a.jsx(ae,{children:a.jsxs(re,{className:"flex items-center gap-2",children:[a.jsx(r,{className:"w-5 h-5"}),"å¹³å°APIé…ç½®ç®¡ç†"]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(i,{defaultValue:"platforms",className:"h-full",children:[a.jsxs(l,{className:"grid w-full grid-cols-2",children:[a.jsx(n,{value:"platforms",children:"å¹³å°é…ç½®"}),a.jsx(n,{value:"help",children:"ä½¿ç”¨è¯´æ˜"})]}),a.jsx(c,{value:"platforms",className:"h-full overflow-auto",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"é…ç½®å¹³å°APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œï¼Œæ”¯æŒå†…å®¹ç›´å‘åŠŸèƒ½"})]}),a.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{const e=ye().map(e=>Ie(e.platformId)||e);I(e),w({title:"çŠ¶æ€å·²åˆ·æ–°",description:"å¹³å°é…ç½®çŠ¶æ€å·²æ›´æ–°"})},children:[a.jsx(d,{className:"w-4 h-4 mr-1"}),"åˆ·æ–°çŠ¶æ€"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(e=>a.jsxs(m,{className:"relative",children:[a.jsxs(h,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(x,{className:"text-lg",children:e.platformName}),a.jsxs("div",{className:"flex items-center gap-2",children:[U(e),a.jsx(u,{variant:"outline",className:B(e),children:D(e)})]})]}),a.jsxs(p,{children:["å¹³å°ID: ",e.platformId]})]}),a.jsxs(j,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(pe,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:["APIå¯†é’¥: ",e.apiKey?"å·²é…ç½®":"æœªé…ç½®"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(g,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:["è®¿é—®ä»¤ç‰Œ: ",e.accessToken?"å·²é…ç½®":"æœªé…ç½®"]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(o,{size:"sm",variant:"outline",onClick:()=>(e=>{S(e),O(e.apiKey||""),E(e.accessToken||""),$(e.userId||""),A(!0)})(e),children:[a.jsx(r,{className:"w-4 h-4 mr-1"}),"é…ç½®"]}),e.authUrl&&a.jsxs(o,{size:"sm",variant:"outline",onClick:()=>(e=>{const s=function(e){const s=function(e){return we[e]||null}(e);return(null==s?void 0:s.authUrl)||null}(e.platformId);s?(window.open(s,"_blank","noopener,noreferrer"),w({title:"æˆæƒé¡µé¢å·²æ‰“å¼€",description:"è¯·åœ¨æˆæƒé¡µé¢å®Œæˆæˆæƒï¼Œç„¶åè¿”å›é…ç½®è®¿é—®ä»¤ç‰Œ"})):w({title:"æˆæƒå¤±è´¥",description:"è¯¥å¹³å°æš‚ä¸æ”¯æŒæˆæƒ",variant:"destructive"})})(e),children:[a.jsx(ce,{className:"w-4 h-4 mr-1"}),"æˆæƒ"]}),(e.apiKey||e.accessToken)&&a.jsxs(o,{size:"sm",variant:"outline",onClick:()=>{return function(e){const s=`platform_api_config_${e}`;localStorage.removeItem(s)}(s=e.platformId),I(e=>e.map(e=>e.platformId===s?{...e,apiKey:void 0,accessToken:void 0,userId:void 0,isAuthorized:!1}:e)),void w({title:"é…ç½®å·²æ¸…é™¤",description:"å¹³å°APIé…ç½®å·²æ¸…é™¤"});var s},children:[a.jsx(f,{className:"w-4 h-4 mr-1"}),"æ¸…é™¤"]})]})]})]},e.platformId))})]})}),a.jsx(c,{value:"help",className:"h-full overflow-auto",children:a.jsx("div",{className:"space-y-6",children:a.jsxs(m,{children:[a.jsx(h,{children:a.jsx(x,{children:"APIç›´å‘åŠŸèƒ½è¯´æ˜"})}),a.jsxs(j,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"ä»€ä¹ˆæ˜¯APIç›´å‘ï¼Ÿ"}),a.jsx("p",{className:"text-sm text-gray-600",children:"APIç›´å‘åŠŸèƒ½å…è®¸æ‚¨é€šè¿‡å¹³å°çš„å®˜æ–¹APIç›´æ¥å‘å¸ƒå†…å®¹ï¼Œæ— éœ€æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚ é…ç½®å®Œæˆåï¼Œå¯ä»¥ä¸€é”®å°†AIç”Ÿæˆçš„å†…å®¹ç›´æ¥å‘å¸ƒåˆ°å„å¹³å°ã€‚"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"æ”¯æŒçš„å¹³å°"}),a.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"â€¢ å¾®åš - æ”¯æŒæ–‡æœ¬å‘å¸ƒ"}),a.jsx("li",{children:"â€¢ çŸ¥ä¹ - æ”¯æŒæ–‡ç« å‘å¸ƒ"}),a.jsx("li",{children:"â€¢ Twitter - æ”¯æŒæ¨æ–‡å‘å¸ƒ"}),a.jsx("li",{children:"â€¢ æ›´å¤šå¹³å°å¼€å‘ä¸­..."})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"é…ç½®æ­¥éª¤"}),a.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:'1. ç‚¹å‡»"æˆæƒ"æŒ‰é’®ï¼Œåœ¨å¹³å°å®˜ç½‘å®Œæˆæˆæƒ'}),a.jsx("li",{children:"2. è·å–APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œ"}),a.jsx("li",{children:"3. åœ¨é…ç½®é¡µé¢å¡«å…¥ç›¸å…³ä¿¡æ¯"}),a.jsx("li",{children:"4. ä¿å­˜é…ç½®ï¼Œå³å¯ä½¿ç”¨APIç›´å‘åŠŸèƒ½"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"å®‰å…¨è¯´æ˜"}),a.jsx("p",{className:"text-sm text-gray-600",children:"æ‰€æœ‰APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œä»…å­˜å‚¨åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†é’¥ä¿¡æ¯ï¼Œä¸è¦æ³„éœ²ç»™ä»–äººã€‚"})]})]})]})})})]})}),a.jsx(se,{open:C,onOpenChange:A,children:a.jsxs(te,{children:[a.jsx(ae,{children:a.jsxs(re,{children:["é…ç½® ",null==k?void 0:k.platformName," API"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(b,{htmlFor:"apiKey",children:"APIå¯†é’¥"}),a.jsx(le,{id:"apiKey",type:"password",placeholder:"è¯·è¾“å…¥APIå¯†é’¥",value:z,onChange:e=>O(e.target.value)})]}),a.jsxs("div",{children:[a.jsx(b,{htmlFor:"accessToken",children:"è®¿é—®ä»¤ç‰Œ"}),a.jsx(le,{id:"accessToken",type:"password",placeholder:"è¯·è¾“å…¥è®¿é—®ä»¤ç‰Œ",value:T,onChange:e=>E(e.target.value)})]}),a.jsxs("div",{children:[a.jsx(b,{htmlFor:"userId",children:"ç”¨æˆ·ID"}),a.jsx(le,{id:"userId",placeholder:"è¯·è¾“å…¥ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰",value:P,onChange:e=>$(e.target.value)})]})]}),a.jsxs(ie,{children:[a.jsx(o,{variant:"outline",onClick:()=>A(!1),children:"å–æ¶ˆ"}),a.jsx(o,{onClick:()=>{if(!k)return;const e={apiKey:z.trim()||void 0,accessToken:T.trim()||void 0,userId:P.trim()||void 0,isAuthorized:!!T.trim()};!function(e,s){const t=`platform_api_config_${e}`;localStorage.setItem(t,JSON.stringify(s))}(k.platformId,e),I(s=>s.map(s=>s.platformId===k.platformId?{...s,...e}:s)),A(!1),S(null),w({title:"é…ç½®å·²ä¿å­˜",description:`${k.platformName}çš„APIé…ç½®å·²æ›´æ–°`})},children:"ä¿å­˜é…ç½®"})]})]})})]})})}function Ae({isOpen:e,onClose:s,onUpgrade:t,remainingCount:r,userType:i}){const l="trial"===i?{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼šï¼Œç«‹å³å‡çº§äº«å—æ›´å¤šåŠŸèƒ½ï¼`,upgradeText:"ç«‹å³å‡çº§",upgradeDescription:"å‡çº§åäº«å—æ›´å¤šä½¿ç”¨æ¬¡æ•°å’Œé«˜çº§åŠŸèƒ½"}:"pro"===i?{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼šï¼Œå‡çº§åä¸é™æ¬¡ï¼`,upgradeText:"å‡çº§é«˜çº§ç‰ˆ",upgradeDescription:"å‡çº§åˆ°é«˜çº§ç‰ˆäº«å—ä¸é™é‡ä½¿ç”¨"}:{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼š`,upgradeText:"ç«‹å³å‡çº§",upgradeDescription:"å‡çº§åäº«å—æ›´å¤šä½¿ç”¨æ¬¡æ•°"};return a.jsx(se,{open:e,onOpenChange:s,children:a.jsxs(te,{className:"sm:max-w-md",children:[a.jsx(ae,{children:a.jsxs(re,{className:"flex items-center gap-2 text-amber-600",children:[a.jsx(oe,{className:"h-5 w-5"}),l.title]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-2",children:["ä»…å‰© ",r," æ¬¡"]}),a.jsx("p",{className:"text-gray-600",children:l.description})]}),"trial"===i&&a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-blue-200",children:[a.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[a.jsx(v,{className:"h-4 w-4"}),"å‡çº§ä¸“ä¸šç‰ˆç‰¹æƒ"]}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"â€¢ 30æ¬¡/æœˆAIå†…å®¹é€‚é…"}),a.jsx("li",{children:"â€¢ åˆ›æ„é­”æ–¹åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ é«˜çº§AIæ¨¡å‹"}),a.jsx("li",{children:"â€¢ ä½™é¢ç»§æ‰¿æœºåˆ¶"})]})]}),"pro"===i&&a.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200",children:[a.jsxs("h4",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[a.jsx(v,{className:"h-4 w-4"}),"å‡çº§é«˜çº§ç‰ˆç‰¹æƒ"]}),a.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[a.jsx("li",{children:"â€¢ ä¸é™é‡AIå†…å®¹é€‚é…"}),a.jsx("li",{children:"â€¢ å…¨ç½‘é›·è¾¾åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ å“ç‰Œåº“åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ æœ€æ–°AIæ¨¡å‹"})]})]})]}),a.jsxs(ie,{className:"flex gap-2",children:[a.jsx(o,{variant:"outline",onClick:s,children:"ç¨åå†è¯´"}),a.jsxs(o,{onClick:t,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[l.upgradeText,a.jsx(w,{className:"h-4 w-4 ml-2"})]})]})]})})}function ze({isOpen:e,onClose:s,onUpgrade:t,featureName:r,featureDescription:i}){return a.jsx(se,{open:e,onOpenChange:s,children:a.jsxs(te,{className:"sm:max-w-md",children:[a.jsx(ae,{children:a.jsxs(re,{className:"flex items-center gap-2 text-purple-600",children:[a.jsx(de,{className:"h-5 w-5"}),"é«˜çº§åŠŸèƒ½æƒé™"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl font-bold text-gray-800 mb-2",children:r}),a.jsx("p",{className:"text-gray-600",children:i})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border border-purple-200",children:[a.jsxs("h4",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[a.jsx(v,{className:"h-4 w-4"}),"å‡çº§é«˜çº§ç‰ˆè§£é”ç‰¹æƒ"]}),a.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[a.jsx("li",{children:"â€¢ ä¸é™é‡AIå†…å®¹é€‚é…"}),a.jsx("li",{children:"â€¢ åˆ›æ„é­”æ–¹åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ å…¨ç½‘é›·è¾¾åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ å“ç‰Œåº“åŠŸèƒ½"}),a.jsx("li",{children:"â€¢ æœ€æ–°AIæ¨¡å‹"}),a.jsx("li",{children:"â€¢ ä½™é¢ç»§æ‰¿æœºåˆ¶"})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-3 rounded-lg border border-amber-200",children:a.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[a.jsx(y,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"é™æ—¶ä¼˜æƒ ï¼šå¹´ä»˜çœ300å…ƒ"})]})})]}),a.jsxs(ie,{className:"flex gap-2",children:[a.jsx(o,{variant:"outline",onClick:s,children:"ç¨åå†è¯´"}),a.jsxs(o,{onClick:t,className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700",children:["ç«‹å³å‡çº§è§£é”",a.jsx(w,{className:"h-4 w-4 ml-2"})]})]})]})})}const Oe={weibo:"https://weibo.com/newpost",xiaohongshu:"https://creator.xiaohongshu.com/publish",zhihu:"https://zhuanlan.zhihu.com/write",bilibili:"https://member.bilibili.com/platform/upload/text",douyin:"https://creator.douyin.com/creator-micro/content/upload",toutiao:"https://mp.toutiao.com/profile_v4/graphic/publish",baijiahao:"https://baijiahao.baidu.com/builder/rc/edit",kuaishou:"https://cp.kuaishou.com/article/publish",wechat:"https://mp.weixin.qq.com/",facebook:"https://www.facebook.com/",twitter:"https://twitter.com/compose/tweet",linkedin:"https://www.linkedin.com/feed/",v2ex:"https://www.v2ex.com/new",github:"https://github.com/new",sspai:"https://sspai.com/write",juejin:"https://juejin.cn/editor/drafts/new",csdn:"https://mp.csdn.net/mp_blog/creation/editor",hellogithub:"https://hellogithub.com/",ithome:"https://my.ithome.com/#/write",ngabbs:"https://bbs.nga.cn/thread.php?fid=-7",weatheralarm:"https://www.nmc.cn/",earthquake:"https://www.ceic.ac.cn/",history:"https://baike.baidu.com/item/%E5%8E%86%E5%8F%B2%E4%B8%8A%E7%9A%84%E4%BB%8A%E5%A4%A9/42704"};function Te(e){const s=ge[e],t=(null==s?void 0:s.name)||e;switch(e){case"zhihu":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(C,{className:"h-4 w-4 text-blue-500 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"weibo":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(z,{className:"h-4 w-4 text-orange-500 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"xiaohongshu":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(S,{className:"h-4 w-4 text-rose-500 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"wechat":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(C,{className:"h-4 w-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"douyin":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(A,{className:"h-4 w-4 text-black mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"video":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(T,{className:"h-4 w-4 text-green-600 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"twitter":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(O,{className:"h-4 w-4 text-black mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});case"bilibili":return a.jsxs("div",{className:"flex items-center",children:[a.jsx(A,{className:"h-4 w-4 text-blue-400 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]});default:return a.jsxs("div",{className:"flex items-center",children:[a.jsx(C,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"text-xs",children:t})]})}}function Ee(e){switch(e){case"zhihu":return 200;case"douyin":case"video":default:return 50;case"xiaohongshu":case"bilibili":return 100;case"wechat":return 300;case"weibo":return 20;case"twitter":return 10}}function Pe(e){switch(e){case"zhihu":return 1e4;case"douyin":case"xiaohongshu":case"video":return 1e3;case"wechat":return 2e4;case"weibo":default:return 2e3;case"twitter":return 280;case"bilibili":return 5e3}}function $e({icon:e,title:s,description:t,checked:r,onChange:i}){return a.jsxs(m,{className:Z("relative border cursor-pointer transition-all duration-200 h-36 flex flex-col",r?"border-primary bg-primary/5 shadow-md ring-1 ring-primary/20":"bg-background hover:shadow-sm hover:border-gray-300"),onClick:()=>i(!r),children:[a.jsx(h,{className:"pb-1 pt-4 flex-shrink-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[a.jsx("div",{className:"flex-shrink-0",children:e}),a.jsx(x,{className:"text-sm font-semibold truncate leading-tight",children:s})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Q,{checked:r,onCheckedChange:i,className:"data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"})})]})}),a.jsx(j,{className:"pt-0 pb-4 flex-grow flex items-start",children:a.jsx(p,{className:"text-xs leading-relaxed overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",maxHeight:"4.8rem"},children:t})})]})}function Ue(){var e,g,f;const{toast:N}=s(),v=I(),[y,Z]=t.useState(""),[le,ne]=t.useState([]),[oe,de]=t.useState([]),[pe,we]=t.useState(!1),[ye,Ie]=t.useState(!1),[Ue,De]=t.useState({}),[Be,Je]=t.useState({}),[Fe,Me]=t.useState(!1),[Le,_e]=t.useState(null),[He,Ke]=t.useState({}),[Ve,qe]=t.useState(new Set),[We,Ge]=t.useState({charCountPreset:"auto",globalEmoji:!1,globalMd:!1}),[Re,Xe]=t.useState("openai"),[Ze,Ye]=t.useState(fe),[Qe,es]=t.useState("trial"),ss=(Ne[Qe]||[]).map(e=>be[e]).filter(Boolean),ts=Object.values(be),{usageRemaining:as,decrementUsage:rs}=k(),[is,ls]=t.useState(!1),[ns,cs]=t.useState(0),[os,ds]=t.useState(!1),[ms,hs]=t.useState({name:"",description:""}),xs=t.useMemo(()=>[{id:"xiaohongshu",name:"å°çº¢ä¹¦",description:"é€‚åˆç”Ÿæ´»æ–¹å¼ã€ç¾å¦†ã€æ—…è¡Œç­‰åˆ†äº«ï¼Œå¼ºè°ƒä¸ªäººä½“éªŒå’Œæƒ…æ„Ÿå…±é¸£",icon:a.jsx(S,{className:"h-4 w-4 text-rose-500"})},{id:"zhihu",name:"çŸ¥ä¹",description:"é€‚åˆä¸“ä¸šçŸ¥è¯†åˆ†äº«å’Œç†æ€§è®¨è®ºï¼Œå¼ºè°ƒé€»è¾‘å’Œè®ºè¯",icon:a.jsx(C,{className:"h-4 w-4 text-blue-500"})},{id:"douyin",name:"æŠ–éŸ³è„šæœ¬",description:"é€‚åˆçŸ­è§†é¢‘è„šæœ¬ï¼Œæ´»æ³¼æœ‰è¶£ï¼Œå¼ºè°ƒè§†å¬æ•ˆæœ",icon:a.jsx(A,{className:"h-4 w-4 text-black"})},{id:"weibo",name:"æ–°æµªå¾®åš",description:"ç®€çŸ­æœ‰åŠ›çš„è§‚ç‚¹è¡¨è¾¾ï¼Œé€‚åˆçƒ­ç‚¹è¯é¢˜è®¨è®º",icon:a.jsx(z,{className:"h-4 w-4 text-orange-500"})},{id:"wechat",name:"å…¬ä¼—å·",description:"æ·±åº¦å†…å®¹ï¼Œé€‚åˆæ•™ç¨‹ã€è§‚ç‚¹å’Œä¸“ä¸šåˆ†æ",icon:a.jsx(C,{className:"h-4 w-4 text-green-500"})},{id:"bilibili",name:"Bç«™",description:"é€‚åˆè§†é¢‘è„šæœ¬ï¼Œå…¼å…·ä¸“ä¸šæ€§å’Œè¶£å‘³æ€§",icon:a.jsx(A,{className:"h-4 w-4 text-blue-400"})},{id:"twitter",name:"Xï¼ˆæ¨ç‰¹ï¼‰",description:"ç®€çŸ­ã€ç›´æ¥çš„è¡¨è¾¾ï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œå›½é™…åŒ–è§†è§’",icon:a.jsx(O,{className:"h-4 w-4 text-black"})},{id:"video",name:"è§†é¢‘å·",description:"è§†é¢‘å†…å®¹ä¸äº’åŠ¨å¼•å¯¼å¹¶é‡ï¼Œäº²å’ŒåŠ›å¼º",icon:a.jsx(T,{className:"h-4 w-4 text-green-600"})},{id:"baijia",name:"ç™¾å®¶å·",description:"é•¿ç¯‡æ·±åº¦å†…å®¹ï¼ŒSEOå‹å¥½ï¼Œæƒå¨æ„Ÿå¼ºï¼Œé€‚åˆèµ„è®¯ç±»å†…å®¹",icon:a.jsx(E,{className:"h-4 w-4 text-blue-700"})},{id:"kuaishou",name:"å¿«æ‰‹",description:"æ¥åœ°æ°”è¡¨è¾¾ï¼ŒçœŸå®æœ´å®ï¼Œäº²æ°‘é£æ ¼ï¼Œé€‚åˆç”Ÿæ´»è®°å½•",icon:a.jsx(P,{className:"h-4 w-4 text-yellow-600"})},{id:"wangyi",name:"ç½‘æ˜“å°èœœèœ‚",description:"æ³¨é‡åŸåˆ›æ€§ï¼Œæ–‡ç¬”æµç•…ï¼Œè§‚ç‚¹ç‹¬ç‰¹ï¼Œé€‚åˆæ·±åº¦è¯„è®º",icon:a.jsx($,{className:"h-4 w-4 text-red-500"})},{id:"toutiao",name:"å¤´æ¡å·",description:"æ ‡é¢˜å…šå‹å¥½ï¼Œçƒ­ç‚¹æ•æ„Ÿï¼Œç®—æ³•æ¨èï¼Œé€‚åˆæ—¶äº‹è¯„è®º",icon:a.jsx(E,{className:"h-4 w-4 text-purple-600"})}],[]),us=t.useCallback(()=>{const e={};xs.forEach(s=>{e[s.id]={charCount:Math.floor(.6*Pe(s.id)),useEmoji:"xiaohongshu"===s.id||"weibo"===s.id,useMdFormat:"zhihu"===s.id||"wechat"===s.id,useAutoFormat:!0}}),De(e);const s={};xs.forEach(e=>{s[e.id]=!1}),Je(s)},[xs]),ps=()=>{try{localStorage.setItem("platformSettings",JSON.stringify(Ue)),localStorage.setItem("globalSettings",JSON.stringify(We)),localStorage.setItem("selectedPlatforms",JSON.stringify(le)),N({title:"è®¾ç½®å·²ä¿å­˜",description:"æ‚¨çš„å¹³å°è®¾ç½®å·²æˆåŠŸä¿å­˜"})}catch{N({title:"ä¿å­˜è®¾ç½®å¤±è´¥",description:"æ— æ³•ä¿å­˜æ‚¨çš„è®¾ç½®ï¼Œè¯·ç¨åå†è¯•",variant:"destructive"})}};t.useEffect(()=>{Object.keys(Ue).length>0&&localStorage.setItem("platformSettings",JSON.stringify(Ue))},[Ue]),t.useEffect(()=>{Object.keys(We).length>0&&localStorage.setItem("globalSettings",JSON.stringify(We))},[We]),t.useEffect(()=>{le.length>0&&localStorage.setItem("selectedPlatforms",JSON.stringify(le))},[le]),t.useEffect(()=>{const e=localStorage.getItem("platformSettings"),s=localStorage.getItem("globalSettings"),t=localStorage.getItem("selectedPlatforms");if(e)try{const s=JSON.parse(e);De(s)}catch{us()}else us();if(s)try{const e=JSON.parse(s);Ge(e)}catch{}if(t)try{const e=JSON.parse(t);ne(e)}catch{}const a={};xs.forEach(e=>{a[e.id]=!1}),Je(a)},[us,xs]),t.useEffect(()=>{us()},[us]);const js=y.length,gs=y.trim().length>10&&le.length>0&&as>0,fs=(e,s,t)=>{De(a=>({...a,[e]:{...a[e],[s]:t}}))},bs=(e,s)=>{Ge(t=>({...t,[e]:s}))},[Ns,vs]=t.useState(!1),[ws,ys]=t.useState(null),Is=async e=>{await new Promise(e=>setTimeout(e,1e3));let s=e;return Object.entries({"å°çº¢ä¹¦":"Xiaohongshu","æŠ–éŸ³":"TikTok","å¾®åš":"Weibo","çŸ¥ä¹":"Zhihu","å…¬ä¼—å·":"WeChat Official Account","Bç«™":"Bilibili","è§†é¢‘å·":"Video Account","è¯•äº†":"tried","å‘³é“":"taste","æ²»æ„ˆ":"healing","å°æ—¶å€™":"childhood","ç‰›å¥¶ç³–":"milk candy","ç”œè€Œä¸è…»":"sweet but not cloying","è´¨åœ°":"texture","å†°æ·‡æ·‹":"ice cream","æ…•æ–¯":"mousse","æ°´æ¶¦":"moisturizing","å¸æ”¶":"absorption","ç²˜è…»":"sticky","ç§‹å†¬":"autumn and winter","å¹²çš®":"dry skin","å§å¦¹ä»¬":"sisters","é—­çœ¼å†²":"go for it blindly","èº«ä½“ä¹³":"body lotion","æŠ¤è‚¤":"skincare","æ•‘æ˜Ÿ":"savior","æ¨è":"recommend","çœŸçš„":"really","è¶…çº§":"super","å¥½ç”¨":"good to use","å–œæ¬¢":"like","åˆ†äº«":"share","ä½“éªŒ":"experience","æ„Ÿè§‰":"feel","æ•ˆæœ":"effect","äº§å“":"product","å“ç‰Œ":"brand","è´­ä¹°":"buy","ä»·æ ¼":"price","ä¼˜æƒ ":"discount","æ´»åŠ¨":"activity","é™æ—¶":"limited time","æŠ¢è´­":"rush to buy","èµ¶ç´§":"hurry up","ä¸è¦":"don't","é”™è¿‡":"miss","æœºä¼š":"opportunity","æœ€å":"last","ä¸€æ¬¡":"once","æ—¶é—´":"time","ç»“æŸ":"end","å¼€å§‹":"start","ç«‹åˆ»":"immediately","ä»Šå¤©":"today","æ˜å¤©":"tomorrow","æ˜¨å¤©":"yesterday","è¿™å‘¨":"this week","ä¸‹å‘¨":"next week","æœ¬æœˆ":"this month","ä¸‹æœˆ":"next month","ä»Šå¹´":"this year","æ˜å¹´":"next year"}).forEach(([e,t])=>{s=s.replace(new RegExp(e,"g"),t)}),s=s.replace(/ã€‚/g,". ").replace(/ï¼Œ/g,", ").replace(/ï¼/g,"! ").replace(/ï¼Ÿ/g,"? ").replace(/ï¼š/g,": ").replace(/ï¼›/g,"; "),s},[ks,Ss]=t.useState(""),[Cs,As]=t.useState(!1),[zs,Os]=t.useState([]),[Ts,Es]=t.useState([]),[Ps,$s]=t.useState(null),[Us,Ds]=t.useState(!1),[Bs,Js]=t.useState([]),Fs=t.useCallback(()=>{const e=JSON.parse(localStorage.getItem("shareHistory")||"[]");Js(e)},[]);t.useEffect(()=>{Us&&Fs()},[Us,Fs]);const[Ms,Ls]=t.useState(!1),[_s,Hs]=t.useState("jump"),[Ks,Vs]=t.useState(new Set);return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(U,{title:"AIå†…å®¹é€‚é…å™¨",description:"ä¸€æ¬¡åˆ›ä½œï¼Œå¤šå¹³å°é€‚é…ï¼Œè®©æ‚¨çš„å†…å®¹åœ¨æ¯ä¸ªå¹³å°éƒ½èƒ½å‘æŒ¥æœ€å¤§æ•ˆæœ",showAdaptButton:!1,actions:a.jsxs(a.Fragment,{children:[a.jsxs(o,{variant:"outline",onClick:()=>window.location.href="/history",children:[a.jsx(D,{className:"h-4 w-4 mr-1"}),"å†å²è®°å½•"]}),a.jsxs(o,{variant:"outline",onClick:()=>Ls(!0),children:[a.jsx(r,{className:"h-4 w-4 mr-1"}),"APIé…ç½®"]})]})}),a.jsxs("div",{className:"container mx-auto py-6 px-4",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-medium mb-2",children:"å†…å®¹åˆ›ä½œ"}),a.jsx(B,{children:a.jsxs(J,{children:[a.jsx(F,{asChild:!0,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"å‰©ä½™æ¬¡æ•°:"}),a.jsx(u,{variant:as<=5?"destructive":"default",children:as})]})}),a.jsxs(M,{side:"bottom",children:[a.jsx("p",{children:"æ¯æ¬¡å¤šå¹³å°å†…å®¹ç”Ÿæˆæ¶ˆè€—1æ¬¡ä½¿ç”¨é¢åº¦"}),a.jsx("p",{children:"æ¯æœˆè‡ªåŠ¨è·å¾—20æ¬¡å…è´¹ä½¿ç”¨æœºä¼š"}),a.jsx("p",{children:"é€šè¿‡é‚€è¯·å¥½å‹å¯è·å¾—é¢å¤–ä½¿ç”¨æ¬¡æ•°"})]})]})})]}),a.jsx(m,{className:"mb-6",children:a.jsx(j,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(b,{className:"text-sm font-medium",children:"å‘å¸ƒæ¨¡å¼:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(o,{variant:"jump"===_s?"default":"outline",size:"sm",onClick:()=>Hs("jump"),children:[a.jsx(ce,{className:"w-4 h-4 mr-1"}),"è·³è½¬å‘å¸ƒ"]}),a.jsxs(o,{variant:"api"===_s?"default":"outline",size:"sm",onClick:()=>Hs("api"),children:[a.jsx(P,{className:"w-4 h-4 mr-1"}),"APIç›´å‘"]})]}),"api"===_s&&a.jsxs(u,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[a.jsx(P,{className:"w-3 h-3 mr-1"}),"éœ€è¦é…ç½®APIå¯†é’¥"]})]})})}),a.jsxs(m,{className:"mb-8",children:[a.jsxs(h,{children:[a.jsx(x,{className:"text-lg",children:"è¾“å…¥åŸå§‹å†…å®¹"}),a.jsx(p,{children:"è¯·è¾“å…¥æ‚¨æƒ³è¦è¿›è¡Œå¤šå¹³å°é€‚é…çš„åŸå§‹å†…å®¹"})]}),a.jsxs(j,{children:[a.jsx(L,{placeholder:"åœ¨æ­¤è¾“å…¥æ‚¨çš„åŸå§‹å†…å®¹ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨é€‚é…åˆ°ä¸åŒå¹³å°...",className:"min-h-[200px]",value:y,onChange:e=>Z(e.target.value)}),a.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[a.jsx(Q,{id:"use-brand-library",checked:ye,onCheckedChange:e=>{e&&("trial"===Qe&&(hs({name:"å“ç‰Œåº“åŠŸèƒ½",description:"ä½¿ç”¨å“ç‰Œåº“èµ„æ–™è¿›è¡Œåˆ›ä½œï¼ŒAIä¼šè‡ªåŠ¨éµå¾ªæ‚¨çš„å“ç‰Œè¯­è¨€è§„èŒƒ"}),ds(!0),1))||Ie(!!e)}}),a.jsxs("div",{children:[a.jsx(b,{htmlFor:"use-brand-library",className:"text-sm cursor-pointer",children:"ä½¿ç”¨å“ç‰Œåº“èµ„æ–™è¿›è¡Œåˆ›ä½œ"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ä¸Šä¼ æ‚¨çš„å“ç‰Œèµ„æ–™åº“ï¼ŒAIåœ¨åˆ›ä½œæ—¶ä¼šè‡ªåŠ¨éµå¾ªæ‚¨çš„è¯­è¨€è§„èŒƒï¼Œèå…¥å“ç‰Œä»·å€¼ï¼Œè§„é¿å…¬å…³é£é™©ã€‚åˆ†å‘å†å¤šå¹³å°ï¼Œå“ç‰Œå½¢è±¡å§‹ç»ˆå¦‚ä¸€ã€‚",a.jsx("span",{className:"text-xs text-amber-500 ml-1",children:"ï¼ˆéœ€å¼€é€šé«˜çº§åŠŸèƒ½ï¼‰"})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-center",children:[a.jsxs(o,{variant:"outline",size:"sm",onClick:()=>Me(e=>!e),className:"text-xs rounded-lg shadow-sm border border-blue-200",children:["é€‚é…è®¾ç½®",Fe?a.jsx(_,{className:"ml-1 h-3 w-3"}):a.jsx(H,{className:"ml-1 h-3 w-3"})]}),a.jsxs(u,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[js," å­—ç¬¦"]})]})]}),Fe&&a.jsx("div",{className:"mt-2 w-full",children:a.jsxs("div",{className:"bg-white rounded-lg shadow p-3 flex flex-col items-center w-full max-w-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 w-full px-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(b,{className:"text-xs w-28 flex-shrink-0",children:"å…¨å±€å­—ç¬¦æ•°é™åˆ¶"}),a.jsxs(K,{value:We.charCountPreset,onValueChange:e=>bs("charCountPreset",e),children:[a.jsx(V,{className:"h-7 w-36 text-xs",children:a.jsx(q,{placeholder:"é€‰æ‹©å­—ç¬¦æ•°é™åˆ¶"})}),a.jsxs(W,{children:[a.jsx(G,{value:"auto",children:"è‡ªåŠ¨"}),a.jsx(G,{value:"mini",children:"ç²¾ç®€(50-200å­—)"}),a.jsx(G,{value:"standard",children:"æ ‡å‡†(200-800å­—)"}),a.jsx(G,{value:"detailed",children:"è¯¦ç»†(800+)"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(b,{className:"text-xs w-28 flex-shrink-0",children:"å¯ç”¨è¡¨æƒ…ç¬¦å·"}),a.jsx(Q,{id:"global-emoji",checked:We.globalEmoji,onCheckedChange:e=>bs("globalEmoji",!!e)})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(b,{className:"text-xs w-28 flex-shrink-0",children:"å¯ç”¨Markdownæ ¼å¼"}),a.jsx(Q,{id:"global-md",checked:We.globalMd,onCheckedChange:e=>bs("globalMd",!!e)})]})]}),a.jsx("div",{className:"flex justify-center mt-2 w-full",children:a.jsxs(o,{variant:"outline",size:"sm",onClick:ps,className:"flex items-center h-7 text-xs px-3",children:[a.jsx(me,{className:"h-3 w-3 mr-1"}),"ä¿å­˜"]})})]})})]})]}),a.jsxs(m,{className:"mb-8",children:[a.jsx(h,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(x,{className:"text-lg",children:"AI æ¨¡å‹é€‰æ‹©"}),a.jsx(p,{children:"é€‰æ‹©æ‚¨å–œæ¬¢çš„AIæ¨¡å‹ç”Ÿæˆå†…å®¹ï¼Œé»˜è®¤ä¼˜å…ˆæ¨èGPT-4o"})]}),"trial"===Qe&&a.jsx(o,{variant:"outline",size:"sm",onClick:()=>v("/payment"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"å»è§£é”"})]})}),a.jsx(j,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ts.map(e=>{let s=!ss.some(s=>s.id===e.id),t="",r=!1;return"gpt-4o"===e.id&&"trial"===Qe&&(t="ä¸“ä¸šç‰ˆ/é«˜çº§ç‰ˆä¸“å±",r=!0),a.jsx("div",{className:"p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md "+(Ze===e.id?"border-blue-500 bg-blue-50 shadow-sm":s?"border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed":"border-gray-200 hover:border-blue-300"),onClick:()=>((e,s)=>{if(s)return;Ye(e),fe=e;const t=function(e){var s;return(null==(s=be[e])?void 0:s.provider)||"Unknown"}(e);"OpenAI"===t&&Xe("openai"),"DeepSeek"===t&&Xe("deepseek")})(e.id,s),children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5 "+(Ze===e.id?"border-blue-500 bg-blue-500":"border-gray-300"),children:Ze===e.id&&a.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-blue-600 text-base",children:e.name}),t&&a.jsx(u,{className:"bg-gray-200 text-gray-600 text-xs",children:t})]}),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),r&&a.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("p",{className:"text-xs text-yellow-700 flex items-center",children:[a.jsx("span",{className:"mr-1",children:"ğŸ”’"}),"å»è§£é”é«˜çº§åŠŸèƒ½"]})})]})]})},e.id)})}),Ze&&a.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[a.jsx("p",{className:"font-medium",children:null==(e=ve(Ze))?void 0:e.name}),a.jsx("p",{children:null==(g=ve(Ze))?void 0:g.description})]}),a.jsxs("div",{className:"mt-4 flex gap-2 items-center",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"æ¨¡æ‹Ÿè®¢é˜…ç­‰çº§ï¼š"}),a.jsx(o,{size:"sm",variant:"trial"===Qe?"default":"outline",onClick:()=>es("trial"),children:"å…è´¹ç‰ˆ"}),a.jsx(o,{size:"sm",variant:"pro"===Qe?"default":"outline",onClick:()=>es("pro"),children:"ä¸“ä¸šç‰ˆ"}),a.jsx(o,{size:"sm",variant:"premium"===Qe?"default":"outline",onClick:()=>es("premium"),children:"é«˜çº§ç‰ˆ"})]})]})})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"é€‰æ‹©ç›®æ ‡å¹³å°"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 auto-rows-fr",children:xs.map(e=>a.jsx($e,{icon:e.icon,title:e.name,description:e.description,checked:le.includes(e.id),onChange:s=>{return t=e.id,void ne(s?e=>[...e,t]:e=>e.filter(e=>e!==t));var t}},e.id))}),le.length>0&&a.jsxs(m,{className:"mt-6",children:[a.jsx(h,{className:"pb-3",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(r,{className:"h-4 w-4"}),a.jsx(x,{className:"text-base",children:"å¹³å°è®¾ç½®"}),a.jsxs(u,{variant:"secondary",className:"text-xs",children:[le.length,"ä¸ªå¹³å°"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(o,{variant:"outline",size:"sm",onClick:ps,children:[a.jsx(me,{className:"h-3 w-3 mr-1"}),"ä¿å­˜è®¾ç½®"]}),a.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>Me(!Fe),children:[Fe?"æ”¶èµ·":"å±•å¼€",Fe?a.jsx(_,{className:"ml-1 h-4 w-4"}):a.jsx(H,{className:"ml-1 h-4 w-4"})]})]})]})}),Fe&&a.jsx(j,{className:"pt-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"å…¨å±€è®¾ç½®"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Q,{id:"global-emoji",checked:We.globalEmoji,onCheckedChange:e=>bs("globalEmoji",!!e)}),a.jsxs(b,{htmlFor:"global-emoji",className:"text-sm cursor-pointer flex items-center",children:[a.jsx(R,{className:"h-3 w-3 mr-1"}),"å…¨å±€æ·»åŠ emojiè¡¨æƒ…"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Q,{id:"global-md",checked:We.globalMd,onCheckedChange:e=>bs("globalMd",!!e)}),a.jsxs(b,{htmlFor:"global-md",className:"text-sm cursor-pointer flex items-center",children:[a.jsx(D,{className:"h-3 w-3 mr-1"}),"å…¨å±€MDæ ¼å¼"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Q,{id:"global-auto",checked:!0,disabled:!0}),a.jsxs(b,{htmlFor:"global-auto",className:"text-sm cursor-pointer flex items-center text-gray-500",children:[a.jsx(X,{className:"h-3 w-3 mr-1"}),"å…¨å±€è‡ªåŠ¨æ’ç‰ˆ"]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"å¹³å°ç‰¹å®šè®¾ç½®"}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:le.map(e=>{const s=xs.find(s=>s.id===e),t=Ue[e]||{},r=["zhihu","wechat","weibo","xiaohongshu"].includes(e);return s?a.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.icon,a.jsx("span",{className:"text-sm font-medium",children:s.name}),r&&a.jsx(u,{variant:"outline",className:"text-xs",children:"ä¼˜åŒ–"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs(b,{className:"text-xs",children:["å­—ç¬¦æ•°: ",t.charCount||Pe(e)]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee(e),"-",Pe(e)]})]}),a.jsx(Y,{value:[t.charCount||Pe(e)],min:Ee(e),max:Pe(e),step:10,onValueChange:s=>fs(e,"charCount",s[0]),className:"w-full"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Q,{id:`${e}-emoji`,checked:t.useEmoji,onCheckedChange:s=>fs(e,"useEmoji",!!s)}),a.jsxs(b,{htmlFor:`${e}-emoji`,className:"text-xs cursor-pointer flex items-center",children:[a.jsx(R,{className:"h-3 w-3 mr-1"}),"emoji"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Q,{id:`${e}-md`,checked:t.useMdFormat,onCheckedChange:s=>fs(e,"useMdFormat",!!s)}),a.jsxs(b,{htmlFor:`${e}-md`,className:"text-xs cursor-pointer flex items-center",children:[a.jsx(D,{className:"h-3 w-3 mr-1"}),"MDæ ¼å¼"]})]})]}),r&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded text-xs text-blue-600",children:["zhihu"===e&&"çŸ¥ä¹: MDæ ¼å¼ä¼˜åŒ–ä¸“ä¸šæ’ç‰ˆï¼Œè‡ªåŠ¨æ’ç‰ˆæ·»åŠ åˆ†å‰²çº¿","wechat"===e&&"å…¬ä¼—å·: MDæ ¼å¼é€‚åˆæ·±åº¦é˜…è¯»ï¼Œä¸“ä¸šæ’ç‰ˆ","weibo"===e&&"å¾®åš: emojiæå‡äº’åŠ¨æ€§ï¼Œå­—æ•°é™åˆ¶2000å­—","xiaohongshu"===e&&"å°çº¢ä¹¦: emojiå¢åŠ äº²å’ŒåŠ›ï¼Œè‡ªåŠ¨æ’ç‰ˆä¼˜åŒ–è§†è§‰æ•ˆæœ"]})]})]},e):null})})]})]})})]})]}),a.jsx("div",{className:"flex justify-center mb-12",children:a.jsx(o,{size:"lg",disabled:!gs||pe,onClick:async()=>{if(!gs)return;if(as<=3&&as>0&&(cs(as),ls(!0),1))return;if(as<=0)return void N({title:"ä½¿ç”¨æ¬¡æ•°å·²ç”¨å®Œ",description:"è¯·é€šè¿‡é‚€è¯·å¥½å‹è·å–æ›´å¤šä½¿ç”¨æœºä¼š",variant:"destructive"});we(!0),(()=>{const e={...Ue};We.globalEmoji&&Object.keys(e).forEach(s=>{e[s].useEmoji=!0}),We.globalMd&&Object.keys(e).forEach(s=>{e[s].useMdFormat=!0}),"auto"!==We.charCountPreset&&Object.keys(e).forEach(s=>{switch(We.charCountPreset){case"mini":e[s].charCount=Math.min(200,Pe(s));break;case"standard":e[s].charCount=Math.min(800,Pe(s));break;case"detailed":e[s].charCount=Pe(s)}}),De(e)})();const e=le.map(e=>({platformId:e,content:"",steps:[{status:"loading",message:"åˆ†æåŸå§‹å†…å®¹..."},{status:"waiting",message:"æå–æ ¸å¿ƒä¿¡æ¯..."},{status:"waiting",message:"è¿›è¡Œå¹³å°é€‚é…..."},{status:"waiting",message:"ä¼˜åŒ–è¾“å‡ºç»“æœ..."}]}));de(e);try{const e={};le.forEach(s=>{const t=Ue[s];e[`${s}-charCount`]=(null==t?void 0:t.charCount)||.6*Pe(s),e[`${s}-emoji`]=(null==t?void 0:t.useEmoji)||!1,e[`${s}-mdFormat`]=(null==t?void 0:t.useMdFormat)||!1,e[`${s}-autoFormat`]=(null==t?void 0:t.useAutoFormat)||!1,e[`${s}-brandLibrary`]=ye});const s=await async function(e,s,t){try{const a=await ee.adaptContent(e,s,t);return{success:a.success,data:a.data,error:a.error}}catch(a){return{success:!1,error:a instanceof Error?a.message:"å†…å®¹é€‚é…å¤±è´¥"}}}(y,le,e);for(let t=0;t<le.length;t++){const e=le[t],a=(s,t)=>{de(a=>a.map(a=>a.platformId===e?{...a,steps:a.steps.map((e,a)=>a===s?{...e,status:t}:e)}:a))};a(0,"completed"),await new Promise(e=>setTimeout(e,300)),a(1,"loading"),await new Promise(e=>setTimeout(e,300)),a(1,"completed"),a(2,"loading"),await new Promise(e=>setTimeout(e,300)),a(2,"completed"),a(3,"loading"),await new Promise(e=>setTimeout(e,300));for(const t of le){const e=s[t];e&&e.content?(a(3,"completed"),de(s=>s.map(s=>s.platformId===t?{...s,content:e.content,source:e.source,error:e.error}:s))):(a(3,"error"),de(e=>e.map(e=>e.platformId===t?{...e,error:"ç”Ÿæˆå¤±è´¥ï¼šæ— æ³•è·å–é€‚é…å†…å®¹"}:e)))}}rs(),(e=>{const s="history_anonymous",t=localStorage.getItem(s);let a=[];if(t)try{a=JSON.parse(t)}catch{}const r=(new Date).toISOString();e.forEach(e=>{e.content&&a.push({platformId:e.platformId,content:e.content,timestamp:r})}),localStorage.setItem(s,JSON.stringify(a))})(oe),N({title:"å†…å®¹å·²ç”Ÿæˆ",description:`å·²æˆåŠŸä¸º${le.length}ä¸ªå¹³å°ç”Ÿæˆå†…å®¹`})}catch(s){de(e=>e.map(e=>({...e,steps:e.steps.map(e=>"loading"===e.status?{...e,status:"error"}:e),error:s instanceof Error?s.message:"ç”Ÿæˆå¤±è´¥"}))),N({title:"ç”Ÿæˆå¤±è´¥",description:s instanceof Error?s.message:"å†…å®¹ç”Ÿæˆè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",variant:"destructive"})}finally{we(!1)}},className:"w-full max-w-md",children:pe?a.jsxs(a.Fragment,{children:[a.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"æ­£åœ¨ç”Ÿæˆä¸­..."]}):a.jsxs(a.Fragment,{children:["å¼€å§‹ç”Ÿæˆ",a.jsx(w,{className:"ml-2 h-4 w-4"})]})})}),oe.length>0&&a.jsxs("div",{className:"mt-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold",children:"å¹³å°é€‚é…ç»“æœ"}),a.jsxs(o,{size:"lg",variant:"default",onClick:()=>{const e=oe.filter(e=>e.content).map(e=>e.platformId);Os(e),As(!0)},disabled:0===oe.filter(e=>e.content).length,children:["api"===_s?a.jsx(P,{className:"h-5 w-5 mr-2"}):a.jsx(ce,{className:"h-5 w-5 mr-2"}),"api"===_s?"æ‰¹é‡APIç›´å‘":"æ‰¹é‡ä¸€é”®è½¬å‘"]})]}),a.jsxs(i,{defaultValue:null==(f=oe[0])?void 0:f.platformId,className:"w-full",children:[a.jsx(l,{className:"mb-6 grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 h-12 overflow-x-auto",children:oe.map(e=>a.jsx(n,{value:e.platformId,className:"text-xs sm:text-sm font-medium min-w-0",children:a.jsx("div",{className:"flex items-center",children:Te(e.platformId)})},e.platformId))}),oe.map(e=>{var s,t;return a.jsx(c,{value:e.platformId,children:a.jsxs(m,{className:"p-8 shadow-lg border-2",children:[a.jsx(h,{className:"pb-4",children:a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs(x,{className:"text-2xl flex items-center",children:[Te(e.platformId),a.jsx("span",{className:"ml-3",children:(null==(s=ge[e.platformId])?void 0:s.name)||e.platformId})]})})}),a.jsxs(j,{className:"space-y-6",children:[a.jsx("div",{className:"space-y-3",children:e.steps.map((e,s)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+("completed"===e.status?"bg-green-500 text-white":"loading"===e.status?"bg-blue-500 text-white animate-spin":"error"===e.status?"bg-red-500 text-white":"bg-gray-200 text-gray-600"),children:"completed"===e.status?"âœ“":"loading"===e.status?"âŸ³":"error"===e.status?"âœ—":s+1}),a.jsx("span",{className:"text-sm "+("completed"===e.status?"text-green-600":"loading"===e.status?"text-blue-600":"error"===e.status?"text-red-600":"text-gray-500"),children:e.message})]},s))}),e.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs",children:"âœ—"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"ç”Ÿæˆå¤±è´¥"}),a.jsx("div",{className:"mt-1 text-sm text-red-700",children:e.error})]})]})}),e.content&&!e.error&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs",children:"âœ“"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-green-800",children:"AIç”Ÿæˆå†…å®¹"}),a.jsx("div",{className:"mt-1 text-sm text-green-700",children:"å†…å®¹å·²æˆåŠŸç”Ÿæˆï¼Œæ‚¨å¯ä»¥ç¼–è¾‘ã€å¤åˆ¶æˆ–æ”¶è—"})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"ç”Ÿæˆç»“æœ"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto rounded-full"})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 items-start",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center xl:justify-start gap-2 mb-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ç”Ÿæˆå†…å®¹"}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.content?Le===e.platformId?a.jsxs("div",{className:"space-y-3",children:[a.jsx(L,{value:e.content,onChange:s=>{de(t=>t.map(t=>t.platformId===e.platformId?{...t,content:s.target.value}:t))},className:"min-h-[300px] text-base resize-none"}),a.jsxs("div",{className:"flex gap-3 justify-center lg:justify-start",children:[a.jsx(o,{size:"sm",onClick:()=>{return s=e.platformId,t=e.content,de(e=>e.map(e=>e.platformId===s?{...e,content:t}:e)),_e(null),void N({title:"ä¿å­˜æˆåŠŸ",description:"å†…å®¹å·²æ›´æ–°"});var s,t},className:"bg-green-600 hover:bg-green-700",children:"ä¿å­˜"}),a.jsx(o,{size:"sm",variant:"outline",onClick:()=>_e(null),children:"å–æ¶ˆ"})]})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"whitespace-pre-wrap rounded-lg border-2 p-6 overflow-auto max-h-[600px] text-base leading-relaxed shadow-sm "+("xiaohongshu"===e.platformId?"bg-rose-50 border-rose-200":"douyin"===e.platformId?"bg-black text-white border-gray-800":"weibo"===e.platformId?"bg-orange-50 border-orange-200":"zhihu"===e.platformId?"bg-blue-50 border-blue-200":"wechat"===e.platformId?"bg-green-50 border-green-200":"bilibili"===e.platformId?"bg-pink-50 border-pink-200":"video"===e.platformId?"bg-emerald-50 border-emerald-200":"twitter"===e.platformId?"bg-sky-50 border-sky-200":"bg-gray-50 border-gray-200"),children:e.content}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-gray-700 shadow-sm",children:(null==(t=ge[e.platformId])?void 0:t.name)||e.platformId})})]}):e.error?a.jsx("div",{className:"rounded-lg border-2 border-dashed border-red-200 p-12 flex items-center justify-center bg-red-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600 text-lg font-medium",children:"ç”Ÿæˆå¤±è´¥"}),a.jsx("p",{className:"text-red-500 text-sm mt-2",children:e.error})]})}):a.jsx("div",{className:"rounded-lg border-2 border-dashed border-gray-200 p-12 flex items-center justify-center bg-gray-50",children:a.jsx("p",{className:"text-muted-foreground text-lg",children:"ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."})})]}),He[e.platformId]&&a.jsx("div",{className:"hidden lg:flex items-center justify-center absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-t-2 border-white"})})}),He[e.platformId]&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 mb-3",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ç¿»è¯‘å†…å®¹"}),a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"whitespace-pre-wrap rounded-lg border-2 border-blue-200 p-6 bg-blue-50 overflow-auto max-h-[600px] text-base leading-relaxed shadow-sm",children:He[e.platformId]}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-blue-700 shadow-sm",children:"ç¿»è¯‘ç‰ˆæœ¬"})})]})]})]})]}),e.content&&a.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[a.jsxs(o,{size:"lg",variant:"outline",onClick:()=>(async e=>{if(!pe){de(s=>s.map(s=>s.platformId===e?{...s,steps:[{status:"loading",message:"é‡æ–°åˆ†æå†…å®¹..."},{status:"waiting",message:"æå–æ ¸å¿ƒä¿¡æ¯..."},{status:"waiting",message:"è¿›è¡Œå¹³å°é€‚é…..."},{status:"waiting",message:"ä¼˜åŒ–è¾“å‡ºç»“æœ..."}]}:s));try{const s={},t=Ue[e];s[`${e}-charCount`]=(null==t?void 0:t.charCount)||.6*Pe(e),s[`${e}-emoji`]=(null==t?void 0:t.useEmoji)||!1,s[`${e}-mdFormat`]=(null==t?void 0:t.useMdFormat)||!1,s[`${e}-autoFormat`]=(null==t?void 0:t.useAutoFormat)||!1,s[`${e}-brandLibrary`]=ye;const a=await async function(e,s,t){try{const a=await ee.adaptContent(s,[e],t);return{success:a.success,data:a.data,error:a.error}}catch(a){return{success:!1,error:a instanceof Error?a.message:"å†…å®¹é‡æ–°ç”Ÿæˆå¤±è´¥"}}}(e,y,s),r=(s,t)=>{de(a=>a.map(a=>a.platformId===e?{...a,steps:a.steps.map((e,a)=>a===s?{...e,status:t}:e)}:a))};r(0,"completed"),await new Promise(e=>setTimeout(e,300)),r(1,"loading"),await new Promise(e=>setTimeout(e,300)),r(1,"completed"),r(2,"loading"),await new Promise(e=>setTimeout(e,300)),r(2,"completed"),r(3,"loading"),await new Promise(e=>setTimeout(e,300));const i=a[e];r(3,"completed"),de(s=>s.map(s=>s.platformId===e?{...s,content:i.content,source:i.source,error:i.error}:s)),N({title:"é‡æ–°ç”ŸæˆæˆåŠŸ",description:`å·²ä¸º${e}é‡æ–°ç”Ÿæˆå†…å®¹`})}catch(s){de(t=>t.map(t=>t.platformId===e?{...t,steps:t.steps.map(e=>"loading"===e.status?{...e,status:"error"}:e),error:s instanceof Error?s.message:"é‡æ–°ç”Ÿæˆå¤±è´¥"}:t)),N({title:"é‡æ–°ç”Ÿæˆå¤±è´¥",description:s instanceof Error?s.message:`é€‚é…${e}å†…å®¹æ—¶å‡ºé”™`,variant:"destructive"})}}})(e.platformId),disabled:pe,children:[a.jsx(d,{className:"h-5 w-5 mr-2"}),"é‡æ–°ç”Ÿæˆ"]}),a.jsxs(o,{size:"lg",variant:"outline",onClick:()=>{return s=e.platformId,void _e(Le===s?null:s);var s},children:[a.jsx(he,{className:"h-5 w-5 mr-2"}),Le===e.platformId?"å–æ¶ˆç¼–è¾‘":"ç¼–è¾‘"]}),a.jsxs(o,{size:"lg",variant:"outline",onClick:()=>(e=>{const s=oe.find(s=>s.platformId===e);if(!s||!s.content)return void N({title:"æ— æ³•æ”¶è—",description:"æ²¡æœ‰å¯æ”¶è—çš„å†…å®¹",variant:"destructive"});const t=JSON.parse(localStorage.getItem("favorites")||"[]"),a={id:Date.now().toString(),platformId:e,content:s.content,platformName:e,timestamp:(new Date).toISOString()};t.push(a),localStorage.setItem("favorites",JSON.stringify(t)),N({title:"æ”¶è—æˆåŠŸ",description:"å†…å®¹å·²æ·»åŠ åˆ°æ”¶è—ï¼Œå¯åœ¨æˆ‘çš„é¡µé¢æŸ¥çœ‹"})})(e.platformId),children:[a.jsx(xe,{className:"h-5 w-5 mr-2"}),"æ”¶è—"]}),a.jsxs(o,{size:"lg",variant:"outline",onClick:()=>{return s=e.content,navigator.clipboard.writeText(s),void N({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",description:"å†…å®¹å·²æˆåŠŸå¤åˆ¶ï¼Œå¯ç›´æ¥ç²˜è´´ä½¿ç”¨"});var s},children:[a.jsx(ue,{className:"h-5 w-5 mr-2"}),"ä¸€é”®å¤åˆ¶"]}),a.jsxs(o,{size:"lg",variant:"outline",onClick:()=>(async(e,s)=>{if(Ve.has(e))N({title:"è¯·å‹¿é¢‘ç¹ç‚¹å‡»",description:"ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™...",variant:"destructive"});else{qe(s=>new Set(s).add(e));try{const t=await(async e=>{try{const s=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,targetLang:"en",sourceLang:"zh"})});if(!s.ok)throw new Error("Translation API failed");return(await s.json()).translatedText||e}catch{return Is(e)}})(s);Ke(s=>({...s,[e]:t})),N({title:"ç¿»è¯‘å®Œæˆ",description:"å†…å®¹å·²ç¿»è¯‘ä¸ºè‹±æ–‡"})}catch{N({title:"ç¿»è¯‘å¤±è´¥",description:"ç¿»è¯‘è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",variant:"destructive"})}finally{setTimeout(()=>{qe(s=>{const t=new Set(s);return t.delete(e),t})},3e3)}}})(e.platformId,e.content),disabled:Ve.has(e.platformId),children:[a.jsx(je,{className:"h-5 w-5 mr-2"}),"ä¸€é”®ç¿»è¯‘"]}),a.jsxs(o,{size:"lg",variant:"default",onClick:()=>(e=>{const s=oe.find(s=>s.platformId===e);s&&s.content?(ys({platformId:e,content:s.content}),vs(!0)):N({title:"æ— æ³•å‘å¸ƒ",description:"æ²¡æœ‰å¯å‘å¸ƒçš„å†…å®¹",variant:"destructive"})})(e.platformId),disabled:Ks.has(e.platformId),children:[Ks.has(e.platformId)?a.jsx(d,{className:"h-5 w-5 mr-2 animate-spin"}):"api"===_s?a.jsx(P,{className:"h-5 w-5 mr-2"}):a.jsx(ce,{className:"h-5 w-5 mr-2"}),Ks.has(e.platformId)?"å‘å¸ƒä¸­...":"api"===_s?"APIç›´å‘":"ç«‹åˆ»å‘å¸ƒ"]})]})]})]})},e.platformId)})]})]})]}),a.jsx(se,{open:Ns,onOpenChange:vs,children:a.jsxs(te,{children:[a.jsx(ae,{children:a.jsx(re,{children:"ä¸€é”®è½¬å‘ç¡®è®¤"})}),a.jsxs("div",{className:"py-2 text-gray-700",children:[a.jsx("p",{children:"api"===_s?"æ˜¯å¦é€šè¿‡APIç›´æ¥å‘å¸ƒå†…å®¹ï¼Ÿ":"å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ˜¯å¦è·³è½¬åˆ°å¹³å°å‘å¸ƒé¡µï¼Ÿ"}),a.jsx("div",{className:"bg-gray-100 rounded p-2 mt-2 text-xs break-all max-h-32 overflow-auto",children:null==ws?void 0:ws.content})]}),a.jsxs(ie,{children:[a.jsx(o,{variant:"outline",onClick:()=>vs(!1),children:"å–æ¶ˆ"}),a.jsx(o,{variant:"default",onClick:()=>{if(!ws)return;const{platformId:e,content:s}=ws;if("api"===_s)(async(e,s)=>{if(!Se(e))return N({title:"æœªæˆæƒ",description:"è¯·å…ˆé…ç½®å¹³å°APIæˆæƒä¿¡æ¯",variant:"destructive"}),void Ls(!0);Vs(s=>new Set(s).add(e));try{const t={text:s,title:`AIç”Ÿæˆå†…å®¹ - ${(new Date).toLocaleString()}`,hashtags:[]},a=await ke(e,t);if(a.success){const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t)),N({title:"å‘å¸ƒæˆåŠŸ",description:`å†…å®¹å·²æˆåŠŸå‘å¸ƒåˆ°${e}`}),a.publishUrl&&window.open(a.publishUrl,"_blank","noopener,noreferrer")}else N({title:"å‘å¸ƒå¤±è´¥",description:a.error||"å‘å¸ƒè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯",variant:"destructive"})}catch(t){N({title:"å‘å¸ƒå¤±è´¥",description:t instanceof Error?t.message:"ç½‘ç»œé”™è¯¯",variant:"destructive"})}finally{Vs(s=>{const t=new Set(s);return t.delete(e),t})}})(e,s);else{navigator.clipboard.writeText(s);const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t));const a=Oe[e];a?(window.open(a,"_blank","noopener,noreferrer"),N({title:"å†…å®¹å·²å¤åˆ¶ï¼Œæ­£åœ¨è·³è½¬",description:`å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ­£åœ¨æ‰“å¼€${e}å®˜ç½‘`})):N({title:"å†…å®¹å·²å¤åˆ¶",description:"å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä½†è¯¥å¹³å°çš„å‘å¸ƒé“¾æ¥æš‚æœªé…ç½®"})}vs(!1),ys(null)},children:"api"===_s?"ç¡®è®¤å‘å¸ƒ":"è·³è½¬å¹¶å‘å¸ƒ"})]})]})}),a.jsx(se,{open:Cs,onOpenChange:As,children:a.jsxs(te,{children:[a.jsx(ae,{children:a.jsx(re,{children:"æ‰¹é‡ä¸€é”®è½¬å‘"})}),a.jsxs("div",{className:"py-2 text-gray-700",children:[a.jsx("p",{children:"è¯·é€‰æ‹©è¦æ‰¹é‡è½¬å‘çš„å¹³å°ï¼š"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:oe.filter(e=>e.content).map(e=>a.jsx(o,{variant:zs.includes(e.platformId)?"default":"outline",onClick:()=>Os(s=>s.includes(e.platformId)?s.filter(s=>s!==e.platformId):[...s,e.platformId]),children:e.platformId},e.platformId))})]}),a.jsxs(ie,{children:[a.jsx(o,{variant:"outline",onClick:()=>As(!1),children:"å–æ¶ˆ"}),a.jsx(o,{variant:"default",onClick:()=>{const e=zs.map(e=>{const s=oe.find(s=>s.platformId===e);return s&&s.content?{platformId:e,content:s.content}:null}).filter(Boolean);"api"===_s?((async e=>{const s=e.filter(e=>!Se(e));if(s.length>0)return N({title:"éƒ¨åˆ†å¹³å°æœªæˆæƒ",description:`è¯·å…ˆé…ç½® ${s.join(", ")} çš„APIæˆæƒä¿¡æ¯`,variant:"destructive"}),void Ls(!0);const t=e.filter(e=>Se(e));if(0===t.length)return void N({title:"æ— å¯ç”¨å¹³å°",description:"è¯·å…ˆé…ç½®è‡³å°‘ä¸€ä¸ªå¹³å°çš„APIæˆæƒä¿¡æ¯",variant:"destructive"});const a=oe.find(e=>e.platformId===t[0]);if(null==a?void 0:a.content){Vs(new Set(t));try{const e={text:a.content,title:`AIç”Ÿæˆå†…å®¹ - ${(new Date).toLocaleString()}`,hashtags:[]},s=await async function(e,s){const t=[];for(const r of e)try{const e=await ke(r,s);t.push(e)}catch(a){t.push({success:!1,error:a instanceof Error?a.message:"å‘å¸ƒå¤±è´¥"})}return t}(t,e),r=s.filter(e=>e.success).length,i=s.length-r,l=JSON.parse(localStorage.getItem("shareHistory")||"[]");s.forEach((e,s)=>{e.success&&l.unshift({id:Date.now().toString()+s,platformId:t[s],platformName:t[s],content:a.content,time:(new Date).toISOString()})}),localStorage.setItem("shareHistory",JSON.stringify(l)),N({title:"æ‰¹é‡å‘å¸ƒå®Œæˆ",description:`æˆåŠŸ: ${r}ä¸ªå¹³å°ï¼Œå¤±è´¥: ${i}ä¸ªå¹³å°`}),s.forEach((e,s)=>{e.success&&e.publishUrl&&setTimeout(()=>{window.open(e.publishUrl,"_blank","noopener,noreferrer")},500*s)})}catch(r){N({title:"æ‰¹é‡å‘å¸ƒå¤±è´¥",description:r instanceof Error?r.message:"ç½‘ç»œé”™è¯¯",variant:"destructive"})}finally{Vs(new Set)}}else N({title:"æ— å†…å®¹å¯å‘å¸ƒ",description:"è¯·å…ˆç”Ÿæˆå†…å®¹",variant:"destructive"})})(zs),As(!1)):(Es(e),As(!1),e.length>0&&$s(e[0]))},disabled:0===zs.length,children:"å¼€å§‹æ‰¹é‡è½¬å‘"})]})]})}),a.jsx(se,{open:!!Ps,onOpenChange:e=>{e||$s(null)},children:a.jsxs(te,{children:[a.jsx(ae,{children:a.jsx(re,{children:"æ‰¹é‡ä¸€é”®è½¬å‘"})}),a.jsxs("div",{className:"py-2 text-gray-700",children:[a.jsxs("p",{children:["å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ˜¯å¦è·³è½¬åˆ° ",null==Ps?void 0:Ps.platformId," å‘å¸ƒé¡µï¼Ÿ"]}),a.jsx("div",{className:"bg-gray-100 rounded p-2 mt-2 text-xs break-all max-h-32 overflow-auto",children:null==Ps?void 0:Ps.content})]}),a.jsxs(ie,{children:[a.jsx(o,{variant:"outline",onClick:()=>{if(!Ps)return;const e=Ts.findIndex(e=>e.platformId===Ps.platformId);e>=0&&e<Ts.length-1?$s(Ts[e+1]):($s(null),Es([]),N({title:"æ‰¹é‡è½¬å‘å®Œæˆ",description:"å·²å®Œæˆæ‰€æœ‰å¹³å°çš„è½¬å‘"}))},children:"è·³è¿‡"}),a.jsx(o,{variant:"default",onClick:()=>{if(!Ps)return;const{platformId:e,content:s}=Ps;navigator.clipboard.writeText(s);const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t));const a=Oe[e];a&&window.open(a,"_blank","noopener,noreferrer");const r=Ts.findIndex(s=>s.platformId===e);r>=0&&r<Ts.length-1?$s(Ts[r+1]):($s(null),Es([]),N({title:"æ‰¹é‡è½¬å‘å®Œæˆ",description:"å·²å®Œæˆæ‰€æœ‰å¹³å°çš„è½¬å‘"}))},children:"è·³è½¬å¹¶å‘å¸ƒ"})]})]})}),a.jsx(se,{open:Us,onOpenChange:Ds,children:a.jsxs(te,{className:"max-w-2xl",children:[a.jsx(ae,{children:a.jsx(re,{children:"è½¬å‘å†å²"})}),a.jsx("div",{className:"py-2 text-gray-700 max-h-[60vh] overflow-auto",children:0===Bs.length?a.jsx("div",{className:"text-center text-gray-400 py-8",children:"æš‚æ— è½¬å‘å†å²"}):a.jsx("div",{className:"space-y-4",children:Bs.map(e=>a.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-bold text-blue-600",children:e.platformName}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.time).toLocaleString()})]}),a.jsx("div",{className:"text-xs break-all mb-1",children:e.content}),a.jsx(o,{size:"sm",variant:"outline",onClick:()=>navigator.clipboard.writeText(e.content),children:"å¤åˆ¶å†…å®¹"})]},e.id))})}),a.jsxs(ie,{children:[a.jsx(o,{variant:"outline",onClick:()=>{localStorage.removeItem("shareHistory"),Js([]),N({title:"å·²æ¸…ç©º",description:"è½¬å‘å†å²å·²æ¸…ç©º"})},disabled:0===Bs.length,children:"æ¸…ç©ºå†å²"}),a.jsx(o,{variant:"default",onClick:()=>Ds(!1),children:"å…³é—­"})]})]})}),a.jsx(Ce,{open:Ms,onOpenChange:Ls}),a.jsx(Ae,{isOpen:is,onClose:()=>ls(!1),onUpgrade:()=>{ls(!1),v("/payment")},remainingCount:ns,userType:"trial"===Qe?"trial":"pro"}),a.jsx(ze,{isOpen:os,onClose:()=>ds(!1),onUpgrade:()=>{ds(!1),v("/payment")},featureName:ms.name,featureDescription:ms.description})]})}export{Ue as default};
