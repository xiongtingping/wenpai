const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-adapt-BAX30gfz.js","assets/ui-core-BoM6Gtru.js","assets/router-CDHmMMQ-.js","assets/react-vendor-D7XYiaTe.js","assets/components-layout-MG0qUfcO.js","assets/pages-home-B2qezEHm.js","assets/components-landing-Bf3ZBHM2.js","assets/pages-brand-Be4bUKpb.js","assets/utils-Ck01-_Du.js","assets/api-services-h5tHo7Hg.js","assets/pages-content-extractor-Caq7DiWW.js","assets/components-auth-rO0vuiGv.js","assets/InvitePage-BWHnYWR9.js","assets/pages-hot-topics-DladIUhZ.js","assets/HotTopicDetailPage-CZXQ7Pal.js","assets/PaymentPage-DwiteJkK.js","assets/AlipayQRCode-B5Tv00PO.js","assets/creemClientService-DNWMJNoV.js","assets/browser-C5-Pn058.js","assets/ProfilePage-BRuMsZip.js","assets/SettingsPage-Dxt1dUcI.js","assets/UserDataPage-DhHYId0B.js","assets/UserProfilePage-QTLC2JEI.js","assets/UserProfile-CEAsvx23.js","assets/UserProfileTestPage-Do7FNzQW.js","assets/LoginButtonTestPage-DWKoafTN.js","assets/AuthingStatusTestPage-DFX8cI8Z.js","assets/useAuthingStatus-0X3p2ga6.js","assets/LogoutButtonTestPage-zoqY0O5u.js","assets/alert-dialog-DWXHSC0m.js","assets/UserEditFormTestPage-CqbbCKIM.js","assets/pages-emoji-BwD1Fn_e.js","assets/PrivacyPage-WS9gB3eP.js","assets/TermsPage-EWVPGeJU.js","assets/ChangelogPage-O1QLJy0M.js","assets/HistoryPage-V_UKan5f.js","assets/pages-library-CfE-hwoA.js","assets/pages-creative-D2ODgwsq.js","assets/components-creative-BuHtzbrc.js","assets/TestNewFeaturesPage-2ujtuVFi.js","assets/pages-share-Cv_LcOpU.js","assets/AboutPage-CjN2kg30.js","assets/TestPage-DRgWR1hi.js","assets/AITestPage-C0NZavwJ.js","assets/ReferrerTestPage-BVyUhmqf.js","assets/UnifiedAuthTestPage-Dajoiozq.js","assets/ArchitectureTestPage-8nq0n8LX.js","assets/AuthingSystemTestPage-BPLlqBBk.js","assets/AuthingLoginTestPage-DOkVeoPr.js","assets/AuthingSDKTestPage-BtVy6l7Z.js","assets/FunctionalityTestPage-C_hJOhlp.js","assets/sdk-Co0LyqZK.js","assets/APIConfigTestPage-jQJgaadc.js","assets/CreemAPITestPage-BoybquP7.js","assets/QRCodeTestPage-fkMrDC4U.js","assets/SimpleQRTestPage-BSe_r8q3.js","assets/CheckoutTestPage-B4nQogqd.js","assets/DirectLinkQRCodeTestPage-Dx2WCg-p.js","assets/DirectLinkQRCode-gfFhrIzS.js","assets/SimpleQRCodePage-ClR9cJbe.js","assets/CreemAPIFixTestPage-DXhy8iDr.js","assets/SimpleCreemTestPage-B2pR7wW3.js","assets/CreemDebugPage-BPMzoKOQ.js","assets/AlipayQRCodeDemoPage-DLg6ntL6.js","assets/PaymentPlanDemoPage-DaxRX4Wl.js","assets/PaymentFlowTestPage-De35fBoj.js","assets/PaymentTestPage-FX7PxDcg.js","assets/TestNavigationPage-CAzBOG62.js"])))=>i.map(i=>d[i]);
import{an as e,ao as s,ap as t,j as a,aq as r,a7 as i,ar as n,as as l,at as c,au as d,av as o,aw as x,ax as m,ay as h,az as j,aA as u,aB as p,aC as g}from"./ui-core-BoM6Gtru.js";import{r as f,a as v,u as N,e as y,R as b,B as w,f as _,g as A}from"./router-CDHmMMQ-.js";import{a as P,g as I}from"./react-vendor-D7XYiaTe.js";import{_ as E}from"./pages-emoji-BwD1Fn_e.js";import{c as k,u as T,B as S,p as C,j as R,m as L,C as V,a as D,b as O,d as z,e as F,q,k as U,t as M,s as G,U as K,f as $,H as B}from"./pages-home-B2qezEHm.js";import{b as H,X as W,af as Q,f as J,Z as Y,aK as X,p as Z,ad as ee,n as se,o as te,U as ae,ap as re,C as ie,i as ne,h as le,A as ce,aB as de,Y as oe,aa as xe}from"./utils-Ck01-_Du.js";import{L as me,B as he,S as je,e as ue,f as pe,g as ge,h as fe,T as ve,i as Ne,j as ye,k as be,l as we,p as _e}from"./pages-adapt-BAX30gfz.js";import{A as Ae,u as Pe,P as Ie}from"./components-auth-rO0vuiGv.js";import{T as Ee,P as ke,c as Te}from"./components-layout-MG0qUfcO.js";import"./api-services-h5tHo7Hg.js";import"./pages-content-extractor-Caq7DiWW.js";import"./pages-brand-Be4bUKpb.js";import"./components-landing-Bf3ZBHM2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var Se,Ce={};const Re=I(function(){if(Se)return Ce;Se=1;var e=P();return Ce.createRoot=e.createRoot,Ce.hydrateRoot=e.hydrateRoot,Ce}());var Le="ToastProvider",[Ve,De,Oe]=s("Toast"),[ze,Fe]=e("Toast",[Oe]),[qe,Ue]=ze(Le),Me=e=>{const{__scopeToast:s,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:n=50,children:l}=e,[c,d]=f.useState(null),[o,x]=f.useState(0),m=f.useRef(!1),h=f.useRef(!1);return t.trim(),a.jsx(Ve.Provider,{scope:s,children:a.jsx(qe,{scope:s,label:t,duration:r,swipeDirection:i,swipeThreshold:n,toastCount:o,viewport:c,onViewportChange:d,onToastAdd:f.useCallback(()=>x(e=>e+1),[]),onToastRemove:f.useCallback(()=>x(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};Me.displayName=Le;var Ge="ToastViewport",Ke=["F8"],$e="toast.viewportPause",Be="toast.viewportResume",He=f.forwardRef((e,s)=>{const{__scopeToast:n,hotkey:l=Ke,label:c="Notifications ({hotkey})",...d}=e,o=Ue(Ge,n),x=De(n),m=f.useRef(null),h=f.useRef(null),j=f.useRef(null),u=f.useRef(null),p=t(s,u,o.onViewportChange),g=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;f.useEffect(()=>{const e=e=>{var s;0!==l.length&&l.every(s=>e[s]||e.code===s)&&(null==(s=u.current)||s.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l]),f.useEffect(()=>{const e=m.current,s=u.current;if(v&&e&&s){const t=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent($e);s.dispatchEvent(e),o.isClosePausedRef.current=!0}},a=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(Be);s.dispatchEvent(e),o.isClosePausedRef.current=!1}},r=s=>{!e.contains(s.relatedTarget)&&a()},i=()=>{e.contains(document.activeElement)||a()};return e.addEventListener("focusin",t),e.addEventListener("focusout",r),e.addEventListener("pointermove",t),e.addEventListener("pointerleave",i),window.addEventListener("blur",t),window.addEventListener("focus",a),()=>{e.removeEventListener("focusin",t),e.removeEventListener("focusout",r),e.removeEventListener("pointermove",t),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",t),window.removeEventListener("focus",a)}}},[v,o.isClosePausedRef]);const N=f.useCallback(({tabbingDirection:e})=>{const s=x().map(s=>{const t=s.ref.current,a=[t,...xs(t)];return"forwards"===e?a:a.reverse()});return("forwards"===e?s.reverse():s).flat()},[x]);return f.useEffect(()=>{const e=u.current;if(e){const s=s=>{var t,a,r;const i=s.altKey||s.ctrlKey||s.metaKey;if("Tab"===s.key&&!i){const i=document.activeElement,n=s.shiftKey;if(s.target===e&&n)return void(null==(t=h.current)||t.focus());const l=N({tabbingDirection:n?"backwards":"forwards"}),c=l.findIndex(e=>e===i);ms(l.slice(c+1))?s.preventDefault():n?null==(a=h.current)||a.focus():null==(r=j.current)||r.focus()}};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}},[x,N]),a.jsxs(r,{ref:m,role:"region","aria-label":c.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&a.jsx(Qe,{ref:h,onFocusFromOutsideViewport:()=>{ms(N({tabbingDirection:"forwards"}))}}),a.jsx(Ve.Slot,{scope:n,children:a.jsx(i.ol,{tabIndex:-1,...d,ref:p})}),v&&a.jsx(Qe,{ref:j,onFocusFromOutsideViewport:()=>{ms(N({tabbingDirection:"backwards"}))}})]})});He.displayName=Ge;var We="ToastFocusProxy",Qe=f.forwardRef((e,s)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=e,n=Ue(We,t);return a.jsx(o,{"aria-hidden":!0,tabIndex:0,...i,ref:s,style:{position:"fixed"},onFocus:e=>{var s;const t=e.relatedTarget;!(null==(s=n.viewport)?void 0:s.contains(t))&&r()}})});Qe.displayName=We;var Je="Toast",Ye=f.forwardRef((e,s)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:o,...x}=e,[m,h]=n({prop:r,defaultProp:i??!0,onChange:o,caller:Je});return a.jsx(l,{present:t||m,children:a.jsx(es,{open:m,...x,ref:s,onClose:()=>h(!1),onPause:d(e.onPause),onResume:d(e.onResume),onSwipeStart:c(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:c(e.onSwipeMove,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${t}px`)}),onSwipeCancel:c(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:c(e.onSwipeEnd,e=>{const{x:s,y:t}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${s}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${t}px`),h(!1)})})})});Ye.displayName=Je;var[Xe,Ze]=ze(Je,{onClose(){}}),es=f.forwardRef((e,s)=>{const{__scopeToast:r,type:n="foreground",duration:l,open:o,onClose:m,onEscapeKeyDown:h,onPause:j,onResume:u,onSwipeStart:p,onSwipeMove:g,onSwipeCancel:N,onSwipeEnd:y,...b}=e,w=Ue(Je,r),[_,A]=f.useState(null),P=t(s,e=>A(e)),I=f.useRef(null),E=f.useRef(null),k=l||w.duration,T=f.useRef(0),S=f.useRef(k),C=f.useRef(0),{onToastAdd:R,onToastRemove:L}=w,V=d(()=>{var e;(null==_?void 0:_.contains(document.activeElement))&&(null==(e=w.viewport)||e.focus()),m()}),D=f.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(C.current),T.current=(new Date).getTime(),C.current=window.setTimeout(V,e))},[V]);f.useEffect(()=>{const e=w.viewport;if(e){const s=()=>{D(S.current),null==u||u()},t=()=>{const e=(new Date).getTime()-T.current;S.current=S.current-e,window.clearTimeout(C.current),null==j||j()};return e.addEventListener($e,t),e.addEventListener(Be,s),()=>{e.removeEventListener($e,t),e.removeEventListener(Be,s)}}},[w.viewport,k,j,u,D]),f.useEffect(()=>{o&&!w.isClosePausedRef.current&&D(k)},[o,k,w.isClosePausedRef,D]),f.useEffect(()=>(R(),()=>L()),[R,L]);const O=f.useMemo(()=>_?cs(_):null,[_]);return w.viewport?a.jsxs(a.Fragment,{children:[O&&a.jsx(ss,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0,children:O}),a.jsx(Xe,{scope:r,onClose:V,children:v.createPortal(a.jsx(Ve.ItemSlot,{scope:r,children:a.jsx(x,{asChild:!0,onEscapeKeyDown:c(h,()=>{w.isFocusedToastEscapeKeyDownRef.current||V(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(i.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":w.swipeDirection,...b,ref:P,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:c(e.onKeyDown,e=>{"Escape"===e.key&&(null==h||h(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:c(e.onPointerDown,e=>{0===e.button&&(I.current={x:e.clientX,y:e.clientY})}),onPointerMove:c(e.onPointerMove,e=>{if(!I.current)return;const s=e.clientX-I.current.x,t=e.clientY-I.current.y,a=Boolean(E.current),r=["left","right"].includes(w.swipeDirection),i=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,n=r?i(0,s):0,l=r?0:i(0,t),c="touch"===e.pointerType?10:2,d={x:n,y:l},o={originalEvent:e,delta:d};a?(E.current=d,ds("toast.swipeMove",g,o,{discrete:!1})):os(d,w.swipeDirection,c)?(E.current=d,ds("toast.swipeStart",p,o,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(s)>c||Math.abs(t)>c)&&(I.current=null)}),onPointerUp:c(e.onPointerUp,e=>{const s=E.current,t=e.target;if(t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),E.current=null,I.current=null,s){const t=e.currentTarget,a={originalEvent:e,delta:s};os(s,w.swipeDirection,w.swipeThreshold)?ds("toast.swipeEnd",y,a,{discrete:!0}):ds("toast.swipeCancel",N,a,{discrete:!0}),t.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),ss=e=>{const{__scopeToast:s,children:t,...r}=e,i=Ue(Je,s),[n,l]=f.useState(!1),[c,x]=f.useState(!1);return function(e=()=>{}){const s=d(e);h(()=>{let e=0,t=0;return e=window.requestAnimationFrame(()=>t=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(t)}},[s])}(()=>l(!0)),f.useEffect(()=>{const e=window.setTimeout(()=>x(!0),1e3);return()=>window.clearTimeout(e)},[]),c?null:a.jsx(m,{asChild:!0,children:a.jsx(o,{...r,children:n&&a.jsxs(a.Fragment,{children:[i.label," ",t]})})})},ts=f.forwardRef((e,s)=>{const{__scopeToast:t,...r}=e;return a.jsx(i.div,{...r,ref:s})});ts.displayName="ToastTitle";var as=f.forwardRef((e,s)=>{const{__scopeToast:t,...r}=e;return a.jsx(i.div,{...r,ref:s})});as.displayName="ToastDescription";var rs=f.forwardRef((e,s)=>{const{altText:t,...r}=e;return t.trim()?a.jsx(ls,{altText:t,asChild:!0,children:a.jsx(ns,{...r,ref:s})}):null});rs.displayName="ToastAction";var is="ToastClose",ns=f.forwardRef((e,s)=>{const{__scopeToast:t,...r}=e,n=Ze(is,t);return a.jsx(ls,{asChild:!0,children:a.jsx(i.button,{type:"button",...r,ref:s,onClick:c(e.onClick,n.onClose)})})});ns.displayName=is;var ls=f.forwardRef((e,s)=>{const{__scopeToast:t,altText:r,...n}=e;return a.jsx(i.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:s})});function cs(e){const s=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&s.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const t=e.ariaHidden||e.hidden||"none"===e.style.display,a=""===e.dataset.radixToastAnnounceExclude;if(!t)if(a){const t=e.dataset.radixToastAnnounceAlt;t&&s.push(t)}else s.push(...cs(e))}}),s}function ds(e,s,t,{discrete:a}){const r=t.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});s&&r.addEventListener(e,s,{once:!0}),a?j(r,i):r.dispatchEvent(i)}var os=(e,s,t=0)=>{const a=Math.abs(e.x),r=Math.abs(e.y),i=a>r;return"left"===s||"right"===s?i&&a>t:!i&&r>t};function xs(e){const s=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const s="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||s?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)s.push(t.currentNode);return s}function ms(e){const s=document.activeElement;return e.some(e=>e===s||(e.focus(),document.activeElement!==s))}var hs=He,js=Ye,us=ts,ps=as,gs=rs,fs=ns;const vs=Me,Ns=f.forwardRef(({className:e,...s},t)=>a.jsx(hs,{ref:t,className:k("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));Ns.displayName=hs.displayName;const ys=H("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bs=f.forwardRef(({className:e,variant:s,...t},r)=>a.jsx(js,{ref:r,className:k(ys({variant:s}),e),...t}));bs.displayName=js.displayName,f.forwardRef(({className:e,...s},t)=>a.jsx(gs,{ref:t,className:k("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s})).displayName=gs.displayName;const ws=f.forwardRef(({className:e,...s},t)=>a.jsx(fs,{ref:t,className:k("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:a.jsx(W,{className:"h-4 w-4"})}));ws.displayName=fs.displayName;const _s=f.forwardRef(({className:e,...s},t)=>a.jsx(us,{ref:t,className:k("text-sm font-semibold [&+div]:text-xs",e),...s}));_s.displayName=us.displayName;const As=f.forwardRef(({className:e,...s},t)=>a.jsx(ps,{ref:t,className:k("text-sm opacity-90",e),...s}));function Ps(){const{toasts:e}=T();return a.jsxs(vs,{children:[e.map(function({id:e,title:s,description:t,action:r,...i}){return a.jsxs(bs,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[s&&a.jsx(_s,{children:s}),t&&a.jsx(As,{children:t})]}),r,a.jsx(ws,{})]},e)}),a.jsx(Ns,{})]})}function Is(){const e=N();return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-6xl mb-4",children:"404"}),a.jsx("p",{className:"mb-6",children:"Page not found"}),a.jsx(S,{onClick:()=>e("/"),variant:"link",children:"Return home"})]})})}function Es(){const{showLogin:e,isLoggedIn:s}=C(),t=N();return f.useEffect(()=>{e()},[e]),f.useEffect(()=>{s&&t("/")},[s,t]),a.jsx("div",{style:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("h2",{children:"请使用 Authing Guard 登录"})})}function ks(){const{login:e,isAuthenticated:s}=R(),t=N();return f.useEffect(()=>{e()},[e]),f.useEffect(()=>{s&&t("/")},[s,t]),a.jsx("div",{style:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"请使用 Authing 登录"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"正在为您打开登录窗口..."}),a.jsx("button",{onClick:()=>e(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"重新打开登录窗口"})]})})}function Ts(){const{login:e,isAuthenticated:s}=R(),t=N();return f.useEffect(()=>{e()},[e]),f.useEffect(()=>{s&&t("/")},[s,t]),a.jsx("div",{style:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"请使用 Authing 注册"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"正在为您打开注册窗口..."}),a.jsx("button",{onClick:()=>e(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"重新打开注册窗口"})]})})}function Ss(){const{login:e,isAuthenticated:s}=R(),t=N();return f.useEffect(()=>{e()},[e]),f.useEffect(()=>{s&&t("/")},[s,t]),a.jsx("div",{style:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"请使用 Authing 重置密码"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"正在为您打开密码重置窗口..."}),a.jsx("button",{onClick:()=>e(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"重新打开密码重置窗口"})]})})}As.displayName=ps.displayName;const Cs=()=>{const e=N(),[s]=y(),{login:t}=R(),[r,i]=f.useState("loading"),[n,l]=f.useState("正在处理认证回调...");return f.useEffect(()=>{(async()=>{try{i("loading"),l("正在验证认证信息...");const a=s.get("error"),r=s.get("error_description");if(a)return i("error"),void l(`认证失败: ${r||a}`);const n=s.get("code"),c=s.get("state");if(!n)return i("error"),void l("缺少授权码");const d=L();new Ae({appId:d.appId,appHost:d.host});try{i("success"),l("认证成功！正在获取用户信息...");try{const e={id:n,username:"用户",email:"",phone:"",nickname:"用户",avatar:"",authCode:n,state:c,loginTime:(new Date).toISOString()};localStorage.setItem("authing_user",JSON.stringify(e)),localStorage.setItem("authing_code",n),localStorage.setItem("authing_state",c),l("用户信息获取成功！正在跳转...")}catch(t){l("认证成功！正在跳转...")}setTimeout(()=>{e("/",{replace:!0})},1500)}catch(t){i("error"),l(`获取访问令牌失败: ${t instanceof Error?t.message:"未知错误"}`)}}catch(a){i("error"),l(`处理认证回调失败: ${a instanceof Error?a.message:"未知错误"}`)}})()},[s,t,e]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:["loading"===r&&a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),"success"===r&&a.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"error"===r&&a.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),a.jsxs("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:["loading"===r&&"处理中...","success"===r&&"认证成功","error"===r&&"认证失败"]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:n})]}),"error"===r&&a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"认证回调处理失败"}),a.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[a.jsx("p",{children:"请检查以下可能的原因："}),a.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[a.jsx("li",{children:"认证链接已过期"}),a.jsx("li",{children:"网络连接问题"}),a.jsx("li",{children:"认证服务暂时不可用"})]})]})]})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"重试"}),a.jsx("button",{onClick:()=>e("/"),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"返回首页"})]})]})]})})},Rs=f.forwardRef(({className:e,...s},t)=>a.jsx(u,{className:k("grid gap-2",e),...s,ref:t}));Rs.displayName=u.displayName;const Ls=f.forwardRef(({className:e,...s},t)=>a.jsx(p,{ref:t,className:k("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:a.jsx(g,{className:"flex items-center justify-center",children:a.jsx(Q,{className:"h-3.5 w-3.5 fill-primary"})})}));Ls.displayName=p.displayName;const Vs=()=>{var e;const[s,t]=f.useState("这是一段测试内容，用于检查API连接是否正常工作。希望能够顺利适配到各个平台。"),[r,i]=f.useState(!1),[n,l]=f.useState(null),[c,d]=f.useState({provider:"openai",model:"gpt-4o",available:!0}),[o,x]=f.useState(!1),[m,h]=f.useState("openai"),[j,u]=f.useState("gpt-4o"),[p,g]=f.useState("free"),{toast:v}=T();return a.jsxs(Ee,{children:[a.jsx(ke,{title:"API连接测试",description:"测试与AI API的连接情况，支持OpenAI、Google Gemini和DeepSeek",showAdaptButton:!1,actions:a.jsxs(S,{variant:"outline",children:[a.jsx(J,{className:"h-4 w-4 mr-2"}),"API配置"]})}),a.jsxs("div",{className:"container mx-auto py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"多模型 API 连接测试工具"}),a.jsx("p",{className:"text-gray-500 mb-8",children:"本页面用于测试与 AI API 的连接情况，支持 OpenAI、Google Gemini 和 DeepSeek，验证内容生成功能是否正常工作。"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"API 提供商选择"}),a.jsx(z,{children:"选择用于内容生成的 AI 模型提供商"})]}),a.jsx(F,{children:a.jsxs(Rs,{className:"flex flex-col space-y-4",value:m,onValueChange:e=>(e=>{h(e);const s={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[e]||[];s.length>0&&(u(s[0]),s[0]),v({title:"API 提供商已更改",description:`现在使用 ${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[e]} API`,variant:"default"}),d({provider:e,model:j,available:!0})})(e),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ls,{value:"openai",id:"openai"}),a.jsxs(me,{htmlFor:"openai",className:"flex items-center",children:[a.jsx("span",{className:"text-blue-600 font-semibold",children:"OpenAI"}),a.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(GPT-3.5/4系列)"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ls,{value:"deepseek",id:"deepseek"}),a.jsxs(me,{htmlFor:"deepseek",className:"flex items-center",children:[a.jsx("span",{className:"text-orange-600 font-semibold",children:"DeepSeek"}),a.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(DeepSeek系列)"}),a.jsxs(he,{variant:"secondary",className:"ml-2",children:[a.jsx(Y,{className:"h-3 w-3 mr-1"})," 新增"]})]})]})]})})]}),a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"API 连接状态"}),a.jsxs(z,{children:["检查与 ","openai"===m?"OpenAI":"gemini"===m?"Google Gemini":"DeepSeek"," API 的连接状态"]})]}),a.jsxs(F,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("span",{children:"当前状态:"}),c.available?a.jsxs(he,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[a.jsx(X,{className:"w-4 h-4 mr-1"})," 可用"]}):a.jsxs(he,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[a.jsx(Z,{className:"w-4 h-4 mr-1"})," 不可用"]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["提供商: ",c.provider]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["模型: ",c.model]})]}),a.jsx(q,{children:a.jsxs(S,{onClick:async()=>{x(!0);try{d({provider:m,model:j,available:!0}),v({title:"API连接正常",description:`成功连接到${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[m]} API`,variant:"default"})}catch(e){v({title:"API检查出错",description:e instanceof Error?e.message:"未知错误",variant:"destructive"})}finally{x(!1)}},disabled:o,children:[o&&a.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),"检查API连接"]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"用户计划"}),a.jsx(z,{children:"选择您的用户计划以确定可用模型"})]}),a.jsx(F,{children:a.jsxs(Rs,{className:"flex flex-col space-y-4",value:p,onValueChange:e=>(e=>{g(e);const s={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[m]||[];!s.includes(j)&&s.length>0&&(u(s[0]),s[0]),v({title:"用户计划已更改",description:`现在使用 ${"free"===e?"免费版":"专业版"} 权限`,variant:"default"})})(e),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ls,{value:"free",id:"free"}),a.jsxs(me,{htmlFor:"free",className:"flex items-center",children:[a.jsx("span",{className:"text-gray-600 font-semibold",children:"免费版"}),a.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(基础模型)"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ls,{value:"pro",id:"pro"}),a.jsxs(me,{htmlFor:"pro",className:"flex items-center",children:[a.jsx("span",{className:"text-blue-600 font-semibold",children:"专业版"}),a.jsx("span",{className:"ml-2 text-gray-500 text-sm",children:"(所有模型)"}),a.jsxs(he,{variant:"secondary",className:"ml-2",children:[a.jsx(Y,{className:"h-3 w-3 mr-1"})," 推荐"]})]})]})]})})]}),a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"AI 模型选择"}),a.jsx(z,{children:"选择适合您需求的AI模型"})]}),a.jsx(F,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs(je,{value:j,onValueChange:e=>{u(e),v({title:"模型已更改",description:`现在使用 ${e} 模型`,variant:"default"})},children:[a.jsx(ue,{children:a.jsx(pe,{placeholder:"选择模型"})}),a.jsx(ge,{children:null==(e={openai:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"],gemini:["gemini-pro","gemini-pro-vision"],deepseek:["deepseek-chat","deepseek-coder"]}[m])?void 0:e.map(e=>a.jsx(fe,{value:e,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:e}),a.jsx("span",{className:"text-xs text-gray-500",children:"模型描述"})]})},e))})]}),j&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:j}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"模型描述"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"适用场景:"}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.jsx(he,{variant:"outline",className:"text-xs",children:"通用场景"})})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"优势:"}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.jsx(he,{variant:"secondary",className:"text-xs",children:"性能优秀"})})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"最适合:"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"通用内容生成"})]})]})]})]})})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"内容生成测试"}),a.jsx(z,{children:"测试AI内容生成功能"})]}),a.jsx(F,{children:a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"testContent",className:"block text-sm font-medium text-gray-700 mb-1",children:"测试内容:"}),a.jsx(ve,{id:"testContent",value:s,onChange:e=>t(e.target.value),placeholder:"输入需要测试的内容...",className:"min-h-[100px]"})]})}),a.jsx(q,{children:a.jsxs(S,{onClick:async()=>{var e;if(s.trim()){i(!0),l(null);try{const t=(null==(e=(await(async e=>({results:[{platform:"zhihu",content:`模拟生成的内容 - ${e.substring(0,50)}...`,success:!0}]}))(s)).results)?void 0:e[0])||{content:"生成失败",error:"未知错误"},a="error"in t&&t.error;l({success:!a,content:t.content,error:a?t.error:void 0,platform:"platform"in t?t.platform:void 0,title:"title"in t?t.title:void 0,hashtags:"hashtags"in t?t.hashtags:void 0,suggestions:"suggestions"in t?t.suggestions:void 0}),v({title:a?"使用模拟内容":"内容生成成功",description:a?`使用了模拟内容: ${a||"API可能不可用"}`:`${{openai:"OpenAI",gemini:"Google Gemini",deepseek:"DeepSeek"}[m]} API成功生成内容`,variant:a?"destructive":"default"})}catch(t){v({title:"内容生成失败",description:t instanceof Error?t.message:"未知错误",variant:"destructive"})}finally{i(!1)}}else v({title:"内容不能为空",description:"请输入测试内容",variant:"destructive"})},disabled:r,className:"w-full",children:[r&&a.jsx(ee,{className:"mr-2 h-4 w-4 animate-spin"}),"测试内容生成"]})})]})}),n&&a.jsxs(V,{children:[a.jsxs(D,{children:[a.jsx(O,{children:"生成结果"}),a.jsxs(z,{children:["内容生成源: "," ","openai"===m?"OpenAI API":"gemini"===m?"Google Gemini API":"DeepSeek API",n.error&&a.jsxs("span",{className:"ml-2 text-red-500",children:["(错误: ",n.error,")"]})]})]}),a.jsx(F,{children:a.jsx("div",{className:"bg-gray-50 p-4 rounded-md whitespace-pre-wrap",children:n.content||"内容为空"})})]})]})]})};function Ds(){const{user:e,isAuthenticated:s,loading:t,error:r,login:i,logout:n}=R();return a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsx(O,{children:"认证状态测试"})}),a.jsxs(F,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"错误信息:"})," ",r||"无"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"是否已认证:"})," ",s?"是":"否"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"是否加载中:"})," ",t?"是":"否"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"按钮状态:"})," 已启用"]})]}),e&&a.jsxs("div",{className:"border rounded p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"用户信息:"}),a.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded",children:JSON.stringify(e,null,2)})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(S,{onClick:async()=>{try{i()}catch(e){}},children:"显示登录窗口"}),s&&a.jsx(S,{onClick:async()=>{try{await n()}catch(e){}},variant:"outline",children:"退出登录"})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("p",{children:"调试信息:"}),a.jsx("p",{children:'- 如果点击"显示登录窗口"没有反应，请检查浏览器控制台的错误信息'}),a.jsx("p",{children:"- 确保 Authing 配置正确，网络连接正常"}),a.jsx("p",{children:"- 使用 authing-js-sdk 的 AuthenticationClient"}),a.jsx("p",{children:"- 按钮状态: 已启用"})]})]})]})})}function Os(){const{user:e,isAuthenticated:s,loading:t,error:r}=R();return f.useEffect(()=>{},[r,s,e]),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsx(O,{children:"用户状态调试"})}),a.jsxs(F,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"错误信息:"})," ",r||"无"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"是否已认证:"})," ",s?"是":"否"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"是否加载中:"})," ",t?"是":"否"]})]}),e&&a.jsxs("div",{className:"border rounded p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"用户信息:"}),a.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto",children:JSON.stringify(e,null,2)})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(S,{onClick:async()=>{},children:"刷新认证状态"}),a.jsx(S,{onClick:async()=>{},variant:"outline",children:"测试 checkAuth"}),a.jsx(S,{onClick:()=>{localStorage.removeItem("authing_user"),localStorage.removeItem("authing_code"),localStorage.removeItem("authing_state"),window.location.reload()},variant:"destructive",children:"清除存储并刷新"})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("p",{children:"调试信息:"}),a.jsx("p",{children:"- 查看浏览器控制台的详细日志"}),a.jsx("p",{children:'- 点击"测试 getCurrentUser"查看原始用户数据'}),a.jsx("p",{children:"- 如果用户信息为空，可能需要重新登录"})]})]})]})})}function zs(){var e,s,t,r,i,n,l,c;const[d,o]=f.useState(0),x=R(),m=C();return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"认证状态测试页面"}),a.jsxs(S,{onClick:()=>{o(e=>e+1)},variant:"outline",children:[a.jsx(se,{className:"w-4 h-4 mr-2"}),"刷新状态"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(te,{className:"w-5 h-5"}),"AuthContext 状态"]})}),a.jsxs(F,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(he,{variant:x.isAuthenticated?"default":"secondary",children:x.isAuthenticated?"已认证":"未认证"}),x.loading&&a.jsx(he,{variant:"outline",children:"加载中"})]}),x.user?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户ID:"})," ",x.user.id]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户名:"})," ",x.user.username||"N/A"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"邮箱:"})," ",x.user.email||"N/A"]})]}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"无用户信息"})]})]}),a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(ae,{className:"w-5 h-5"}),"UnifiedAuth 状态"]})}),a.jsxs(F,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(he,{variant:x.isAuthenticated?"default":"secondary",children:x.isAuthenticated?"已认证":"未认证"}),x.loading&&a.jsx(he,{variant:"outline",children:"加载中"})]}),x.user?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户ID:"})," ",x.user.id]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户名:"})," ",x.user.username||"N/A"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"邮箱:"})," ",x.user.email||"N/A"]})]}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"无用户信息"})]})]}),a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(re,{className:"w-5 h-5"}),"Authing 状态"]})}),a.jsxs(F,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(he,{variant:m.isLoggedIn?"default":"secondary",children:m.isLoggedIn?"已登录":"未登录"}),m.loading&&a.jsx(he,{variant:"outline",children:"加载中"})]}),m.user?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户ID:"})," ",m.user.id]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"用户名:"})," ",m.user.username||"N/A"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"邮箱:"})," ",m.user.email||"N/A"]})]}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"无用户信息"})]})]})]}),a.jsxs(V,{children:[a.jsx(D,{children:a.jsx(O,{children:"状态对比分析"})}),a.jsxs(F,{children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsx("div",{className:"font-medium",children:"状态类型"}),a.jsx("div",{className:"font-medium",children:"AuthContext"}),a.jsx("div",{className:"font-medium",children:"UnifiedAuth"}),a.jsx("div",{className:"font-medium",children:"Authing"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsx("div",{children:"认证状态"}),a.jsx("div",{children:x.isAuthenticated?"✅":"❌"}),a.jsx("div",{children:x.isAuthenticated?"✅":"❌"}),a.jsx("div",{children:m.isLoggedIn?"✅":"❌"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsx("div",{children:"用户ID"}),a.jsx("div",{children:(null==(e=x.user)?void 0:e.id)||"N/A"}),a.jsx("div",{children:(null==(s=x.user)?void 0:s.id)||"N/A"}),a.jsx("div",{children:(null==(t=m.user)?void 0:t.id)||"N/A"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsx("div",{children:"加载状态"}),a.jsx("div",{children:x.loading?"⏳":"✅"}),a.jsx("div",{children:x.loading?"⏳":"✅"}),a.jsx("div",{children:m.loading?"⏳":"✅"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"问题诊断"}),a.jsxs("div",{className:"space-y-1 text-sm text-yellow-700",children:[x.isAuthenticated!==m.isLoggedIn&&a.jsx("div",{children:"⚠️ UnifiedAuth 和 Authing 认证状态不一致"}),(null==(r=x.user)?void 0:r.id)!==(null==(i=m.user)?void 0:i.id)&&a.jsx("div",{children:"⚠️ UnifiedAuth 和 Authing 用户ID不一致"}),"temp-user-id"===(null==(n=x.user)?void 0:n.id)&&a.jsx("div",{children:"⚠️ 正在使用临时用户ID，可能未正确登录"}),!x.isAuthenticated&&!m.isLoggedIn&&a.jsx("div",{children:"✅ 所有认证状态一致：用户未登录"}),x.isAuthenticated&&m.isLoggedIn&&(null==(l=x.user)?void 0:l.id)===(null==(c=m.user)?void 0:c.id)&&a.jsx("div",{children:"✅ 所有认证状态一致：用户已正确登录"})]})]})]})]}),a.jsxs(V,{children:[a.jsx(D,{children:a.jsx(O,{children:"测试操作"})}),a.jsx(F,{className:"space-y-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(S,{onClick:()=>x.refreshUser(),variant:"outline",children:"刷新 UnifiedAuth 用户信息"}),a.jsx(S,{onClick:()=>m.checkLoginStatus(),variant:"outline",children:"检查 Authing 登录状态"}),a.jsx(S,{onClick:()=>m.getCurrentUser(),variant:"outline",children:"获取 Authing 当前用户"})]})})]})]})}const Fs=()=>{const[e,s]=f.useState(!1),[t,a]=f.useState("info");let r={user:null,isAuthenticated:!1};try{const{user:e,isAuthenticated:s}=R();r={user:e,isAuthenticated:s}}catch(n){}let i={hasRole:e=>!1,loading:!1};try{const{hasRole:e,loading:s}=U();i={hasRole:e,loading:s}}catch(n){}return null};function qs(){const[e]=y(),s=N(),{toast:t}=T(),{user:r}=R(),[i,n]=f.useState(null),[l,c]=f.useState(!0),[d,o]=f.useState(!1),x=e.get("orderId"),m=e.get("trade_no"),h=e.get("payment_method");f.useEffect(()=>{(async()=>{try{c(!0),x||m&&n({orderId:m,status:"success",amount:e.get("total_amount")||"0",currency:e.get("currency")||"CNY",paymentMethod:h||"unknown",planId:e.get("plan_id")||"pro",createdAt:(new Date).toISOString()}),await j()}catch(s){t({title:"加载订单信息失败",description:"请稍后重试",variant:"destructive"})}finally{c(!1)}})()},[x,m,h,e]);const j=async()=>{try{o(!0),t({title:"用户信息已更新",description:"您的订阅状态已同步"})}catch(e){}finally{o(!1)}};if(l)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"正在处理支付结果..."})]})});const u=i?(p=i.planId,M.find(e=>e.id===p)):null;var p;const g=r?r.isVip||r.isProUser?{status:"active",text:"已激活",color:"green"}:{status:"pending",text:"处理中",color:"yellow"}:{status:"unknown",text:"未知",color:"gray"};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 py-16",children:a.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ie,{className:"w-12 h-12 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"支付成功！"}),a.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"感谢您的订阅，我们正在为您激活相关功能"})]}),i&&a.jsxs(V,{className:"mb-8",children:[a.jsx(D,{children:a.jsx(O,{className:"flex items-center gap-2",children:"订单详情"})}),a.jsx(F,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"订单号："}),a.jsx("span",{className:"font-mono text-sm",children:i.orderId})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"支付金额："}),a.jsx("span",{className:"font-bold text-green-600"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"支付方式："}),a.jsx("span",{})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"支付时间："}),a.jsx("span",{children:new Date(i.createdAt).toLocaleString("zh-CN")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"订阅计划："}),a.jsxs("div",{className:"flex items-center gap-2",children:["premium"===(null==u?void 0:u.tier)&&a.jsx(ne,{className:"w-4 h-4 text-yellow-500"}),"pro"===(null==u?void 0:u.tier)&&a.jsx(le,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"font-semibold",children:(null==u?void 0:u.name)||"未知计划"})]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"订阅状态："}),a.jsx(he,{variant:"green"===g.color?"default":"secondary",children:g.text})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户ID："}),a.jsx("span",{className:"font-mono text-sm",children:(null==r?void 0:r.id)||"未知"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户名："}),a.jsx("span",{children:(null==r?void 0:r.nickname)||(null==r?void 0:r.username)||"未知"})]})]})]})})]}),u&&a.jsxs(V,{className:"mb-8",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-5 h-5"}),"订阅计划详情"]})}),a.jsx(F,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:["premium"===u.tier&&a.jsx(ne,{className:"w-6 h-6 text-yellow-600"}),"pro"===u.tier&&a.jsx(le,{className:"w-6 h-6 text-purple-600"}),a.jsx("h3",{className:"text-xl font-semibold",children:u.name}),u.recommended&&a.jsx(he,{className:"bg-blue-500",children:"推荐"})]}),a.jsx("p",{className:"text-gray-600",children:u.description}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"功能限制"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("li",{children:["AI内容适配器：",-1===u.limits.adaptUsageLimit?"不限次数":`${u.limits.adaptUsageLimit}次/月`]}),a.jsxs("li",{children:["Token限制：",u.limits.tokenLimit.toLocaleString()]}),a.jsxs("li",{children:["可用模型：",u.limits.availableModels.join(", ")]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"可用功能"}),a.jsx("ul",{className:"space-y-1 text-sm text-gray-600",children:u.limits.availableFeatures.map((e,s)=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),e]},s))})]})]})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(S,{onClick:()=>s("/"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:"返回首页"}),a.jsxs(S,{onClick:()=>s("/profile"),variant:"outline",className:"flex items-center gap-2",children:[a.jsx(ae,{className:"w-4 h-4"}),"个人中心"]}),a.jsxs(S,{onClick:j,variant:"outline",disabled:d,className:"flex items-center gap-2",children:[d?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):a.jsx(ce,{className:"w-4 h-4"}),"刷新状态"]})]}),a.jsx("div",{className:"mt-12 text-center",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 max-w-2xl mx-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"温馨提示"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-2 text-left",children:[a.jsx("li",{children:"• 您的订阅已成功激活，可以立即使用所有相关功能"}),a.jsx("li",{children:"• 如果功能未立即生效，请尝试刷新页面或等待几分钟"}),a.jsx("li",{children:"• 订阅到期前我们会通过邮件提醒您续费"}),a.jsx("li",{children:"• 如有任何问题，请联系我们的客服团队"})]})]})}),a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"接下来您可以："}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"体验AI内容适配器"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"使用AI技术为不同平台优化内容"}),a.jsx(S,{size:"sm",onClick:()=>s("/adapt"),className:"w-full",children:"开始使用"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"探索创意魔方"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"生成创意内容和营销素材"}),a.jsx(S,{size:"sm",onClick:()=>s("/creative"),className:"w-full",children:"创意工具"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"查看使用统计"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"了解您的使用情况和剩余额度"}),a.jsx(S,{size:"sm",onClick:()=>s("/profile"),className:"w-full",children:"个人中心"})]})]})]})]})})}function Us(e={}){const{autoCheck:s=!0,enableSecurityLog:t=!0,vipRoleCode:a="vip",adminRoleCode:r="admin"}=e,[i,n]=f.useState([]),[l,c]=f.useState([]),[d,o]=f.useState(!0),[x,m]=f.useState(null),{getCurrentUser:h}=C(),{toast:j}=T(),u=f.useCallback((e,s,a="info")=>{t&&G.secureLog(e,s,a)},[t]),p=f.useCallback(e=>l.includes(e),[l]),g=f.useCallback(e=>e.some(e=>l.includes(e)),[l]),v=f.useCallback(e=>e.every(e=>l.includes(e)),[l]),N=f.useCallback(e=>i.find(s=>s.code===e),[i]),y=f.useCallback(async()=>{try{o(!0),m(null),u("开始刷新用户角色");const e=await h();if(!e)throw new Error("用户未登录");const s=[];if(s&&Array.isArray(s)){const t=s.map(e=>({id:String(e.id||""),name:String(e.name||""),description:String(e.description||""),code:String(e.code||""),createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString(),...e})),a=t.map(e=>e.code);n(t),c(a),u("用户角色刷新成功",{userId:e.id,roleCount:t.length,roleCodes:a}),j({title:"角色信息已更新",description:`您当前拥有 ${t.length} 个角色`})}else n([]),c([]),u("用户无角色信息")}catch(e){const s=e instanceof Error?e.message:"刷新角色失败";m(s),u("刷新用户角色失败",{error:s,timestamp:(new Date).toISOString()},"error"),j({title:"角色刷新失败",description:s,variant:"destructive"})}finally{o(!1)}},[h,u,j]),b=p(a),w=p(r),_=!b&&!w;return f.useEffect(()=>{s&&y()},[s,y]),{roles:i,roleCodes:l,loading:d,error:x,hasRole:p,hasAnyRole:g,hasAllRoles:v,refreshRoles:y,getRoleInfo:N,isVip:b,isAdmin:w,isNormalUser:_}}function Ms(){const[e,s]=f.useState(!1),[t,a]=f.useState(!0),[r,i]=f.useState(!0),[n,l]=f.useState(null),{getCurrentUser:c}=C();return f.useEffect(()=>{(async()=>{try{if(i(!0),!(await c()))throw new Error("用户未登录");const e=[];e&&Array.isArray(e)&&e.map(e=>String(e.code||"")).includes("vip")?(s(!0),a(!1)):(s(!1),a(!0))}catch(e){l(e instanceof Error?e.message:"检查角色失败"),s(!1),a(!0)}finally{i(!1)}})()},[c]),{isVip:e,isNormalUser:t,loading:r,error:n}}function Gs(){const{roles:e,roleCodes:s,hasRole:t,hasAnyRole:a,hasAllRoles:r}=Us(),i=f.useCallback(()=>a(["admin","editor","vip"]),[a]),n=f.useCallback(()=>a(["admin","super_admin"]),[a]),l=f.useCallback(()=>a(["admin","editor","viewer","vip","normal"]),[a]),c=f.useCallback(()=>a(["admin","super_admin","manager"]),[a]);return{roles:e,roleCodes:s,hasRole:t,hasAnyRole:a,hasAllRoles:r,canEdit:i,canDelete:n,canView:l,canManage:c}}function Ks(){const e=N(),{toast:s}=T(),{user:t,isAuthenticated:r,login:i}=R(),{user:n,isAuthenticated:l}=Pe(),{showLogin:c}=C(),d=n||t,o=l||r,{isVip:x,isAdmin:m,roles:h,loading:j,refreshRoles:u}=Us({autoCheck:!0,enableSecurityLog:!0,vipRoleCode:"vip"}),[p,g]=f.useState(!1),[v,y]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{if(y(!0),G.secureLog("开始检查VIP访问权限"),!o||!d)return G.secureLog("用户未登录，重定向到登录页面"),s({title:"需要登录",description:"请先登录后再访问VIP页面",variant:"destructive"}),void c();if(j)return;if(!x&&!m)return G.secureLog("非VIP用户尝试访问VIP页面",{userId:d.id,roles:h},"error"),s({title:"访问被拒绝",description:"此页面仅限VIP用户访问，请升级您的账户",variant:"destructive"}),void setTimeout(()=>{e("/payment")},2e3);g(!0),G.secureLog("VIP用户访问权限验证通过",{userId:d.id,roles:h,isVip:x,isAdmin:m}),s({title:"欢迎VIP用户",description:"您已成功访问VIP专属页面"})}catch(t){G.secureLog("VIP权限检查失败",{error:t instanceof Error?t.message:"未知错误",userId:null==d?void 0:d.id},"error"),s({title:"权限检查失败",description:"请稍后重试或联系客服",variant:"destructive"})}finally{y(!1)}})()},[r,t,x,m,h,j,e,s]),v||j?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"正在验证VIP权限..."})]})}):p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 py-16",children:a.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ne,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"VIP专属页面"}),a.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"欢迎尊贵的VIP用户，这里是您的专属功能区域"}),a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsxs(he,{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:[a.jsx(ne,{className:"w-3 h-3 mr-1"}),"VIP用户"]}),m&&a.jsxs(he,{className:"bg-red-600 text-white",children:[a.jsx(te,{className:"w-3 h-3 mr-1"}),"管理员"]}),a.jsxs(S,{variant:"outline",size:"sm",onClick:async()=>{try{await u(),s({title:"角色信息已刷新",description:"您的权限状态已更新"})}catch(e){s({title:"刷新失败",description:"请稍后重试",variant:"destructive"})}},disabled:j,children:[a.jsx(ce,{className:"w-3 h-3 mr-1"}),"刷新权限"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[a.jsxs(V,{className:"border-2 border-purple-200 hover:border-purple-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(Y,{className:"w-5 h-5 text-purple-600"}),"无限AI调用"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"享受无限制的AI内容生成和适配功能，提升您的工作效率。"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{children:"已激活"})]})]})]}),a.jsxs(V,{className:"border-2 border-blue-200 hover:border-blue-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(le,{className:"w-5 h-5 text-blue-600"}),"高级模型"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"使用最新的AI模型，获得更高质量的内容生成结果。"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{children:"已激活"})]})]})]}),a.jsxs(V,{className:"border-2 border-green-200 hover:border-green-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(de,{className:"w-5 h-5 text-green-600"}),"专属客服"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"享受7×24小时专属客服支持，快速解决您的问题。"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{children:"已激活"})]})]})]}),a.jsxs(V,{className:"border-2 border-yellow-200 hover:border-yellow-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(oe,{className:"w-5 h-5 text-yellow-600"}),"数据分析"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"查看详细的使用统计和数据分析报告。"}),a.jsx(S,{size:"sm",variant:"outline",children:"查看报告"})]})]}),a.jsxs(V,{className:"border-2 border-red-200 hover:border-red-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(J,{className:"w-5 h-5 text-red-600"}),"高级设置"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"自定义AI参数和高级配置选项。"}),a.jsx(S,{size:"sm",variant:"outline",children:"配置设置"})]})]}),a.jsxs(V,{className:"border-2 border-indigo-200 hover:border-indigo-300 transition-all",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(xe,{className:"w-5 h-5 text-indigo-600"}),"优先处理"]})}),a.jsxs(F,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"享受优先处理队列，快速获得AI生成结果。"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{children:"已激活"})]})]})]})]}),a.jsxs(V,{className:"mb-8",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-5 h-5 text-purple-600"}),"VIP用户信息"]})}),a.jsx(F,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户ID："}),a.jsx("span",{className:"font-mono text-sm",children:null==t?void 0:t.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户名："}),a.jsx("span",{children:(null==t?void 0:t.nickname)||(null==t?void 0:t.username)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"邮箱："}),a.jsx("span",{children:(null==t?void 0:t.email)||"未设置"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"手机："}),a.jsx("span",{children:(null==t?void 0:t.phone)||"未设置"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"VIP状态："}),a.jsx(he,{className:"bg-green-600",children:"已激活"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户角色："}),a.jsx("div",{className:"flex gap-1",children:h.map((e,s)=>a.jsx(he,{variant:"outline",className:"text-xs",children:"string"==typeof e?e:e.name||e.code},s))})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"权限级别："}),a.jsx("span",{className:"font-semibold",children:m?"管理员":"VIP用户"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"最后更新："}),a.jsx("span",{className:"text-sm",children:(new Date).toLocaleString("zh-CN")})]})]})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(S,{onClick:()=>e("/adapt"),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[a.jsx(Y,{className:"w-4 h-4"}),"开始使用AI功能"]}),a.jsxs(S,{onClick:()=>e("/creative"),variant:"outline",className:"flex items-center gap-2",children:[a.jsx(le,{className:"w-4 h-4"}),"创意工作室"]}),a.jsxs(S,{onClick:()=>e("/profile"),variant:"outline",className:"flex items-center gap-2",children:[a.jsx(J,{className:"w-4 h-4"}),"个人设置"]})]}),a.jsx("div",{className:"mt-12",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-5 h-5 text-purple-600"}),"VIP特权说明"]})}),a.jsx(F,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-600",children:"功能特权"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"无限制AI内容生成"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"高级AI模型访问"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"优先处理队列"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"专属客服支持"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-blue-600",children:"服务特权"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"7×24小时技术支持"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"专属功能优先体验"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"个性化定制服务"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"高级数据分析报告"]})]})]})]})})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-50",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Z,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"访问被拒绝"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"此页面仅限VIP用户访问，请升级您的账户以享受专属功能。"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(S,{onClick:()=>e("/payment"),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[a.jsx(ne,{className:"w-4 h-4 mr-2"}),"立即升级VIP"]}),a.jsx(S,{variant:"outline",onClick:()=>e("/"),className:"w-full",children:"返回首页"})]})]})})}function $s({children:e,redirectTo:s="/payment",showUpgradePrompt:t=!0,customCheck:r,onAccessDenied:i,onAccessGranted:n,enableSecurityLog:l=!0,vipRoleCode:c="vip"}){const d=N(),{toast:o}=T(),{user:x,isAuthenticated:m,login:h}=R(),{user:j,isAuthenticated:u}=Pe(),{showLogin:p}=C(),g=j||x,v=u||m,{isVip:y,isAdmin:b,roles:w,loading:_}=Us({autoCheck:!0,enableSecurityLog:l,vipRoleCode:c}),[A,P]=f.useState(!1),[I,E]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{if(E(!0),l&&G.secureLog("开始VIP权限检查",{userId:null==g?void 0:g.id,isAuthenticated:v}),!v||!g)return l&&G.secureLog("用户未登录，重定向到登录页面"),o({title:"需要登录",description:"请先登录后再访问此功能",variant:"destructive"}),void p();if(_)return;if(!(r?r(y,b):y||b))return l&&G.secureLog("非VIP用户尝试访问VIP功能",{userId:g.id,roles:w,isVip:y,isAdmin:b},"error"),null==i||i(),void(t?(o({title:"需要VIP权限",description:"此功能仅限VIP用户使用，请升级您的账户",variant:"destructive"}),setTimeout(()=>{d(s)},2e3)):d(s));P(!0),l&&G.secureLog("VIP权限检查通过",{userId:g.id,roles:w,isVip:y,isAdmin:b}),null==n||n()}catch(e){l&&G.secureLog("VIP权限检查失败",{error:e instanceof Error?e.message:"未知错误",userId:null==g?void 0:g.id},"error"),o({title:"权限检查失败",description:"请稍后重试或联系客服",variant:"destructive"})}finally{E(!1)}})()},[v,g,y,b,w,_,d,o,s,t,r,i,n,l]),I||_?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-blue-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"正在验证VIP权限..."})]})}):!A&&t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-50",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Z,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"需要VIP权限"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"此功能仅限VIP用户使用，请升级您的账户以享受专属功能。"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(S,{onClick:()=>d(s),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:opacity-90",children:[a.jsx(ne,{className:"w-4 h-4 mr-2"}),"立即升级VIP"]}),a.jsx(S,{variant:"outline",onClick:()=>d("/"),className:"w-full",children:"返回首页"})]})]})}):A?a.jsx(a.Fragment,{children:e}):null}function Bs(){const{toast:e}=T(),{user:s,isAuthenticated:t}=R(),{isVip:r,isAdmin:i,roles:n,loading:l,error:c,refreshRoles:d}=Us({autoCheck:!0,enableSecurityLog:!0}),{hasVIPAccess:o}=function(e="vip"){const{isVip:s,isAdmin:t,loading:a}=Us({autoCheck:!0,enableSecurityLog:!0,vipRoleCode:e});return{hasVIPAccess:s||t,isVip:s,isAdmin:t,loading:a}}(),[x,m]=f.useState([]),h=(e,s,t)=>{m(a=>[...a,{id:Date.now(),test:e,result:s,details:t,timestamp:(new Date).toISOString()}])};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 py-16",children:a.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ne,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"VIP功能测试页面"}),a.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"测试VIP权限检查、角色管理和安全日志功能"})]}),a.jsxs(V,{className:"mb-8",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(te,{className:"w-5 h-5"}),"用户状态信息"]})}),a.jsx(F,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"登录状态："}),a.jsx(he,{variant:t?"default":"secondary",children:t?"已登录":"未登录"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户ID："}),a.jsx("span",{className:"font-mono text-sm",children:(null==s?void 0:s.id)||"未登录"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户名："}),a.jsx("span",{children:(null==s?void 0:s.nickname)||(null==s?void 0:s.username)||"未登录"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"邮箱："}),a.jsx("span",{children:(null==s?void 0:s.email)||"未设置"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"VIP状态："}),a.jsx(he,{variant:r?"default":"secondary",children:r?"VIP用户":"普通用户"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"管理员："}),a.jsx(he,{variant:i?"default":"secondary",children:i?"是":"否"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"VIP权限："}),a.jsx(he,{variant:o?"default":"secondary",children:o?"有权限":"无权限"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"用户角色："}),a.jsx("div",{className:"flex gap-1",children:n.map((e,s)=>a.jsx(he,{variant:"outline",className:"text-xs",children:"string"==typeof e?e:e.name||e.code},s))})]})]})]})})]}),a.jsxs(Ne,{defaultValue:"vip-guard",className:"mb-8",children:[a.jsxs(ye,{className:"grid w-full grid-cols-3",children:[a.jsx(be,{value:"vip-guard",children:"VIP权限保护"}),a.jsx(be,{value:"role-test",children:"角色测试"}),a.jsx(be,{value:"security-test",children:"安全测试"})]}),a.jsx(we,{value:"vip-guard",className:"space-y-6",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(ne,{className:"w-5 h-5"}),"VIP权限保护组件测试"]})}),a.jsxs(F,{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"测试VIP权限保护组件的各种功能，包括权限检查、重定向和升级提示。"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"完整VIP保护"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"包含权限检查、升级提示和重定向功能"}),a.jsx($s,{redirectTo:"/payment",showUpgradePrompt:!0,onAccessGranted:()=>{e({title:"权限验证通过",description:"您拥有访问此功能的权限"})},onAccessDenied:()=>{e({title:"权限被拒绝",description:"您没有访问此功能的权限",variant:"destructive"})},children:a.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"VIP权限验证通过，此内容仅VIP用户可见"})]})})})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"简化VIP保护"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"仅进行权限检查，无升级提示"}),a.jsx($s,{redirectTo:"/payment",showUpgradePrompt:!1,children:a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[a.jsx(ie,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"简化权限验证通过"})]})})})]})]})]})]})}),a.jsx(we,{value:"role-test",className:"space-y-6",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(de,{className:"w-5 h-5"}),"角色管理测试"]})}),a.jsxs(F,{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"测试用户角色获取、刷新和权限检查功能。"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(S,{onClick:()=>{try{const s=n.map(e=>"string"==typeof e?e:e.code),t=function(e,s="vip"){return e.includes(s)||e.includes("admin")}(s,"vip");h("VIP权限检查",t,{roles:s,expectedRole:"vip"}),e({title:t?"权限检查通过":"权限检查失败",description:t?"您拥有VIP权限":"您没有VIP权限",variant:t?"default":"destructive"})}catch(s){h("VIP权限检查",!1,{error:s instanceof Error?s.message:"未知错误"})}},disabled:l,className:"flex items-center gap-2",children:[a.jsx(te,{className:"w-4 h-4"}),"测试VIP权限检查"]}),a.jsxs(S,{onClick:async()=>{try{await d(),h("角色刷新",!0,{roles:n}),e({title:"角色刷新成功",description:"用户角色信息已更新"})}catch(s){h("角色刷新",!1,{error:s instanceof Error?s.message:"未知错误"}),e({title:"角色刷新失败",description:"请稍后重试",variant:"destructive"})}},disabled:l,className:"flex items-center gap-2",children:[a.jsx(se,{className:"w-4 h-4"}),"刷新角色信息"]})]}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(Z,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["错误: ",c]})]})})]})]})}),a.jsx(we,{value:"security-test",className:"space-y-6",children:a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(te,{className:"w-5 h-5"}),"安全功能测试"]})}),a.jsxs(F,{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"测试安全日志记录和权限验证功能。"}),a.jsxs(S,{onClick:()=>{try{G.secureLog("VIP测试页面安全日志测试",{userId:null==s?void 0:s.id,isVip:r,isAdmin:i,roles:n,timestamp:(new Date).toISOString()}),h("安全日志",!0,{message:"安全日志记录成功"}),e({title:"安全日志测试",description:"安全日志记录成功"})}catch(t){h("安全日志",!1,{error:t instanceof Error?t.message:"未知错误"})}},className:"flex items-center gap-2",children:[a.jsx(te,{className:"w-4 h-4"}),"测试安全日志"]})]})]})})]}),a.jsxs(V,{children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Y,{className:"w-5 h-5"}),"测试结果"]}),a.jsx(S,{variant:"outline",size:"sm",onClick:()=>{m([])},children:"清除结果"})]})}),a.jsx(F,{children:0===x.length?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"暂无测试结果"}):a.jsx("div",{className:"space-y-3",children:x.map(e=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border "+(e.result?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[e.result?a.jsx(ie,{className:"w-4 h-4 text-green-600"}):a.jsx(Z,{className:"w-4 h-4 text-red-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.test}),e.details&&a.jsx("div",{className:"text-sm text-gray-600",children:"object"==typeof e.details?JSON.stringify(e.details,null,2):e.details})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})})]}),a.jsxs(V,{className:"mt-8",children:[a.jsx(D,{children:a.jsxs(O,{className:"flex items-center gap-2",children:[a.jsx(J,{className:"w-5 h-5"}),"使用说明"]})}),a.jsx(F,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-600",children:"VIP权限保护组件"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"自动检查用户VIP权限"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"支持自定义重定向路径"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"可配置升级提示显示"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"支持权限检查回调"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-blue-600",children:"角色管理功能"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"实时获取用户角色"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"支持角色刷新"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"权限状态管理"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-4 h-4 text-green-500"}),"安全日志记录"]})]})]})]})})]})]})})}const Hs=b.lazy(()=>E(()=>import("./pages-adapt-BAX30gfz.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ws=b.lazy(()=>E(()=>import("./InvitePage-BWHnYWR9.js"),__vite__mapDeps([12,1,2,3,5,6,4,8,7,0,9,10,11]))),Qs=b.lazy(()=>E(()=>import("./pages-brand-Be4bUKpb.js").then(e=>e.B),__vite__mapDeps([7,1,2,3,5,6,4,8,11,0,9,10]))),Js=b.lazy(()=>E(()=>import("./pages-hot-topics-DladIUhZ.js").then(e=>e.H),__vite__mapDeps([13,1,2,3,5,6,4,8,7,0,9,10,11]))),Ys=b.lazy(()=>E(()=>import("./HotTopicDetailPage-CZXQ7Pal.js"),__vite__mapDeps([14,1,2,3,5,6,4,8,7,0,9,10,11,13]))),Xs=b.lazy(()=>E(()=>import("./PaymentPage-DwiteJkK.js"),__vite__mapDeps([15,1,2,3,5,6,4,8,7,0,9,10,11,16,17,18]))),Zs=b.lazy(()=>E(()=>import("./ProfilePage-BRuMsZip.js"),__vite__mapDeps([19,1,2,3,5,6,4,8,7,0,9,10,11]))),et=b.lazy(()=>E(()=>import("./SettingsPage-Dxt1dUcI.js"),__vite__mapDeps([20,1,2,3,5,6,4,8,7,0,9,10,11,13]))),st=b.lazy(()=>E(()=>import("./UserDataPage-DhHYId0B.js"),__vite__mapDeps([21,1,2,3,5,6,4,8,7,0,9,10,11]))),tt=b.lazy(()=>E(()=>import("./UserProfilePage-QTLC2JEI.js"),__vite__mapDeps([22,1,2,3,5,6,4,8,7,0,9,10,11,23,13]))),at=b.lazy(()=>E(()=>import("./UserProfileTestPage-Do7FNzQW.js"),__vite__mapDeps([24,1,2,3,5,6,4,8,7,0,9,10,11,23,13]))),rt=b.lazy(()=>E(()=>import("./LoginButtonTestPage-DWKoafTN.js"),__vite__mapDeps([25,1,2,3,5,6,4,8,7,0,9,10,11]))),it=b.lazy(()=>E(()=>import("./AuthingStatusTestPage-DFX8cI8Z.js"),__vite__mapDeps([26,1,2,3,5,6,4,8,7,0,9,10,11,13,27]))),nt=b.lazy(()=>E(()=>import("./LogoutButtonTestPage-zoqY0O5u.js"),__vite__mapDeps([28,1,2,3,5,6,4,8,7,0,9,10,11,13,27,29]))),lt=b.lazy(()=>E(()=>import("./UserEditFormTestPage-CqbbCKIM.js"),__vite__mapDeps([30,1,2,3,5,6,4,8,7,0,9,10,11,13,27,29,31]))),ct=b.lazy(()=>E(()=>import("./PrivacyPage-WS9gB3eP.js"),__vite__mapDeps([32,1,2,3,5,6,4,8,7,0,9,10,11]))),dt=b.lazy(()=>E(()=>import("./TermsPage-EWVPGeJU.js"),__vite__mapDeps([33,1,2,3,5,6,4,8,7,0,9,10,11]))),ot=b.lazy(()=>E(()=>import("./ChangelogPage-O1QLJy0M.js"),__vite__mapDeps([34,1,2,3,5,6,4,8,7,0,9,10,11]))),xt=b.lazy(()=>E(()=>import("./HistoryPage-V_UKan5f.js"),__vite__mapDeps([35,1,2,3,5,6,4,8,7,0,9,10,11]))),mt=b.lazy(()=>E(()=>import("./pages-library-CfE-hwoA.js"),__vite__mapDeps([36,1,2,3,5,6,4,8,7,0,9,10,11]))),ht=b.lazy(()=>E(()=>import("./pages-creative-D2ODgwsq.js").then(e=>e.W),__vite__mapDeps([37,1,2,3,0,4,5,6,7,8,9,10,11,38,31]))),jt=b.lazy(()=>E(()=>import("./TestNewFeaturesPage-2ujtuVFi.js"),__vite__mapDeps([39,1,2,3,5,6,4,8,7,0,9,10,11]))),ut=b.lazy(()=>E(()=>import("./pages-content-extractor-Caq7DiWW.js").then(e=>e.C),__vite__mapDeps([10,1,2,3,5,6,4,8,7,0,9,11]))),pt=b.lazy(()=>E(()=>import("./pages-creative-D2ODgwsq.js").then(e=>e.C),__vite__mapDeps([37,1,2,3,0,4,5,6,7,8,9,10,11,38,31]))),gt=b.lazy(()=>E(()=>import("./pages-share-Cv_LcOpU.js"),__vite__mapDeps([40,1,2,3,5,6,4,8,7,0,9,10,11]))),ft=b.lazy(()=>E(()=>import("./pages-emoji-BwD1Fn_e.js").then(e=>e.a),__vite__mapDeps([31,1,2,3,5,6,4,8,7,0,9,10,11]))),vt=b.lazy(()=>E(()=>import("./AboutPage-CjN2kg30.js"),__vite__mapDeps([41,1,2,3,5,6,4,8,7,0,9,10,11]))),Nt=b.lazy(()=>E(()=>import("./TestPage-DRgWR1hi.js"),__vite__mapDeps([42,1,2,3,9,10,5,6,4,8,7,0,11]))),yt=b.lazy(()=>E(()=>import("./AITestPage-C0NZavwJ.js"),__vite__mapDeps([43,1,2,3,5,6,4,8,7,0,9,10,11]))),bt=b.lazy(()=>E(()=>import("./ReferrerTestPage-BVyUhmqf.js"),__vite__mapDeps([44,1,2,3,5,6,4,8,7,0,9,10,11]))),wt=b.lazy(()=>E(()=>import("./UnifiedAuthTestPage-Dajoiozq.js"),__vite__mapDeps([45,1,2,3,5,6,4,8,7,0,9,10,11]))),_t=b.lazy(()=>E(()=>import("./ArchitectureTestPage-8nq0n8LX.js"),__vite__mapDeps([46,1,2,3,5,6,4,8,7,0,9,10,11,13]))),At=b.lazy(()=>E(()=>import("./AuthingSystemTestPage-BPLlqBBk.js"),__vite__mapDeps([47,1,2,3,5,6,4,8,7,0,9,10,11]))),Pt=b.lazy(()=>E(()=>import("./AuthingLoginTestPage-DOkVeoPr.js"),__vite__mapDeps([48,1,2,3,5,6,4,8,7,0,9,10,11]))),It=b.lazy(()=>E(()=>import("./AuthingSDKTestPage-BtVy6l7Z.js"),__vite__mapDeps([49,1,2,3,5,6,4,8,7,0,9,10,11,13]))),Et=b.lazy(()=>E(()=>import("./FunctionalityTestPage-C_hJOhlp.js"),__vite__mapDeps([50,1,2,3,5,6,4,8,7,0,9,10,11,51]))),kt=b.lazy(()=>E(()=>import("./APIConfigTestPage-jQJgaadc.js"),__vite__mapDeps([52,1,2,3,5,6,4,8,7,0,9,10,11]))),Tt=b.lazy(()=>E(()=>import("./CreemAPITestPage-BoybquP7.js"),__vite__mapDeps([53,1,2,3,5,6,4,8,7,0,9,10,11,17,18]))),St=b.lazy(()=>E(()=>import("./QRCodeTestPage-fkMrDC4U.js"),__vite__mapDeps([54,1,2,3]))),Ct=b.lazy(()=>E(()=>import("./SimpleQRTestPage-BSe_r8q3.js"),__vite__mapDeps([55,1,2,3]))),Rt=b.lazy(()=>E(()=>import("./CheckoutTestPage-B4nQogqd.js"),__vite__mapDeps([56,1,2,3,5,6,4,8,7,0,9,10,11,13,16,17,18]))),Lt=b.lazy(()=>E(()=>import("./DirectLinkQRCodeTestPage-Dx2WCg-p.js"),__vite__mapDeps([57,1,2,3,5,6,4,8,7,0,9,10,11,13,58,18]))),Vt=b.lazy(()=>E(()=>import("./SimpleQRCodePage-ClR9cJbe.js"),__vite__mapDeps([59,1,2,3,5,6,4,8,7,0,9,10,11,58,18]))),Dt=b.lazy(()=>E(()=>import("./CreemAPIFixTestPage-DXhy8iDr.js"),__vite__mapDeps([60,1,2,3,5,6,4,8,7,0,9,10,11,17,18]))),Ot=b.lazy(()=>E(()=>import("./SimpleCreemTestPage-B2pR7wW3.js"),__vite__mapDeps([61,1,2,3,5,6,4,8,7,0,9,10,11,17,18]))),zt=b.lazy(()=>E(()=>import("./CreemDebugPage-BPMzoKOQ.js"),__vite__mapDeps([62,1,2,3,5,6,4,8,7,0,9,10,11,51]))),Ft=b.lazy(()=>E(()=>import("./AlipayQRCodeDemoPage-DLg6ntL6.js"),__vite__mapDeps([63,1,2,3,5,6,4,8,7,0,9,10,11,13,16,17,18]))),qt=b.lazy(()=>E(()=>import("./PaymentPlanDemoPage-DaxRX4Wl.js"),__vite__mapDeps([64,1,2,3,5,6,4,8,7,0,9,10,11,13,16,17,18]))),Ut=b.lazy(()=>E(()=>import("./PaymentFlowTestPage-De35fBoj.js"),__vite__mapDeps([65,1,2,3,5,6,4,8,7,0,9,10,11,13,16,17,18]))),Mt=b.lazy(()=>E(()=>import("./PaymentTestPage-FX7PxDcg.js"),__vite__mapDeps([66,1,2,3,5,6,4,8,7,0,9,10,11,16,17,18]))),Gt=b.lazy(()=>E(()=>import("./TestNavigationPage-CAzBOG62.js"),__vite__mapDeps([67,1,2,3,5,6,4,8,7,0,9,10,11]))),Kt=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"加载中..."})]})}),$t=()=>{const{initializeUserData:e,saveReferrer:s}=$();return f.useEffect(()=>{e(),s()},[e,s]),a.jsxs("div",{children:[a.jsx(Te,{}),a.jsxs(_,{children:[a.jsx(A,{path:"/",element:a.jsx(B,{})}),a.jsx(A,{path:"/privacy",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ct,{})})}),a.jsx(A,{path:"/terms",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(dt,{})})}),a.jsx(A,{path:"/changelog",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ot,{})})}),a.jsx(A,{path:"/login",element:a.jsx(Es,{})}),a.jsx(A,{path:"/login-register",element:a.jsx(ks,{})}),a.jsx(A,{path:"/register",element:a.jsx(Ts,{})}),a.jsx(A,{path:"/forgot-password",element:a.jsx(Ss,{})}),a.jsx(A,{path:"/callback",element:a.jsx(Cs,{})}),a.jsx(A,{path:"/api-test",element:a.jsx(Vs,{})}),a.jsx(A,{path:"/auth-test",element:a.jsx(Ds,{})}),a.jsx(A,{path:"/user-status",element:a.jsx(Os,{})}),a.jsx(A,{path:"/auth-status-test",element:a.jsx(zs,{})}),a.jsx(A,{path:"/referrer-test",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(bt,{})})}),a.jsx(A,{path:"/adapt",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Hs,{})})})})}),a.jsx(A,{path:"/invite",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ws,{})})})}),a.jsx(A,{path:"/brand-library",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Qs,{})})})})}),a.jsx(A,{path:"/hot-topics",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Js,{})})})})}),a.jsx(A,{path:"/hot-topics/detail/:platform/:title",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ys,{})})})})}),a.jsx(A,{path:"/vip",element:a.jsx(Ks,{})}),a.jsx(A,{path:"/vip-test",element:a.jsx(Bs,{})}),a.jsx(A,{path:"/payment",element:a.jsx(Xs,{})}),a.jsx(A,{path:"/payment-success",element:a.jsx(qs,{})}),a.jsx(A,{path:"/payment-test",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Mt,{})})}),a.jsx(A,{path:"/profile",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Zs,{})})})})}),a.jsx(A,{path:"/user-profile",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(tt,{})})})})}),a.jsx(A,{path:"/user-profile-test",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(at,{})})})})}),a.jsx(A,{path:"/login-button-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(rt,{})})})}),a.jsx(A,{path:"/authing-status-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(it,{})})})}),a.jsx(A,{path:"/logout-button-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(nt,{})})})}),a.jsx(A,{path:"/user-edit-form-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(lt,{})})})}),a.jsx(A,{path:"/unified-auth-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(wt,{})})})}),a.jsx(A,{path:"/architecture-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(_t,{})})})}),a.jsx(A,{path:"/authing-system-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(At,{})})})}),a.jsx(A,{path:"/authing-login-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Pt,{})})})}),a.jsx(A,{path:"/authing-sdk-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(It,{})})})}),a.jsx(A,{path:"/functionality-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Et,{})})})}),a.jsx(A,{path:"/api-config-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(kt,{})})})}),a.jsx(A,{path:"/creem-api-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Tt,{})})})}),a.jsx(A,{path:"/qrcode-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(St,{})})})}),a.jsx(A,{path:"/simple-qr-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ct,{})})})}),a.jsx(A,{path:"/checkout-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Rt,{})})})}),a.jsx(A,{path:"/direct-link-qrcode-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Lt,{})})})}),a.jsx(A,{path:"/simple-qrcode",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Vt,{})})})}),a.jsx(A,{path:"/creem-api-fix-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Dt,{})})})}),a.jsx(A,{path:"/simple-creem-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ot,{})})})}),a.jsx(A,{path:"/creem-debug",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(zt,{})})})}),a.jsx(A,{path:"/alipay-qrcode-demo",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ft,{})})})}),a.jsx(A,{path:"/payment-plan-demo",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(qt,{})})})}),a.jsx(A,{path:"/terms",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(dt,{})})})}),a.jsx(A,{path:"/privacy",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ct,{})})})}),a.jsx(A,{path:"/payment-flow-test",element:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Ut,{})})})}),a.jsx(A,{path:"/settings",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(et,{})})})})}),a.jsx(A,{path:"/user-data",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(st,{})})})})}),a.jsx(A,{path:"/history",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(xt,{})})})})}),a.jsx(A,{path:"/library",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(mt,{})})})})}),a.jsx(A,{path:"/wechat-templates",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ht,{})})})})}),a.jsx(A,{path:"/test-new-features",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(jt,{})})})})}),a.jsx(A,{path:"/content-extractor",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ut,{})})})})}),a.jsx(A,{path:"/creative-studio",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(pt,{})})})})}),a.jsx(A,{path:"/share-manager",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(gt,{})})})})}),a.jsx(A,{path:"/emoji-generator",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(ft,{})})})})}),a.jsx(A,{path:"/about",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(vt,{})})}),a.jsx(A,{path:"/test",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Nt,{})})}),a.jsx(A,{path:"/ai-test",element:a.jsx(Ie,{requireAuth:!0,redirectTo:"/login",children:a.jsx(Ee,{children:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(yt,{})})})})}),a.jsx(A,{path:"/test-navigation",element:a.jsx(f.Suspense,{fallback:a.jsx(Kt,{}),children:a.jsx(Gt,{})})}),a.jsx(A,{path:"*",element:a.jsx(Is,{})})]}),a.jsx(Fs,{})]})},Bt=()=>a.jsx(w,{children:a.jsx(K,{children:a.jsxs(_e,{children:[a.jsx($t,{}),a.jsx(Ps,{})]})})});class Ht extends b.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"😵 应用出现错误"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"抱歉，应用遇到了一个意外错误"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"刷新页面"}),!1]})}):this.props.children}}Re.createRoot(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(Ht,{children:a.jsx(Bt,{})})}));export{Us as a,Gs as b,Ms as u};
