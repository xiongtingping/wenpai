import{c as e,r as t,j as s,B as n,g as r,C as i,e as a,f as o,i as l,ag as c,L as d,al as u,T as h,a as m,b as f,d as p,p as x,u as g,P as j,a8 as y,am as v,R as b,h as w,a6 as N,K as S,N as k,O as E,Q as C,U as O}from"./index-BuR5xlXm.js";import{I as A}from"./input-DXKrnJBr.js";import{D as T,a as R,b as P,c as $,e as I,d as D}from"./dialog-B5R04kcb.js";import{S as _}from"./separator-CMY9eZD-.js";import{F as L}from"./funnel-5oZajPxO.js";import{E as U}from"./eye-off-BbLMqTMw.js";import{P as B}from"./plus-DilsU7EX.js";import{E as F}from"./eye-DU8Qvt0n.js";import{B as H}from"./bell-CCVMwYkT.js";import{F as z}from"./flame-eog3OBeh.js";import{E as M}from"./external-link-Bk1fLpvj.js";import{T as K}from"./trash-2-BeMaJGgV.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=e("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),J=e("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),V=e("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var G,W,X,Q,Y,Z,ee,te,se,ne,re,ie,ae,oe,le,ce,de,ue,he,me,fe,pe,xe,ge,je,ye,ve,be,we,Ne,Se,ke,Ee,Ce,Oe,Ae,Te,Re,Pe,$e,Ie,De,_e,Le,Ue,Be,Fe,He,ze,Me,Ke,qe,Je,Ve,Ge,We,Xe,Qe,Ye,Ze,et,tt,st={exports:{}};function nt(){return W||(W=1,G=function(e,t){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(t,s)}}),G}function rt(){if(Q)return X;Q=1;var e=nt(),t=Object.prototype.toString,s=function(e){return function(s){var n=t.call(s);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function n(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function r(e){return Array.isArray(e)}function i(e){return void 0===e}var a=n("ArrayBuffer");function o(e){return null!==e&&"object"==typeof e}function l(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var c=n("Date"),d=n("File"),u=n("Blob"),h=n("FileList");function m(e){return"[object Function]"===t.call(e)}var f=n("URLSearchParams");function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var x=function(e){return function(t){return e&&t instanceof e}}("undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));return X={isArray:r,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var s="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||t.call(e)===s||m(e.toString)&&e.toString()===s)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:l,isUndefined:i,isDate:c,isFile:d,isBlob:u,isFunction:m,isStream:function(e){return o(e)&&m(e.pipe)},isURLSearchParams:f,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function s(s,n){l(t[n])&&l(s)?t[n]=e(t[n],s):l(s)?t[n]=e({},s):r(s)?t[n]=s.slice():t[n]=s}for(var n=0,i=arguments.length;n<i;n++)p(arguments[n],s);return t},extend:function(t,s,n){return p(s,function(s,r){t[r]=n&&"function"==typeof s?e(s,n):s}),t},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,s,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,s&&Object.assign(e.prototype,s)},toFlatObject:function(e,t,s){var n,r,i,a={};t=t||{};do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)a[i=n[r]]||(t[i]=e[i],a[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:n,endsWith:function(e,t,s){e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;var n=e.indexOf(t,s);return-1!==n&&n===s},toArray:function(e){if(!e)return null;var t=e.length;if(i(t))return null;for(var s=new Array(t);t-- >0;)s[t]=e[t];return s},isTypedArray:x,isFileList:h},X}function it(){if(Z)return Y;Z=1;var e=rt();function t(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return Y=function(s,n,r){if(!n)return s;var i;if(r)i=r(n);else if(e.isURLSearchParams(n))i=n.toString();else{var a=[];e.forEach(n,function(s,n){null!=s&&(e.isArray(s)?n+="[]":s=[s],e.forEach(s,function(s){e.isDate(s)?s=s.toISOString():e.isObject(s)&&(s=JSON.stringify(s)),a.push(t(n)+"="+t(s))}))}),i=a.join("&")}if(i){var o=s.indexOf("#");-1!==o&&(s=s.slice(0,o)),s+=(-1===s.indexOf("?")?"?":"&")+i}return s}}function at(){if(ie)return re;ie=1;var e=rt();function t(e,t,s,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r)}e.inherits(t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=t.prototype,n={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){n[e]={value:e}}),Object.defineProperties(t,n),Object.defineProperty(s,"isAxiosError",{value:!0}),t.from=function(n,r,i,a,o,l){var c=Object.create(s);return e.toFlatObject(n,c,function(e){return e!==Error.prototype}),t.call(c,n.message,r,i,a,o),c.name=n.name,l&&Object.assign(c,l),c},re=t}function ot(){return oe?ae:(oe=1,ae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1})}function lt(){if(ce)return le;ce=1;var e=rt();return le=function(t,s){s=s||new FormData;var n=[];function r(t){return null===t?"":e.isDate(t)?t.toISOString():e.isArrayBuffer(t)||e.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(i,a){if(e.isPlainObject(i)||e.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+a);n.push(i),e.forEach(i,function(n,i){if(!e.isUndefined(n)){var o,l=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(e.endsWith(i,"{}"))n=JSON.stringify(n);else if(e.endsWith(i,"[]")&&(o=e.toArray(n)))return void o.forEach(function(t){!e.isUndefined(t)&&s.append(l,r(t))});t(n,l)}}),n.pop()}else s.append(a,r(i))}(t),s}}function ct(){if(ye)return je;ye=1;var e=pe?fe:(pe=1,fe=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),t=ge?xe:(ge=1,xe=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e});return je=function(s,n){return s&&!e(n)?t(s,n):n}}function dt(){if(ke)return Se;ke=1;var e=at();function t(t){e.call(this,null==t?"canceled":t,e.ERR_CANCELED),this.name="CanceledError"}return rt().inherits(t,e,{__CANCEL__:!0}),Se=t}function ut(){if(Ae)return Oe;Ae=1;var e=rt(),t=function(){if(ue)return de;ue=1;var e=at();return de=function(t,s,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?s(new e("Request failed with status code "+n.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}}(),s=function(){if(me)return he;me=1;var e=rt();return he=e.isStandardBrowserEnv()?function(){return{write:function(t,s,n,r,i,a){var o=[];o.push(t+"="+encodeURIComponent(s)),e.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),e.isString(r)&&o.push("path="+r),e.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()}(),n=it(),r=ct(),i=function(){if(be)return ve;be=1;var e=rt(),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ve=function(s){var n,r,i,a={};return s?(e.forEach(s.split("\n"),function(s){if(i=s.indexOf(":"),n=e.trim(s.substr(0,i)).toLowerCase(),r=e.trim(s.substr(i+1)),n){if(a[n]&&t.indexOf(n)>=0)return;a[n]="set-cookie"===n?(a[n]?a[n]:[]).concat([r]):a[n]?a[n]+", "+r:r}}),a):a}}(),a=function(){if(Ne)return we;Ne=1;var e=rt();return we=e.isStandardBrowserEnv()?function(){var t,s=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var t=e;return s&&(n.setAttribute("href",t),t=n.href),n.setAttribute("href",t),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(s){var n=e.isString(s)?r(s):s;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()}(),o=ot(),l=at(),c=dt(),d=Ce?Ee:(Ce=1,Ee=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""});return Oe=function(u){return new Promise(function(h,m){var f,p=u.data,x=u.headers,g=u.responseType;function j(){u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}e.isFormData(p)&&e.isStandardBrowserEnv()&&delete x["Content-Type"];var y=new XMLHttpRequest;if(u.auth){var v=u.auth.username||"",b=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";x.Authorization="Basic "+btoa(v+":"+b)}var w=r(u.baseURL,u.url);function N(){if(y){var e="getAllResponseHeaders"in y?i(y.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:e,config:u,request:y};t(function(e){h(e),j()},function(e){m(e),j()},s),y=null}}if(y.open(u.method.toUpperCase(),n(w,u.params,u.paramsSerializer),!0),y.timeout=u.timeout,"onloadend"in y?y.onloadend=N:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(N)},y.onabort=function(){y&&(m(new l("Request aborted",l.ECONNABORTED,u,y)),y=null)},y.onerror=function(){m(new l("Network Error",l.ERR_NETWORK,u,y,y)),y=null},y.ontimeout=function(){var e=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",t=u.transitional||o;u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),m(new l(e,t.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,u,y)),y=null},e.isStandardBrowserEnv()){var S=(u.withCredentials||a(w))&&u.xsrfCookieName?s.read(u.xsrfCookieName):void 0;S&&(x[u.xsrfHeaderName]=S)}"setRequestHeader"in y&&e.forEach(x,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete x[t]:y.setRequestHeader(t,e)}),e.isUndefined(u.withCredentials)||(y.withCredentials=!!u.withCredentials),g&&"json"!==g&&(y.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&y.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(f=function(e){y&&(m(!e||e&&e.type?new c:e),y.abort(),y=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f))),p||(p=null);var k=d(w);k&&-1===["http","https","file"].indexOf(k)?m(new l("Unsupported protocol "+k+":",l.ERR_BAD_REQUEST,u)):y.send(p)})}}function ht(){if($e)return Pe;$e=1;var e=rt(),t=function(){if(ne)return se;ne=1;var e=rt();return se=function(t,s){e.forEach(t,function(e,n){n!==s&&n.toUpperCase()===s.toUpperCase()&&(t[s]=e,delete t[n])})}}(),s=at(),n=ot(),r=lt(),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,s){!e.isUndefined(t)&&e.isUndefined(t["Content-Type"])&&(t["Content-Type"]=s)}var o,l={transitional:n,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(o=ut()),o),transformRequest:[function(s,n){if(t(n,"Accept"),t(n,"Content-Type"),e.isFormData(s)||e.isArrayBuffer(s)||e.isBuffer(s)||e.isStream(s)||e.isFile(s)||e.isBlob(s))return s;if(e.isArrayBufferView(s))return s.buffer;if(e.isURLSearchParams(s))return a(n,"application/x-www-form-urlencoded;charset=utf-8"),s.toString();var i,o=e.isObject(s),l=n&&n["Content-Type"];if((i=e.isFileList(s))||o&&"multipart/form-data"===l){var c=this.env&&this.env.FormData;return r(i?{"files[]":s}:s,c&&new c)}return o||"application/json"===l?(a(n,"application/json"),function(t){if(e.isString(t))try{return(0,JSON.parse)(t),e.trim(t)}catch(s){if("SyntaxError"!==s.name)throw s}return(0,JSON.stringify)(t)}(s)):s}],transformResponse:[function(t){var n=this.transitional||l.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||i&&e.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a){if("SyntaxError"===o.name)throw s.from(o,s.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Re?Te:(Re=1,Te=null)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(e){l.headers[e]={}}),e.forEach(["post","put","patch"],function(t){l.headers[t]=e.merge(i)}),Pe=l}function mt(){return Le?_e:(Le=1,_e=function(e){return!(!e||!e.__CANCEL__)})}function ft(){if(He)return Fe;He=1;var e=rt();return Fe=function(t,s){s=s||{};var n={};function r(t,s){return e.isPlainObject(t)&&e.isPlainObject(s)?e.merge(t,s):e.isPlainObject(s)?e.merge({},s):e.isArray(s)?s.slice():s}function i(n){return e.isUndefined(s[n])?e.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],s[n])}function a(t){if(!e.isUndefined(s[t]))return r(void 0,s[t])}function o(n){return e.isUndefined(s[n])?e.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,s[n])}function l(e){return e in s?r(t[e],s[e]):e in t?r(void 0,t[e]):void 0}var c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return e.forEach(Object.keys(t).concat(Object.keys(s)),function(t){var s=c[t]||i,r=s(t);e.isUndefined(r)&&s!==l||(n[t]=r)}),n}}function pt(){return Me?ze:(Me=1,ze={version:"0.27.2"})}function xt(){if(Ve)return Je;Ve=1;var e=rt(),t=it(),s=function(){if(te)return ee;te=1;var e=rt();function t(){this.handlers=[]}return t.prototype.use=function(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},t.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},t.prototype.forEach=function(t){e.forEach(this.handlers,function(e){null!==e&&t(e)})},ee=t}(),n=function(){if(Be)return Ue;Be=1;var e=rt(),t=function(){if(De)return Ie;De=1;var e=rt(),t=ht();return Ie=function(s,n,r){var i=this||t;return e.forEach(r,function(e){s=e.call(i,s,n)}),s}}(),s=mt(),n=ht(),r=dt();function i(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new r}return Ue=function(r){return i(r),r.headers=r.headers||{},r.data=t.call(r,r.data,r.headers,r.transformRequest),r.headers=e.merge(r.headers.common||{},r.headers[r.method]||{},r.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete r.headers[e]}),(r.adapter||n.adapter)(r).then(function(e){return i(r),e.data=t.call(r,e.data,e.headers,r.transformResponse),e},function(e){return s(e)||(i(r),e&&e.response&&(e.response.data=t.call(r,e.response.data,e.response.headers,r.transformResponse))),Promise.reject(e)})}}(),r=ft(),i=ct(),a=function(){if(qe)return Ke;qe=1;var e=pt().version,t=at(),s={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){s[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var n={};return s.transitional=function(s,r,i){return function(a,o,l){if(!1===s)throw new t(function(t,s){return"[Axios v"+e+"] Transitional option '"+t+"'"+s+(i?". "+i:"")}(o," has been removed"+(r?" in "+r:"")),t.ERR_DEPRECATED);return r&&!n[o]&&(n[o]=!0),!s||s(a,o,l)}},Ke={assertOptions:function(e,s,n){if("object"!=typeof e)throw new t("options must be an object",t.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=s[a];if(o){var l=e[a],c=void 0===l||o(l,a,e);if(!0!==c)throw new t("option "+a+" must be "+c,t.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new t("Unknown option "+a,t.ERR_BAD_OPTION)}},validators:s}}(),o=a.validators;function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}return l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=r(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var s=t.transitional;void 0!==s&&a.assertOptions(s,{silentJSONParsing:o.transitional(o.boolean),forcedJSONParsing:o.transitional(o.boolean),clarifyTimeoutError:o.transitional(o.boolean)},!1);var i=[],l=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});var c,d=[];if(this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)}),!l){var u=[n,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(d),c=Promise.resolve(t);u.length;)c=c.then(u.shift(),u.shift());return c}for(var h=t;i.length;){var m=i.shift(),f=i.shift();try{h=m(h)}catch(p){f(p);break}}try{c=n(h)}catch(p){return Promise.reject(p)}for(;d.length;)c=c.then(d.shift(),d.shift());return c},l.prototype.getUri=function(e){e=r(this.defaults,e);var s=i(e.baseURL,e.url);return t(s,e.params,e.paramsSerializer)},e.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,s){return this.request(r(s||{},{method:e,url:t,data:(s||{}).data}))}}),e.forEach(["post","put","patch"],function(e){function t(t){return function(s,n,i){return this.request(r(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)}),Je=l}function gt(e,t){const s={weibo:"å¾®åš",zhihu:"çŸ¥ä¹",douyin:"æŠ–éŸ³",bilibili:"Bç«™",baidu:"ç™¾åº¦","36kr":"36æ°ª",ithome:"ITä¹‹å®¶",sspai:"å°‘æ•°æ´¾",juejin:"æ˜é‡‘",csdn:"CSDN",github:"GitHub",v2ex:"V2EX",ngabbs:"NGA",hellogithub:"HelloGitHub"}[t]||t,n=e.toLowerCase();return n.includes("æ˜æ˜Ÿ")||n.includes("æ¼”å‘˜")||n.includes("æ­Œæ‰‹")||n.includes("ç”µå½±")||n.includes("ç”µè§†å‰§")||n.includes("ç»¼è‰º")||n.includes("å‘¨æ°ä¼¦")||n.includes("æ›´æ–°")?`"${e}"åœ¨${s}ä¸Šå¼•å‘çƒ­è®®ã€‚è¯¥è¯é¢˜æ¶‰åŠå¨±ä¹åœˆæœ€æ–°åŠ¨æ€ï¼Œç½‘å‹ä»¬çº·çº·å‘è¡¨çœ‹æ³•ï¼Œè®¨è®ºçƒ­åº¦æŒç»­æ”€å‡ã€‚ç›¸å…³è¯é¢˜åŒ…æ‹¬æ˜æ˜ŸåŠ¨æ€ã€ä½œå“è¯„ä»·ã€è¡Œä¸šè¶‹åŠ¿ç­‰å¤šä¸ªæ–¹é¢ã€‚`:n.includes("ç§‘æŠ€")||n.includes("æ‰‹æœº")||n.includes("ç”µè„‘")||n.includes("ai")||n.includes("äººå·¥æ™ºèƒ½")||n.includes("äº’è”ç½‘")||n.includes("è‹¹æœ")||n.includes("åä¸º")||n.includes("å°ç±³")?`"${e}"æˆä¸º${s}ç§‘æŠ€åœˆç„¦ç‚¹ã€‚è¯¥è¯é¢˜æ¶‰åŠæŠ€æœ¯åˆ›æ–°ã€äº§å“å‘å¸ƒã€è¡Œä¸šè¶‹åŠ¿ç­‰ï¼Œå¼•å‘äº†ä¸“ä¸šäººå£«å’Œæ™®é€šç”¨æˆ·çš„å¹¿æ³›è®¨è®ºã€‚ç›¸å…³åˆ†æåŒ…æ‹¬æŠ€æœ¯ç»†èŠ‚ã€å¸‚åœºå½±å“ã€æœªæ¥å±•æœ›ç­‰ã€‚`:n.includes("ç¤¾ä¼š")||n.includes("æ°‘ç”Ÿ")||n.includes("æ”¿ç­–")||n.includes("æ•™è‚²")||n.includes("åŒ»ç–—")||n.includes("äº¤é€š")||n.includes("åŒ»é™¢")||n.includes("æ´—æ‰‹")?`"${e}"åœ¨${s}ä¸Šå¼•å‘ç¤¾ä¼šå…³æ³¨ã€‚è¯¥è¯é¢˜æ¶‰åŠæ°‘ç”Ÿçƒ­ç‚¹ã€ç¤¾ä¼šç°è±¡ã€æ”¿ç­–è§£è¯»ç­‰ï¼Œç½‘å‹ä»¬ä»ä¸åŒè§’åº¦å±•å¼€è®¨è®ºï¼Œåæ˜ äº†å…¬ä¼—å¯¹ç›¸å…³é—®é¢˜çš„å…³æ³¨å’Œæ€è€ƒã€‚`:n.includes("ä½“è‚²")||n.includes("è¶³çƒ")||n.includes("ç¯®çƒ")||n.includes("æ¯”èµ›")||n.includes("è¿åŠ¨å‘˜")||n.includes("å¥¥è¿")?`"${e}"åœ¨${s}ä½“è‚²åœˆå¼•å‘çƒ­è®®ã€‚è¯¥è¯é¢˜æ¶‰åŠä½“è‚²èµ›äº‹ã€è¿åŠ¨å‘˜è¡¨ç°ã€æ¯”èµ›ç»“æœç­‰ï¼Œä½“è‚²çˆ±å¥½è€…ä»¬ç§¯æå‚ä¸è®¨è®ºï¼Œåˆ†äº«è§‚ç‚¹å’Œæ„Ÿå—ã€‚`:n.includes("è´¢ç»")||n.includes("è‚¡å¸‚")||n.includes("åŸºé‡‘")||n.includes("ç»æµ")||n.includes("æŠ•èµ„")||n.includes("ç†è´¢")?`"${e}"æˆä¸º${s}è´¢ç»é¢†åŸŸçƒ­ç‚¹ã€‚è¯¥è¯é¢˜æ¶‰åŠå¸‚åœºåŠ¨æ€ã€æŠ•èµ„è¶‹åŠ¿ã€ç»æµæ”¿ç­–ç­‰ï¼Œå¸å¼•äº†æŠ•èµ„è€…å’Œè´¢ç»çˆ±å¥½è€…çš„å…³æ³¨ï¼Œç›¸å…³åˆ†æåŒ…æ‹¬å¸‚åœºå½±å“ã€æŠ•èµ„å»ºè®®ç­‰ã€‚`:`"${e}"åœ¨${s}ä¸Šå¼•å‘å…³æ³¨ã€‚è¯¥è¯é¢˜æ¶‰åŠå¤šä¸ªæ–¹é¢çš„è®¨è®ºï¼Œç½‘å‹ä»¬ä»ä¸åŒè§’åº¦åˆ†äº«è§‚ç‚¹ï¼Œå½¢æˆäº†ä¸°å¯Œçš„è®¨è®ºå†…å®¹ã€‚ç›¸å…³è¯é¢˜åŒ…æ‹¬èƒŒæ™¯åˆ†æã€å½±å“è¯„ä¼°ã€æœªæ¥å±•æœ›ç­‰ã€‚`}function jt(e){const t=e.split(/[ï¼Œã€‚ï¼ï¼Ÿ\s]+/).filter(e=>e.length>1),s=[];if(t.length>0){const e=Math.min(3,t.length);for(let n=0;n<e;n++){const e=t[n];e&&e.length>1&&s.push(`${e}ç›¸å…³è®¨è®º`)}}if(s.length<3){const e=["çƒ­é—¨è¯é¢˜","å®æ—¶è®¨è®º","æœ€æ–°åŠ¨æ€"];for(let t=s.length;t<3;t++)s.push(e[t-s.length])}return s.slice(0,3)}function yt(e){const t={};for(const[s,n]of Object.entries(e.data))"weatheralarm"!==s&&"earthquake"!==s&&(t[s]=n.map((e,t)=>({...e,platform:s,content:gt(e.title,s),relatedTopics:jt(e.title),rank:t+1,desc:e.desc||e.title})));return{...e,data:t}}function vt(e){const t=[];for(const[s,n]of Object.entries(e)){const e=n.map(e=>({...e,platform:s,hotValue:parseInt(e.hot)||0})).sort((e,t)=>t.hotValue-e.hotValue).slice(0,3);t.push(...e)}return t.sort((e,t)=>{const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s}).map((e,t)=>({...e,rank:t+1,hot:bt(e.hot)}))}function bt(e){const t=parseInt(e);return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:e}async function wt(e){if("weatheralarm"===e||"earthquake"===e)return[];const t=[{name:"netlify-proxy",url:"/.netlify/functions/api",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"hot-topics",platform:e})},{name:"allorigins-proxy",url:`https://api.allorigins.win/get?url=https://api-hot.imsyy.top/${e}`,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},isAllOrigins:!0},{name:"direct-api",url:`https://api-hot.imsyy.top/${e}`,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}];for(const r of t)try{const t={method:r.method,headers:r.headers};r.body&&(t.body=r.body);const n=await fetch(r.url,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i)throw new Error("APIè¿”å›ç©ºæ•°æ®");let a=i;if(r.isAllOrigins&&i.contents)try{a=JSON.parse(i.contents)}catch(s){continue}let o=[];if(200===a.code&&Array.isArray(a.data))o=a.data;else if(Array.isArray(a))o=a;else if(200===a.code&&"object"==typeof a.data){const e=a.data;if(Array.isArray(e))o=e;else{const t=Object.keys(e).filter(t=>Array.isArray(e[t]));t.length>0&&(o=e[t[0]])}}else if(a.error)throw new Error(a.error);if(o.length>0)return o.map((t,s)=>({...t,platform:e,content:gt(t.title,e),relatedTopics:jt(t.title),rank:s+1,desc:t.desc||t.title}));continue}catch(n){continue}throw new Error(`æ— æ³•è·å–${e}å¹³å°æ•°æ®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•`)}function Nt(e){return{weibo:"å¾®åš",zhihu:"çŸ¥ä¹",douyin:"æŠ–éŸ³",bilibili:"Bç«™",baidu:"ç™¾åº¦","36kr":"36æ°ª",ithome:"ITä¹‹å®¶",sspai:"å°‘æ•°æ´¾",juejin:"æ˜é‡‘",csdn:"CSDN",github:"GitHub",v2ex:"V2EX",ngabbs:"NGA",hellogithub:"HelloGitHub"}[e]||e}tt||(tt=1,function(){if(et)return st.exports;et=1;var e=rt(),t=nt(),s=xt(),n=ft(),r=function r(i){var a=new s(i),o=t(s.prototype.request,a);return e.extend(o,s.prototype,a),e.extend(o,a),o.create=function(e){return r(n(i,e))},o}(ht());r.Axios=s,r.CanceledError=dt(),r.CancelToken=function(){if(We)return Ge;We=1;var e=dt();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(e){s=e});var n=this;this.promise.then(function(e){if(n._listeners){var t,s=n._listeners.length;for(t=0;t<s;t++)n._listeners[t](e);n._listeners=null}}),this.promise.then=function(e){var t,s=new Promise(function(e){n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},t(function(t){n.reason||(n.reason=new e(t),s(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t(function(t){e=t}),cancel:e}},Ge=t}(),r.isCancel=mt(),r.VERSION=pt().version,r.toFormData=lt(),r.AxiosError=at(),r.Cancel=r.CanceledError,r.all=function(e){return Promise.all(e)},r.spread=Qe?Xe:(Qe=1,Xe=function(e){return function(t){return e.apply(null,t)}}),r.isAxiosError=function(){if(Ze)return Ye;Ze=1;var e=rt();return Ye=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),st.exports=r,st.exports.default=r,st.exports}());const St=({onFilterChange:e})=>{const[h,m]=t.useState(!1),[f,p]=t.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[x,g]=t.useState(""),[j,y]=t.useState("");t.useEffect(()=>{const t=localStorage.getItem("interestFilters");if(t)try{const s=JSON.parse(t);p(s),e(s)}catch(s){}},[]);const v=t=>{localStorage.setItem("interestFilters",JSON.stringify(t)),p(t),e(t)},b=()=>{if(x.trim()&&!f.blockedKeywords.includes(x.trim())){const e={...f,blockedKeywords:[...f.blockedKeywords,x.trim()]};v(e),g("")}},w=()=>{if(j.trim()&&!f.preferredKeywords.includes(j.trim())){const e={...f,preferredKeywords:[...f.preferredKeywords,j.trim()]};v(e),y("")}};return s.jsxs("div",{className:"mb-6",children:[s.jsxs(n,{variant:"outline",onClick:()=>m(!h),className:"flex items-center gap-2",children:[s.jsx(L,{className:"h-4 w-4"}),"å…´è¶£è°ƒèŠ‚",f.blockedKeywords.length>0||f.preferredKeywords.length>0&&s.jsx(r,{variant:"secondary",className:"ml-2",children:f.blockedKeywords.length+f.preferredKeywords.length})]}),h&&s.jsxs(i,{className:"mt-4",children:[s.jsx(a,{children:s.jsxs(o,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"å…´è¶£è°ƒèŠ‚è®¾ç½®"}),s.jsx(n,{variant:"ghost",size:"sm",onClick:()=>{v({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1})},children:"é‡ç½®"})]})}),s.jsxs(l,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(U,{className:"h-4 w-4"}),"å±è”½å…³é”®è¯"]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx(A,{placeholder:"è¾“å…¥è¦å±è”½çš„å…³é”®è¯",value:x,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&b()}),s.jsx(n,{onClick:b,size:"sm",children:s.jsx(B,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.blockedKeywords.map((e,t)=>s.jsxs(r,{variant:"destructive",className:"flex items-center gap-1",children:[e,s.jsx(c,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t={...f,blockedKeywords:f.blockedKeywords.filter(t=>t!==e)};v(t)})(e)})]},t))})]}),s.jsx(_,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(F,{className:"h-4 w-4"}),"åå¥½å…³é”®è¯"]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx(A,{placeholder:"è¾“å…¥åå¥½çš„å…³é”®è¯",value:j,onChange:e=>y(e.target.value),onKeyPress:e=>"Enter"===e.key&&w()}),s.jsx(n,{onClick:w,size:"sm",children:s.jsx(B,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.preferredKeywords.map((e,t)=>s.jsxs(r,{variant:"default",className:"flex items-center gap-1",children:[e,s.jsx(c,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t={...f,preferredKeywords:f.preferredKeywords.filter(t=>t!==e)};v(t)})(e)})]},t))})]}),s.jsx(_,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"å¹³å°åå¥½è®¾ç½®"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{value:"weibo",label:"å¾®åš"},{value:"zhihu",label:"çŸ¥ä¹"},{value:"bilibili",label:"Bç«™"},{value:"douyin",label:"æŠ–éŸ³"},{value:"toutiao",label:"å¤´æ¡"},{value:"baidu",label:"ç™¾åº¦"}].map(e=>{const t=f.blockedPlatforms.includes(e.value),n=f.preferredPlatforms.includes(e.value);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:e.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(d,{htmlFor:`prefer-${e.value}`,className:"text-xs",children:"æ¨è"}),s.jsx(u,{id:`prefer-${e.value}`,checked:n,onCheckedChange:()=>(e=>{const t=f.preferredPlatforms.includes(e),s={...f,preferredPlatforms:t?f.preferredPlatforms.filter(t=>t!==e):[...f.preferredPlatforms,e]};v(s)})(e.value)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(d,{htmlFor:`block-${e.value}`,className:"text-xs",children:"å±è”½"}),s.jsx(u,{id:`block-${e.value}`,checked:t,onCheckedChange:()=>(e=>{const t=f.blockedPlatforms.includes(e),s={...f,blockedPlatforms:t?f.blockedPlatforms.filter(t=>t!==e):[...f.blockedPlatforms,e]};v(s)})(e.value)})]})]})]},e.value)})})]})]})]})]})},kt=({topics:e,onCategoryChange:n,onTopicClick:a})=>{const[o,c]=t.useState("all"),d=[{id:"all",label:"å…¨éƒ¨",icon:"ğŸ”¥"},{id:"entertainment",label:"å¨±ä¹",icon:"ğŸ¬"},{id:"technology",label:"ç§‘æŠ€",icon:"ğŸ’»"},{id:"sports",label:"ä½“è‚²",icon:"âš½"},{id:"politics",label:"æ”¿æ²»",icon:"ğŸ›ï¸"},{id:"economy",label:"è´¢ç»",icon:"ğŸ’°"},{id:"society",label:"ç¤¾ä¼š",icon:"ğŸ‘¥"},{id:"education",label:"æ•™è‚²",icon:"ğŸ“š"},{id:"health",label:"å¥åº·",icon:"ğŸ¥"},{id:"lifestyle",label:"ç”Ÿæ´»",icon:"ğŸ "}],u=t=>"all"===t?e:e.filter(e=>(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase();return["æ˜æ˜Ÿ","æ¼”å‘˜","æ­Œæ‰‹","ç”µå½±","ç”µè§†å‰§","ç»¼è‰º","å¨±ä¹","æ˜æ˜Ÿ","è‰ºäºº","å¯¼æ¼”","ç¼–å‰§"].some(e=>t.includes(e)||s.includes(e))?"entertainment":["ç§‘æŠ€","æŠ€æœ¯","äº’è”ç½‘","AI","äººå·¥æ™ºèƒ½","æ‰‹æœº","ç”µè„‘","è½¯ä»¶","ç¼–ç¨‹","ç®—æ³•","èŠ¯ç‰‡"].some(e=>t.includes(e)||s.includes(e))?"technology":["è¶³çƒ","ç¯®çƒ","ä½“è‚²","æ¯”èµ›","è¿åŠ¨å‘˜","æ•™ç»ƒ","çƒé˜Ÿ","è”èµ›","å† å†›","å¥¥è¿ä¼š"].some(e=>t.includes(e)||s.includes(e))?"sports":["æ”¿åºœ","æ”¿ç­–","æ”¿æ²»","å®˜å‘˜","é€‰ä¸¾","æ³•å¾‹","æ³•è§„","å›½å®¶","é¢†å¯¼äºº","ä¼šè®®"].some(e=>t.includes(e)||s.includes(e))?"politics":["ç»æµ","é‡‘è","è‚¡ç¥¨","åŸºé‡‘","æŠ•èµ„","ç†è´¢","é“¶è¡Œ","ä¿é™©","æˆ¿åœ°äº§","è‚¡å¸‚"].some(e=>t.includes(e)||s.includes(e))?"economy":["ç¤¾ä¼š","äº‹ä»¶","æ–°é—»","è°ƒæŸ¥","æŠ¥é“","äº‹ä»¶","äº‹æ•…","æ¡ˆä»¶","çº çº·"].some(e=>t.includes(e)||s.includes(e))?"society":["æ•™è‚²","å­¦æ ¡","å­¦ç”Ÿ","è€å¸ˆ","è€ƒè¯•","å­¦ä¹ ","åŸ¹è®­","è¯¾ç¨‹","å¤§å­¦","é«˜è€ƒ"].some(e=>t.includes(e)||s.includes(e))?"education":["å¥åº·","åŒ»ç–—","åŒ»é™¢","åŒ»ç”Ÿ","ç–¾ç—…","æ²»ç–—","è¯ç‰©","ç–«è‹—","ç–«æƒ…","ä¿å¥"].some(e=>t.includes(e)||s.includes(e))?"health":["ç”Ÿæ´»","ç¾é£Ÿ","æ—…æ¸¸","è´­ç‰©","æ—¶å°š","ç¾å®¹","å®¶å±…","è£…ä¿®","å® ç‰©","å›­è‰º"].some(e=>t.includes(e)||s.includes(e))?"lifestyle":"other"})(e)===t),x=e=>u(e).length;return s.jsx("div",{className:"mb-6",children:s.jsxs(h,{value:o,onValueChange:e=>{c(e),n(e)},children:[s.jsx(m,{className:"grid w-full grid-cols-5 lg:grid-cols-10",children:d.map(e=>s.jsxs(f,{value:e.id,className:"flex items-center gap-1 text-xs",children:[s.jsx("span",{children:e.icon}),s.jsx("span",{className:"hidden sm:inline",children:e.label}),s.jsx(r,{variant:"secondary",className:"ml-1 text-xs",children:x(e.id)})]},e.id))}),d.map(e=>s.jsxs(p,{value:e.id,children:[s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u(e.id).map((t,n)=>s.jsx(i,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a(t),children:s.jsxs(l,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx(r,{variant:"outline",className:"text-xs",children:t.platform}),s.jsxs("span",{className:"text-xs text-gray-500",children:["#",n+1]})]}),s.jsx("h3",{className:"font-medium text-sm line-clamp-2 mb-2",children:t.title}),t.desc&&s.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:t.desc}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["çƒ­åº¦: ",t.hot]}),s.jsx(r,{variant:"secondary",className:"text-xs",children:e.label})]})]})},`${t.platform}-${n}`))}),0===u(e.id).length&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"è¯¥åˆ†ç±»ä¸‹æš‚æ— è¯é¢˜"})]},e.id))]})})},Et={enabled:!0,sound:!0,desktop:!0,email:!1,push:!1,quietHours:{enabled:!1,start:"22:00",end:"08:00"}};function Ct(){try{const e=localStorage.getItem("notification-config");return e?{...Et,...JSON.parse(e)}:Et}catch(e){return Et}}function Ot(e){const t=function(){try{const e=localStorage.getItem("notifications");return e?JSON.parse(e):[]}catch(e){return[]}}(),s={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2),createdAt:(new Date).toISOString()};return t.unshift(s),t.length>100&&t.splice(100),function(e){try{localStorage.setItem("notifications",JSON.stringify(e))}catch(t){}}(t),function(e){const t=Ct();t.enabled&&(t.quietHours.enabled&&function(){const e=Ct();if(!e.quietHours.enabled)return!1;const t=new Date,s=60*t.getHours()+t.getMinutes(),[n,r]=e.quietHours.start.split(":").map(Number),[i,a]=e.quietHours.end.split(":").map(Number),o=60*n+r,l=60*i+a;return o<=l?s>=o&&s<=l:s>=o||s<=l}()||(t.desktop&&"Notification"in window&&("granted"===Notification.permission?new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id,requireInteraction:"error"===e.level}):"default"===Notification.permission&&Notification.requestPermission().then(t=>{"granted"===t&&new Notification(e.title,{body:e.message,icon:"/favicon.ico"})})),t.sound&&function(){try{const e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(e=>{})}catch(e){}}(),document.hidden&&function(e){const t=document.title;let s=0;const n=()=>{s>=5?document.title=t:(document.title=s%2==0?`ğŸ”” ${e}`:t,s++,setTimeout(n,1e3))};n()}(e.title)))}(s),s}function At(e,t){const s={created:"åˆ›å»ºæˆåŠŸ",updated:"æ›´æ–°æˆåŠŸ",deleted:"åˆ é™¤æˆåŠŸ",enabled:"å·²å¯ç”¨",disabled:"å·²ç¦ç”¨"};Ot({type:"subscription",level:"success",title:`è®¢é˜…${s[e]}`,message:`è¯é¢˜è®¢é˜…"${t}"${s[e]}`,data:{action:e,subscriptionName:t}})}const Tt=[{id:"baidu-news",name:"ç™¾åº¦æ–°é—»",type:"news",apiUrl:"https://api.baidu.com/news/search",isEnabled:!0,rateLimit:10},{id:"weibo-search",name:"å¾®åšæœç´¢",type:"social",apiUrl:"https://m.weibo.cn/api/container/getIndex",isEnabled:!0,rateLimit:20},{id:"zhihu-search",name:"çŸ¥ä¹æœç´¢",type:"social",apiUrl:"https://www.zhihu.com/api/v4/search_v3",isEnabled:!0,rateLimit:15},{id:"toutiao-search",name:"å¤´æ¡æœç´¢",type:"news",apiUrl:"https://www.toutiao.com/search_content/",isEnabled:!0,rateLimit:12},{id:"bilibili-search",name:"Bç«™æœç´¢",type:"social",apiUrl:"https://api.bilibili.com/x/web-interface/search/type",isEnabled:!0,rateLimit:8},{id:"douyin-search",name:"æŠ–éŸ³æœç´¢",type:"social",apiUrl:"https://www.douyin.com/aweme/v1/web/search/item/",isEnabled:!0,rateLimit:5}];function Rt(){try{const e=localStorage.getItem("topic-subscriptions");return e?JSON.parse(e):[]}catch(e){return[]}}function Pt(e){try{localStorage.setItem("topic-subscriptions",JSON.stringify(e))}catch(t){}}function $t(e,t){const s=Rt(),n=s.findIndex(t=>t.id===e);if(-1===n)return null;const r=s[n];return s[n]={...r,...t,updatedAt:(new Date).toISOString()},Pt(s),At("updated",s[n].name),s[n]}function It(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function Dt(){const e=Rt(),t=e.filter(e=>e.isActive).length,s=e.length,n=e.filter(e=>e.notificationEnabled).length;return{total:s,active:t,inactive:s-t,notificationEnabled:n,notificationDisabled:s-n}}function _t(){x();const{toast:e}=g(),[c,_]=t.useState(null),[L,U]=t.useState("all"),[G,W]=t.useState(!0),[X,Q]=t.useState(!1),[Y,Z]=t.useState(""),[ee,te]=t.useState(null),[se,ne]=t.useState(new Date),[re,ie]=t.useState(new Set),[ae,oe]=t.useState(new Set),[le,ce]=t.useState("hot"),[de,ue]=t.useState([]),[he,me]=t.useState({}),[fe,pe]=t.useState(null),[xe,ge]=t.useState(!1),[je,ye]=t.useState(!1),[ve,be]=t.useState(!1),[we,Ne]=t.useState(Dt()),[Se,ke]=t.useState({}),[Ee,Ce]=t.useState({}),[Oe,Ae]=t.useState({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),[Te]=t.useState(Tt),Re=["weibo","zhihu","douyin","bilibili","baidu","36kr","ithome"],[Pe,$e]=t.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[Ie,De]=t.useState("all"),[_e,Le]=t.useState([]),Ue=e=>{const t=parseInt(e);return isNaN(t)?e:t>=1e6?`${(t/1e6).toFixed(1)}m`:t>=1e3?`${(t/1e3).toFixed(1)}k`:e},Be=e=>{const t=`${e.platform}-${e.title}`;Ke(t)},Fe=t=>{t.url?window.open(t.url,"_blank"):t.mobil_url?window.open(t.mobil_url,"_blank"):e({title:"æ— æ³•æ‰“å¼€é“¾æ¥",description:"è¯¥è¯é¢˜æš‚æ— æºé“¾æ¥",variant:"destructive"})},He=async()=>{try{W(!0),te(null);const t=await async function(){const e=[{name:"netlify-proxy",url:"/.netlify/functions/api",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"hot-topics"})},{name:"allorigins-proxy",url:"https://api.allorigins.win/get?url=https://api-hot.imsyy.top/all",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},isAllOrigins:!0},{name:"direct-api",url:"https://api-hot.imsyy.top/all",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}];for(const s of e)try{const e={method:s.method,headers:s.headers};s.body&&(e.body=s.body);const n=await fetch(s.url,e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(s.isAllOrigins&&r.contents)try{const e=JSON.parse(r.contents);if(200===e.code&&e.data)return yt(e)}catch(t){}if(200===r.code&&r.data)return yt(r);if(200===r.code&&r.routes){const e=["weibo","zhihu","bilibili","douyin"],t={};for(const s of e)try{const e=await wt(s);t[s]=e}catch(ee){t[s]=[]}return{code:200,msg:"success",data:t}}throw r.error?new Error(r.error):new Error("Invalid response format")}catch(ee){continue}throw new Error("æ— æ³•è·å–çƒ­ç‚¹æ•°æ®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•")}();_(t),ne(new Date),localStorage.setItem("hotTopicsData",JSON.stringify(t.data));const s=localStorage.getItem("interestFilters");if(s)try{const e=JSON.parse(s);$e(e)}catch(e){}}catch(t){te(t instanceof Error?t.message:"è·å–æ•°æ®å¤±è´¥")}finally{W(!1)}},ze=async()=>{Q(!0),await He(),Q(!1)},Me=e=>{const t=function(e){return{weibo:"icon-weibo",zhihu:"icon-zhihu",douyin:"icon-douyin",bilibili:"icon-bilibili",baidu:"icon-baidu","36kr":"icon-36kr",ithome:"icon-ithome",sspai:"icon-sspai",juejin:"icon-juejin",csdn:"icon-csdn",github:"icon-github",v2ex:"icon-v2ex",ngabbs:"icon-ngabbs",hellogithub:"icon-hellogithub"}[e]||"icon-default"}(e);return s.jsx("span",{className:`${t} mr-2`})},Ke=e=>{ie(t=>new Set([...t,e]))},qe=t=>{const s=`${t.platform}-${t.title}`;oe(t=>{const n=new Set(t);return n.has(s)?(n.delete(s),e({title:"å·²å–æ¶ˆæ”¶è—",description:"è¯é¢˜å·²ä»çµæ„Ÿå¤¹ç§»é™¤"})):(n.add(s),e({title:"å·²æ”¶è—",description:"è¯é¢˜å·²æ·»åŠ åˆ°çµæ„Ÿå¤¹"})),n})},Je=e=>{const t=`${e.platform}-${e.title}`;return re.has(t)},Ve=e=>{const t=`${e.platform}-${e.title}`;return ae.has(t)},Ge=()=>{const e=Rt();ue(e),Ne(Dt())};t.useEffect(()=>{He(),Ge()},[]);const We=(()=>{if(!c||!c.data)return[];let e=[];return"all"===L?Object.values(c.data).forEach(t=>{e=e.concat(t.slice(0,10))}):e=(c.data[L]||[]).slice(0,10),(e=>{const t=e.filter(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase(),n=(e.content||"").toLowerCase(),r=e.platform||"",i=Pe.blockedKeywords.some(e=>t.includes(e.toLowerCase())||s.includes(e.toLowerCase())||n.includes(e.toLowerCase())),a=Pe.blockedPlatforms.includes(r);return!i&&!a}).map(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase(),n=(e.content||"").toLowerCase(),r=e.platform||"";let i=0,a=[];return Pe.preferredKeywords.forEach(e=>{const r=e.toLowerCase();(t.includes(r)||s.includes(r)||n.includes(r))&&(i+=10,a.push(e))}),Pe.preferredPlatforms.includes(r)&&(i+=5),{...e,preferenceScore:i,matchedKeywords:a,isHighPriority:i>0}});return[...t.filter(e=>e.isHighPriority).sort((e,t)=>{if(t.preferenceScore!==e.preferenceScore)return t.preferenceScore-e.preferenceScore;const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s}),...t.filter(e=>!e.isHighPriority).sort((e,t)=>{const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s})]})(e)})();return(()=>{if(!c||!c.data)return{total:0,platforms:0};Object.values(c.data).reduce((e,t)=>e+t.length,0),Object.keys(c.data).length})(),We.slice(0,3),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(j,{title:"å…¨ç½‘é›·è¾¾",description:"å®æ—¶ç›‘æ§å„å¹³å°çƒ­é—¨è¯é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯é¢˜è®¢é˜…å’Œæ™ºèƒ½è¿½è¸ª",showAdaptButton:!1}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(h,{value:le,onValueChange:e=>ce(e),className:"w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs(m,{className:"grid w-full grid-cols-3 max-w-md",children:[s.jsxs(f,{value:"hot",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(y,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"å…¨ç½‘çƒ­ç‚¹"}),s.jsx("span",{className:"sm:hidden",children:"çƒ­ç‚¹"})]}),s.jsxs(f,{value:"subscriptions",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(H,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"è¯é¢˜è®¢é˜…"}),s.jsx("span",{className:"sm:hidden",children:"è®¢é˜…"})]}),s.jsxs(f,{value:"bookmarks",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(v,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"çµæ„Ÿå¤¹"}),s.jsx("span",{className:"sm:hidden",children:"æ”¶è—"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(n,{variant:"outline",size:"sm",onClick:()=>ge(!0),className:"text-xs sm:text-sm",children:[s.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"æ·»åŠ è®¢é˜…"}),s.jsx("span",{className:"sm:hidden",children:"æ·»åŠ "})]}),s.jsxs(n,{variant:"outline",size:"sm",onClick:ze,disabled:X,className:"text-xs sm:text-sm",children:[s.jsx(b,{className:"w-4 h-4 mr-1 "+(X?"animate-spin":"")}),"åˆ·æ–°"]})]})]}),s.jsxs(p,{value:"hot",children:[ee&&s.jsx(i,{className:"mb-6 border-red-200 bg-red-50",children:s.jsx(l,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(V,{className:"w-4 h-4 text-red-600"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"è·å–çƒ­ç‚¹æ•°æ®å¤±è´¥"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:ee}),s.jsx("p",{className:"text-xs text-red-600 mt-2",children:"å¯èƒ½åŸå› ï¼šç½‘ç»œè¿æ¥å¼‚å¸¸ã€APIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€æˆ–é˜²ç«å¢™é™åˆ¶"})]}),s.jsxs(n,{variant:"outline",size:"sm",onClick:ze,disabled:X,className:"border-red-300 text-red-700 hover:bg-red-100",children:[s.jsx(b,{className:"h-4 h-4 mr-2 "+(X?"animate-spin":"")}),"é‡è¯•"]})]})})}),!G&&c&&c.data&&s.jsx("div",{className:"mb-6",children:s.jsxs(i,{children:[s.jsx(a,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(z,{className:"w-5 h-5 text-red-500"}),"ä»Šæ—¥æœ€çƒ­é—¨è¯é¢˜"]}),s.jsx(w,{children:"å„å¹³å°çƒ­é—¨è¯é¢˜æ’è¡Œæ¦œ"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["æœ€åæ›´æ–°: ",se.toLocaleString("zh-CN"),"ï¼ˆæ¯15åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°ï¼‰"]})]})}),s.jsx(l,{children:s.jsxs(h,{defaultValue:"all",className:"w-full",children:[s.jsxs(m,{className:"flex w-full overflow-x-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:[s.jsx(f,{value:"all",className:"min-w-[72px]",children:"æ€»æ¦œ"}),Re.map(e=>s.jsx(f,{value:e,className:"min-w-[72px]",children:Nt(e)},e))]}),s.jsx(p,{value:"all",className:"mt-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:vt(c.data).slice(0,10).map((e,t)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-all hover:shadow-md h-48 flex flex-col ${Je(e)?"bg-gray-50 opacity-75":"bg-white"} ${Ve(e)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(r,{variant:"destructive",className:"text-xs",children:["#",t+1]}),s.jsx(r,{variant:"outline",className:"text-xs",children:Nt(e.platform||"")})]}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2 flex-1",children:e.title}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[s.jsx("span",{children:Ue(e.hot)}),s.jsxs("div",{className:"flex items-center gap-1",children:[Ve(e)&&s.jsx(v,{className:"w-3 h-3 text-yellow-500 fill-current"}),Je(e)&&s.jsx(F,{className:"w-3 h-3 text-gray-400"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-auto",children:[s.jsxs(n,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7",onClick:()=>Fe(e),children:[s.jsx(M,{className:"w-3 h-3 mr-1"}),"æŸ¥çœ‹"]}),s.jsx(n,{size:"sm",variant:Ve(e)?"default":"outline",className:"text-xs h-7 "+(Ve(e)?"bg-yellow-500 hover:bg-yellow-600":""),onClick:()=>qe(e),children:s.jsx(v,{className:"w-3 h-3"})})]})]},t))})}),Re.map(e=>s.jsx(p,{value:e,className:"mt-4",children:0===(c.data[e]||[]).length?s.jsx("div",{className:"text-center text-gray-400 py-8",children:"æš‚æ— æ•°æ®"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:(c.data[e]||[]).slice(0,10).map((t,i)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-all hover:shadow-md h-48 flex flex-col ${Je(t)?"bg-gray-50 opacity-75":"bg-white"} ${Ve(t)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(r,{variant:"destructive",className:"text-xs",children:["#",i+1]}),s.jsx(r,{variant:"outline",className:"text-xs",children:Nt(e)})]}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2 flex-1",children:t.title}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[s.jsx("span",{children:Ue(t.hot)}),s.jsxs("div",{className:"flex items-center gap-1",children:[Ve(t)&&s.jsx(v,{className:"w-3 h-3 text-yellow-500 fill-current"}),Je(t)&&s.jsx(F,{className:"w-3 h-3 text-gray-400"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-auto",children:[s.jsxs(n,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7",onClick:()=>Fe(t),children:[s.jsx(M,{className:"w-3 h-3 mr-1"}),"æŸ¥çœ‹"]}),s.jsx(n,{size:"sm",variant:Ve(t)?"default":"outline",className:"text-xs h-7 "+(Ve(t)?"bg-yellow-500 hover:bg-yellow-600":""),onClick:()=>qe(t),children:s.jsx(v,{className:"w-3 h-3"})})]})]},i))})},e))]})})]})}),s.jsx(St,{onFilterChange:e=>{$e(e),localStorage.setItem("interestFilters",JSON.stringify(e))}}),"all"===L&&!G&&We.length>0&&s.jsx(kt,{topics:We,onCategoryChange:e=>{De(e)},onTopicClick:Be})]}),s.jsxs(p,{value:"subscriptions",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(i,{children:s.jsx(l,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:we.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ€»è®¢é˜…æ•°"})]})})}),s.jsx(i,{children:s.jsx(l,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:we.active}),s.jsx("p",{className:"text-sm text-gray-600",children:"æ´»è·ƒè®¢é˜…"})]})})}),s.jsx(i,{children:s.jsx(l,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:we.notificationEnabled}),s.jsx("p",{className:"text-sm text-gray-600",children:"é€šçŸ¥å¼€å¯"})]})})}),s.jsx(i,{children:s.jsx(l,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.values(he).flat().length}),s.jsx("p",{className:"text-sm text-gray-600",children:"ç›‘æ§ç»“æœ"})]})})})]}),0===de.length?s.jsx(i,{children:s.jsxs(l,{className:"text-center py-12",children:[s.jsx(q,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— è¯é¢˜è®¢é˜…"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"åˆ›å»ºè¯é¢˜è®¢é˜…ï¼Œå®æ—¶ç›‘æ§æ„Ÿå…´è¶£çš„å†…å®¹"}),s.jsxs(n,{onClick:()=>ge(!0),children:[s.jsx(B,{className:"w-4 h-4 mr-2"}),"æ·»åŠ ç¬¬ä¸€ä¸ªè®¢é˜…"]})]})}):s.jsx("div",{className:"space-y-4",children:de.map(t=>s.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[s.jsx(a,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(N,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["å…³é”®è¯: ",t.keyword]}),t.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u,{checked:t.isActive,onCheckedChange:s=>((t,s)=>{try{!function(e,t){const s=$t(e,{isActive:t});s&&At(t?"enabled":"disabled",s.name)}(t,s),Ge(),e({title:s?"è®¢é˜…å·²å¯ç”¨":"è®¢é˜…å·²ç¦ç”¨",description:s?"è®¢é˜…ç›‘æ§å·²å¼€å§‹":"è®¢é˜…ç›‘æ§å·²æš‚åœ"})}catch(n){e({title:"æ“ä½œå¤±è´¥",description:"åˆ‡æ¢è®¢é˜…çŠ¶æ€æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}})(t.id,s)}),s.jsxs(n,{variant:"outline",size:"sm",onClick:()=>(async t=>{be(!0);try{const s=await async function(e){const t=[];try{const i=e.sources.map(async t=>{try{const s=Tt.find(e=>e.id===t);if(!s||!s.isEnabled)return[];const n=await async function(e,t){const s=[];try{switch(t.type){case"news":s.push(...await async function(e,t){return[{title:`å…³äº"${e}"çš„æœ€æ–°æ–°é—»æŠ¥é“`,content:`è¿™æ˜¯ä¸€æ¡å…³äº"${e}"çš„æ–°é—»å†…å®¹ï¼ŒåŒ…å«äº†ç›¸å…³çš„ä¿¡æ¯å’ŒèƒŒæ™¯ã€‚`,heat:Math.floor(1e5*Math.random())+1e3,sentiment:"neutral"},{title:`"${e}"ç›¸å…³çƒ­ç‚¹äº‹ä»¶`,content:`è¿‘æœŸå…³äº"${e}"çš„çƒ­ç‚¹äº‹ä»¶å¼•å‘äº†å¹¿æ³›å…³æ³¨ã€‚`,heat:Math.floor(8e4*Math.random())+500,sentiment:"positive"}].map(s=>({id:It(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.9}))}(e,t));break;case"social":s.push(...await async function(e,t){return[{title:`"${e}"ç›¸å…³è®¨è®º`,content:`ç¤¾äº¤åª’ä½“ä¸Šå…³äº"${e}"çš„çƒ­é—¨è®¨è®ºå†…å®¹ã€‚`,heat:Math.floor(5e4*Math.random())+500,sentiment:"positive"},{title:`"${e}"ç”¨æˆ·çƒ­è®®`,content:`ç”¨æˆ·ä»¬å¯¹"${e}"çš„è®¨è®ºå’Œè§‚ç‚¹åˆ†äº«ã€‚`,heat:Math.floor(3e4*Math.random())+200,sentiment:"neutral"}].map(s=>({id:It(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.8}))}(e,t));break;case"search":s.push(...await async function(e,t){return[{title:`"${e}"ç›¸å…³ç½‘é¡µå†…å®¹`,content:`å…³äº"${e}"çš„ç½‘é¡µæœç´¢ç»“æœå’Œç›¸å…³ä¿¡æ¯ã€‚`,heat:Math.floor(2e4*Math.random())+100,sentiment:"neutral"}].map(s=>({id:It(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.7}))}(e,t))}}catch(ee){}return s}(e.keyword,s);return n.map(t=>({...t,subscriptionId:e.id,keyword:e.keyword}))}catch(ee){return[]}});(await Promise.allSettled(i)).forEach(e=>{"fulfilled"===e.status&&t.push(...e.value)});const a=function(e){const t=new Set;return e.filter(e=>{const s=`${e.url}-${e.platform}`;return!t.has(s)&&(t.add(s),!0)})}(t),o=a.sort((e,t)=>t.heat-e.heat);if(e.maxHeatThreshold){const t=o.filter(t=>t.heat>=e.maxHeatThreshold);if(t.length>0&&e.notificationEnabled){const i=Math.max(...t.map(e=>e.heat));s=e.keyword,n=i,r=e.maxHeatThreshold,Ot({type:"heat_alert",level:"warning",title:`çƒ­åº¦è­¦æŠ¥: ${s}`,message:`"${s}"çƒ­åº¦è¾¾åˆ° ${n.toLocaleString()}ï¼Œè¶…è¿‡é˜ˆå€¼ ${r.toLocaleString()}`,data:{keyword:s,heat:n,threshold:r},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(s)}`})}}return $t(e.id,{lastCheckAt:(new Date).toISOString()}),e.notificationEnabled&&function(e,t,s){const n=t.length;Ot({type:"topic_update",level:n>0?"success":"info",title:`è¯é¢˜æ›´æ–°: ${e}`,message:n>0?`å‘ç° ${n} æ¡å…³äº"${e}"çš„æ–°å†…å®¹`:`"${e}"æš‚æ— æ–°å†…å®¹`,data:{keyword:e,subscriptionName:s,resultCount:n},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}(e.keyword,o,e.name),o}catch(ee){return[]}var s,n,r}(t);me(e=>({...e,[t.id]:s})),s.length>0?e({title:"ç›‘æ§å®Œæˆ",description:`å‘ç° ${s.length} ä¸ªç›¸å…³è¯é¢˜`}):e({title:"ç›‘æ§å®Œæˆ",description:"æœªå‘ç°ç›¸å…³è¯é¢˜"})}catch(s){e({title:"ç›‘æ§å¤±è´¥",description:"ç›‘æ§è¯é¢˜æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}finally{be(!1)}})(t),disabled:ve,children:[s.jsx(F,{className:"w-4 h-4 mr-2"}),ve?"æ£€æŸ¥ä¸­...":"æ£€æŸ¥"]}),s.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{pe(t),(async e=>{if(!Se[e]){Ce(t=>({...t,[e]:!0}));try{const t=await async function(e,t=7){const s=[],n=new Date;for(let r=t-1;r>=0;r--){const t=new Date(n);t.setDate(t.getDate()-r),s.push({keyword:e,date:t.toISOString().split("T")[0],heat:Math.floor(1e5*Math.random())+1e3,mentions:Math.floor(100*Math.random())+10,platforms:["å¾®åš","çŸ¥ä¹","ç™¾åº¦","Bç«™","æŠ–éŸ³"]})}return s}(e,7);ke(s=>({...s,[e]:t}))}catch(t){}finally{Ce(t=>({...t,[e]:!1}))}}})(t.keyword)},children:[s.jsx(J,{className:"w-4 h-4 mr-2"}),"è¶‹åŠ¿"]}),s.jsx(n,{variant:"outline",size:"sm",onClick:()=>(t=>{try{!function(e){const t=Rt(),s=t.find(t=>t.id===e),n=t.filter(t=>t.id!==e);n.length!==t.length&&(Pt(n),s&&At("deleted",s.name))}(t),Ge(),e({title:"åˆ é™¤æˆåŠŸ",description:"è®¢é˜…å·²åˆ é™¤"})}catch(s){e({title:"åˆ é™¤å¤±è´¥",description:"åˆ é™¤è®¢é˜…æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}})(t.id),className:"text-red-600 hover:text-red-700",children:s.jsx(K,{className:"w-4 h-4"})})]})]})}),s.jsxs(l,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"çŠ¶æ€:"}),s.jsx(r,{variant:t.isActive?"default":"secondary",className:"ml-2",children:t.isActive?"æ´»è·ƒ":"æš‚åœ"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"é€šçŸ¥:"}),s.jsx(r,{variant:t.notificationEnabled?"default":"secondary",className:"ml-2",children:t.notificationEnabled?"å¼€å¯":"å…³é—­"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"æ£€æŸ¥é—´éš”:"}),s.jsxs("span",{className:"ml-2",children:[t.checkInterval,"åˆ†é’Ÿ"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"çƒ­åº¦é˜ˆå€¼:"}),s.jsxs("span",{className:"ml-2",children:[t.minHeatThreshold,"-",t.maxHeatThreshold]})]})]}),he[t.id]&&he[t.id].length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"ç›‘æ§ç»“æœ"}),s.jsxs("div",{className:"space-y-2",children:[he[t.id].slice(0,3).map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:e.title}),s.jsx(r,{variant:"outline",className:"text-xs",children:e.platform})]},t)),he[t.id].length>3&&s.jsxs("p",{className:"text-xs text-gray-500",children:["è¿˜æœ‰ ",he[t.id].length-3," ä¸ªç»“æœ..."]})]})]})]})]},t.id))})]}),s.jsx(p,{value:"bookmarks",children:s.jsxs(i,{children:[s.jsxs(a,{children:[s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(v,{className:"w-5 h-5 text-yellow-500"}),"çµæ„Ÿå¤¹"]}),s.jsx(w,{children:"æ‚¨æ”¶è—çš„æ„Ÿå…´è¶£è¯é¢˜"})]}),s.jsx(l,{children:0===ae.size?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(v,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— æ”¶è—è¯é¢˜"}),s.jsx("p",{className:"text-gray-600",children:"ç‚¹å‡»è¯é¢˜å³ä¾§çš„ä¹¦ç­¾å›¾æ ‡æ¥æ”¶è—æ„Ÿå…´è¶£çš„å†…å®¹"})]}):s.jsx("div",{className:"space-y-3",children:Array.from(ae).map((e,t)=>{let i=null;if(c&&c.data)for(const[s,n]of Object.entries(c.data)){const t=n.find(t=>`${t.platform}-${t.title}`===e);if(t){i=t;break}}return i?s.jsx("div",{className:"p-4 rounded-lg border border-yellow-300 bg-yellow-50 cursor-pointer transition-all hover:shadow-md",onClick:()=>Be(i),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(r,{className:"bg-yellow-500 text-white text-xs",children:[s.jsx(v,{className:"w-3 h-3 mr-1"}),"å·²æ”¶è—"]}),s.jsx(r,{variant:"outline",className:"text-xs",children:Nt(i.platform||"")}),i.hot&&s.jsxs(r,{variant:"destructive",className:"text-xs",children:[s.jsx(z,{className:"w-3 h-3 mr-1"}),"çƒ­"]})]}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:i.title}),i.desc&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.desc}),i.content&&s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:i.content}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["çƒ­åº¦: ",Ue(i.hot)]}),s.jsxs("span",{children:["å¹³å°: ",Nt(i.platform||"")]}),i.rank&&s.jsxs("span",{children:["æ’å: #",i.rank]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[s.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),qe(i)},children:s.jsx(v,{className:"w-4 h-4 text-yellow-500 fill-current"})}),s.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),Fe(i)},children:s.jsx(M,{className:"w-4 h-4"})})]})]})},e):null})})})]})})]}),s.jsx(T,{open:xe,onOpenChange:ge,children:s.jsxs(R,{className:"sm:max-w-[500px]",children:[s.jsxs(P,{children:[s.jsx($,{children:"æ·»åŠ è¯é¢˜è®¢é˜…"}),s.jsx(I,{children:"è®¾ç½®å…³é”®è¯å’Œç›‘æ§æ¡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è¿½è¸ªç›¸å…³è¯é¢˜"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{htmlFor:"keyword",children:"å…³é”®è¯ *"}),s.jsx(A,{id:"keyword",placeholder:"è¾“å…¥è¦ç›‘æ§çš„å…³é”®è¯",value:Oe.keyword,onChange:e=>Ae(t=>({...t,keyword:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{htmlFor:"name",children:"è®¢é˜…åç§°"}),s.jsx(A,{id:"name",placeholder:"ä¸ºè®¢é˜…èµ·ä¸ªåå­—",value:Oe.name,onChange:e=>Ae(t=>({...t,name:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{htmlFor:"description",children:"æè¿°"}),s.jsx(A,{id:"description",placeholder:"è®¢é˜…çš„è¯¦ç»†æè¿°",value:Oe.description,onChange:e=>Ae(t=>({...t,description:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{children:"ç›‘æ§å¹³å°"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Re.map(e=>s.jsxs(n,{variant:Oe.platforms.includes(e)?"default":"outline",size:"sm",onClick:()=>{const t=Oe.platforms.includes(e)?Oe.platforms.filter(t=>t!==e):[...Oe.platforms,e];Ae(e=>({...e,platforms:t}))},children:[Me(e),Nt(e)]},e))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{htmlFor:"checkInterval",children:"æ£€æŸ¥é—´éš” (åˆ†é’Ÿ)"}),s.jsxs(S,{value:Oe.checkInterval.toString(),onValueChange:e=>Ae(t=>({...t,checkInterval:parseInt(e)})),children:[s.jsx(k,{children:s.jsx(E,{})}),s.jsxs(C,{children:[s.jsx(O,{value:"5",children:"5åˆ†é’Ÿ"}),s.jsx(O,{value:"15",children:"15åˆ†é’Ÿ"}),s.jsx(O,{value:"30",children:"30åˆ†é’Ÿ"}),s.jsx(O,{value:"60",children:"1å°æ—¶"}),s.jsx(O,{value:"120",children:"2å°æ—¶"})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(d,{htmlFor:"minHeatThreshold",children:"æœ€ä½çƒ­åº¦"}),s.jsx(A,{id:"minHeatThreshold",type:"number",value:Oe.minHeatThreshold,onChange:e=>Ae(t=>({...t,minHeatThreshold:parseInt(e.target.value)||0}))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(u,{id:"isActive",checked:Oe.isActive,onCheckedChange:e=>Ae(t=>({...t,isActive:e}))}),s.jsx(d,{htmlFor:"isActive",children:"ç«‹å³å¯ç”¨"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(u,{id:"notificationEnabled",checked:Oe.notificationEnabled,onCheckedChange:e=>Ae(t=>({...t,notificationEnabled:e}))}),s.jsx(d,{htmlFor:"notificationEnabled",children:"å¯ç”¨é€šçŸ¥"})]})]}),s.jsxs(D,{children:[s.jsx(n,{variant:"outline",onClick:()=>ge(!1),children:"å–æ¶ˆ"}),s.jsx(n,{onClick:()=>{if(Oe.keyword.trim())try{!function(e){const t=Rt(),s={...e,id:It(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};t.push(s),Pt(t),At("created",s.name)}({...Oe,lastChecked:null,lastNotification:null}),Ae({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),ge(!1),Ge(),e({title:"è®¢é˜…æ·»åŠ æˆåŠŸ",description:`å·²æ·»åŠ å…³é”®è¯"${Oe.keyword}"çš„è®¢é˜…`})}catch(t){e({title:"æ·»åŠ å¤±è´¥",description:"æ·»åŠ è®¢é˜…æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}else e({title:"è¯·è¾“å…¥å…³é”®è¯",description:"è®¢é˜…å…³é”®è¯ä¸èƒ½ä¸ºç©º",variant:"destructive"})},children:"æ·»åŠ è®¢é˜…"})]})]})})]})]})}export{_t as default};
