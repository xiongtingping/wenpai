import{c as e,r as t,j as s,P as n,h as r,B as i,X as a,k as o,t as l,T as c}from"./index-CZg_0vaA.js";import{C as d,a as u,b as h,d as m,c as f}from"./card-WrqbDkJy.js";import{B as p}from"./badge-Cg_l4nEW.js";import{I as x,T as g}from"./input-CZ5IVbsF.js";import{L as y}from"./label-C3olWSKx.js";import{F as j,T as v,a as b,b as w,c as N,D as k,h as S,i as E,j as C,k as O,S as A,d as T,e as R,f as P,g as $,l as I}from"./select-BO1vNXcf.js";import{S as D}from"./switch-B0TyXNUb.js";import{P as _,B as L}from"./PageNavigation-D6S86xqr.js";import{P as B}from"./plus-CDKFTIIo.js";import{E as U}from"./eye-D6IWbxE2.js";import{T as M}from"./target-CO6W9F3R.js";import"./index-PI-h6tk7.js";import"./zap-oQG61wBn.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=e("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),z=e("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),H=e("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),q=e("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),K=e("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),J=e("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),V=e("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),G=e("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var W,X,Q,Y,Z,ee,te,se,ne,re,ie,ae,oe,le,ce,de,ue,he,me,fe,pe,xe,ge,ye,je,ve,be,we,Ne,ke,Se,Ee,Ce,Oe,Ae,Te,Re,Pe,$e,Ie,De,_e,Le,Be,Ue,Me,Fe,ze,He,qe,Ke,Je,Ve,Ge,We,Xe,Qe,Ye,Ze,et,tt,st,nt={exports:{}};function rt(){return X||(X=1,W=function(e,t){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(t,s)}}),W}function it(){if(Y)return Q;Y=1;var e=rt(),t=Object.prototype.toString,s=function(e){return function(s){var n=t.call(s);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function n(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function r(e){return Array.isArray(e)}function i(e){return void 0===e}var a=n("ArrayBuffer");function o(e){return null!==e&&"object"==typeof e}function l(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var c=n("Date"),d=n("File"),u=n("Blob"),h=n("FileList");function m(e){return"[object Function]"===t.call(e)}var f=n("URLSearchParams");function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var x=function(e){return function(t){return e&&t instanceof e}}("undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));return Q={isArray:r,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var s="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||t.call(e)===s||m(e.toString)&&e.toString()===s)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:l,isUndefined:i,isDate:c,isFile:d,isBlob:u,isFunction:m,isStream:function(e){return o(e)&&m(e.pipe)},isURLSearchParams:f,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function s(s,n){l(t[n])&&l(s)?t[n]=e(t[n],s):l(s)?t[n]=e({},s):r(s)?t[n]=s.slice():t[n]=s}for(var n=0,i=arguments.length;n<i;n++)p(arguments[n],s);return t},extend:function(t,s,n){return p(s,function(s,r){t[r]=n&&"function"==typeof s?e(s,n):s}),t},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,s,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,s&&Object.assign(e.prototype,s)},toFlatObject:function(e,t,s){var n,r,i,a={};t=t||{};do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)a[i=n[r]]||(t[i]=e[i],a[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:n,endsWith:function(e,t,s){e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;var n=e.indexOf(t,s);return-1!==n&&n===s},toArray:function(e){if(!e)return null;var t=e.length;if(i(t))return null;for(var s=new Array(t);t-- >0;)s[t]=e[t];return s},isTypedArray:x,isFileList:h},Q}function at(){if(ee)return Z;ee=1;var e=it();function t(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return Z=function(s,n,r){if(!n)return s;var i;if(r)i=r(n);else if(e.isURLSearchParams(n))i=n.toString();else{var a=[];e.forEach(n,function(s,n){null!=s&&(e.isArray(s)?n+="[]":s=[s],e.forEach(s,function(s){e.isDate(s)?s=s.toISOString():e.isObject(s)&&(s=JSON.stringify(s)),a.push(t(n)+"="+t(s))}))}),i=a.join("&")}if(i){var o=s.indexOf("#");-1!==o&&(s=s.slice(0,o)),s+=(-1===s.indexOf("?")?"?":"&")+i}return s}}function ot(){if(ae)return ie;ae=1;var e=it();function t(e,t,s,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r)}e.inherits(t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=t.prototype,n={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){n[e]={value:e}}),Object.defineProperties(t,n),Object.defineProperty(s,"isAxiosError",{value:!0}),t.from=function(n,r,i,a,o,l){var c=Object.create(s);return e.toFlatObject(n,c,function(e){return e!==Error.prototype}),t.call(c,n.message,r,i,a,o),c.name=n.name,l&&Object.assign(c,l),c},ie=t}function lt(){return le?oe:(le=1,oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1})}function ct(){if(de)return ce;de=1;var e=it();return ce=function(t,s){s=s||new FormData;var n=[];function r(t){return null===t?"":e.isDate(t)?t.toISOString():e.isArrayBuffer(t)||e.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(i,a){if(e.isPlainObject(i)||e.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+a);n.push(i),e.forEach(i,function(n,i){if(!e.isUndefined(n)){var o,l=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(e.endsWith(i,"{}"))n=JSON.stringify(n);else if(e.endsWith(i,"[]")&&(o=e.toArray(n)))return void o.forEach(function(t){!e.isUndefined(t)&&s.append(l,r(t))});t(n,l)}}),n.pop()}else s.append(a,r(i))}(t),s}}function dt(){if(ve)return je;ve=1;var e=xe?pe:(xe=1,pe=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),t=ye?ge:(ye=1,ge=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e});return je=function(s,n){return s&&!e(n)?t(s,n):n}}function ut(){if(Ee)return Se;Ee=1;var e=ot();function t(t){e.call(this,null==t?"canceled":t,e.ERR_CANCELED),this.name="CanceledError"}return it().inherits(t,e,{__CANCEL__:!0}),Se=t}function ht(){if(Te)return Ae;Te=1;var e=it(),t=function(){if(he)return ue;he=1;var e=ot();return ue=function(t,s,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?s(new e("Request failed with status code "+n.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}}(),s=function(){if(fe)return me;fe=1;var e=it();return me=e.isStandardBrowserEnv()?function(){return{write:function(t,s,n,r,i,a){var o=[];o.push(t+"="+encodeURIComponent(s)),e.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),e.isString(r)&&o.push("path="+r),e.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()}(),n=at(),r=dt(),i=function(){if(we)return be;we=1;var e=it(),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return be=function(s){var n,r,i,a={};return s?(e.forEach(s.split("\n"),function(s){if(i=s.indexOf(":"),n=e.trim(s.substr(0,i)).toLowerCase(),r=e.trim(s.substr(i+1)),n){if(a[n]&&t.indexOf(n)>=0)return;a[n]="set-cookie"===n?(a[n]?a[n]:[]).concat([r]):a[n]?a[n]+", "+r:r}}),a):a}}(),a=function(){if(ke)return Ne;ke=1;var e=it();return Ne=e.isStandardBrowserEnv()?function(){var t,s=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var t=e;return s&&(n.setAttribute("href",t),t=n.href),n.setAttribute("href",t),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(s){var n=e.isString(s)?r(s):s;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()}(),o=lt(),l=ot(),c=ut(),d=Oe?Ce:(Oe=1,Ce=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""});return Ae=function(u){return new Promise(function(h,m){var f,p=u.data,x=u.headers,g=u.responseType;function y(){u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}e.isFormData(p)&&e.isStandardBrowserEnv()&&delete x["Content-Type"];var j=new XMLHttpRequest;if(u.auth){var v=u.auth.username||"",b=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";x.Authorization="Basic "+btoa(v+":"+b)}var w=r(u.baseURL,u.url);function N(){if(j){var e="getAllResponseHeaders"in j?i(j.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?j.response:j.responseText,status:j.status,statusText:j.statusText,headers:e,config:u,request:j};t(function(e){h(e),y()},function(e){m(e),y()},s),j=null}}if(j.open(u.method.toUpperCase(),n(w,u.params,u.paramsSerializer),!0),j.timeout=u.timeout,"onloadend"in j?j.onloadend=N:j.onreadystatechange=function(){j&&4===j.readyState&&(0!==j.status||j.responseURL&&0===j.responseURL.indexOf("file:"))&&setTimeout(N)},j.onabort=function(){j&&(m(new l("Request aborted",l.ECONNABORTED,u,j)),j=null)},j.onerror=function(){m(new l("Network Error",l.ERR_NETWORK,u,j,j)),j=null},j.ontimeout=function(){var e=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",t=u.transitional||o;u.timeoutErrorMessage&&(e=u.timeoutErrorMessage),m(new l(e,t.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,u,j)),j=null},e.isStandardBrowserEnv()){var k=(u.withCredentials||a(w))&&u.xsrfCookieName?s.read(u.xsrfCookieName):void 0;k&&(x[u.xsrfHeaderName]=k)}"setRequestHeader"in j&&e.forEach(x,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete x[t]:j.setRequestHeader(t,e)}),e.isUndefined(u.withCredentials)||(j.withCredentials=!!u.withCredentials),g&&"json"!==g&&(j.responseType=u.responseType),"function"==typeof u.onDownloadProgress&&j.addEventListener("progress",u.onDownloadProgress),"function"==typeof u.onUploadProgress&&j.upload&&j.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(f=function(e){j&&(m(!e||e&&e.type?new c:e),j.abort(),j=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f))),p||(p=null);var S=d(w);S&&-1===["http","https","file"].indexOf(S)?m(new l("Unsupported protocol "+S+":",l.ERR_BAD_REQUEST,u)):j.send(p)})}}function mt(){if(Ie)return $e;Ie=1;var e=it(),t=function(){if(re)return ne;re=1;var e=it();return ne=function(t,s){e.forEach(t,function(e,n){n!==s&&n.toUpperCase()===s.toUpperCase()&&(t[s]=e,delete t[n])})}}(),s=ot(),n=lt(),r=ct(),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,s){!e.isUndefined(t)&&e.isUndefined(t["Content-Type"])&&(t["Content-Type"]=s)}var o,l={transitional:n,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(o=ht()),o),transformRequest:[function(s,n){if(t(n,"Accept"),t(n,"Content-Type"),e.isFormData(s)||e.isArrayBuffer(s)||e.isBuffer(s)||e.isStream(s)||e.isFile(s)||e.isBlob(s))return s;if(e.isArrayBufferView(s))return s.buffer;if(e.isURLSearchParams(s))return a(n,"application/x-www-form-urlencoded;charset=utf-8"),s.toString();var i,o=e.isObject(s),l=n&&n["Content-Type"];if((i=e.isFileList(s))||o&&"multipart/form-data"===l){var c=this.env&&this.env.FormData;return r(i?{"files[]":s}:s,c&&new c)}return o||"application/json"===l?(a(n,"application/json"),function(t){if(e.isString(t))try{return(0,JSON.parse)(t),e.trim(t)}catch(s){if("SyntaxError"!==s.name)throw s}return(0,JSON.stringify)(t)}(s)):s}],transformResponse:[function(t){var n=this.transitional||l.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||i&&e.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a){if("SyntaxError"===o.name)throw s.from(o,s.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe?Re:(Pe=1,Re=null)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(e){l.headers[e]={}}),e.forEach(["post","put","patch"],function(t){l.headers[t]=e.merge(i)}),$e=l}function ft(){return Be?Le:(Be=1,Le=function(e){return!(!e||!e.__CANCEL__)})}function pt(){if(ze)return Fe;ze=1;var e=it();return Fe=function(t,s){s=s||{};var n={};function r(t,s){return e.isPlainObject(t)&&e.isPlainObject(s)?e.merge(t,s):e.isPlainObject(s)?e.merge({},s):e.isArray(s)?s.slice():s}function i(n){return e.isUndefined(s[n])?e.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],s[n])}function a(t){if(!e.isUndefined(s[t]))return r(void 0,s[t])}function o(n){return e.isUndefined(s[n])?e.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,s[n])}function l(e){return e in s?r(t[e],s[e]):e in t?r(void 0,t[e]):void 0}var c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return e.forEach(Object.keys(t).concat(Object.keys(s)),function(t){var s=c[t]||i,r=s(t);e.isUndefined(r)&&s!==l||(n[t]=r)}),n}}function xt(){return qe?He:(qe=1,He={version:"0.27.2"})}function gt(){if(Ge)return Ve;Ge=1;var e=it(),t=at(),s=function(){if(se)return te;se=1;var e=it();function t(){this.handlers=[]}return t.prototype.use=function(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1},t.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},t.prototype.forEach=function(t){e.forEach(this.handlers,function(e){null!==e&&t(e)})},te=t}(),n=function(){if(Me)return Ue;Me=1;var e=it(),t=function(){if(_e)return De;_e=1;var e=it(),t=mt();return De=function(s,n,r){var i=this||t;return e.forEach(r,function(e){s=e.call(i,s,n)}),s}}(),s=ft(),n=mt(),r=ut();function i(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new r}return Ue=function(r){return i(r),r.headers=r.headers||{},r.data=t.call(r,r.data,r.headers,r.transformRequest),r.headers=e.merge(r.headers.common||{},r.headers[r.method]||{},r.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete r.headers[e]}),(r.adapter||n.adapter)(r).then(function(e){return i(r),e.data=t.call(r,e.data,e.headers,r.transformResponse),e},function(e){return s(e)||(i(r),e&&e.response&&(e.response.data=t.call(r,e.response.data,e.response.headers,r.transformResponse))),Promise.reject(e)})}}(),r=pt(),i=dt(),a=function(){if(Je)return Ke;Je=1;var e=xt().version,t=ot(),s={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){s[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var n={};return s.transitional=function(s,r,i){return function(a,o,l){if(!1===s)throw new t(function(t,s){return"[Axios v"+e+"] Transitional option '"+t+"'"+s+(i?". "+i:"")}(o," has been removed"+(r?" in "+r:"")),t.ERR_DEPRECATED);return r&&!n[o]&&(n[o]=!0),!s||s(a,o,l)}},Ke={assertOptions:function(e,s,n){if("object"!=typeof e)throw new t("options must be an object",t.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=s[a];if(o){var l=e[a],c=void 0===l||o(l,a,e);if(!0!==c)throw new t("option "+a+" must be "+c,t.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new t("Unknown option "+a,t.ERR_BAD_OPTION)}},validators:s}}(),o=a.validators;function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}return l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=r(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var s=t.transitional;void 0!==s&&a.assertOptions(s,{silentJSONParsing:o.transitional(o.boolean),forcedJSONParsing:o.transitional(o.boolean),clarifyTimeoutError:o.transitional(o.boolean)},!1);var i=[],l=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});var c,d=[];if(this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)}),!l){var u=[n,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(d),c=Promise.resolve(t);u.length;)c=c.then(u.shift(),u.shift());return c}for(var h=t;i.length;){var m=i.shift(),f=i.shift();try{h=m(h)}catch(p){f(p);break}}try{c=n(h)}catch(p){return Promise.reject(p)}for(;d.length;)c=c.then(d.shift(),d.shift());return c},l.prototype.getUri=function(e){e=r(this.defaults,e);var s=i(e.baseURL,e.url);return t(s,e.params,e.paramsSerializer)},e.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,s){return this.request(r(s||{},{method:e,url:t,data:(s||{}).data}))}}),e.forEach(["post","put","patch"],function(e){function t(t){return function(s,n,i){return this.request(r(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)}),Ve=l}function yt(e,t){const s={weibo:"微博",zhihu:"知乎",douyin:"抖音",bilibili:"B站",baidu:"百度","36kr":"36氪",ithome:"IT之家",sspai:"少数派",juejin:"掘金",csdn:"CSDN",github:"GitHub",v2ex:"V2EX",ngabbs:"NGA",hellogithub:"HelloGitHub"}[t]||t,n=e.toLowerCase();return n.includes("明星")||n.includes("演员")||n.includes("歌手")||n.includes("电影")||n.includes("电视剧")||n.includes("综艺")||n.includes("周杰伦")||n.includes("更新")?`"${e}"在${s}上引发热议。该话题涉及娱乐圈最新动态，网友们纷纷发表看法，讨论热度持续攀升。相关话题包括明星动态、作品评价、行业趋势等多个方面。`:n.includes("科技")||n.includes("手机")||n.includes("电脑")||n.includes("ai")||n.includes("人工智能")||n.includes("互联网")||n.includes("苹果")||n.includes("华为")||n.includes("小米")?`"${e}"成为${s}科技圈焦点。该话题涉及技术创新、产品发布、行业趋势等，引发了专业人士和普通用户的广泛讨论。相关分析包括技术细节、市场影响、未来展望等。`:n.includes("社会")||n.includes("民生")||n.includes("政策")||n.includes("教育")||n.includes("医疗")||n.includes("交通")||n.includes("医院")||n.includes("洗手")?`"${e}"在${s}上引发社会关注。该话题涉及民生热点、社会现象、政策解读等，网友们从不同角度展开讨论，反映了公众对相关问题的关注和思考。`:n.includes("体育")||n.includes("足球")||n.includes("篮球")||n.includes("比赛")||n.includes("运动员")||n.includes("奥运")?`"${e}"在${s}体育圈引发热议。该话题涉及体育赛事、运动员表现、比赛结果等，体育爱好者们积极参与讨论，分享观点和感受。`:n.includes("财经")||n.includes("股市")||n.includes("基金")||n.includes("经济")||n.includes("投资")||n.includes("理财")?`"${e}"成为${s}财经领域热点。该话题涉及市场动态、投资趋势、经济政策等，吸引了投资者和财经爱好者的关注，相关分析包括市场影响、投资建议等。`:`"${e}"在${s}上引发关注。该话题涉及多个方面的讨论，网友们从不同角度分享观点，形成了丰富的讨论内容。相关话题包括背景分析、影响评估、未来展望等。`}function jt(e){const t=e.split(/[，。！？\s]+/).filter(e=>e.length>1),s=[];if(t.length>0){const e=Math.min(3,t.length);for(let n=0;n<e;n++){const e=t[n];e&&e.length>1&&s.push(`${e}相关讨论`)}}if(s.length<3){const e=["热门话题","实时讨论","最新动态"];for(let t=s.length;t<3;t++)s.push(e[t-s.length])}return s.slice(0,3)}function vt(e){const t={};for(const[s,n]of Object.entries(e.data))"weatheralarm"!==s&&"earthquake"!==s&&(t[s]=n.map((e,t)=>({...e,platform:s,content:yt(e.title,s),relatedTopics:jt(e.title),rank:t+1,desc:e.desc||e.title})));return{...e,data:t}}function bt(e){const t=[];for(const[s,n]of Object.entries(e)){const e=n.map(e=>({...e,platform:s,hotValue:parseInt(e.hot)||0})).sort((e,t)=>t.hotValue-e.hotValue).slice(0,3);t.push(...e)}return t.sort((e,t)=>{const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s}).map((e,t)=>({...e,rank:t+1,hot:wt(e.hot)}))}function wt(e){const t=parseInt(e);return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:e}async function Nt(e){if("weatheralarm"===e||"earthquake"===e)return[];const t=[{name:"netlify-proxy",url:"/.netlify/functions/api",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"hot-topics",platform:e})},{name:"allorigins-proxy",url:`https://api.allorigins.win/get?url=https://api-hot.imsyy.top/${e}`,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},isAllOrigins:!0},{name:"direct-api",url:`https://api-hot.imsyy.top/${e}`,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}];for(const r of t)try{const t={method:r.method,headers:r.headers};r.body&&(t.body=r.body);const n=await fetch(r.url,t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i)throw new Error("API返回空数据");let a=i;if(r.isAllOrigins&&i.contents)try{a=JSON.parse(i.contents)}catch(s){continue}let o=[];if(200===a.code&&Array.isArray(a.data))o=a.data;else if(Array.isArray(a))o=a;else if(200===a.code&&"object"==typeof a.data){const e=a.data;if(Array.isArray(e))o=e;else{const t=Object.keys(e).filter(t=>Array.isArray(e[t]));t.length>0&&(o=e[t[0]])}}else if(a.error)throw new Error(a.error);if(o.length>0)return o.map((t,s)=>({...t,platform:e,content:yt(t.title,e),relatedTopics:jt(t.title),rank:s+1,desc:t.desc||t.title}));continue}catch(n){continue}throw new Error(`无法获取${e}平台数据，请检查网络连接或稍后重试`)}function kt(e){return{weibo:"微博",zhihu:"知乎",douyin:"抖音",bilibili:"B站",baidu:"百度","36kr":"36氪",ithome:"IT之家",sspai:"少数派",juejin:"掘金",csdn:"CSDN",github:"GitHub",v2ex:"V2EX",ngabbs:"NGA",hellogithub:"HelloGitHub"}[e]||e}st||(st=1,function(){if(tt)return nt.exports;tt=1;var e=it(),t=rt(),s=gt(),n=pt(),r=function r(i){var a=new s(i),o=t(s.prototype.request,a);return e.extend(o,s.prototype,a),e.extend(o,a),o.create=function(e){return r(n(i,e))},o}(mt());r.Axios=s,r.CanceledError=ut(),r.CancelToken=function(){if(Xe)return We;Xe=1;var e=ut();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(e){s=e});var n=this;this.promise.then(function(e){if(n._listeners){var t,s=n._listeners.length;for(t=0;t<s;t++)n._listeners[t](e);n._listeners=null}}),this.promise.then=function(e){var t,s=new Promise(function(e){n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},t(function(t){n.reason||(n.reason=new e(t),s(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},t.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},t.source=function(){var e;return{token:new t(function(t){e=t}),cancel:e}},We=t}(),r.isCancel=ft(),r.VERSION=xt().version,r.toFormData=ct(),r.AxiosError=ot(),r.Cancel=r.CanceledError,r.all=function(e){return Promise.all(e)},r.spread=Ye?Qe:(Ye=1,Qe=function(e){return function(t){return e.apply(null,t)}}),r.isAxiosError=function(){if(et)return Ze;et=1;var e=it();return Ze=function(t){return e.isObject(t)&&!0===t.isAxiosError}}(),nt.exports=r,nt.exports.default=r,nt.exports}());var St="horizontal",Et=["horizontal","vertical"],Ct=t.forwardRef((e,t)=>{const{decorative:r,orientation:i=St,...a}=e,o=function(e){return Et.includes(e)}(i)?i:St,l=r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return s.jsx(n.div,{"data-orientation":o,...l,...a,ref:t})});Ct.displayName="Separator";var Ot=Ct;const At=t.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...i},a)=>s.jsx(Ot,{ref:a,decorative:n,orientation:t,className:r("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...i}));At.displayName=Ot.displayName;const Tt=({onFilterChange:e})=>{const[n,r]=t.useState(!1),[o,l]=t.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[c,f]=t.useState(""),[g,v]=t.useState("");t.useEffect(()=>{const t=localStorage.getItem("interestFilters");if(t)try{const s=JSON.parse(t);l(s),e(s)}catch(s){}},[]);const b=t=>{localStorage.setItem("interestFilters",JSON.stringify(t)),l(t),e(t)},w=()=>{if(c.trim()&&!o.blockedKeywords.includes(c.trim())){const e={...o,blockedKeywords:[...o.blockedKeywords,c.trim()]};b(e),f("")}},N=()=>{if(g.trim()&&!o.preferredKeywords.includes(g.trim())){const e={...o,preferredKeywords:[...o.preferredKeywords,g.trim()]};b(e),v("")}};return s.jsxs("div",{className:"mb-6",children:[s.jsxs(i,{variant:"outline",onClick:()=>r(!n),className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-4 w-4"}),"兴趣调节",o.blockedKeywords.length>0||o.preferredKeywords.length>0&&s.jsx(p,{variant:"secondary",className:"ml-2",children:o.blockedKeywords.length+o.preferredKeywords.length})]}),n&&s.jsxs(d,{className:"mt-4",children:[s.jsx(u,{children:s.jsxs(h,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"兴趣调节设置"}),s.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{b({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1})},children:"重置"})]})}),s.jsxs(m,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(K,{className:"h-4 w-4"}),"屏蔽关键词"]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx(x,{placeholder:"输入要屏蔽的关键词",value:c,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&w()}),s.jsx(i,{onClick:w,size:"sm",children:s.jsx(B,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.blockedKeywords.map((e,t)=>s.jsxs(p,{variant:"destructive",className:"flex items-center gap-1",children:[e,s.jsx(a,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t={...o,blockedKeywords:o.blockedKeywords.filter(t=>t!==e)};b(t)})(e)})]},t))})]}),s.jsx(At,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[s.jsx(U,{className:"h-4 w-4"}),"偏好关键词"]}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx(x,{placeholder:"输入偏好的关键词",value:g,onChange:e=>v(e.target.value),onKeyPress:e=>"Enter"===e.key&&N()}),s.jsx(i,{onClick:N,size:"sm",children:s.jsx(B,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.preferredKeywords.map((e,t)=>s.jsxs(p,{variant:"default",className:"flex items-center gap-1",children:[e,s.jsx(a,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t={...o,preferredKeywords:o.preferredKeywords.filter(t=>t!==e)};b(t)})(e)})]},t))})]}),s.jsx(At,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"平台偏好设置"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{value:"weibo",label:"微博"},{value:"zhihu",label:"知乎"},{value:"bilibili",label:"B站"},{value:"douyin",label:"抖音"},{value:"toutiao",label:"头条"},{value:"baidu",label:"百度"}].map(e=>{const t=o.blockedPlatforms.includes(e.value),n=o.preferredPlatforms.includes(e.value);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsx("span",{className:"text-sm",children:e.label}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(y,{htmlFor:`prefer-${e.value}`,className:"text-xs",children:"推荐"}),s.jsx(D,{id:`prefer-${e.value}`,checked:n,onCheckedChange:()=>(e=>{const t=o.preferredPlatforms.includes(e),s={...o,preferredPlatforms:t?o.preferredPlatforms.filter(t=>t!==e):[...o.preferredPlatforms,e]};b(s)})(e.value)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(y,{htmlFor:`block-${e.value}`,className:"text-xs",children:"屏蔽"}),s.jsx(D,{id:`block-${e.value}`,checked:t,onCheckedChange:()=>(e=>{const t=o.blockedPlatforms.includes(e),s={...o,blockedPlatforms:t?o.blockedPlatforms.filter(t=>t!==e):[...o.blockedPlatforms,e]};b(s)})(e.value)})]})]})]},e.value)})})]})]})]})]})},Rt=({topics:e,onCategoryChange:n,onTopicClick:r})=>{const[i,a]=t.useState("all"),o=[{id:"all",label:"全部",icon:"🔥"},{id:"entertainment",label:"娱乐",icon:"🎬"},{id:"technology",label:"科技",icon:"💻"},{id:"sports",label:"体育",icon:"⚽"},{id:"politics",label:"政治",icon:"🏛️"},{id:"economy",label:"财经",icon:"💰"},{id:"society",label:"社会",icon:"👥"},{id:"education",label:"教育",icon:"📚"},{id:"health",label:"健康",icon:"🏥"},{id:"lifestyle",label:"生活",icon:"🏠"}],l=t=>"all"===t?e:e.filter(e=>(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase();return["明星","演员","歌手","电影","电视剧","综艺","娱乐","明星","艺人","导演","编剧"].some(e=>t.includes(e)||s.includes(e))?"entertainment":["科技","技术","互联网","AI","人工智能","手机","电脑","软件","编程","算法","芯片"].some(e=>t.includes(e)||s.includes(e))?"technology":["足球","篮球","体育","比赛","运动员","教练","球队","联赛","冠军","奥运会"].some(e=>t.includes(e)||s.includes(e))?"sports":["政府","政策","政治","官员","选举","法律","法规","国家","领导人","会议"].some(e=>t.includes(e)||s.includes(e))?"politics":["经济","金融","股票","基金","投资","理财","银行","保险","房地产","股市"].some(e=>t.includes(e)||s.includes(e))?"economy":["社会","事件","新闻","调查","报道","事件","事故","案件","纠纷"].some(e=>t.includes(e)||s.includes(e))?"society":["教育","学校","学生","老师","考试","学习","培训","课程","大学","高考"].some(e=>t.includes(e)||s.includes(e))?"education":["健康","医疗","医院","医生","疾病","治疗","药物","疫苗","疫情","保健"].some(e=>t.includes(e)||s.includes(e))?"health":["生活","美食","旅游","购物","时尚","美容","家居","装修","宠物","园艺"].some(e=>t.includes(e)||s.includes(e))?"lifestyle":"other"})(e)===t),c=e=>l(e).length;return s.jsx("div",{className:"mb-6",children:s.jsxs(v,{value:i,onValueChange:e=>{a(e),n(e)},children:[s.jsx(b,{className:"grid w-full grid-cols-5 lg:grid-cols-10",children:o.map(e=>s.jsxs(w,{value:e.id,className:"flex items-center gap-1 text-xs",children:[s.jsx("span",{children:e.icon}),s.jsx("span",{className:"hidden sm:inline",children:e.label}),s.jsx(p,{variant:"secondary",className:"ml-1 text-xs",children:c(e.id)})]},e.id))}),o.map(e=>s.jsxs(N,{value:e.id,children:[s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l(e.id).map((t,n)=>s.jsx(d,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r(t),children:s.jsxs(m,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx(p,{variant:"outline",className:"text-xs",children:t.platform}),s.jsxs("span",{className:"text-xs text-gray-500",children:["#",n+1]})]}),s.jsx("h3",{className:"font-medium text-sm line-clamp-2 mb-2",children:t.title}),t.desc&&s.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:t.desc}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["热度: ",t.hot]}),s.jsx(p,{variant:"secondary",className:"text-xs",children:e.label})]})]})},`${t.platform}-${n}`))}),0===l(e.id).length&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"该分类下暂无话题"})]},e.id))]})})},Pt={enabled:!0,sound:!0,desktop:!0,email:!1,push:!1,quietHours:{enabled:!1,start:"22:00",end:"08:00"}};function $t(){try{const e=localStorage.getItem("notification-config");return e?{...Pt,...JSON.parse(e)}:Pt}catch(e){return Pt}}function It(e){const t=function(){try{const e=localStorage.getItem("notifications");return e?JSON.parse(e):[]}catch(e){return[]}}(),s={...e,id:Date.now().toString(36)+Math.random().toString(36).substr(2),createdAt:(new Date).toISOString()};return t.unshift(s),t.length>100&&t.splice(100),function(e){try{localStorage.setItem("notifications",JSON.stringify(e))}catch(t){}}(t),function(e){const t=$t();t.enabled&&(t.quietHours.enabled&&function(){const e=$t();if(!e.quietHours.enabled)return!1;const t=new Date,s=60*t.getHours()+t.getMinutes(),[n,r]=e.quietHours.start.split(":").map(Number),[i,a]=e.quietHours.end.split(":").map(Number),o=60*n+r,l=60*i+a;return o<=l?s>=o&&s<=l:s>=o||s<=l}()||(t.desktop&&"Notification"in window&&("granted"===Notification.permission?new Notification(e.title,{body:e.message,icon:"/favicon.ico",tag:e.id,requireInteraction:"error"===e.level}):"default"===Notification.permission&&Notification.requestPermission().then(t=>{"granted"===t&&new Notification(e.title,{body:e.message,icon:"/favicon.ico"})})),t.sound&&function(){try{const e=new Audio("/notification.mp3");e.volume=.5,e.play().catch(e=>{})}catch(e){}}(),document.hidden&&function(e){const t=document.title;let s=0;const n=()=>{s>=5?document.title=t:(document.title=s%2==0?`🔔 ${e}`:t,s++,setTimeout(n,1e3))};n()}(e.title)))}(s),s}function Dt(e,t){const s={created:"创建成功",updated:"更新成功",deleted:"删除成功",enabled:"已启用",disabled:"已禁用"};It({type:"subscription",level:"success",title:`订阅${s[e]}`,message:`话题订阅"${t}"${s[e]}`,data:{action:e,subscriptionName:t}})}const _t=[{id:"baidu-news",name:"百度新闻",type:"news",apiUrl:"https://api.baidu.com/news/search",isEnabled:!0,rateLimit:10},{id:"weibo-search",name:"微博搜索",type:"social",apiUrl:"https://m.weibo.cn/api/container/getIndex",isEnabled:!0,rateLimit:20},{id:"zhihu-search",name:"知乎搜索",type:"social",apiUrl:"https://www.zhihu.com/api/v4/search_v3",isEnabled:!0,rateLimit:15},{id:"toutiao-search",name:"头条搜索",type:"news",apiUrl:"https://www.toutiao.com/search_content/",isEnabled:!0,rateLimit:12},{id:"bilibili-search",name:"B站搜索",type:"social",apiUrl:"https://api.bilibili.com/x/web-interface/search/type",isEnabled:!0,rateLimit:8},{id:"douyin-search",name:"抖音搜索",type:"social",apiUrl:"https://www.douyin.com/aweme/v1/web/search/item/",isEnabled:!0,rateLimit:5}];function Lt(){try{const e=localStorage.getItem("topic-subscriptions");return e?JSON.parse(e):[]}catch(e){return[]}}function Bt(e){try{localStorage.setItem("topic-subscriptions",JSON.stringify(e))}catch(t){}}function Ut(e,t){const s=Lt(),n=s.findIndex(t=>t.id===e);if(-1===n)return null;const r=s[n];return s[n]={...r,...t,updatedAt:(new Date).toISOString()},Bt(s),Dt("updated",s[n].name),s[n]}function Mt(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function Ft(){const e=Lt(),t=e.filter(e=>e.isActive).length,s=e.length,n=e.filter(e=>e.notificationEnabled).length;return{total:s,active:t,inactive:s-t,notificationEnabled:n,notificationDisabled:s-n}}function zt(){o();const{toast:e}=l(),[n,r]=t.useState(null),[a,j]=t.useState("all"),[K,W]=t.useState(!0),[X,Q]=t.useState(!1),[Y,Z]=t.useState(""),[ee,te]=t.useState(null),[se,ne]=t.useState(new Date),[re,ie]=t.useState(new Set),[ae,oe]=t.useState(new Set),[le,ce]=t.useState("hot"),[de,ue]=t.useState([]),[he,me]=t.useState({}),[fe,pe]=t.useState(null),[xe,ge]=t.useState(!1),[ye,je]=t.useState(!1),[ve,be]=t.useState(!1),[we,Ne]=t.useState(Ft()),[ke,Se]=t.useState({}),[Ee,Ce]=t.useState({}),[Oe,Ae]=t.useState({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),[Te]=t.useState(_t),Re=["weibo","zhihu","douyin","bilibili","baidu","36kr","ithome"],[Pe,$e]=t.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[Ie,De]=t.useState("all"),[_e,Le]=t.useState([]),Be=e=>{const t=parseInt(e);return isNaN(t)?e:t>=1e6?`${(t/1e6).toFixed(1)}m`:t>=1e3?`${(t/1e3).toFixed(1)}k`:e},Ue=e=>{const t=`${e.platform}-${e.title}`;qe(t)},Me=t=>{t.url?window.open(t.url,"_blank"):t.mobil_url?window.open(t.mobil_url,"_blank"):e({title:"无法打开链接",description:"该话题暂无源链接",variant:"destructive"})},Fe=async()=>{try{W(!0),te(null);const t=await async function(){const e=[{name:"netlify-proxy",url:"/.netlify/functions/api",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"hot-topics"})},{name:"allorigins-proxy",url:"https://api.allorigins.win/get?url=https://api-hot.imsyy.top/all",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},isAllOrigins:!0},{name:"direct-api",url:"https://api-hot.imsyy.top/all",method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}];for(const s of e)try{const e={method:s.method,headers:s.headers};s.body&&(e.body=s.body);const n=await fetch(s.url,e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(s.isAllOrigins&&r.contents)try{const e=JSON.parse(r.contents);if(200===e.code&&e.data)return vt(e)}catch(t){}if(200===r.code&&r.data)return vt(r);if(200===r.code&&r.routes){const e=["weibo","zhihu","bilibili","douyin"],t={};for(const s of e)try{const e=await Nt(s);t[s]=e}catch(ee){t[s]=[]}return{code:200,msg:"success",data:t}}throw r.error?new Error(r.error):new Error("Invalid response format")}catch(ee){continue}throw new Error("无法获取热点数据，请检查网络连接或稍后重试")}();r(t),ne(new Date),localStorage.setItem("hotTopicsData",JSON.stringify(t.data));const s=localStorage.getItem("interestFilters");if(s)try{const e=JSON.parse(s);$e(e)}catch(e){}}catch(t){te(t instanceof Error?t.message:"获取数据失败")}finally{W(!1)}},ze=async()=>{Q(!0),await Fe(),Q(!1)},He=e=>{const t=function(e){return{weibo:"icon-weibo",zhihu:"icon-zhihu",douyin:"icon-douyin",bilibili:"icon-bilibili",baidu:"icon-baidu","36kr":"icon-36kr",ithome:"icon-ithome",sspai:"icon-sspai",juejin:"icon-juejin",csdn:"icon-csdn",github:"icon-github",v2ex:"icon-v2ex",ngabbs:"icon-ngabbs",hellogithub:"icon-hellogithub"}[e]||"icon-default"}(e);return s.jsx("span",{className:`${t} mr-2`})},qe=e=>{ie(t=>new Set([...t,e]))},Ke=t=>{const s=`${t.platform}-${t.title}`;oe(t=>{const n=new Set(t);return n.has(s)?(n.delete(s),e({title:"已取消收藏",description:"话题已从灵感夹移除"})):(n.add(s),e({title:"已收藏",description:"话题已添加到灵感夹"})),n})},Je=e=>{const t=`${e.platform}-${e.title}`;return re.has(t)},Ve=e=>{const t=`${e.platform}-${e.title}`;return ae.has(t)},Ge=()=>{const e=Lt();ue(e),Ne(Ft())};t.useEffect(()=>{Fe(),Ge()},[]);const We=(()=>{if(!n||!n.data)return[];let e=[];return"all"===a?Object.values(n.data).forEach(t=>{e=e.concat(t.slice(0,10))}):e=(n.data[a]||[]).slice(0,10),(e=>{const t=e.filter(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase(),n=(e.content||"").toLowerCase(),r=e.platform||"",i=Pe.blockedKeywords.some(e=>t.includes(e.toLowerCase())||s.includes(e.toLowerCase())||n.includes(e.toLowerCase())),a=Pe.blockedPlatforms.includes(r);return!i&&!a}).map(e=>{const t=e.title.toLowerCase(),s=(e.desc||"").toLowerCase(),n=(e.content||"").toLowerCase(),r=e.platform||"";let i=0,a=[];return Pe.preferredKeywords.forEach(e=>{const r=e.toLowerCase();(t.includes(r)||s.includes(r)||n.includes(r))&&(i+=10,a.push(e))}),Pe.preferredPlatforms.includes(r)&&(i+=5),{...e,preferenceScore:i,matchedKeywords:a,isHighPriority:i>0}});return[...t.filter(e=>e.isHighPriority).sort((e,t)=>{if(t.preferenceScore!==e.preferenceScore)return t.preferenceScore-e.preferenceScore;const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s}),...t.filter(e=>!e.isHighPriority).sort((e,t)=>{const s=parseInt(e.hot)||0;return(parseInt(t.hot)||0)-s})]})(e)})();return(()=>{if(!n||!n.data)return{total:0,platforms:0};Object.values(n.data).reduce((e,t)=>e+t.length,0),Object.keys(n.data).length})(),We.slice(0,3),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(_,{title:"全网雷达",description:"实时监控各平台热门话题，支持自定义话题订阅和智能追踪",showAdaptButton:!1}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(v,{value:le,onValueChange:e=>ce(e),className:"w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs(b,{className:"grid w-full grid-cols-3 max-w-md",children:[s.jsxs(w,{value:"hot",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(c,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"全网热点"}),s.jsx("span",{className:"sm:hidden",children:"热点"})]}),s.jsxs(w,{value:"subscriptions",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"话题订阅"}),s.jsx("span",{className:"sm:hidden",children:"订阅"})]}),s.jsxs(w,{value:"bookmarks",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(L,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"灵感夹"}),s.jsx("span",{className:"sm:hidden",children:"收藏"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(i,{variant:"outline",size:"sm",onClick:()=>ge(!0),className:"text-xs sm:text-sm",children:[s.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"添加订阅"}),s.jsx("span",{className:"sm:hidden",children:"添加"})]}),s.jsxs(i,{variant:"outline",size:"sm",onClick:ze,disabled:X,className:"text-xs sm:text-sm",children:[s.jsx(V,{className:"w-4 h-4 mr-1 "+(X?"animate-spin":"")}),"刷新"]})]})]}),s.jsxs(N,{value:"hot",children:[ee&&s.jsx(d,{className:"mb-6 border-red-200 bg-red-50",children:s.jsx(m,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(G,{className:"w-4 h-4 text-red-600"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"获取热点数据失败"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:ee}),s.jsx("p",{className:"text-xs text-red-600 mt-2",children:"可能原因：网络连接异常、API服务暂时不可用、或防火墙限制"})]}),s.jsxs(i,{variant:"outline",size:"sm",onClick:ze,disabled:X,className:"border-red-300 text-red-700 hover:bg-red-100",children:[s.jsx(V,{className:"h-4 h-4 mr-2 "+(X?"animate-spin":"")}),"重试"]})]})})}),!K&&n&&n.data&&s.jsx("div",{className:"mb-6",children:s.jsxs(d,{children:[s.jsx(u,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(h,{className:"flex items-center gap-2",children:[s.jsx(J,{className:"w-5 h-5 text-red-500"}),"今日最热门话题"]}),s.jsx(f,{children:"各平台热门话题排行榜"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["最后更新: ",se.toLocaleString("zh-CN"),"（每15分钟自动更新）"]})]})}),s.jsx(m,{children:s.jsxs(v,{defaultValue:"all",className:"w-full",children:[s.jsxs(b,{className:"flex w-full overflow-x-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:[s.jsx(w,{value:"all",className:"min-w-[72px]",children:"总榜"}),Re.map(e=>s.jsx(w,{value:e,className:"min-w-[72px]",children:kt(e)},e))]}),s.jsx(N,{value:"all",className:"mt-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:bt(n.data).slice(0,10).map((e,t)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-all hover:shadow-md h-48 flex flex-col ${Je(e)?"bg-gray-50 opacity-75":"bg-white"} ${Ve(e)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(p,{variant:"destructive",className:"text-xs",children:["#",t+1]}),s.jsx(p,{variant:"outline",className:"text-xs",children:kt(e.platform||"")})]}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2 flex-1",children:e.title}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[s.jsx("span",{children:Be(e.hot)}),s.jsxs("div",{className:"flex items-center gap-1",children:[Ve(e)&&s.jsx(L,{className:"w-3 h-3 text-yellow-500 fill-current"}),Je(e)&&s.jsx(U,{className:"w-3 h-3 text-gray-400"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-auto",children:[s.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7",onClick:()=>Me(e),children:[s.jsx(q,{className:"w-3 h-3 mr-1"}),"查看"]}),s.jsx(i,{size:"sm",variant:Ve(e)?"default":"outline",className:"text-xs h-7 "+(Ve(e)?"bg-yellow-500 hover:bg-yellow-600":""),onClick:()=>Ke(e),children:s.jsx(L,{className:"w-3 h-3"})})]})]},t))})}),Re.map(e=>s.jsx(N,{value:e,className:"mt-4",children:0===(n.data[e]||[]).length?s.jsx("div",{className:"text-center text-gray-400 py-8",children:"暂无数据"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:(n.data[e]||[]).slice(0,10).map((t,n)=>s.jsxs("div",{className:`p-3 rounded-lg border transition-all hover:shadow-md h-48 flex flex-col ${Je(t)?"bg-gray-50 opacity-75":"bg-white"} ${Ve(t)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(p,{variant:"destructive",className:"text-xs",children:["#",n+1]}),s.jsx(p,{variant:"outline",className:"text-xs",children:kt(e)})]}),s.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2 flex-1",children:t.title}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[s.jsx("span",{children:Be(t.hot)}),s.jsxs("div",{className:"flex items-center gap-1",children:[Ve(t)&&s.jsx(L,{className:"w-3 h-3 text-yellow-500 fill-current"}),Je(t)&&s.jsx(U,{className:"w-3 h-3 text-gray-400"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-auto",children:[s.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 text-xs h-7",onClick:()=>Me(t),children:[s.jsx(q,{className:"w-3 h-3 mr-1"}),"查看"]}),s.jsx(i,{size:"sm",variant:Ve(t)?"default":"outline",className:"text-xs h-7 "+(Ve(t)?"bg-yellow-500 hover:bg-yellow-600":""),onClick:()=>Ke(t),children:s.jsx(L,{className:"w-3 h-3"})})]})]},n))})},e))]})})]})}),s.jsx(Tt,{onFilterChange:e=>{$e(e),localStorage.setItem("interestFilters",JSON.stringify(e))}}),"all"===a&&!K&&We.length>0&&s.jsx(Rt,{topics:We,onCategoryChange:e=>{De(e)},onTopicClick:Ue})]}),s.jsxs(N,{value:"subscriptions",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(d,{children:s.jsx(m,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:we.total}),s.jsx("p",{className:"text-sm text-gray-600",children:"总订阅数"})]})})}),s.jsx(d,{children:s.jsx(m,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:we.active}),s.jsx("p",{className:"text-sm text-gray-600",children:"活跃订阅"})]})})}),s.jsx(d,{children:s.jsx(m,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:we.notificationEnabled}),s.jsx("p",{className:"text-sm text-gray-600",children:"通知开启"})]})})}),s.jsx(d,{children:s.jsx(m,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.values(he).flat().length}),s.jsx("p",{className:"text-sm text-gray-600",children:"监控结果"})]})})})]}),0===de.length?s.jsx(d,{children:s.jsxs(m,{className:"text-center py-12",children:[s.jsx(F,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无话题订阅"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"创建话题订阅，实时监控感兴趣的内容"}),s.jsxs(i,{onClick:()=>ge(!0),children:[s.jsx(B,{className:"w-4 h-4 mr-2"}),"添加第一个订阅"]})]})}):s.jsx("div",{className:"space-y-4",children:de.map(t=>s.jsxs(d,{className:"hover:shadow-md transition-shadow",children:[s.jsx(u,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(M,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["关键词: ",t.keyword]}),t.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{checked:t.isActive,onCheckedChange:s=>((t,s)=>{try{!function(e,t){const s=Ut(e,{isActive:t});s&&Dt(t?"enabled":"disabled",s.name)}(t,s),Ge(),e({title:s?"订阅已启用":"订阅已禁用",description:s?"订阅监控已开始":"订阅监控已暂停"})}catch(n){e({title:"操作失败",description:"切换订阅状态时发生错误",variant:"destructive"})}})(t.id,s)}),s.jsxs(i,{variant:"outline",size:"sm",onClick:()=>(async t=>{be(!0);try{const s=await async function(e){const t=[];try{const i=e.sources.map(async t=>{try{const s=_t.find(e=>e.id===t);if(!s||!s.isEnabled)return[];const n=await async function(e,t){const s=[];try{switch(t.type){case"news":s.push(...await async function(e,t){return[{title:`关于"${e}"的最新新闻报道`,content:`这是一条关于"${e}"的新闻内容，包含了相关的信息和背景。`,heat:Math.floor(1e5*Math.random())+1e3,sentiment:"neutral"},{title:`"${e}"相关热点事件`,content:`近期关于"${e}"的热点事件引发了广泛关注。`,heat:Math.floor(8e4*Math.random())+500,sentiment:"positive"}].map(s=>({id:Mt(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.9}))}(e,t));break;case"social":s.push(...await async function(e,t){return[{title:`"${e}"相关讨论`,content:`社交媒体上关于"${e}"的热门讨论内容。`,heat:Math.floor(5e4*Math.random())+500,sentiment:"positive"},{title:`"${e}"用户热议`,content:`用户们对"${e}"的讨论和观点分享。`,heat:Math.floor(3e4*Math.random())+200,sentiment:"neutral"}].map(s=>({id:Mt(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.8}))}(e,t));break;case"search":s.push(...await async function(e,t){return[{title:`"${e}"相关网页内容`,content:`关于"${e}"的网页搜索结果和相关信息。`,heat:Math.floor(2e4*Math.random())+100,sentiment:"neutral"}].map(s=>({id:Mt(),subscriptionId:"",keyword:e,title:s.title,content:s.content,url:"#",platform:t.name,source:t.id,heat:s.heat,publishedAt:(new Date).toISOString(),discoveredAt:(new Date).toISOString(),tags:[e],sentiment:s.sentiment,relevance:.7}))}(e,t))}}catch(ee){}return s}(e.keyword,s);return n.map(t=>({...t,subscriptionId:e.id,keyword:e.keyword}))}catch(ee){return[]}});(await Promise.allSettled(i)).forEach(e=>{"fulfilled"===e.status&&t.push(...e.value)});const a=function(e){const t=new Set;return e.filter(e=>{const s=`${e.url}-${e.platform}`;return!t.has(s)&&(t.add(s),!0)})}(t),o=a.sort((e,t)=>t.heat-e.heat);if(e.maxHeatThreshold){const t=o.filter(t=>t.heat>=e.maxHeatThreshold);if(t.length>0&&e.notificationEnabled){const i=Math.max(...t.map(e=>e.heat));s=e.keyword,n=i,r=e.maxHeatThreshold,It({type:"heat_alert",level:"warning",title:`热度警报: ${s}`,message:`"${s}"热度达到 ${n.toLocaleString()}，超过阈值 ${r.toLocaleString()}`,data:{keyword:s,heat:n,threshold:r},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(s)}`})}}return Ut(e.id,{lastCheckAt:(new Date).toISOString()}),e.notificationEnabled&&function(e,t,s){const n=t.length;It({type:"topic_update",level:n>0?"success":"info",title:`话题更新: ${e}`,message:n>0?`发现 ${n} 条关于"${e}"的新内容`:`"${e}"暂无新内容`,data:{keyword:e,subscriptionName:s,resultCount:n},actionUrl:`/hot-topics?tab=subscriptions&keyword=${encodeURIComponent(e)}`})}(e.keyword,o,e.name),o}catch(ee){return[]}var s,n,r}(t);me(e=>({...e,[t.id]:s})),s.length>0?e({title:"监控完成",description:`发现 ${s.length} 个相关话题`}):e({title:"监控完成",description:"未发现相关话题"})}catch(s){e({title:"监控失败",description:"监控话题时发生错误",variant:"destructive"})}finally{be(!1)}})(t),disabled:ve,children:[s.jsx(U,{className:"w-4 h-4 mr-2"}),ve?"检查中...":"检查"]}),s.jsxs(i,{variant:"outline",size:"sm",onClick:()=>{pe(t),(async e=>{if(!ke[e]){Ce(t=>({...t,[e]:!0}));try{const t=await async function(e,t=7){const s=[],n=new Date;for(let r=t-1;r>=0;r--){const t=new Date(n);t.setDate(t.getDate()-r),s.push({keyword:e,date:t.toISOString().split("T")[0],heat:Math.floor(1e5*Math.random())+1e3,mentions:Math.floor(100*Math.random())+10,platforms:["微博","知乎","百度","B站","抖音"]})}return s}(e,7);Se(s=>({...s,[e]:t}))}catch(t){}finally{Ce(t=>({...t,[e]:!1}))}}})(t.keyword)},children:[s.jsx(H,{className:"w-4 h-4 mr-2"}),"趋势"]}),s.jsx(i,{variant:"outline",size:"sm",onClick:()=>(t=>{try{!function(e){const t=Lt(),s=t.find(t=>t.id===e),n=t.filter(t=>t.id!==e);n.length!==t.length&&(Bt(n),s&&Dt("deleted",s.name))}(t),Ge(),e({title:"删除成功",description:"订阅已删除"})}catch(s){e({title:"删除失败",description:"删除订阅时发生错误",variant:"destructive"})}})(t.id),className:"text-red-600 hover:text-red-700",children:s.jsx(g,{className:"w-4 h-4"})})]})]})}),s.jsxs(m,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"状态:"}),s.jsx(p,{variant:t.isActive?"default":"secondary",className:"ml-2",children:t.isActive?"活跃":"暂停"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"通知:"}),s.jsx(p,{variant:t.notificationEnabled?"default":"secondary",className:"ml-2",children:t.notificationEnabled?"开启":"关闭"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"检查间隔:"}),s.jsxs("span",{className:"ml-2",children:[t.checkInterval,"分钟"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"热度阈值:"}),s.jsxs("span",{className:"ml-2",children:[t.minHeatThreshold,"-",t.maxHeatThreshold]})]})]}),he[t.id]&&he[t.id].length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"监控结果"}),s.jsxs("div",{className:"space-y-2",children:[he[t.id].slice(0,3).map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:e.title}),s.jsx(p,{variant:"outline",className:"text-xs",children:e.platform})]},t)),he[t.id].length>3&&s.jsxs("p",{className:"text-xs text-gray-500",children:["还有 ",he[t.id].length-3," 个结果..."]})]})]})]})]},t.id))})]}),s.jsx(N,{value:"bookmarks",children:s.jsxs(d,{children:[s.jsxs(u,{children:[s.jsxs(h,{className:"flex items-center gap-2",children:[s.jsx(L,{className:"w-5 h-5 text-yellow-500"}),"灵感夹"]}),s.jsx(f,{children:"您收藏的感兴趣话题"})]}),s.jsx(m,{children:0===ae.size?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(L,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无收藏话题"}),s.jsx("p",{className:"text-gray-600",children:"点击话题右侧的书签图标来收藏感兴趣的内容"})]}):s.jsx("div",{className:"space-y-3",children:Array.from(ae).map((e,t)=>{let r=null;if(n&&n.data)for(const[s,i]of Object.entries(n.data)){const t=i.find(t=>`${t.platform}-${t.title}`===e);if(t){r=t;break}}return r?s.jsx("div",{className:"p-4 rounded-lg border border-yellow-300 bg-yellow-50 cursor-pointer transition-all hover:shadow-md",onClick:()=>Ue(r),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(p,{className:"bg-yellow-500 text-white text-xs",children:[s.jsx(L,{className:"w-3 h-3 mr-1"}),"已收藏"]}),s.jsx(p,{variant:"outline",className:"text-xs",children:kt(r.platform||"")}),r.hot&&s.jsxs(p,{variant:"destructive",className:"text-xs",children:[s.jsx(J,{className:"w-3 h-3 mr-1"}),"热"]})]}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:r.title}),r.desc&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.desc}),r.content&&s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:r.content}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["热度: ",Be(r.hot)]}),s.jsxs("span",{children:["平台: ",kt(r.platform||"")]}),r.rank&&s.jsxs("span",{children:["排名: #",r.rank]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[s.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),Ke(r)},children:s.jsx(L,{className:"w-4 h-4 text-yellow-500 fill-current"})}),s.jsx(i,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),Me(r)},children:s.jsx(q,{className:"w-4 h-4"})})]})]})},e):null})})})]})})]}),s.jsx(k,{open:xe,onOpenChange:ge,children:s.jsxs(S,{className:"sm:max-w-[500px]",children:[s.jsxs(E,{children:[s.jsx(C,{children:"添加话题订阅"}),s.jsx(O,{children:"设置关键词和监控条件，系统将自动追踪相关话题"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{htmlFor:"keyword",children:"关键词 *"}),s.jsx(x,{id:"keyword",placeholder:"输入要监控的关键词",value:Oe.keyword,onChange:e=>Ae(t=>({...t,keyword:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{htmlFor:"name",children:"订阅名称"}),s.jsx(x,{id:"name",placeholder:"为订阅起个名字",value:Oe.name,onChange:e=>Ae(t=>({...t,name:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{htmlFor:"description",children:"描述"}),s.jsx(x,{id:"description",placeholder:"订阅的详细描述",value:Oe.description,onChange:e=>Ae(t=>({...t,description:e.target.value}))})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{children:"监控平台"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Re.map(e=>s.jsxs(i,{variant:Oe.platforms.includes(e)?"default":"outline",size:"sm",onClick:()=>{const t=Oe.platforms.includes(e)?Oe.platforms.filter(t=>t!==e):[...Oe.platforms,e];Ae(e=>({...e,platforms:t}))},children:[He(e),kt(e)]},e))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{htmlFor:"checkInterval",children:"检查间隔 (分钟)"}),s.jsxs(A,{value:Oe.checkInterval.toString(),onValueChange:e=>Ae(t=>({...t,checkInterval:parseInt(e)})),children:[s.jsx(T,{children:s.jsx(R,{})}),s.jsxs(P,{children:[s.jsx($,{value:"5",children:"5分钟"}),s.jsx($,{value:"15",children:"15分钟"}),s.jsx($,{value:"30",children:"30分钟"}),s.jsx($,{value:"60",children:"1小时"}),s.jsx($,{value:"120",children:"2小时"})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(y,{htmlFor:"minHeatThreshold",children:"最低热度"}),s.jsx(x,{id:"minHeatThreshold",type:"number",value:Oe.minHeatThreshold,onChange:e=>Ae(t=>({...t,minHeatThreshold:parseInt(e.target.value)||0}))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{id:"isActive",checked:Oe.isActive,onCheckedChange:e=>Ae(t=>({...t,isActive:e}))}),s.jsx(y,{htmlFor:"isActive",children:"立即启用"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(D,{id:"notificationEnabled",checked:Oe.notificationEnabled,onCheckedChange:e=>Ae(t=>({...t,notificationEnabled:e}))}),s.jsx(y,{htmlFor:"notificationEnabled",children:"启用通知"})]})]}),s.jsxs(I,{children:[s.jsx(i,{variant:"outline",onClick:()=>ge(!1),children:"取消"}),s.jsx(i,{onClick:()=>{if(Oe.keyword.trim())try{!function(e){const t=Lt(),s={...e,id:Mt(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};t.push(s),Bt(t),Dt("created",s.name)}({...Oe,lastChecked:null,lastNotification:null}),Ae({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),ge(!1),Ge(),e({title:"订阅添加成功",description:`已添加关键词"${Oe.keyword}"的订阅`})}catch(t){e({title:"添加失败",description:"添加订阅时发生错误",variant:"destructive"})}else e({title:"请输入关键词",description:"订阅关键词不能为空",variant:"destructive"})},children:"添加订阅"})]})]})})]})]})}export{zt as default};
