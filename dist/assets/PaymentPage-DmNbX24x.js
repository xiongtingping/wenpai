import{j as e}from"./ui-core-CkDiOLPZ.js";import{r as s,u as t}from"./router-CDHmMMQ-.js";import{u as r,g as a,B as l,m as i,C as n,a as c,b as d,e as o}from"./pages-home-BlE-Wmr4.js";import{B as x}from"./pages-adapt-C-FFQ0EZ.js";import{aK as m,h,i as j,j as g}from"./utils-BfXu217i.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B9GOBhKP.js";import"./components-layout-C5KCNaYQ.js";import"./components-auth-DTk8b9Kb.js";import"./pages-brand-N_nBb024.js";import"./api-services-BzrWmb-W.js";import"./pages-content-extractor-CyBrX7L3.js";function u(){const[u,p]=s.useState(null),[N,v]=s.useState("monthly"),[b,f]=s.useState(0),[y,w]=s.useState(!1),{toast:k}=r(),S=t(),{user:I}=a();s.useEffect(()=>{const e=localStorage.getItem("promo_start");if(!e)return;const s=parseInt(e,10),t=setInterval(()=>{const e=Date.now(),r=Math.max(0,18e5-(e-s));f(r),r<=0&&clearInterval(t)},1e3);return()=>clearInterval(t)},[]);const C=()=>{const e=localStorage.getItem("promo_start");if(!e)return!1;const s=parseInt(e,10);return Date.now()-s<18e5},P=e=>{p(e),"trial"!==e.tier&&(w(!0),k({title:"支付二维码已显示",description:"请使用手机扫码完成支付"}),setTimeout(()=>{const e=document.querySelector("[data-qr-code]");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100))},$=e=>{v(e),u&&"trial"!==u.tier&&w(!0)},q=()=>{if(!u)return 0;const e="monthly"===N?u.monthly:u.yearly;return C()?e.discountPrice:e.originalPrice};return e.jsxs("div",{className:"container mx-auto py-16 px-4 max-w-6xl",children:[e.jsx("div",{className:"mb-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(l,{variant:"outline",onClick:()=>S("/"),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all duration-200",title:"Return to Home",children:[e.jsx(m,{className:"h-3 w-3"}),"返回首页"]})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"选择订阅计划"}),e.jsx("p",{className:"text-muted-foreground",children:"选择最适合您的计划，开始享受AI创作之旅"})]}),e.jsx("div",{className:"hidden md:block w-[120px]"})]})}),b>0&&e.jsx("div",{className:"mb-8 p-4 bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:"仅首次注册用户可享，注册后30分钟内享受25%折扣优惠，倒计时结束后恢复原价"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"限时优惠倒计时："}),e.jsx("span",{className:"text-2xl font-bold bg-red-100 px-4 py-2 rounded-lg border-2 border-red-300",children:(()=>{const e=Math.floor(b/6e4),s=Math.floor(b%6e4/1e3);return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`})()})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(l,{variant:"monthly"===N?"default":"outline",onClick:()=>$("monthly"),className:"min-w-[120px]",children:"按月订阅"}),e.jsxs(l,{variant:"yearly"===N?"default":"outline",onClick:()=>$("yearly"),className:"min-w-[120px] transition-all duration-300 "+("yearly"===N?"bg-gradient-to-r from-orange-500 to-pink-500 hover:opacity-90":"bg-gradient-to-r from-orange-100 to-pink-100 text-orange-700 border-orange-300 hover:bg-gradient-to-r hover:from-orange-200 hover:to-pink-200"),children:["按年订阅",e.jsx(x,{variant:"secondary",className:"ml-2",children:"更优惠"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:i.map(s=>{const t="monthly"===N?s.monthly:s.yearly,r=C(),a=r?t.discountPrice:t.originalPrice,i=(null==u?void 0:u.id)===s.id;return e.jsxs(n,{className:`cursor-pointer transition-all relative ${i?"border-blue-500 shadow-lg":"hover:shadow-md"} ${s.recommended?"ring-2 ring-blue-200":""}`,onClick:()=>P(s),children:[s.recommended&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs(x,{className:"bg-blue-500 text-white",children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),"推荐"]})}),e.jsxs(c,{className:"text-center",children:[e.jsxs(d,{className:"text-xl flex items-center justify-center gap-2",children:["premium"===s.tier&&e.jsx(j,{className:"h-5 w-5 text-yellow-500"}),s.name]}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s.description})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:"trial"===s.tier?e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"免费"}):e.jsxs("div",{className:"space-y-2",children:[r&&b>0?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["¥",a]}),e.jsxs("div",{className:"text-sm text-red-500",children:["限时特惠价 省¥",t.savedAmount]}),e.jsxs("div",{className:"text-sm text-gray-400 line-through",children:["¥",t.originalPrice," 原价"]})]}):e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["¥",a]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["/","monthly"===N?"月":"年"]}),"yearly"===N&&!r&&"pro"===s.tier&&e.jsx("div",{className:"text-xs text-green-600",children:"年付省120元"}),"yearly"===N&&!r&&"premium"===s.tier&&e.jsx("div",{className:"text-xs text-green-600",children:"年付省300元"})]})}),e.jsx("div",{className:"space-y-2",children:s.features.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(g,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsx("span",{children:s})]},t))}),e.jsx(l,{variant:i?"default":"outline",className:"w-full",disabled:"trial"===s.tier,onClick:e=>{e.stopPropagation(),P(s)},children:"trial"===s.tier?"当前版本":i?"已选择":"选择此计划"})]})]},s.id)})}),y&&u&&"trial"!==u.tier&&e.jsxs(n,{"data-qr-code":!0,children:[e.jsxs(c,{children:[e.jsx(d,{children:"支付方式"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"选择您喜欢的支付方式"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-600",children:"支付宝支付"}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-blue-200 shadow-lg",children:[e.jsx("div",{className:"w-48 h-48 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📱"}),e.jsx("div",{className:"text-sm text-gray-600",children:"支付宝二维码"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"请使用支付宝扫码"})]})}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:["¥",q()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"扫码完成支付"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-600",children:"微信支付"}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-green-200 shadow-lg",children:[e.jsx("div",{className:"w-48 h-48 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📱"}),e.jsx("div",{className:"text-sm text-gray-600",children:"微信二维码"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"请使用微信扫码"})]})}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:["¥",q()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"扫码完成支付"})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"支付二维码已显示，请使用手机扫码完成支付"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(l,{variant:"outline",onClick:()=>{k({title:"支付说明",description:"请使用手机支付宝或微信扫码完成支付"})},children:"支付说明"}),e.jsx(l,{variant:"outline",onClick:()=>{k({title:"联系客服",description:"如有支付问题，请联系客服"})},children:"联系客服"})]})]})]})})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:[e.jsx("p",{className:"text-green-600 font-medium mb-2",children:"💡 随时可取消"}),e.jsx("p",{children:"订阅会在期满后自动续费，您可以随时取消"}),e.jsxs("p",{className:"mt-2",children:['点击"立即支付"，表示您同意我们的',e.jsx("a",{href:"#",className:"text-blue-500 hover:underline mx-1",children:"服务条款"}),"和",e.jsx("a",{href:"#",className:"text-blue-500 hover:underline mx-1",children:"隐私政策"})]})]})]})}export{u as default};
