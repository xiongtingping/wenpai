import{c as s,aB as e,r as a,u as t,p as l,q as i,b9 as r,ba as c,bb as n,bc as x,j as d,B as m,C as o,e as h,f as j,h as g,i as N,g as v,R as p,ax as u,bd as f,be as b,bf as y}from"./index-CYvVoP-H.js";import{I as w}from"./input-C7T9kmHO.js";import{A as k}from"./arrow-left-CQwOW-V4.js";import{G as I}from"./gift-quj9eTR5.js";import{C as D}from"./copy-D3g8yJt7.js";import{T as C}from"./trash-2-BMWquTTk.js";import{E as S}from"./external-link-Bguz_PIV.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=s("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);function R(){const{showLogin:s}=e(),[R,L]=a.useState(null),[M,B]=a.useState(null),[E,F]=a.useState(!1),[T,U]=a.useState(""),[V,$]=a.useState({}),[q,A]=a.useState(""),[G,O]=a.useState(null),[X,_]=a.useState(null),{toast:H}=t(),J=l(),{getReferrer:K,clearReferrer:P}=i();a.useEffect(()=>{Q()},[]);const Q=()=>{L(r()),B(c()),F(n()),U(x());const s={};for(let e=0;e<localStorage.length;e++){const a=localStorage.key(e);a&&(s[a]=localStorage.getItem(a)||"")}$(s)},W=s=>{navigator.clipboard.writeText(s),H({title:"已复制到剪贴板",description:s})},Y=s=>`${window.location.origin}/register?ref=${s}`;return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs(m,{variant:"ghost",onClick:()=>J("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[d.jsx(k,{className:"h-4 w-4"}),"返回首页"]}),d.jsxs(o,{className:"shadow-xl",children:[d.jsxs(h,{children:[d.jsxs(j,{className:"text-2xl font-bold flex items-center gap-2",children:[d.jsx(I,{className:"h-6 w-6 text-green-600"}),"推荐人ID测试页面"]}),d.jsx(g,{children:"测试推荐人ID的识别、存储和处理功能"})]}),d.jsxs(N,{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs(o,{className:"border-2 border-blue-200",children:[d.jsx(h,{className:"pb-3",children:d.jsx(j,{className:"text-lg",children:"当前状态"})}),d.jsxs(N,{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"URL包含推荐人参数:"}),d.jsx(v,{variant:E?"default":"secondary",children:E?"是":"否"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"localStorage推荐人ID:"}),d.jsx("div",{className:"flex items-center gap-2",children:R?d.jsxs(d.Fragment,{children:[d.jsx(v,{variant:"default",className:"text-xs",children:R}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>W(R),children:d.jsx(D,{className:"h-3 w-3"})})]}):d.jsx(v,{variant:"secondary",children:"无"})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"URL推荐人ID:"}),d.jsx("div",{className:"flex items-center gap-2",children:M?d.jsxs(d.Fragment,{children:[d.jsx(v,{variant:"default",className:"text-xs",children:M}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>W(M),children:d.jsx(D,{className:"h-3 w-3"})})]}):d.jsx(v,{variant:"secondary",children:"无"})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"临时用户ID:"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(v,{variant:"outline",className:"text-xs font-mono",children:T}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>W(T),children:d.jsx(D,{className:"h-3 w-3"})})]})]})]})]}),d.jsxs(o,{className:"mt-6",children:[d.jsxs(h,{children:[d.jsxs(j,{className:"flex items-center gap-2",children:[d.jsx(z,{className:"h-5 w-5"}),"功能测试"]}),d.jsx(g,{children:"测试推荐人ID验证和处理状态功能"})]}),d.jsxs(N,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"测试推荐人ID"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(w,{value:q,onChange:s=>A(s.target.value),placeholder:"输入要测试的推荐人ID",className:"flex-1"}),d.jsx(m,{onClick:()=>{if(!q.trim())return void H({title:"请输入测试ID",variant:"destructive"});const s=f(q.trim());O(s),H({title:s?"验证通过":"验证失败",description:s?"推荐人ID格式正确":"推荐人ID格式不正确",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"验证格式"}),d.jsx(m,{onClick:()=>{if(!q.trim())return void H({title:"请输入测试ID",variant:"destructive"});const s=b(q.trim());_(s),H({title:s?"已处理":"未处理",description:s?"该推荐奖励已处理过":"该推荐奖励未处理",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"检查状态"}),d.jsx(m,{onClick:()=>{q.trim()?(y(q.trim()),Q(),H({title:"标记成功",description:"推荐奖励已标记为已处理"})):H({title:"请输入测试ID",variant:"destructive"})},size:"sm",variant:"outline",children:"标记已处理"})]})]}),null!==G&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"验证结果:"}),d.jsx(v,{variant:G?"default":"destructive",children:G?"有效":"无效"})]}),null!==X&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"处理状态:"}),d.jsx(v,{variant:X?"default":"secondary",children:X?"已处理":"未处理"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[d.jsxs(m,{onClick:Q,variant:"outline",size:"sm",children:[d.jsx(p,{className:"h-4 w-4 mr-2"}),"刷新数据"]}),d.jsxs(m,{onClick:()=>{P(),Q(),H({title:"已清除",description:"推荐人ID已清除"})},variant:"outline",size:"sm",children:[d.jsx(C,{className:"h-4 w-4 mr-2"}),"清除推荐人ID"]}),d.jsxs(m,{onClick:()=>{localStorage.clear(),Q(),H({title:"已清除",description:"所有本地数据已清除"})},variant:"destructive",size:"sm",children:[d.jsx(C,{className:"h-4 w-4 mr-2"}),"清除所有数据"]})]})]}),d.jsxs(o,{className:"border-2 border-purple-200",children:[d.jsxs(h,{children:[d.jsx(j,{className:"text-lg",children:"测试链接生成"}),d.jsx(g,{children:"生成包含推荐人ID的测试链接"})]}),d.jsx(N,{className:"space-y-4",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["user123","invite456","test789"].map(s=>d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(u,{className:"h-4 w-4 text-gray-500"}),d.jsxs("span",{className:"text-sm font-medium",children:["推荐人ID: ",s]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const e=Y(s);W(e)},className:"flex-1",children:[d.jsx(D,{className:"h-3 w-3 mr-1"}),"复制链接"]}),d.jsx(m,{size:"sm",variant:"outline",onClick:()=>{const e=Y(s);window.open(e,"_blank")},children:d.jsx(S,{className:"h-3 w-3"})})]})]},s))})})]}),d.jsxs(o,{className:"border-2 border-orange-200",children:[d.jsxs(h,{children:[d.jsx(j,{className:"text-lg",children:"localStorage数据"}),d.jsx(g,{children:"查看localStorage中存储的所有数据"})]}),d.jsx(N,{children:d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries(V).map(([s,e])=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[d.jsx("span",{className:"text-sm font-mono text-gray-700",children:s}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-xs text-gray-500 max-w-40 truncate",children:e}),d.jsx(m,{size:"sm",variant:"ghost",onClick:()=>W(e),children:d.jsx(D,{className:"h-3 w-3"})})]})]},s))})})]})]})]})]})})}export{R as default};
