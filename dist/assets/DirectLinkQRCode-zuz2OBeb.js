import{r as e,u as s,j as a,C as t,e as r,f as i,i as l,L as c,B as n,ae as m,R as d}from"./index-Dk-gCvGC.js";import{Q as o}from"./browser-BEa-FelJ.js";import{I as x}from"./input-DhHrf3ht.js";import{C as h}from"./copy-Dl2_VZ1T.js";import{E as p}from"./external-link-DpzPespn.js";function j({defaultUrl:j="https://www.creem.io/payment/prod_3nJOuQeVStqkp6JaDcrKHf",title:u="Creemæ”¯ä»˜é“¾æ¥äºŒç»´ç ",showControls:w=!0}){const[f,y]=e.useState(j),[v,N]=e.useState(""),[g,b]=e.useState(!1),[C,k]=e.useState(null),{toast:F}=s(),S=async e=>{if(!e)return k("è¯·è¾“å…¥æœ‰æ•ˆçš„æ”¯ä»˜é“¾æ¥"),void N("");b(!0),k(null);try{if(!new URL(e).hostname.includes("creem.io"))throw new Error("è¯·è¾“å…¥æœ‰æ•ˆçš„Creemæ”¯ä»˜é“¾æ¥");const s=await o.toDataURL(e,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"H"});N(s)}catch(s){k(s.message||"ç”ŸæˆäºŒç»´ç å¤±è´¥"),N("")}finally{b(!1)}};return e.useEffect(()=>{j&&S(j)},[j]),a.jsxs(t,{className:"w-full max-w-md mx-auto",children:[a.jsx(r,{children:a.jsxs(i,{className:"text-center flex items-center justify-center gap-2",children:[a.jsx("span",{children:"ğŸ“±"}),u]})}),a.jsxs(l,{className:"space-y-4",children:[w&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{htmlFor:"paymentUrl",children:"Creemæ”¯ä»˜é“¾æ¥"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(x,{id:"paymentUrl",type:"url",placeholder:"https://www.creem.io/payment/...",value:f,onChange:e=>{y(e.target.value)},className:"flex-1"}),a.jsx(n,{onClick:()=>{S(f)},disabled:g,size:"sm",children:g?a.jsx(m,{className:"h-4 w-4 animate-spin"}):a.jsx(d,{className:"h-4 w-4"})})]})]}),C&&a.jsx("div",{className:"text-red-600 text-sm text-center p-2 bg-red-50 rounded",children:C}),g?a.jsxs("div",{className:"flex items-center justify-center space-x-2 py-8",children:[a.jsx(m,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{children:"æ­£åœ¨ç”ŸæˆäºŒç»´ç ..."})]}):v?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:v,alt:"æ”¯ä»˜äºŒç»´ç ",className:"border-2 border-gray-200 rounded-lg",style:{width:300,height:300}})}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(n,{onClick:async()=>{try{await navigator.clipboard.writeText(f),F({title:"é“¾æ¥å·²å¤åˆ¶",description:"æ”¯ä»˜é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch(e){F({title:"å¤åˆ¶å¤±è´¥",description:"æ— æ³•å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿",variant:"destructive"})}},variant:"outline",size:"sm",children:[a.jsx(h,{className:"h-4 w-4 mr-1"}),"å¤åˆ¶é“¾æ¥"]}),a.jsxs(n,{onClick:()=>{window.open(f,"_blank")},variant:"outline",size:"sm",children:[a.jsx(p,{className:"h-4 w-4 mr-1"}),"æ‰“å¼€é“¾æ¥"]}),a.jsxs(n,{onClick:async()=>{if(v)try{const e=await fetch(v),s=await e.blob();await navigator.clipboard.write([new ClipboardItem({[s.type]:s})]),F({title:"äºŒç»´ç å·²å¤åˆ¶",description:"äºŒç»´ç å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"})}catch(e){F({title:"å¤åˆ¶å¤±è´¥",description:"æ— æ³•å¤åˆ¶äºŒç»´ç åˆ°å‰ªè´´æ¿",variant:"destructive"})}},variant:"outline",size:"sm",children:[a.jsx(h,{className:"h-4 w-4 mr-1"}),"å¤åˆ¶äºŒç»´ç "]})]}),a.jsx("div",{className:"text-sm text-gray-600 space-y-2 text-center",children:a.jsx("p",{children:"æ‰«ç åä¼šè·³è½¬åˆ°Creemå®‰å…¨æ”¯ä»˜é¡µï¼Œè¯·æ”¾å¿ƒæ”¯ä»˜"})})]}):null,w&&a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm mb-2",children:"å½“å‰é“¾æ¥"}),a.jsx("p",{className:"text-xs text-gray-600 break-all",children:f})]})]})]})}export{j as D};
