import{j as e}from"./ui-core-BoM6Gtru.js";import{r as s}from"./router-CDHmMMQ-.js";import{C as a,a as t,b as c,e as l,B as r}from"./pages-home-B2qezEHm.js";import{B as n,L as i,I as d,T as m}from"./pages-adapt-BAX30gfz.js";import{ba as o,bb as x,ay as u}from"./utils-Ck01-_Du.js";import{C as h}from"./sdk-Co0LyqZK.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-Bf3ZBHM2.js";import"./components-layout-MG0qUfcO.js";import"./pages-brand-Be4bUKpb.js";import"./api-services-h5tHo7Hg.js";import"./pages-content-extractor-Caq7DiWW.js";import"./components-auth-rO0vuiGv.js";function p(){const[p,j]=s.useState(!1),[f,N]=s.useState(null),[g,y]=s.useState(null),[b,v]=s.useState("prod_3nJOuQeVStqkp6JaDcrKHf"),[C,w]=s.useState("test@example.com"),[I,k]=s.useState("creem_EGDvCS72OYrsU8ho7aJ1C"),[S,A]=s.useState("");return e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),"Creem API调试页面",e.jsx(n,{variant:"secondary",children:"深度调试"})]}),e.jsx("p",{className:"text-muted-foreground",children:"尝试不同的API调用方法来诊断问题"})]}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"priceId",children:"价格ID"}),e.jsx(d,{id:"priceId",value:b,onChange:e=>v(e.target.value),placeholder:"输入Creem价格ID",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"customerEmail",children:"客户邮箱"}),e.jsx(d,{id:"customerEmail",type:"email",value:C,onChange:e=>w(e.target.value),placeholder:"customer@example.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"apiKey",children:"API密钥"}),e.jsx(d,{id:"apiKey",type:"password",value:I,onChange:e=>k(e.target.value),placeholder:"输入Creem API密钥",className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"测试方法"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(r,{onClick:async()=>{j(!0),N(null),y(null),A("");try{const e=new h;A("方法1: 直接传递参数\n"+JSON.stringify({priceId:b,customerEmail:C,xApiKey:I?"***":"undefined"},null,2));const s=await e.createCheckout({productId:b,xApiKey:I});N({method:"方法1",data:s})}catch(e){y(`方法1失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:p,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[e.jsx(x,{className:"h-5 w-5 mb-2"}),"方法1: 直接传递参数"]}),e.jsxs(r,{onClick:async()=>{j(!0),N(null),y(null),A("");try{const e=new h;A("方法2: 使用createCheckoutRequest包装\n"+JSON.stringify({createCheckoutRequest:{priceId:b,customerEmail:C},xApiKey:I?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:b},xApiKey:I});N({method:"方法2",data:s})}catch(e){y(`方法2失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:p,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[e.jsx(x,{className:"h-5 w-5 mb-2"}),"方法2: createCheckoutRequest包装"]}),e.jsxs(r,{onClick:async()=>{j(!0),N(null),y(null),A("");try{const e=new h;A("方法3: 只传递必要参数\n"+JSON.stringify({priceId:b,xApiKey:I?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:b},xApiKey:I});N({method:"方法3",data:s})}catch(e){y(`方法3失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:p,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[e.jsx(x,{className:"h-5 w-5 mb-2"}),"方法3: 只传递必要参数"]}),e.jsxs(r,{onClick:async()=>{j(!0),N(null),y(null),A("");try{const e=new h;A("方法4: 使用productId而不是priceId\n"+JSON.stringify({productId:b,customerEmail:C,xApiKey:I?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:b},xApiKey:I});N({method:"方法4",data:s})}catch(e){y(`方法4失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:p,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[e.jsx(x,{className:"h-5 w-5 mb-2"}),"方法4: 使用productId"]})]})]}),g&&e.jsx(a,{className:"border-red-200 bg-red-50",children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(o,{className:"h-5 w-5 text-red-600"}),e.jsx("h3",{className:"font-medium text-red-900",children:"测试失败"})]}),e.jsx("p",{className:"text-red-700 text-sm",children:g})]})}),f&&e.jsx(a,{className:"border-green-200 bg-green-50",children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(u,{className:"h-5 w-5 text-green-600"}),e.jsxs("h3",{className:"font-medium text-green-900",children:["测试成功 - ",f.method]})]}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"cursor-pointer text-green-700 font-medium",children:"查看响应数据"}),e.jsx("pre",{className:"mt-2 p-3 bg-white rounded border text-xs overflow-auto",children:JSON.stringify(f.data,null,2)})]})]})}),S&&e.jsx(a,{className:"border-blue-200 bg-blue-50",children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(o,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-medium text-blue-900",children:"调试信息"})]}),e.jsx(m,{value:S,readOnly:!0,className:"font-mono text-xs",rows:10})]})}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"环境信息"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Creem SDK版本:"})," 0.3.37"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"环境:"})," ","production"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"API密钥配置:"})," ",I?"已配置":"未配置"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"服务器URL:"})," https://api.creem.io"]})]})]})]})]})})}export{p as default};
