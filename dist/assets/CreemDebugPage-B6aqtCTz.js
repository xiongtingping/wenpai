import{c as e,r as s,j as a,C as t,e as l,f as c,g as n,i as r,L as i,B as d,H as m}from"./index-Dk-gCvGC.js";import{I as o}from"./input-DhHrf3ht.js";import{P as h}from"./play-DHSGaGCa.js";import{C as x}from"./sdk-Bgcfu0yj.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=e("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),p=e("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);function j(){const[e,j]=s.useState(!1),[y,f]=s.useState(null),[N,g]=s.useState(null),[k,v]=s.useState("prod_3nJOuQeVStqkp6JaDcrKHf"),[b,w]=s.useState("test@example.com"),[C,I]=s.useState("creem_EGDvCS72OYrsU8ho7aJ1C"),[S,A]=s.useState("");return a.jsx("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:a.jsxs(t,{children:[a.jsxs(l,{children:[a.jsxs(c,{className:"flex items-center gap-2",children:[a.jsx(u,{className:"h-5 w-5"}),"Creem API调试页面",a.jsx(n,{variant:"secondary",children:"深度调试"})]}),a.jsx("p",{className:"text-muted-foreground",children:"尝试不同的API调用方法来诊断问题"})]}),a.jsxs(r,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(i,{htmlFor:"priceId",children:"价格ID"}),a.jsx(o,{id:"priceId",value:k,onChange:e=>v(e.target.value),placeholder:"输入Creem价格ID",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(i,{htmlFor:"customerEmail",children:"客户邮箱"}),a.jsx(o,{id:"customerEmail",type:"email",value:b,onChange:e=>w(e.target.value),placeholder:"customer@example.com",className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(i,{htmlFor:"apiKey",children:"API密钥"}),a.jsx(o,{id:"apiKey",type:"password",value:C,onChange:e=>I(e.target.value),placeholder:"输入Creem API密钥",className:"mt-1"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"测试方法"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(d,{onClick:async()=>{j(!0),f(null),g(null),A("");try{const e=new x;A("方法1: 直接传递参数\n"+JSON.stringify({priceId:k,customerEmail:b,xApiKey:C?"***":"undefined"},null,2));const s=await e.createCheckout({productId:k,xApiKey:C});f({method:"方法1",data:s})}catch(e){g(`方法1失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:e,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[a.jsx(p,{className:"h-5 w-5 mb-2"}),"方法1: 直接传递参数"]}),a.jsxs(d,{onClick:async()=>{j(!0),f(null),g(null),A("");try{const e=new x;A("方法2: 使用createCheckoutRequest包装\n"+JSON.stringify({createCheckoutRequest:{priceId:k,customerEmail:b},xApiKey:C?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:k},xApiKey:C});f({method:"方法2",data:s})}catch(e){g(`方法2失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:e,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[a.jsx(p,{className:"h-5 w-5 mb-2"}),"方法2: createCheckoutRequest包装"]}),a.jsxs(d,{onClick:async()=>{j(!0),f(null),g(null),A("");try{const e=new x;A("方法3: 只传递必要参数\n"+JSON.stringify({priceId:k,xApiKey:C?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:k},xApiKey:C});f({method:"方法3",data:s})}catch(e){g(`方法3失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:e,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[a.jsx(p,{className:"h-5 w-5 mb-2"}),"方法3: 只传递必要参数"]}),a.jsxs(d,{onClick:async()=>{j(!0),f(null),g(null),A("");try{const e=new x;A("方法4: 使用productId而不是priceId\n"+JSON.stringify({productId:k,customerEmail:b,xApiKey:C?"***":"undefined"},null,2));const s=await e.createCheckout({createCheckoutRequest:{productId:k},xApiKey:C});f({method:"方法4",data:s})}catch(e){g(`方法4失败: ${e.message}`),A(s=>s+"\n\n错误详情:\n"+e.stack)}finally{j(!1)}},disabled:e,variant:"outline",className:"h-20 flex flex-col items-center justify-center",children:[a.jsx(p,{className:"h-5 w-5 mb-2"}),"方法4: 使用productId"]})]})]}),N&&a.jsx(t,{className:"border-red-200 bg-red-50",children:a.jsxs(r,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(u,{className:"h-5 w-5 text-red-600"}),a.jsx("h3",{className:"font-medium text-red-900",children:"测试失败"})]}),a.jsx("p",{className:"text-red-700 text-sm",children:N})]})}),y&&a.jsx(t,{className:"border-green-200 bg-green-50",children:a.jsxs(r,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(h,{className:"h-5 w-5 text-green-600"}),a.jsxs("h3",{className:"font-medium text-green-900",children:["测试成功 - ",y.method]})]}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"cursor-pointer text-green-700 font-medium",children:"查看响应数据"}),a.jsx("pre",{className:"mt-2 p-3 bg-white rounded border text-xs overflow-auto",children:JSON.stringify(y.data,null,2)})]})]})}),S&&a.jsx(t,{className:"border-blue-200 bg-blue-50",children:a.jsxs(r,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(u,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-medium text-blue-900",children:"调试信息"})]}),a.jsx(m,{value:S,readOnly:!0,className:"font-mono text-xs",rows:10})]})}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"环境信息"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Creem SDK版本:"})," 0.3.37"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"环境:"})," ","production"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"API密钥配置:"})," ",C?"已配置":"未配置"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"服务器URL:"})," https://api.creem.io"]})]})]})]})]})})}export{j as default};
