import{j as s}from"./ui-core-BoM6Gtru.js";import{r as e}from"./router-CDHmMMQ-.js";import{j as a,p as t,u as c,m as i,C as r,a as l,b as n,e as d,d as m,B as x}from"./pages-home-J00GHGYh.js";import{B as h}from"./pages-adapt-BKtjfSjY.js";import{U as o,n as j,o as p,f as u,aR as g,Q as N,aT as f,C as v,p as y,ap as w}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-BjAIff2f.js";import"./components-layout-BOOBlVt3.js";import"./pages-brand-B_1hjexF.js";import"./api-services-Cf__elYu.js";import"./pages-content-extractor-BD6GTgOD.js";import"./components-auth-Csho6eHK.js";function b(){const{user:b,isAuthenticated:A,status:I,login:k,logout:D}=a(),{user:C,isLoggedIn:G,loading:R,guard:U,showLogin:L,hideLogin:S}=t(),{toast:$}=c(),[z,B]=e.useState(null),[E,H]=e.useState([]);e.useEffect(()=>{try{const s=i();B(s)}catch(s){}},[]);const M=(s,e,a)=>{H(t=>[...t,{id:Date.now(),test:s,status:e,message:a,timestamp:(new Date).toLocaleTimeString()}])};return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Authing登录系统测试"}),s.jsx("p",{className:"text-gray-600",children:"测试Authing登录系统的各项功能和配置"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs(r,{children:[s.jsx(l,{className:"pb-3",children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5"}),"认证状态"]})}),s.jsxs(d,{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(h,{variant:A?"default":"secondary",children:A?"已登录":"未登录"}),R&&s.jsx(j,{className:"w-4 h-4 animate-spin"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["状态: ",I]})]})]}),s.jsxs(r,{children:[s.jsx(l,{className:"pb-3",children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(p,{className:"w-5 h-5"}),"Authing状态"]})}),s.jsxs(d,{children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx(h,{variant:G?"default":"secondary",children:G?"已连接":"未连接"})}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Guard: ",U?"已初始化":"未初始化"]})]})]}),s.jsxs(r,{children:[s.jsx(l,{className:"pb-3",children:s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),"配置状态"]})}),s.jsxs(d,{children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx(h,{variant:z?"default":"destructive",children:z?"已配置":"未配置"})}),s.jsxs("p",{className:"text-sm text-gray-600",children:["App ID: ",(null==z?void 0:z.appId)?"已设置":"未设置"]})]})]})]}),s.jsxs(r,{className:"mb-8",children:[s.jsxs(l,{children:[s.jsx(n,{children:"操作面板"}),s.jsx(m,{children:"测试Authing登录系统的各项功能"})]}),s.jsx(d,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs(x,{onClick:()=>{H([]),M("Authing配置","success","配置加载成功"),z?(M("App ID","success",z.appId),M("Host","success",z.host),M("Redirect URI","success",z.redirectUri),M("Mode","success",z.mode)):M("配置加载","error","配置加载失败"),(async()=>{try{const s=await fetch("https://qutkgzkfaezk-demo.authing.cn");s.ok?M("网络连接","success","Authing服务可访问"):M("网络连接","error",`服务响应异常: ${s.status}`)}catch(s){M("网络连接","error",`连接失败: ${s instanceof Error?s.message:"未知错误"}`)}})(),U?M("Guard组件","success","Guard组件已初始化"):M("Guard组件","error","Guard组件未初始化"),G?M("登录状态","success","用户已登录"):M("登录状态","warning","用户未登录"),b?(M("用户信息","success",`用户ID: ${b.id}`),M("用户名","success",b.nickname||b.username||"未设置"),M("邮箱","success",b.email||"未设置")):M("用户信息","warning","无用户信息"),$({title:"测试完成",description:"请查看测试结果"})},className:"flex items-center gap-2",children:[s.jsx(j,{className:"w-4 h-4"}),"运行所有测试"]}),s.jsxs(x,{onClick:()=>{L(),M("显示登录","success","登录界面已显示")},variant:"outline",className:"flex items-center gap-2",children:[s.jsx(g,{className:"w-4 h-4"}),"显示登录界面"]}),s.jsxs(x,{onClick:()=>{S(),M("隐藏登录","success","登录界面已隐藏")},variant:"outline",className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"隐藏登录界面"]}),A&&s.jsxs(x,{onClick:()=>{D(),M("用户登出","success","用户已登出")},variant:"destructive",className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-4 h-4"}),"登出"]})]})})]}),b&&s.jsxs(r,{className:"mb-8",children:[s.jsx(l,{children:s.jsx(n,{children:"当前用户信息"})}),s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"用户ID"}),s.jsx("p",{className:"text-sm",children:b.id})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"用户名"}),s.jsx("p",{className:"text-sm",children:b.nickname||b.username||"未设置"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"邮箱"}),s.jsx("p",{className:"text-sm",children:b.email||"未设置"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"手机号"}),s.jsx("p",{className:"text-sm",children:b.phone||"未设置"})]})]})})]}),z&&s.jsxs(r,{className:"mb-8",children:[s.jsx(l,{children:s.jsx(n,{children:"Authing配置信息"})}),s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"App ID"}),s.jsx("p",{className:"text-sm font-mono",children:z.appId})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Host"}),s.jsx("p",{className:"text-sm font-mono",children:z.host})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Redirect URI"}),s.jsx("p",{className:"text-sm font-mono",children:z.redirectUri})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mode"}),s.jsx("p",{className:"text-sm",children:z.mode})]})]})})]}),s.jsxs(r,{children:[s.jsxs(l,{children:[s.jsx(n,{children:"测试结果"}),s.jsx(m,{children:"显示各项功能的测试结果"})]}),s.jsx(d,{children:0===E.length?s.jsx("p",{className:"text-gray-500 text-center py-8",children:'暂无测试结果，请点击"运行所有测试"开始测试'}):s.jsx("div",{className:"space-y-3",children:E.map(e=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:["success"===e.status&&s.jsx(v,{className:"w-5 h-5 text-green-500"}),"error"===e.status&&s.jsx(y,{className:"w-5 h-5 text-red-500"}),"warning"===e.status&&s.jsx(w,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:e.test}),s.jsx("p",{className:"text-sm text-gray-600",children:e.message})]}),s.jsx("span",{className:"text-xs text-gray-400",children:e.timestamp})]},e.id))})})]})]})}export{b as default};
