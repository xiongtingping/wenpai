import{c as e,r as s,j as t,b as a,w as r,x as i,y as n,R as l,u as o,A as c,P as d,e as m,d as h,z as u,D as x,E as p,G as f,H as g,I as j,h as b,J as v,C as N,t as w,o as y,B as k,p as I,k as C,K as S,F as T}from"./index-Cu70HESd.js";import{P as E}from"./PageNavigation-DDP3eurv.js";import{T as O}from"./textarea-DylBDHiN.js";import{C as A,a as P,b as z,c as _,d as D}from"./card-C_loCoFD.js";import{T as $,a as M,b as R,c as B,C as L,d as F,S as U,e as J,f as H,g as q,h as K}from"./select-CyUPdBGJ.js";import{S as G}from"./slider-T1R8_6uU.js";import{u as V}from"./index-i7flwvb1.js";import{L as X}from"./label-CiijFGu1.js";import{B as W}from"./badge-CIOmyheZ.js";import Y from"./aiService-C8Za63DW.js";import{D as Z,a as Q,b as ee,c as se,d as te}from"./dialog-CbRA8_AX.js";import{I as ae}from"./input-iNWycu-N.js";import{I as re}from"./info-BSqS0fyx.js";import{R as ie}from"./refresh-cw-DxcdbKGG.js";import{S as ne}from"./shield-Bm1xaTfP.js";import{E as le}from"./external-link-jeGEvVBw.js";import{C as oe}from"./circle-x-Wo4NID7o.js";import{C as ce}from"./circle-check-big-P3EWXA1B.js";import{T as de}from"./triangle-alert-CKSzkCD3.js";import{C as me}from"./crown-BXlF8AAg.js";import{A as he,B as ue,V as xe,S as pe,T as fe,a as ge,R as je}from"./video-vRpSh_39.js";import{L as be}from"./lock-CQJwpD2-.js";import{M as ve,H as Ne}from"./message-square-pYziuzz6.js";import{G as we}from"./globe-BHSXmKRF.js";import{Z as ye}from"./zap-B-n6G30_.js";import{S as ke}from"./upload-ZA6D-pIW.js";import{S as Ie}from"./save-Dyhx6hr6.js";import{S as Ce}from"./square-pen-B0Nm0OTV.js";import{H as Se}from"./heart-DWZr1VDh.js";import{C as Te}from"./copy-BOz6b4UI.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=e("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Oe=e("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var[Ae,Pe]=a("Tooltip",[r]),ze=r(),_e="TooltipProvider",De=700,$e="tooltip.open",[Me,Re]=Ae(_e),Be=e=>{const{__scopeTooltip:a,delayDuration:r=De,skipDelayDuration:i=300,disableHoverableContent:n=!1,children:l}=e,o=s.useRef(!0),c=s.useRef(!1),d=s.useRef(0);return s.useEffect(()=>{const e=d.current;return()=>window.clearTimeout(e)},[]),t.jsx(Me,{scope:a,isOpenDelayedRef:o,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:s.useCallback(e=>{c.current=e},[]),disableHoverableContent:n,children:l})};Be.displayName=_e;var Le="Tooltip",[Fe,Ue]=Ae(Le),Je=e=>{const{__scopeTooltip:a,children:r,open:o,defaultOpen:c,onOpenChange:d,disableHoverableContent:m,delayDuration:h}=e,u=Re(Le,e.__scopeTooltip),x=ze(a),[p,f]=s.useState(null),g=i(),j=s.useRef(0),b=m??u.disableHoverableContent,v=h??u.delayDuration,N=s.useRef(!1),[w,y]=n({prop:o,defaultProp:c??!1,onChange:e=>{e?(u.onOpen(),document.dispatchEvent(new CustomEvent($e))):u.onClose(),null==d||d(e)},caller:Le}),k=s.useMemo(()=>w?N.current?"delayed-open":"instant-open":"closed",[w]),I=s.useCallback(()=>{window.clearTimeout(j.current),j.current=0,N.current=!1,y(!0)},[y]),C=s.useCallback(()=>{window.clearTimeout(j.current),j.current=0,y(!1)},[y]),S=s.useCallback(()=>{window.clearTimeout(j.current),j.current=window.setTimeout(()=>{N.current=!0,y(!0),j.current=0},v)},[v,y]);return s.useEffect(()=>()=>{j.current&&(window.clearTimeout(j.current),j.current=0)},[]),t.jsx(l,{...x,children:t.jsx(Fe,{scope:a,contentId:g,open:w,stateAttribute:k,trigger:p,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{u.isOpenDelayedRef.current?S():I()},[u.isOpenDelayedRef,S,I]),onTriggerLeave:s.useCallback(()=>{b?C():(window.clearTimeout(j.current),j.current=0)},[C,b]),onOpen:I,onClose:C,disableHoverableContent:b,children:r})})};Je.displayName=Le;var He="TooltipTrigger",qe=s.forwardRef((e,a)=>{const{__scopeTooltip:r,...i}=e,n=Ue(He,r),l=Re(He,r),h=ze(r),u=s.useRef(null),x=o(a,u,n.onTriggerChange),p=s.useRef(!1),f=s.useRef(!1),g=s.useCallback(()=>p.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),t.jsx(c,{asChild:!0,...h,children:t.jsx(d.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...i,ref:x,onPointerMove:m(e.onPointerMove,e=>{"touch"!==e.pointerType&&(f.current||l.isPointerInTransitRef.current||(n.onTriggerEnter(),f.current=!0))}),onPointerLeave:m(e.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:m(e.onPointerDown,()=>{n.open&&n.onClose(),p.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:m(e.onFocus,()=>{p.current||n.onOpen()}),onBlur:m(e.onBlur,n.onClose),onClick:m(e.onClick,n.onClose)})})});qe.displayName=He;var Ke="TooltipPortal",[Ge,Ve]=Ae(Ke,{forceMount:void 0}),Xe=e=>{const{__scopeTooltip:s,forceMount:a,children:r,container:i}=e,n=Ue(Ke,s);return t.jsx(Ge,{scope:s,forceMount:a,children:t.jsx(h,{present:a||n.open,children:t.jsx(u,{asChild:!0,container:i,children:r})})})};Xe.displayName=Ke;var We="TooltipContent",Ye=s.forwardRef((e,s)=>{const a=Ve(We,e.__scopeTooltip),{forceMount:r=a.forceMount,side:i="top",...n}=e,l=Ue(We,e.__scopeTooltip);return t.jsx(h,{present:r||l.open,children:l.disableHoverableContent?t.jsx(ts,{side:i,...n,ref:s}):t.jsx(Ze,{side:i,...n,ref:s})})}),Ze=s.forwardRef((e,a)=>{const r=Ue(We,e.__scopeTooltip),i=Re(We,e.__scopeTooltip),n=s.useRef(null),l=o(a,n),[c,d]=s.useState(null),{trigger:m,onClose:h}=r,u=n.current,{onPointerInTransitChange:x}=i,p=s.useCallback(()=>{d(null),x(!1)},[x]),f=s.useCallback((e,s)=>{const t=e.currentTarget,a={x:e.clientX,y:e.clientY},r=function(e,s,t=5){const a=[];switch(s){case"top":a.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":a.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":a.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":a.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t})}return a}(a,function(e,s){const t=Math.abs(s.top-e.y),a=Math.abs(s.bottom-e.y),r=Math.abs(s.right-e.x),i=Math.abs(s.left-e.x);switch(Math.min(t,a,r,i)){case i:return"left";case r:return"right";case t:return"top";case a:return"bottom";default:throw new Error("unreachable")}}(a,t.getBoundingClientRect())),i=function(e){const s=e.slice();return s.sort((e,s)=>e.x<s.x?-1:e.x>s.x?1:e.y<s.y?-1:e.y>s.y?1:0),function(e){if(e.length<=1)return e.slice();const s=[];for(let a=0;a<e.length;a++){const t=e[a];for(;s.length>=2;){const e=s[s.length-1],a=s[s.length-2];if(!((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x)))break;s.pop()}s.push(t)}s.pop();const t=[];for(let a=e.length-1;a>=0;a--){const s=e[a];for(;t.length>=2;){const e=t[t.length-1],a=t[t.length-2];if(!((e.x-a.x)*(s.y-a.y)>=(e.y-a.y)*(s.x-a.x)))break;t.pop()}t.push(s)}return t.pop(),1===s.length&&1===t.length&&s[0].x===t[0].x&&s[0].y===t[0].y?s:s.concat(t)}(s)}([...r,...function(e){const{top:s,right:t,bottom:a,left:r}=e;return[{x:r,y:s},{x:t,y:s},{x:t,y:a},{x:r,y:a}]}(s.getBoundingClientRect())]);d(i),x(!0)},[x]);return s.useEffect(()=>()=>p(),[p]),s.useEffect(()=>{if(m&&u){const e=e=>f(e,u),s=e=>f(e,m);return m.addEventListener("pointerleave",e),u.addEventListener("pointerleave",s),()=>{m.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",s)}}},[m,u,f,p]),s.useEffect(()=>{if(c){const e=e=>{const s=e.target,t={x:e.clientX,y:e.clientY},a=(null==m?void 0:m.contains(s))||(null==u?void 0:u.contains(s)),r=!function(e,s){const{x:t,y:a}=e;let r=!1;for(let i=0,n=s.length-1;i<s.length;n=i++){const e=s[i],l=s[n],o=e.x,c=e.y,d=l.x,m=l.y;c>a!=m>a&&t<(d-o)*(a-c)/(m-c)+o&&(r=!r)}return r}(t,c);a?p():r&&(p(),h())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[m,u,c,h,p]),t.jsx(ts,{...e,ref:l})}),[Qe,es]=Ae(Le,{isInside:!1}),ss=f("TooltipContent"),ts=s.forwardRef((e,a)=>{const{__scopeTooltip:r,children:i,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:o,...c}=e,d=Ue(We,r),m=ze(r),{onClose:h}=d;return s.useEffect(()=>(document.addEventListener($e,h),()=>document.removeEventListener($e,h)),[h]),s.useEffect(()=>{if(d.trigger){const e=e=>{const s=e.target;(null==s?void 0:s.contains(d.trigger))&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,h]),t.jsx(x,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:t.jsxs(p,{"data-state":d.stateAttribute,...m,...c,ref:a,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(ss,{children:i}),t.jsx(Qe,{scope:r,isInside:!0,children:t.jsx(g,{id:d.contentId,role:"tooltip",children:n||i})})]})})});Ye.displayName=We;var as="TooltipArrow";s.forwardRef((e,s)=>{const{__scopeTooltip:a,...r}=e,i=ze(a);return es(as,a).isInside?null:t.jsx(j,{...i,...r,ref:s})}).displayName=as;var rs=Xe,is=Ye;const ns=Be,ls=Je,os=qe,cs=s.forwardRef(({className:e,sideOffset:s=4,...a},r)=>t.jsx(rs,{children:t.jsx(is,{ref:r,sideOffset:s,className:b("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...a})}));cs.displayName=is.displayName;var ds="Checkbox",[ms,hs]=a(ds),[us,xs]=ms(ds);function ps(e){const{__scopeCheckbox:a,checked:r,children:i,defaultChecked:l,disabled:o,form:c,name:d,onCheckedChange:m,required:h,value:u="on",internal_do_not_use_render:x}=e,[p,f]=n({prop:r,defaultProp:l??!1,onChange:m,caller:ds}),[g,j]=s.useState(null),[b,v]=s.useState(null),N=s.useRef(!1),w=!g||!!c||!!g.closest("form"),y={checked:p,disabled:o,setChecked:f,control:g,setControl:j,name:d,form:c,value:u,hasConsumerStoppedPropagationRef:N,required:h,defaultChecked:!ks(l)&&l,isFormControl:w,bubbleInput:b,setBubbleInput:v};return t.jsx(us,{scope:a,...y,children:ys(x)?x(y):i})}var fs="CheckboxTrigger",gs=s.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:r,...i},n)=>{const{control:l,value:c,disabled:h,checked:u,required:x,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:j,bubbleInput:b}=xs(fs,e),v=o(n,p),N=s.useRef(u);return s.useEffect(()=>{const e=null==l?void 0:l.form;if(e){const s=()=>f(N.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[l,f]),t.jsx(d.button,{type:"button",role:"checkbox","aria-checked":ks(u)?"mixed":u,"aria-required":x,"data-state":Is(u),"data-disabled":h?"":void 0,disabled:h,value:c,...i,ref:v,onKeyDown:m(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:m(r,e=>{f(e=>!!ks(e)||!e),b&&j&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});gs.displayName=fs;var js=s.forwardRef((e,s)=>{const{__scopeCheckbox:a,name:r,checked:i,defaultChecked:n,required:l,disabled:o,value:c,onCheckedChange:d,form:m,...h}=e;return t.jsx(ps,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:o,required:l,onCheckedChange:d,name:r,form:m,value:c,internal_do_not_use_render:({isFormControl:e})=>t.jsxs(t.Fragment,{children:[t.jsx(gs,{...h,ref:s,__scopeCheckbox:a}),e&&t.jsx(ws,{__scopeCheckbox:a})]})})});js.displayName=ds;var bs="CheckboxIndicator",vs=s.forwardRef((e,s)=>{const{__scopeCheckbox:a,forceMount:r,...i}=e,n=xs(bs,a);return t.jsx(h,{present:r||ks(n.checked)||!0===n.checked,children:t.jsx(d.span,{"data-state":Is(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...e.style}})})});vs.displayName=bs;var Ns="CheckboxBubbleInput",ws=s.forwardRef(({__scopeCheckbox:e,...a},r)=>{const{control:i,hasConsumerStoppedPropagationRef:n,checked:l,defaultChecked:c,required:m,disabled:h,name:u,value:x,form:p,bubbleInput:f,setBubbleInput:g}=xs(Ns,e),j=o(r,g),b=V(l),N=v(i);s.useEffect(()=>{const e=f;if(!e)return;const s=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(s,"checked").set,a=!n.current;if(b!==l&&t){const s=new Event("click",{bubbles:a});e.indeterminate=ks(l),t.call(e,!ks(l)&&l),e.dispatchEvent(s)}},[f,b,l,n]);const w=s.useRef(!ks(l)&&l);return t.jsx(d.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??w.current,required:m,disabled:h,name:u,value:x,form:p,...a,tabIndex:-1,ref:j,style:{...a.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function ys(e){return"function"==typeof e}function ks(e){return"indeterminate"===e}function Is(e){return ks(e)?"indeterminate":e?"checked":"unchecked"}ws.displayName=Ns;const Cs=s.forwardRef(({className:e,...s},a)=>t.jsx(js,{ref:a,className:b("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(vs,{className:b("flex items-center justify-center text-current"),children:t.jsx(N,{className:"h-4 w-4"})})}));Cs.displayName=js.displayName;const Ss={wechat:{name:"å¾®ä¿¡",description:"å¾®ä¿¡å…¬ä¼—å·ã€æœ‹å‹åœˆ",maxLength:2e3,hashtagCount:0,tone:"ä¸“ä¸šã€æƒå¨",features:["å›¾æ–‡å¹¶èŒ‚","æ·±åº¦å†…å®¹","ä¸“ä¸šæœ¯è¯­"]},weibo:{name:"å¾®åš",description:"æ–°æµªå¾®åš",maxLength:140,hashtagCount:3,tone:"ç®€æ´ã€çƒ­ç‚¹",features:["è¯é¢˜æ ‡ç­¾","@ç”¨æˆ·","è½¬å‘äº’åŠ¨"]},xiaohongshu:{name:"å°çº¢ä¹¦",description:"å°çº¢ä¹¦ç¬”è®°",maxLength:1e3,hashtagCount:20,tone:"ç§è‰ã€åˆ†äº«",features:["ä¸ªäººä½“éªŒ","å›¾ç‰‡å±•ç¤º","æ ‡ç­¾ä¸°å¯Œ"]},douyin:{name:"æŠ–éŸ³",description:"æŠ–éŸ³çŸ­è§†é¢‘",maxLength:300,hashtagCount:5,tone:"è½»æ¾ã€æœ‰è¶£",features:["è§†é¢‘è„šæœ¬","éŸ³ä¹é…åˆ","äº’åŠ¨å¼•å¯¼"]},zhihu:{name:"çŸ¥ä¹",description:"çŸ¥ä¹é—®ç­”",maxLength:5e3,hashtagCount:0,tone:"ä¸“ä¸šã€æ·±åº¦",features:["è¯¦ç»†è§£ç­”","ä¸“ä¸šæœ¯è¯­","å¼•ç”¨æ¥æº"]},bilibili:{name:"Bç«™",description:"Bç«™è§†é¢‘",maxLength:500,hashtagCount:10,tone:"å¹´è½»ã€æ´»åŠ›",features:["å¼¹å¹•äº’åŠ¨","è§†é¢‘æ ‡é¢˜","åˆ†åŒºæ ‡ç­¾"]}};let Ts="gpt-4o-mini";const Es={"gpt-4o":{id:"gpt-4o",name:"OpenAI GPT-4o",provider:"OpenAI",description:"æœ€æ–°æœ€å¼ºå¤§çš„AIæ¨¡å‹ï¼Œæ€§èƒ½å“è¶Šï¼Œåˆ›æ„ä¸°å¯Œï¼Œæ”¯æŒå¤šæ¨¡æ€è¾“å…¥è¾“å‡º",features:["è¶…å¼ºç†è§£èƒ½åŠ›","åˆ›æ„å†…å®¹ç”Ÿæˆ","å¤šæ¨¡æ€æ”¯æŒ","ä¸Šä¸‹æ–‡è®°å¿†ä¼˜ç§€","ä»£ç ç”Ÿæˆèƒ½åŠ›å¼º"],maxTokens:128e3,pricing:{input:.0025,output:.01}},"gpt-4o-mini":{id:"gpt-4o-mini",name:"OpenAI GPT-4o mini",provider:"OpenAI",description:"GPT-4oçš„è½»é‡ç‰ˆæœ¬ï¼Œæ€§ä»·æ¯”æé«˜ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨",features:["æ€§ä»·æ¯”æé«˜","å“åº”é€Ÿåº¦å¿«","ç†è§£èƒ½åŠ›ä¼˜ç§€","é€‚åˆæ—¥å¸¸å¯¹è¯","æˆæœ¬æ§åˆ¶å‹å¥½"],maxTokens:128e3,pricing:{input:15e-5,output:6e-4}},"deepseek-v3":{id:"deepseek-v3",name:"DeepSeek V3",provider:"DeepSeek",description:"ä¸­æ–‡ä¼˜åŒ–æ¨¡å‹ï¼Œç†è§£åŠ›å¼ºï¼Œé€‚åˆæœ¬åœ°åŒ–å†…å®¹å’Œä¸­æ–‡åˆ›ä½œ",features:["ä¸­æ–‡ç†è§£ä¼˜ç§€","æœ¬åœ°åŒ–å†…å®¹åˆ›ä½œ","æ–‡åŒ–è¯­å¢ƒç†è§£","ä¸­æ–‡è¡¨è¾¾è‡ªç„¶","é€‚åˆä¸­æ–‡ç”¨æˆ·"],maxTokens:128e3,pricing:{input:14e-5,output:56e-5}}},Os={trial:["gpt-4o-mini","deepseek-v3"],pro:["gpt-4o","gpt-4o-mini","deepseek-v3"],premium:["gpt-4o","gpt-4o-mini","deepseek-v3"]};function As(e){return Es[e]}const Ps={weibo:{platformId:"weibo",platformName:"å¾®åš",authUrl:"https://open.weibo.com/oauth2/authorize",apiBaseUrl:"https://api.weibo.com/2",isAuthorized:!1},zhihu:{platformId:"zhihu",platformName:"çŸ¥ä¹",authUrl:"https://www.zhihu.com/oauth/authorize",apiBaseUrl:"https://api.zhihu.com",isAuthorized:!1},xiaohongshu:{platformId:"xiaohongshu",platformName:"å°çº¢ä¹¦",authUrl:"https://oauth.xiaohongshu.com/oauth/authorize",apiBaseUrl:"https://api.xiaohongshu.com",isAuthorized:!1},bilibili:{platformId:"bilibili",platformName:"Bç«™",authUrl:"https://passport.bilibili.com/login",apiBaseUrl:"https://api.bilibili.com",isAuthorized:!1},douyin:{platformId:"douyin",platformName:"æŠ–éŸ³",authUrl:"https://open.douyin.com/oauth/authorize",apiBaseUrl:"https://open.douyin.com",isAuthorized:!1},twitter:{platformId:"twitter",platformName:"Twitter",authUrl:"https://twitter.com/i/oauth2/authorize",apiBaseUrl:"https://api.twitter.com/2",isAuthorized:!1},linkedin:{platformId:"linkedin",platformName:"LinkedIn",authUrl:"https://www.linkedin.com/oauth/v2/authorization",apiBaseUrl:"https://api.linkedin.com/v2",isAuthorized:!1}};function zs(){return Object.values(Ps)}function _s(e){const s=`platform_api_config_${e}`,t=localStorage.getItem(s);if(!t)return null;try{const s=JSON.parse(t);return{...Ps[e],...s}}catch{return null}}async function Ds(e,s){const t=_s(e);if(!t)return{success:!1,error:"å¹³å°é…ç½®ä¸å­˜åœ¨"};switch(e){case"weibo":return await async function(e,s){var t;try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®Œæˆå¾®åšæˆæƒ"};const a=await fetch(`${s.apiBaseUrl}/statuses/update.json`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${s.accessToken}`},body:new URLSearchParams({status:e.text,source:"wenpai-app"})}),r=await a.json();return r.id?{success:!0,publishId:r.id,publishUrl:`https://weibo.com/${null==(t=r.user)?void 0:t.id}/${r.id}`,response:r}:{success:!1,error:r.error||"å‘å¸ƒå¤±è´¥"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);case"zhihu":return await async function(e,s){try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®ŒæˆçŸ¥ä¹æˆæƒ"};const t=await fetch(`${s.apiBaseUrl}/drafts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`},body:JSON.stringify({title:e.title||"æ–°æ–‡ç« ",content:e.text,topics:e.hashtags||[]})}),a=await t.json();if(a.id){const e=await fetch(`${s.apiBaseUrl}/drafts/${a.id}/publish`,{method:"POST",headers:{Authorization:`Bearer ${s.accessToken}`}}),t=await e.json();if(t.url)return{success:!0,publishId:a.id,publishUrl:t.url,response:t}}return{success:!1,error:"å‘å¸ƒå¤±è´¥"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);case"twitter":return await async function(e,s){var t,a,r;try{if(!s.accessToken)return{success:!1,error:"æœªæˆæƒï¼Œè¯·å…ˆå®ŒæˆTwitteræˆæƒ"};const i=await fetch(`${s.apiBaseUrl}/tweets`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.accessToken}`},body:JSON.stringify({text:e.text})}),n=await i.json();return(null==(t=n.data)?void 0:t.id)?{success:!0,publishId:n.data.id,publishUrl:`https://twitter.com/user/status/${n.data.id}`,response:n}:{success:!1,error:(null==(r=null==(a=n.errors)?void 0:a[0])?void 0:r.message)||"å‘å¸ƒå¤±è´¥"}}catch(i){return{success:!1,error:i instanceof Error?i.message:"ç½‘ç»œé”™è¯¯"}}}(s,t);default:return{success:!1,error:"æš‚ä¸æ”¯æŒè¯¥å¹³å°çš„APIç›´å‘"}}}function $s(e){const s=_s(e);return(null==s?void 0:s.isAuthorized)||!1}function Ms({open:e,onOpenChange:a}){const{toast:r}=w(),[i,n]=s.useState([]),[l,o]=s.useState(null),[c,d]=s.useState(!1),[m,h]=s.useState(""),[u,x]=s.useState(""),[p,f]=s.useState("");s.useEffect(()=>{if(e){const e=zs().map(e=>_s(e.platformId)||e);n(e)}},[e]);const g=e=>e.isAuthorized?t.jsx(ce,{className:"w-4 h-4 text-green-500"}):e.accessToken?t.jsx(de,{className:"w-4 h-4 text-yellow-500"}):t.jsx(oe,{className:"w-4 h-4 text-gray-400"}),j=e=>e.isAuthorized?"å·²æˆæƒ":e.accessToken?"å¾…éªŒè¯":"æœªé…ç½®",b=e=>e.isAuthorized?"bg-green-100 text-green-800 border-green-200":e.accessToken?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-600 border-gray-200";return t.jsx(Z,{open:e,onOpenChange:a,children:t.jsxs(Q,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[t.jsx(ee,{children:t.jsxs(se,{className:"flex items-center gap-2",children:[t.jsx(y,{className:"w-5 h-5"}),"å¹³å°APIé…ç½®ç®¡ç†"]})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsxs($,{defaultValue:"platforms",className:"h-full",children:[t.jsxs(M,{className:"grid w-full grid-cols-2",children:[t.jsx(R,{value:"platforms",children:"å¹³å°é…ç½®"}),t.jsx(R,{value:"help",children:"ä½¿ç”¨è¯´æ˜"})]}),t.jsx(B,{value:"platforms",className:"h-full overflow-auto",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(re,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-sm text-gray-600",children:"é…ç½®å¹³å°APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œï¼Œæ”¯æŒå†…å®¹ç›´å‘åŠŸèƒ½"})]}),t.jsxs(k,{variant:"outline",size:"sm",onClick:()=>{const e=zs().map(e=>_s(e.platformId)||e);n(e),r({title:"çŠ¶æ€å·²åˆ·æ–°",description:"å¹³å°é…ç½®çŠ¶æ€å·²æ›´æ–°"})},children:[t.jsx(ie,{className:"w-4 h-4 mr-1"}),"åˆ·æ–°çŠ¶æ€"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>t.jsxs(A,{className:"relative",children:[t.jsxs(P,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(z,{className:"text-lg",children:e.platformName}),t.jsxs("div",{className:"flex items-center gap-2",children:[g(e),t.jsx(W,{variant:"outline",className:b(e),children:j(e)})]})]}),t.jsxs(_,{children:["å¹³å°ID: ",e.platformId]})]}),t.jsxs(D,{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(Ee,{className:"w-4 h-4 text-gray-400"}),t.jsxs("span",{className:"text-gray-600",children:["APIå¯†é’¥: ",e.apiKey?"å·²é…ç½®":"æœªé…ç½®"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(ne,{className:"w-4 h-4 text-gray-400"}),t.jsxs("span",{className:"text-gray-600",children:["è®¿é—®ä»¤ç‰Œ: ",e.accessToken?"å·²é…ç½®":"æœªé…ç½®"]})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsxs(k,{size:"sm",variant:"outline",onClick:()=>(e=>{o(e),h(e.apiKey||""),x(e.accessToken||""),f(e.userId||""),d(!0)})(e),children:[t.jsx(y,{className:"w-4 h-4 mr-1"}),"é…ç½®"]}),e.authUrl&&t.jsxs(k,{size:"sm",variant:"outline",onClick:()=>(e=>{const s=function(e){const s=function(e){return Ps[e]||null}(e);return(null==s?void 0:s.authUrl)||null}(e.platformId);s?(window.open(s,"_blank","noopener,noreferrer"),r({title:"æˆæƒé¡µé¢å·²æ‰“å¼€",description:"è¯·åœ¨æˆæƒé¡µé¢å®Œæˆæˆæƒï¼Œç„¶åè¿”å›é…ç½®è®¿é—®ä»¤ç‰Œ"})):r({title:"æˆæƒå¤±è´¥",description:"è¯¥å¹³å°æš‚ä¸æ”¯æŒæˆæƒ",variant:"destructive"})})(e),children:[t.jsx(le,{className:"w-4 h-4 mr-1"}),"æˆæƒ"]}),(e.apiKey||e.accessToken)&&t.jsxs(k,{size:"sm",variant:"outline",onClick:()=>{return function(e){const s=`platform_api_config_${e}`;localStorage.removeItem(s)}(s=e.platformId),n(e=>e.map(e=>e.platformId===s?{...e,apiKey:void 0,accessToken:void 0,userId:void 0,isAuthorized:!1}:e)),void r({title:"é…ç½®å·²æ¸…é™¤",description:"å¹³å°APIé…ç½®å·²æ¸…é™¤"});var s},children:[t.jsx(oe,{className:"w-4 h-4 mr-1"}),"æ¸…é™¤"]})]})]})]},e.platformId))})]})}),t.jsx(B,{value:"help",className:"h-full overflow-auto",children:t.jsx("div",{className:"space-y-6",children:t.jsxs(A,{children:[t.jsx(P,{children:t.jsx(z,{children:"APIç›´å‘åŠŸèƒ½è¯´æ˜"})}),t.jsxs(D,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"ä»€ä¹ˆæ˜¯APIç›´å‘ï¼Ÿ"}),t.jsx("p",{className:"text-sm text-gray-600",children:"APIç›´å‘åŠŸèƒ½å…è®¸æ‚¨é€šè¿‡å¹³å°çš„å®˜æ–¹APIç›´æ¥å‘å¸ƒå†…å®¹ï¼Œæ— éœ€æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚ é…ç½®å®Œæˆåï¼Œå¯ä»¥ä¸€é”®å°†AIç”Ÿæˆçš„å†…å®¹ç›´æ¥å‘å¸ƒåˆ°å„å¹³å°ã€‚"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"æ”¯æŒçš„å¹³å°"}),t.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[t.jsx("li",{children:"â€¢ å¾®åš - æ”¯æŒæ–‡æœ¬å‘å¸ƒ"}),t.jsx("li",{children:"â€¢ çŸ¥ä¹ - æ”¯æŒæ–‡ç« å‘å¸ƒ"}),t.jsx("li",{children:"â€¢ Twitter - æ”¯æŒæ¨æ–‡å‘å¸ƒ"}),t.jsx("li",{children:"â€¢ æ›´å¤šå¹³å°å¼€å‘ä¸­..."})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"é…ç½®æ­¥éª¤"}),t.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[t.jsx("li",{children:'1. ç‚¹å‡»"æˆæƒ"æŒ‰é’®ï¼Œåœ¨å¹³å°å®˜ç½‘å®Œæˆæˆæƒ'}),t.jsx("li",{children:"2. è·å–APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œ"}),t.jsx("li",{children:"3. åœ¨é…ç½®é¡µé¢å¡«å…¥ç›¸å…³ä¿¡æ¯"}),t.jsx("li",{children:"4. ä¿å­˜é…ç½®ï¼Œå³å¯ä½¿ç”¨APIç›´å‘åŠŸèƒ½"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"å®‰å…¨è¯´æ˜"}),t.jsx("p",{className:"text-sm text-gray-600",children:"æ‰€æœ‰APIå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œä»…å­˜å‚¨åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†é’¥ä¿¡æ¯ï¼Œä¸è¦æ³„éœ²ç»™ä»–äººã€‚"})]})]})]})})})]})}),t.jsx(Z,{open:c,onOpenChange:d,children:t.jsxs(Q,{children:[t.jsx(ee,{children:t.jsxs(se,{children:["é…ç½® ",null==l?void 0:l.platformName," API"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(X,{htmlFor:"apiKey",children:"APIå¯†é’¥"}),t.jsx(ae,{id:"apiKey",type:"password",placeholder:"è¯·è¾“å…¥APIå¯†é’¥",value:m,onChange:e=>h(e.target.value)})]}),t.jsxs("div",{children:[t.jsx(X,{htmlFor:"accessToken",children:"è®¿é—®ä»¤ç‰Œ"}),t.jsx(ae,{id:"accessToken",type:"password",placeholder:"è¯·è¾“å…¥è®¿é—®ä»¤ç‰Œ",value:u,onChange:e=>x(e.target.value)})]}),t.jsxs("div",{children:[t.jsx(X,{htmlFor:"userId",children:"ç”¨æˆ·ID"}),t.jsx(ae,{id:"userId",placeholder:"è¯·è¾“å…¥ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰",value:p,onChange:e=>f(e.target.value)})]})]}),t.jsxs(te,{children:[t.jsx(k,{variant:"outline",onClick:()=>d(!1),children:"å–æ¶ˆ"}),t.jsx(k,{onClick:()=>{if(!l)return;const e={apiKey:m.trim()||void 0,accessToken:u.trim()||void 0,userId:p.trim()||void 0,isAuthorized:!!u.trim()};!function(e,s){const t=`platform_api_config_${e}`;localStorage.setItem(t,JSON.stringify(s))}(l.platformId,e),n(s=>s.map(s=>s.platformId===l.platformId?{...s,...e}:s)),d(!1),o(null),r({title:"é…ç½®å·²ä¿å­˜",description:`${l.platformName}çš„APIé…ç½®å·²æ›´æ–°`})},children:"ä¿å­˜é…ç½®"})]})]})})]})})}function Rs({isOpen:e,onClose:s,onUpgrade:a,remainingCount:r,userType:i}){const n="trial"===i?{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼šï¼Œç«‹å³å‡çº§äº«å—æ›´å¤šåŠŸèƒ½ï¼`,upgradeText:"ç«‹å³å‡çº§",upgradeDescription:"å‡çº§åäº«å—æ›´å¤šä½¿ç”¨æ¬¡æ•°å’Œé«˜çº§åŠŸèƒ½"}:"pro"===i?{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼šï¼Œå‡çº§åä¸é™æ¬¡ï¼`,upgradeText:"å‡çº§é«˜çº§ç‰ˆ",upgradeDescription:"å‡çº§åˆ°é«˜çº§ç‰ˆäº«å—ä¸é™é‡ä½¿ç”¨"}:{title:"ä½¿ç”¨æ¬¡æ•°å³å°†ç”¨å®Œ",description:`ä»…å‰© ${r} æ¬¡è°ƒç”¨æœºä¼š`,upgradeText:"ç«‹å³å‡çº§",upgradeDescription:"å‡çº§åäº«å—æ›´å¤šä½¿ç”¨æ¬¡æ•°"};return t.jsx(Z,{open:e,onOpenChange:s,children:t.jsxs(Q,{className:"sm:max-w-md",children:[t.jsx(ee,{children:t.jsxs(se,{className:"flex items-center gap-2 text-amber-600",children:[t.jsx(de,{className:"h-5 w-5"}),n.title]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-2",children:["ä»…å‰© ",r," æ¬¡"]}),t.jsx("p",{className:"text-gray-600",children:n.description})]}),"trial"===i&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-blue-200",children:[t.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[t.jsx(me,{className:"h-4 w-4"}),"å‡çº§ä¸“ä¸šç‰ˆç‰¹æƒ"]}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"â€¢ 30æ¬¡/æœˆAIå†…å®¹é€‚é…"}),t.jsx("li",{children:"â€¢ åˆ›æ„é­”æ–¹åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ é«˜çº§AIæ¨¡å‹"}),t.jsx("li",{children:"â€¢ ä½™é¢ç»§æ‰¿æœºåˆ¶"})]})]}),"pro"===i&&t.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200",children:[t.jsxs("h4",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[t.jsx(me,{className:"h-4 w-4"}),"å‡çº§é«˜çº§ç‰ˆç‰¹æƒ"]}),t.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[t.jsx("li",{children:"â€¢ ä¸é™é‡AIå†…å®¹é€‚é…"}),t.jsx("li",{children:"â€¢ å…¨ç½‘é›·è¾¾åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ å“ç‰Œåº“åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ æœ€æ–°AIæ¨¡å‹"})]})]})]}),t.jsxs(te,{className:"flex gap-2",children:[t.jsx(k,{variant:"outline",onClick:s,children:"ç¨åå†è¯´"}),t.jsxs(k,{onClick:a,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[n.upgradeText,t.jsx(he,{className:"h-4 w-4 ml-2"})]})]})]})})}function Bs({isOpen:e,onClose:s,onUpgrade:a,featureName:r,featureDescription:i}){return t.jsx(Z,{open:e,onOpenChange:s,children:t.jsxs(Q,{className:"sm:max-w-md",children:[t.jsx(ee,{children:t.jsxs(se,{className:"flex items-center gap-2 text-purple-600",children:[t.jsx(be,{className:"h-5 w-5"}),"é«˜çº§åŠŸèƒ½æƒé™"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl font-bold text-gray-800 mb-2",children:r}),t.jsx("p",{className:"text-gray-600",children:i})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border border-purple-200",children:[t.jsxs("h4",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[t.jsx(me,{className:"h-4 w-4"}),"å‡çº§é«˜çº§ç‰ˆè§£é”ç‰¹æƒ"]}),t.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[t.jsx("li",{children:"â€¢ ä¸é™é‡AIå†…å®¹é€‚é…"}),t.jsx("li",{children:"â€¢ åˆ›æ„é­”æ–¹åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ å…¨ç½‘é›·è¾¾åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ å“ç‰Œåº“åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ æœ€æ–°AIæ¨¡å‹"}),t.jsx("li",{children:"â€¢ ä½™é¢ç»§æ‰¿æœºåˆ¶"})]})]}),t.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-3 rounded-lg border border-amber-200",children:t.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[t.jsx(I,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"é™æ—¶ä¼˜æƒ ï¼šå¹´ä»˜çœ80-202å…ƒ"})]})})]}),t.jsxs(te,{className:"flex gap-2",children:[t.jsx(k,{variant:"outline",onClick:s,children:"ç¨åå†è¯´"}),t.jsxs(k,{onClick:a,className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700",children:["ç«‹å³å‡çº§è§£é”",t.jsx(he,{className:"h-4 w-4 ml-2"})]})]})]})})}const Ls={weibo:"https://weibo.com/newpost",xiaohongshu:"https://creator.xiaohongshu.com/publish",zhihu:"https://zhuanlan.zhihu.com/write",bilibili:"https://member.bilibili.com/platform/upload/text",douyin:"https://creator.douyin.com/creator-micro/content/upload",toutiao:"https://mp.toutiao.com/profile_v4/graphic/publish",baijiahao:"https://baijiahao.baidu.com/builder/rc/edit",kuaishou:"https://cp.kuaishou.com/article/publish",wechat:"https://mp.weixin.qq.com/",facebook:"https://www.facebook.com/",twitter:"https://twitter.com/compose/tweet",linkedin:"https://www.linkedin.com/feed/",v2ex:"https://www.v2ex.com/new",github:"https://github.com/new",sspai:"https://sspai.com/write",juejin:"https://juejin.cn/editor/drafts/new",csdn:"https://mp.csdn.net/mp_blog/creation/editor",hellogithub:"https://hellogithub.com/",ithome:"https://my.ithome.com/#/write",ngabbs:"https://bbs.nga.cn/thread.php?fid=-7",weatheralarm:"https://www.nmc.cn/",earthquake:"https://www.ceic.ac.cn/",history:"https://baike.baidu.com/item/%E5%8E%86%E5%8F%B2%E4%B8%8A%E7%9A%84%E4%BB%8A%E5%A4%A9/42704"};function Fs(e){const s=Ss[e],a=(null==s?void 0:s.name)||e;switch(e){case"zhihu":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"h-4 w-4 text-blue-500 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"weibo":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(pe,{className:"h-4 w-4 text-orange-500 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"xiaohongshu":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(ue,{className:"h-4 w-4 text-rose-500 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"wechat":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"h-4 w-4 text-green-500 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"douyin":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(xe,{className:"h-4 w-4 text-black mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"video":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(ge,{className:"h-4 w-4 text-green-600 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"twitter":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:"h-4 w-4 text-black mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});case"bilibili":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(xe,{className:"h-4 w-4 text-blue-400 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]});default:return t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"h-4 w-4 mr-1"}),t.jsx("span",{className:"text-xs",children:a})]})}}function Us(e){switch(e){case"zhihu":return 200;case"douyin":case"video":default:return 50;case"xiaohongshu":case"bilibili":return 100;case"wechat":return 300;case"weibo":return 20;case"twitter":return 10}}function Js(e){switch(e){case"zhihu":return 1e4;case"douyin":case"xiaohongshu":case"video":return 1e3;case"wechat":return 2e4;case"weibo":default:return 2e3;case"twitter":return 280;case"bilibili":return 5e3}}function Hs({icon:e,title:s,description:a,checked:r,onChange:i}){return t.jsxs(A,{className:b("relative border cursor-pointer transition-all duration-200 h-36 flex flex-col",r?"border-primary bg-primary/5 shadow-md ring-1 ring-primary/20":"bg-background hover:shadow-sm hover:border-gray-300"),onClick:()=>i(!r),children:[t.jsx(P,{className:"pb-1 pt-4 flex-shrink-0",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[t.jsx("div",{className:"flex-shrink-0",children:e}),t.jsx(z,{className:"text-sm font-semibold truncate leading-tight",children:s})]}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Cs,{checked:r,onCheckedChange:i,className:"data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"})})]})}),t.jsx(D,{className:"pt-0 pb-4 flex-grow flex items-start",children:t.jsx(_,{className:"text-xs leading-relaxed overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",maxHeight:"4.8rem"},children:a})})]})}function qs(){var e,a,r;const{toast:i}=w(),n=C(),[l,o]=s.useState(""),[c,d]=s.useState([]),[m,h]=s.useState([]),[u,x]=s.useState(!1),[p,f]=s.useState(!1),[g,j]=s.useState({}),[b,v]=s.useState({}),[I,V]=s.useState(!1),[ae,re]=s.useState(null),[ne,oe]=s.useState({}),[ce,de]=s.useState(new Set),[me,be]=s.useState({charCountPreset:"auto",globalEmoji:!1,globalMd:!1}),[Ee,Ae]=s.useState("openai"),[Pe,ze]=s.useState(Ts),[_e,De]=s.useState("trial"),$e=(Os[_e]||[]).map(e=>Es[e]).filter(Boolean),Me=Object.values(Es),{usageRemaining:Re,decrementUsage:Be}=S(),[Le,Fe]=s.useState(!1),[Ue,Je]=s.useState(0),[He,qe]=s.useState(!1),[Ke,Ge]=s.useState({name:"",description:""}),Ve=s.useMemo(()=>[{id:"xiaohongshu",name:"å°çº¢ä¹¦",description:"é€‚åˆç”Ÿæ´»æ–¹å¼ã€ç¾å¦†ã€æ—…è¡Œç­‰åˆ†äº«ï¼Œå¼ºè°ƒä¸ªäººä½“éªŒå’Œæƒ…æ„Ÿå…±é¸£",icon:t.jsx(ue,{className:"h-4 w-4 text-rose-500"})},{id:"zhihu",name:"çŸ¥ä¹",description:"é€‚åˆä¸“ä¸šçŸ¥è¯†åˆ†äº«å’Œç†æ€§è®¨è®ºï¼Œå¼ºè°ƒé€»è¾‘å’Œè®ºè¯",icon:t.jsx(ve,{className:"h-4 w-4 text-blue-500"})},{id:"douyin",name:"æŠ–éŸ³è„šæœ¬",description:"é€‚åˆçŸ­è§†é¢‘è„šæœ¬ï¼Œæ´»æ³¼æœ‰è¶£ï¼Œå¼ºè°ƒè§†å¬æ•ˆæœ",icon:t.jsx(xe,{className:"h-4 w-4 text-black"})},{id:"weibo",name:"æ–°æµªå¾®åš",description:"ç®€çŸ­æœ‰åŠ›çš„è§‚ç‚¹è¡¨è¾¾ï¼Œé€‚åˆçƒ­ç‚¹è¯é¢˜è®¨è®º",icon:t.jsx(pe,{className:"h-4 w-4 text-orange-500"})},{id:"wechat",name:"å…¬ä¼—å·",description:"æ·±åº¦å†…å®¹ï¼Œé€‚åˆæ•™ç¨‹ã€è§‚ç‚¹å’Œä¸“ä¸šåˆ†æ",icon:t.jsx(ve,{className:"h-4 w-4 text-green-500"})},{id:"bilibili",name:"Bç«™",description:"é€‚åˆè§†é¢‘è„šæœ¬ï¼Œå…¼å…·ä¸“ä¸šæ€§å’Œè¶£å‘³æ€§",icon:t.jsx(xe,{className:"h-4 w-4 text-blue-400"})},{id:"twitter",name:"Xï¼ˆæ¨ç‰¹ï¼‰",description:"ç®€çŸ­ã€ç›´æ¥çš„è¡¨è¾¾ï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œå›½é™…åŒ–è§†è§’",icon:t.jsx(fe,{className:"h-4 w-4 text-black"})},{id:"video",name:"è§†é¢‘å·",description:"è§†é¢‘å†…å®¹ä¸äº’åŠ¨å¼•å¯¼å¹¶é‡ï¼Œäº²å’ŒåŠ›å¼º",icon:t.jsx(ge,{className:"h-4 w-4 text-green-600"})},{id:"baijia",name:"ç™¾å®¶å·",description:"é•¿ç¯‡æ·±åº¦å†…å®¹ï¼ŒSEOå‹å¥½ï¼Œæƒå¨æ„Ÿå¼ºï¼Œé€‚åˆèµ„è®¯ç±»å†…å®¹",icon:t.jsx(we,{className:"h-4 w-4 text-blue-700"})},{id:"kuaishou",name:"å¿«æ‰‹",description:"æ¥åœ°æ°”è¡¨è¾¾ï¼ŒçœŸå®æœ´å®ï¼Œäº²æ°‘é£æ ¼ï¼Œé€‚åˆç”Ÿæ´»è®°å½•",icon:t.jsx(ye,{className:"h-4 w-4 text-yellow-600"})},{id:"wangyi",name:"ç½‘æ˜“å°èœœèœ‚",description:"æ³¨é‡åŸåˆ›æ€§ï¼Œæ–‡ç¬”æµç•…ï¼Œè§‚ç‚¹ç‹¬ç‰¹ï¼Œé€‚åˆæ·±åº¦è¯„è®º",icon:t.jsx(je,{className:"h-4 w-4 text-red-500"})},{id:"toutiao",name:"å¤´æ¡å·",description:"æ ‡é¢˜å…šå‹å¥½ï¼Œçƒ­ç‚¹æ•æ„Ÿï¼Œç®—æ³•æ¨èï¼Œé€‚åˆæ—¶äº‹è¯„è®º",icon:t.jsx(we,{className:"h-4 w-4 text-purple-600"})}],[]),Xe=s.useCallback(()=>{const e={};Ve.forEach(s=>{e[s.id]={charCount:Math.floor(.6*Js(s.id)),useEmoji:"xiaohongshu"===s.id||"weibo"===s.id,useMdFormat:"zhihu"===s.id||"wechat"===s.id,useAutoFormat:!0}}),j(e);const s={};Ve.forEach(e=>{s[e.id]=!1}),v(s)},[Ve]),We=()=>{try{localStorage.setItem("platformSettings",JSON.stringify(g)),localStorage.setItem("globalSettings",JSON.stringify(me)),localStorage.setItem("selectedPlatforms",JSON.stringify(c)),i({title:"è®¾ç½®å·²ä¿å­˜",description:"æ‚¨çš„å¹³å°è®¾ç½®å·²æˆåŠŸä¿å­˜"})}catch{i({title:"ä¿å­˜è®¾ç½®å¤±è´¥",description:"æ— æ³•ä¿å­˜æ‚¨çš„è®¾ç½®ï¼Œè¯·ç¨åå†è¯•",variant:"destructive"})}};s.useEffect(()=>{Object.keys(g).length>0&&localStorage.setItem("platformSettings",JSON.stringify(g))},[g]),s.useEffect(()=>{Object.keys(me).length>0&&localStorage.setItem("globalSettings",JSON.stringify(me))},[me]),s.useEffect(()=>{c.length>0&&localStorage.setItem("selectedPlatforms",JSON.stringify(c))},[c]),s.useEffect(()=>{const e=localStorage.getItem("platformSettings"),s=localStorage.getItem("globalSettings"),t=localStorage.getItem("selectedPlatforms");if(e)try{const s=JSON.parse(e);j(s)}catch{Xe()}else Xe();if(s)try{const e=JSON.parse(s);be(e)}catch{}if(t)try{const e=JSON.parse(t);d(e)}catch{}const a={};Ve.forEach(e=>{a[e.id]=!1}),v(a)},[Xe,Ve]),s.useEffect(()=>{Xe()},[Xe]);const Ye=l.length,Ze=l.trim().length>10&&c.length>0&&Re>0,Qe=(e,s,t)=>{j(a=>({...a,[e]:{...a[e],[s]:t}}))},es=(e,s)=>{be(t=>({...t,[e]:s}))},[ss,ts]=s.useState(!1),[as,rs]=s.useState(null),is=async e=>{await new Promise(e=>setTimeout(e,1e3));let s=e;return Object.entries({"å°çº¢ä¹¦":"Xiaohongshu","æŠ–éŸ³":"TikTok","å¾®åš":"Weibo","çŸ¥ä¹":"Zhihu","å…¬ä¼—å·":"WeChat Official Account","Bç«™":"Bilibili","è§†é¢‘å·":"Video Account","è¯•äº†":"tried","å‘³é“":"taste","æ²»æ„ˆ":"healing","å°æ—¶å€™":"childhood","ç‰›å¥¶ç³–":"milk candy","ç”œè€Œä¸è…»":"sweet but not cloying","è´¨åœ°":"texture","å†°æ·‡æ·‹":"ice cream","æ…•æ–¯":"mousse","æ°´æ¶¦":"moisturizing","å¸æ”¶":"absorption","ç²˜è…»":"sticky","ç§‹å†¬":"autumn and winter","å¹²çš®":"dry skin","å§å¦¹ä»¬":"sisters","é—­çœ¼å†²":"go for it blindly","èº«ä½“ä¹³":"body lotion","æŠ¤è‚¤":"skincare","æ•‘æ˜Ÿ":"savior","æ¨è":"recommend","çœŸçš„":"really","è¶…çº§":"super","å¥½ç”¨":"good to use","å–œæ¬¢":"like","åˆ†äº«":"share","ä½“éªŒ":"experience","æ„Ÿè§‰":"feel","æ•ˆæœ":"effect","äº§å“":"product","å“ç‰Œ":"brand","è´­ä¹°":"buy","ä»·æ ¼":"price","ä¼˜æƒ ":"discount","æ´»åŠ¨":"activity","é™æ—¶":"limited time","æŠ¢è´­":"rush to buy","èµ¶ç´§":"hurry up","ä¸è¦":"don't","é”™è¿‡":"miss","æœºä¼š":"opportunity","æœ€å":"last","ä¸€æ¬¡":"once","æ—¶é—´":"time","ç»“æŸ":"end","å¼€å§‹":"start","ç«‹åˆ»":"immediately","ä»Šå¤©":"today","æ˜å¤©":"tomorrow","æ˜¨å¤©":"yesterday","è¿™å‘¨":"this week","ä¸‹å‘¨":"next week","æœ¬æœˆ":"this month","ä¸‹æœˆ":"next month","ä»Šå¹´":"this year","æ˜å¹´":"next year"}).forEach(([e,t])=>{s=s.replace(new RegExp(e,"g"),t)}),s=s.replace(/ã€‚/g,". ").replace(/ï¼Œ/g,", ").replace(/ï¼/g,"! ").replace(/ï¼Ÿ/g,"? ").replace(/ï¼š/g,": ").replace(/ï¼›/g,"; "),s},[ds,ms]=s.useState(""),[hs,us]=s.useState(!1),[xs,ps]=s.useState([]),[fs,gs]=s.useState([]),[js,bs]=s.useState(null),[vs,Ns]=s.useState(!1),[ws,ys]=s.useState([]),ks=s.useCallback(()=>{const e=JSON.parse(localStorage.getItem("shareHistory")||"[]");ys(e)},[]);s.useEffect(()=>{vs&&ks()},[vs,ks]);const[Is,Ps]=s.useState(!1),[zs,_s]=s.useState("jump"),[qs,Ks]=s.useState(new Set);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(E,{title:"AIå†…å®¹é€‚é…å™¨",description:"æ™ºèƒ½åˆ†æå†…å®¹ï¼Œä¸€é”®é€‚é…å¤šå¹³å°æ ¼å¼",actions:t.jsx(t.Fragment,{children:t.jsxs(k,{variant:"outline",onClick:()=>window.location.href="/history",children:[t.jsx(T,{className:"h-4 w-4 mr-1"}),"å†å²è®°å½•"]})})}),t.jsxs("div",{className:"container mx-auto py-6 px-4",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-medium mb-2",children:"å†…å®¹åˆ›ä½œ"}),t.jsx(ns,{children:t.jsxs(ls,{children:[t.jsx(os,{asChild:!0,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"å‰©ä½™æ¬¡æ•°:"}),t.jsx(W,{variant:Re<=5?"destructive":"default",children:Re})]})}),t.jsxs(cs,{side:"bottom",children:[t.jsx("p",{children:"æ¯æ¬¡å¤šå¹³å°å†…å®¹ç”Ÿæˆæ¶ˆè€—1æ¬¡ä½¿ç”¨é¢åº¦"}),t.jsx("p",{children:"æ¯æœˆè‡ªåŠ¨è·å¾—20æ¬¡å…è´¹ä½¿ç”¨æœºä¼š"}),t.jsx("p",{children:"é€šè¿‡é‚€è¯·å¥½å‹å¯è·å¾—é¢å¤–ä½¿ç”¨æ¬¡æ•°"})]})]})})]}),t.jsxs(A,{className:"mb-8",children:[t.jsxs(P,{children:[t.jsx(z,{className:"text-lg",children:"è¾“å…¥åŸå§‹å†…å®¹"}),t.jsx(_,{children:"è¯·è¾“å…¥æ‚¨æƒ³è¦è¿›è¡Œå¤šå¹³å°é€‚é…çš„åŸå§‹å†…å®¹"})]}),t.jsxs(D,{children:[t.jsx(O,{placeholder:"åœ¨æ­¤è¾“å…¥æ‚¨çš„åŸå§‹å†…å®¹ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨é€‚é…åˆ°ä¸åŒå¹³å°...",className:"min-h-[200px]",value:l,onChange:e=>o(e.target.value)}),t.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[t.jsx(Cs,{id:"use-brand-library",checked:p,onCheckedChange:e=>{e&&("trial"===_e&&(Ge({name:"å“ç‰Œåº“åŠŸèƒ½",description:"ä½¿ç”¨å“ç‰Œåº“èµ„æ–™è¿›è¡Œåˆ›ä½œï¼ŒAIä¼šè‡ªåŠ¨éµå¾ªæ‚¨çš„å“ç‰Œè¯­è¨€è§„èŒƒ"}),qe(!0),1))||f(!!e)}}),t.jsxs("div",{children:[t.jsx(X,{htmlFor:"use-brand-library",className:"text-sm cursor-pointer",children:"ä½¿ç”¨å“ç‰Œåº“èµ„æ–™è¿›è¡Œåˆ›ä½œ"}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ä¸Šä¼ æ‚¨çš„å“ç‰Œèµ„æ–™åº“ï¼ŒAIåœ¨åˆ›ä½œæ—¶ä¼šè‡ªåŠ¨éµå¾ªæ‚¨çš„è¯­è¨€è§„èŒƒï¼Œèå…¥å“ç‰Œä»·å€¼ï¼Œè§„é¿å…¬å…³é£é™©ã€‚åˆ†å‘å†å¤šå¹³å°ï¼Œå“ç‰Œå½¢è±¡å§‹ç»ˆå¦‚ä¸€ã€‚",t.jsx("span",{className:"text-xs text-amber-500 ml-1",children:"ï¼ˆéœ€å¼€é€šé«˜çº§åŠŸèƒ½ï¼‰"})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-center",children:[t.jsxs(k,{variant:"outline",size:"sm",onClick:()=>V(e=>!e),className:"text-xs rounded-lg shadow-sm border border-blue-200",children:["é€‚é…è®¾ç½®",I?t.jsx(L,{className:"ml-1 h-3 w-3"}):t.jsx(F,{className:"ml-1 h-3 w-3"})]}),t.jsxs(W,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[Ye," å­—ç¬¦"]})]})]}),I&&t.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-sm font-semibold text-blue-900 flex items-center gap-2",children:[t.jsx(y,{className:"h-4 w-4"}),"å†…å®¹é€‚é…è®¾ç½®"]}),t.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"è‡ªå®šä¹‰å†…å®¹ç”Ÿæˆå‚æ•°ï¼Œè®©AIæ›´å¥½åœ°ç†è§£æ‚¨çš„éœ€æ±‚"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(X,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[t.jsx(Ne,{className:"h-3 w-3"}),"å­—ç¬¦æ•°é™åˆ¶"]}),t.jsxs(U,{value:me.charCountPreset,onValueChange:e=>es("charCountPreset",e),children:[t.jsx(J,{className:"h-9",children:t.jsx(H,{placeholder:"é€‰æ‹©å­—ç¬¦æ•°é™åˆ¶"})}),t.jsxs(q,{children:[t.jsx(K,{value:"auto",children:"è‡ªåŠ¨é€‚é…"}),t.jsx(K,{value:"mini",children:"ç²¾ç®€ç‰ˆ (50-200å­—)"}),t.jsx(K,{value:"standard",children:"æ ‡å‡†ç‰ˆ (200-800å­—)"}),t.jsx(K,{value:"detailed",children:"è¯¦ç»†ç‰ˆ (800å­—+)"})]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"æ ¹æ®å¹³å°ç‰¹ç‚¹è‡ªåŠ¨è°ƒæ•´å†…å®¹é•¿åº¦"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(X,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[t.jsx(T,{className:"h-3 w-3"}),"å†…å®¹æ ¼å¼"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Cs,{id:"global-emoji",checked:me.globalEmoji,onCheckedChange:e=>es("globalEmoji",!!e)}),t.jsxs(X,{htmlFor:"global-emoji",className:"text-sm cursor-pointer flex items-center gap-2",children:[t.jsx(ke,{className:"h-3 w-3"}),"å¯ç”¨è¡¨æƒ…ç¬¦å·"]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Cs,{id:"global-md",checked:me.globalMd,onCheckedChange:e=>es("globalMd",!!e)}),t.jsxs(X,{htmlFor:"global-md",className:"text-sm cursor-pointer flex items-center gap-2",children:[t.jsx(T,{className:"h-3 w-3"}),"å¯ç”¨Markdownæ ¼å¼"]})]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"å¢å¼ºå†…å®¹çš„å¯è¯»æ€§å’Œè§†è§‰æ•ˆæœ"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(X,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[t.jsx(ye,{className:"h-3 w-3"}),"æ™ºèƒ½ä¼˜åŒ–"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 bg-blue-100 px-3 py-2 rounded",children:[t.jsx(N,{className:"h-3 w-3"}),t.jsx("span",{children:"è‡ªåŠ¨æ’ç‰ˆä¼˜åŒ–"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 bg-blue-100 px-3 py-2 rounded",children:[t.jsx(N,{className:"h-3 w-3"}),t.jsx("span",{children:"å¹³å°ç‰¹è‰²é€‚é…"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 bg-blue-100 px-3 py-2 rounded",children:[t.jsx(N,{className:"h-3 w-3"}),t.jsx("span",{children:"å…³é”®è¯ä¼˜åŒ–"})]})]})]}),t.jsx("div",{className:"pt-2",children:t.jsxs(k,{variant:"outline",size:"sm",onClick:We,className:"w-full bg-blue-600 text-white hover:bg-blue-700 border-blue-600",children:[t.jsx(Ie,{className:"h-4 w-4 mr-2"}),"ä¿å­˜è®¾ç½®"]})})]})]})]})]}),t.jsxs(A,{className:"mb-8",children:[t.jsx(P,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(z,{className:"text-lg",children:"AI æ¨¡å‹é€‰æ‹©"}),t.jsx(_,{children:"é€‰æ‹©æ‚¨å–œæ¬¢çš„AIæ¨¡å‹ç”Ÿæˆå†…å®¹ï¼Œé»˜è®¤ä¼˜å…ˆæ¨èGPT-4o"})]}),"trial"===_e&&t.jsx(k,{variant:"outline",size:"sm",onClick:()=>n("/payment"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"å»è§£é”"})]})}),t.jsx(D,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Me.map(e=>{let s=!$e.some(s=>s.id===e.id),a="",r=!1;return"gpt-4o"===e.id&&"trial"===_e&&(a="ä¸“ä¸šç‰ˆ/é«˜çº§ç‰ˆä¸“å±",r=!0),t.jsx("div",{className:"p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md "+(Pe===e.id?"border-blue-500 bg-blue-50 shadow-sm":s?"border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed":"border-gray-200 hover:border-blue-300"),onClick:()=>((e,s)=>{if(s)return;ze(e),Ts=e;const t=function(e){var s;return(null==(s=Es[e])?void 0:s.provider)||"Unknown"}(e);"OpenAI"===t&&Ae("openai"),"DeepSeek"===t&&Ae("deepseek")})(e.id,s),children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5 "+(Pe===e.id?"border-blue-500 bg-blue-500":"border-gray-300"),children:Pe===e.id&&t.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-blue-600 text-base",children:e.name}),a&&t.jsx(W,{className:"bg-gray-200 text-gray-600 text-xs",children:a})]}),t.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description}),r&&t.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:t.jsxs("p",{className:"text-xs text-yellow-700 flex items-center",children:[t.jsx("span",{className:"mr-1",children:"ğŸ”’"}),"å»è§£é”é«˜çº§åŠŸèƒ½"]})})]})]})},e.id)})}),Pe&&t.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[t.jsx("p",{className:"font-medium",children:null==(e=As(Pe))?void 0:e.name}),t.jsx("p",{children:null==(a=As(Pe))?void 0:a.description})]}),!1]})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-lg font-medium mb-4",children:"é€‰æ‹©ç›®æ ‡å¹³å°"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 auto-rows-fr",children:Ve.map(e=>t.jsx(Hs,{icon:e.icon,title:e.name,description:e.description,checked:c.includes(e.id),onChange:s=>{return t=e.id,void d(s?e=>[...e,t]:e=>e.filter(e=>e!==t));var t}},e.id))}),c.length>0&&t.jsxs(A,{className:"mt-6",children:[t.jsx(P,{className:"pb-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-4 w-4"}),t.jsx(z,{className:"text-base",children:"å¹³å°è®¾ç½®"}),t.jsxs(W,{variant:"secondary",className:"text-xs",children:[c.length,"ä¸ªå¹³å°"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(k,{variant:"outline",size:"sm",onClick:We,children:[t.jsx(Ie,{className:"h-3 w-3 mr-1"}),"ä¿å­˜è®¾ç½®"]}),t.jsxs(k,{variant:"ghost",size:"sm",onClick:()=>V(!I),children:[I?"æ”¶èµ·":"å±•å¼€",I?t.jsx(L,{className:"ml-1 h-4 w-4"}):t.jsx(F,{className:"ml-1 h-4 w-4"})]})]})]})}),I&&t.jsx(D,{className:"pt-0",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border-b pb-4",children:[t.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"å…¨å±€è®¾ç½®"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Cs,{id:"global-emoji",checked:me.globalEmoji,onCheckedChange:e=>es("globalEmoji",!!e)}),t.jsxs(X,{htmlFor:"global-emoji",className:"text-sm cursor-pointer flex items-center",children:[t.jsx(ke,{className:"h-3 w-3 mr-1"}),"å…¨å±€æ·»åŠ emojiè¡¨æƒ…"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Cs,{id:"global-md",checked:me.globalMd,onCheckedChange:e=>es("globalMd",!!e)}),t.jsxs(X,{htmlFor:"global-md",className:"text-sm cursor-pointer flex items-center",children:[t.jsx(T,{className:"h-3 w-3 mr-1"}),"å…¨å±€MDæ ¼å¼"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Cs,{id:"global-auto",checked:!0,disabled:!0}),t.jsxs(X,{htmlFor:"global-auto",className:"text-sm cursor-pointer flex items-center text-gray-500",children:[t.jsx(Ne,{className:"h-3 w-3 mr-1"}),"å…¨å±€è‡ªåŠ¨æ’ç‰ˆ"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"å¹³å°ç‰¹å®šè®¾ç½®"}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(e=>{const s=Ve.find(s=>s.id===e),a=g[e]||{},r=["zhihu","wechat","weibo","xiaohongshu"].includes(e);return s?t.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50/50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.icon,t.jsx("span",{className:"text-sm font-medium",children:s.name}),r&&t.jsx(W,{variant:"outline",className:"text-xs",children:"ä¼˜åŒ–"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs(X,{className:"text-xs",children:["å­—ç¬¦æ•°: ",a.charCount||Js(e)]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[Us(e),"-",Js(e)]})]}),t.jsx(G,{value:[a.charCount||Js(e)],min:Us(e),max:Js(e),step:10,onValueChange:s=>Qe(e,"charCount",s[0]),className:"w-full"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Cs,{id:`${e}-emoji`,checked:a.useEmoji,onCheckedChange:s=>Qe(e,"useEmoji",!!s)}),t.jsxs(X,{htmlFor:`${e}-emoji`,className:"text-xs cursor-pointer flex items-center",children:[t.jsx(ke,{className:"h-3 w-3 mr-1"}),"emoji"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Cs,{id:`${e}-md`,checked:a.useMdFormat,onCheckedChange:s=>Qe(e,"useMdFormat",!!s)}),t.jsxs(X,{htmlFor:`${e}-md`,className:"text-xs cursor-pointer flex items-center",children:[t.jsx(T,{className:"h-3 w-3 mr-1"}),"MDæ ¼å¼"]})]})]}),r&&t.jsxs("div",{className:"bg-blue-50 p-2 rounded text-xs text-blue-600",children:["zhihu"===e&&"çŸ¥ä¹: MDæ ¼å¼ä¼˜åŒ–ä¸“ä¸šæ’ç‰ˆï¼Œè‡ªåŠ¨æ’ç‰ˆæ·»åŠ åˆ†å‰²çº¿","wechat"===e&&"å…¬ä¼—å·: MDæ ¼å¼é€‚åˆæ·±åº¦é˜…è¯»ï¼Œä¸“ä¸šæ’ç‰ˆ","weibo"===e&&"å¾®åš: emojiæå‡äº’åŠ¨æ€§ï¼Œå­—æ•°é™åˆ¶2000å­—","xiaohongshu"===e&&"å°çº¢ä¹¦: emojiå¢åŠ äº²å’ŒåŠ›ï¼Œè‡ªåŠ¨æ’ç‰ˆä¼˜åŒ–è§†è§‰æ•ˆæœ"]})]})]},e):null})})]})]})})]})]}),t.jsx("div",{className:"flex justify-center mb-12",children:t.jsx(k,{size:"lg",disabled:!Ze||u,onClick:async()=>{if(!Ze)return;if(Re<=3&&Re>0&&(Je(Re),Fe(!0),1))return;if(Re<=0)return void i({title:"ä½¿ç”¨æ¬¡æ•°å·²ç”¨å®Œ",description:"è¯·é€šè¿‡é‚€è¯·å¥½å‹è·å–æ›´å¤šä½¿ç”¨æœºä¼š",variant:"destructive"});x(!0),(()=>{const e={...g};me.globalEmoji&&Object.keys(e).forEach(s=>{e[s].useEmoji=!0}),me.globalMd&&Object.keys(e).forEach(s=>{e[s].useMdFormat=!0}),"auto"!==me.charCountPreset&&Object.keys(e).forEach(s=>{switch(me.charCountPreset){case"mini":e[s].charCount=Math.min(200,Js(s));break;case"standard":e[s].charCount=Math.min(800,Js(s));break;case"detailed":e[s].charCount=Js(s)}}),j(e)})();const e=c.map(e=>({platformId:e,content:"",steps:[{status:"loading",message:"åˆ†æåŸå§‹å†…å®¹..."},{status:"waiting",message:"æå–æ ¸å¿ƒä¿¡æ¯..."},{status:"waiting",message:"è¿›è¡Œå¹³å°é€‚é…..."},{status:"waiting",message:"ä¼˜åŒ–è¾“å‡ºç»“æœ..."}]}));h(e);try{const e={};c.forEach(s=>{const t=g[s];e[`${s}-charCount`]=(null==t?void 0:t.charCount)||.6*Js(s),e[`${s}-emoji`]=(null==t?void 0:t.useEmoji)||!1,e[`${s}-mdFormat`]=(null==t?void 0:t.useMdFormat)||!1,e[`${s}-autoFormat`]=(null==t?void 0:t.useAutoFormat)||!1,e[`${s}-brandLibrary`]=p});const s=await async function(e,s,t){try{const a=await Y.adaptContent(e,s,t);return{success:a.success,data:a.data,error:a.error}}catch(a){return{success:!1,error:a instanceof Error?a.message:"å†…å®¹é€‚é…å¤±è´¥"}}}(l,c,e);for(let t=0;t<c.length;t++){const e=c[t],a=(s,t)=>{h(a=>a.map(a=>a.platformId===e?{...a,steps:a.steps.map((e,a)=>a===s?{...e,status:t}:e)}:a))};a(0,"completed"),await new Promise(e=>setTimeout(e,300)),a(1,"loading"),await new Promise(e=>setTimeout(e,300)),a(1,"completed"),a(2,"loading"),await new Promise(e=>setTimeout(e,300)),a(2,"completed"),a(3,"loading"),await new Promise(e=>setTimeout(e,300));for(const t of c){const e=s[t];e&&e.content?(a(3,"completed"),h(s=>s.map(s=>s.platformId===t?{...s,content:e.content,source:e.source,error:e.error}:s))):(a(3,"error"),h(e=>e.map(e=>e.platformId===t?{...e,error:"ç”Ÿæˆå¤±è´¥ï¼šæ— æ³•è·å–é€‚é…å†…å®¹"}:e)))}}Be(),(e=>{const s="history_anonymous",t=localStorage.getItem(s);let a=[];if(t)try{a=JSON.parse(t)}catch{}const r=(new Date).toISOString();e.forEach(e=>{e.content&&a.push({platformId:e.platformId,content:e.content,timestamp:r})}),localStorage.setItem(s,JSON.stringify(a))})(m),i({title:"å†…å®¹å·²ç”Ÿæˆ",description:`å·²æˆåŠŸä¸º${c.length}ä¸ªå¹³å°ç”Ÿæˆå†…å®¹`})}catch(s){h(e=>e.map(e=>({...e,steps:e.steps.map(e=>"loading"===e.status?{...e,status:"error"}:e),error:s instanceof Error?s.message:"ç”Ÿæˆå¤±è´¥"}))),i({title:"ç”Ÿæˆå¤±è´¥",description:s instanceof Error?s.message:"å†…å®¹ç”Ÿæˆè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",variant:"destructive"})}finally{x(!1)}},className:"w-full max-w-md",children:u?t.jsxs(t.Fragment,{children:[t.jsx(ie,{className:"mr-2 h-4 w-4 animate-spin"}),"æ­£åœ¨ç”Ÿæˆä¸­..."]}):t.jsxs(t.Fragment,{children:["å¼€å§‹ç”Ÿæˆ",t.jsx(he,{className:"ml-2 h-4 w-4"})]})})}),m.length>0&&t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold",children:"å¹³å°é€‚é…ç»“æœ"}),t.jsxs(k,{size:"lg",variant:"default",onClick:()=>{const e=m.filter(e=>e.content).map(e=>e.platformId);ps(e),us(!0)},disabled:0===m.filter(e=>e.content).length,children:["api"===zs?t.jsx(ye,{className:"h-5 w-5 mr-2"}):t.jsx(le,{className:"h-5 w-5 mr-2"}),"api"===zs?"æ‰¹é‡APIç›´å‘":"æ‰¹é‡ä¸€é”®è½¬å‘"]})]}),t.jsxs($,{defaultValue:null==(r=m[0])?void 0:r.platformId,className:"w-full",children:[t.jsx(M,{className:"mb-6 grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 h-12 overflow-x-auto",children:m.map(e=>t.jsx(R,{value:e.platformId,className:"text-xs sm:text-sm font-medium min-w-0",children:t.jsx("div",{className:"flex items-center",children:Fs(e.platformId)})},e.platformId))}),m.map(e=>{var s,a;return t.jsx(B,{value:e.platformId,children:t.jsxs(A,{className:"p-8 shadow-lg border-2",children:[t.jsx(P,{className:"pb-4",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs(z,{className:"text-2xl flex items-center",children:[Fs(e.platformId),t.jsx("span",{className:"ml-3",children:(null==(s=Ss[e.platformId])?void 0:s.name)||e.platformId})]})})}),t.jsxs(D,{className:"space-y-6",children:[t.jsx("div",{className:"space-y-3",children:e.steps.map((e,s)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+("completed"===e.status?"bg-green-500 text-white":"loading"===e.status?"bg-blue-500 text-white animate-spin":"error"===e.status?"bg-red-500 text-white":"bg-gray-200 text-gray-600"),children:"completed"===e.status?"âœ“":"loading"===e.status?"âŸ³":"error"===e.status?"âœ—":s+1}),t.jsx("span",{className:"text-sm "+("completed"===e.status?"text-green-600":"loading"===e.status?"text-blue-600":"error"===e.status?"text-red-600":"text-gray-500"),children:e.message})]},s))}),e.error&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs",children:"âœ—"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"ç”Ÿæˆå¤±è´¥"}),t.jsx("div",{className:"mt-1 text-sm text-red-700",children:e.error})]})]})}),e.content&&!e.error&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs",children:"âœ“"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"AIç”Ÿæˆå†…å®¹"}),t.jsx("div",{className:"mt-1 text-sm text-green-700",children:"å†…å®¹å·²æˆåŠŸç”Ÿæˆï¼Œæ‚¨å¯ä»¥ç¼–è¾‘ã€å¤åˆ¶æˆ–æ”¶è—"})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"ç”Ÿæˆç»“æœ"}),t.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto rounded-full"})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 items-start",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center xl:justify-start gap-2 mb-3",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ç”Ÿæˆå†…å®¹"}),t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.content?ae===e.platformId?t.jsxs("div",{className:"space-y-3",children:[t.jsx(O,{value:e.content,onChange:s=>{h(t=>t.map(t=>t.platformId===e.platformId?{...t,content:s.target.value}:t))},className:"min-h-[300px] text-base resize-none"}),t.jsxs("div",{className:"flex gap-3 justify-center lg:justify-start",children:[t.jsx(k,{size:"sm",onClick:()=>{return s=e.platformId,t=e.content,h(e=>e.map(e=>e.platformId===s?{...e,content:t}:e)),re(null),void i({title:"ä¿å­˜æˆåŠŸ",description:"å†…å®¹å·²æ›´æ–°"});var s,t},className:"bg-green-600 hover:bg-green-700",children:"ä¿å­˜"}),t.jsx(k,{size:"sm",variant:"outline",onClick:()=>re(null),children:"å–æ¶ˆ"})]})]}):t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"whitespace-pre-wrap rounded-lg border-2 p-6 overflow-auto max-h-[600px] text-base leading-relaxed shadow-sm "+("xiaohongshu"===e.platformId?"bg-rose-50 border-rose-200":"douyin"===e.platformId?"bg-black text-white border-gray-800":"weibo"===e.platformId?"bg-orange-50 border-orange-200":"zhihu"===e.platformId?"bg-blue-50 border-blue-200":"wechat"===e.platformId?"bg-green-50 border-green-200":"bilibili"===e.platformId?"bg-pink-50 border-pink-200":"video"===e.platformId?"bg-emerald-50 border-emerald-200":"twitter"===e.platformId?"bg-sky-50 border-sky-200":"bg-gray-50 border-gray-200"),children:e.content}),t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-gray-700 shadow-sm",children:(null==(a=Ss[e.platformId])?void 0:a.name)||e.platformId})})]}):e.error?t.jsx("div",{className:"rounded-lg border-2 border-dashed border-red-200 p-12 flex items-center justify-center bg-red-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-red-600 text-lg font-medium",children:"ç”Ÿæˆå¤±è´¥"}),t.jsx("p",{className:"text-red-500 text-sm mt-2",children:e.error})]})}):t.jsx("div",{className:"rounded-lg border-2 border-dashed border-gray-200 p-12 flex items-center justify-center bg-gray-50",children:t.jsx("p",{className:"text-muted-foreground text-lg",children:"ç”Ÿæˆçš„å†…å®¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."})})]}),ne[e.platformId]&&t.jsx("div",{className:"hidden lg:flex items-center justify-center absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:t.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-t-2 border-white"})})}),ne[e.platformId]&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 mb-3",children:[t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ç¿»è¯‘å†…å®¹"}),t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"whitespace-pre-wrap rounded-lg border-2 border-blue-200 p-6 bg-blue-50 overflow-auto max-h-[600px] text-base leading-relaxed shadow-sm",children:ne[e.platformId]}),t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-blue-700 shadow-sm",children:"ç¿»è¯‘ç‰ˆæœ¬"})})]})]})]})]}),e.content&&t.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[t.jsxs(k,{size:"lg",variant:"outline",onClick:()=>(async e=>{if(!u){h(s=>s.map(s=>s.platformId===e?{...s,steps:[{status:"loading",message:"é‡æ–°åˆ†æå†…å®¹..."},{status:"waiting",message:"æå–æ ¸å¿ƒä¿¡æ¯..."},{status:"waiting",message:"è¿›è¡Œå¹³å°é€‚é…..."},{status:"waiting",message:"ä¼˜åŒ–è¾“å‡ºç»“æœ..."}]}:s));try{const s={},t=g[e];s[`${e}-charCount`]=(null==t?void 0:t.charCount)||.6*Js(e),s[`${e}-emoji`]=(null==t?void 0:t.useEmoji)||!1,s[`${e}-mdFormat`]=(null==t?void 0:t.useMdFormat)||!1,s[`${e}-autoFormat`]=(null==t?void 0:t.useAutoFormat)||!1,s[`${e}-brandLibrary`]=p;const a=await async function(e,s,t){try{const a=await Y.adaptContent(s,[e],t);return{success:a.success,data:a.data,error:a.error}}catch(a){return{success:!1,error:a instanceof Error?a.message:"å†…å®¹é‡æ–°ç”Ÿæˆå¤±è´¥"}}}(e,l,s),r=(s,t)=>{h(a=>a.map(a=>a.platformId===e?{...a,steps:a.steps.map((e,a)=>a===s?{...e,status:t}:e)}:a))};r(0,"completed"),await new Promise(e=>setTimeout(e,300)),r(1,"loading"),await new Promise(e=>setTimeout(e,300)),r(1,"completed"),r(2,"loading"),await new Promise(e=>setTimeout(e,300)),r(2,"completed"),r(3,"loading"),await new Promise(e=>setTimeout(e,300));const n=a[e];r(3,"completed"),h(s=>s.map(s=>s.platformId===e?{...s,content:n.content,source:n.source,error:n.error}:s)),i({title:"é‡æ–°ç”ŸæˆæˆåŠŸ",description:`å·²ä¸º${e}é‡æ–°ç”Ÿæˆå†…å®¹`})}catch(s){h(t=>t.map(t=>t.platformId===e?{...t,steps:t.steps.map(e=>"loading"===e.status?{...e,status:"error"}:e),error:s instanceof Error?s.message:"é‡æ–°ç”Ÿæˆå¤±è´¥"}:t)),i({title:"é‡æ–°ç”Ÿæˆå¤±è´¥",description:s instanceof Error?s.message:`é€‚é…${e}å†…å®¹æ—¶å‡ºé”™`,variant:"destructive"})}}})(e.platformId),disabled:u,children:[t.jsx(ie,{className:"h-5 w-5 mr-2"}),"é‡æ–°ç”Ÿæˆ"]}),t.jsxs(k,{size:"lg",variant:"outline",onClick:()=>{return s=e.platformId,void re(ae===s?null:s);var s},children:[t.jsx(Ce,{className:"h-5 w-5 mr-2"}),ae===e.platformId?"å–æ¶ˆç¼–è¾‘":"ç¼–è¾‘"]}),t.jsxs(k,{size:"lg",variant:"outline",onClick:()=>(e=>{const s=m.find(s=>s.platformId===e);if(!s||!s.content)return void i({title:"æ— æ³•æ”¶è—",description:"æ²¡æœ‰å¯æ”¶è—çš„å†…å®¹",variant:"destructive"});const t=JSON.parse(localStorage.getItem("favorites")||"[]"),a={id:Date.now().toString(),platformId:e,content:s.content,platformName:e,timestamp:(new Date).toISOString()};t.push(a),localStorage.setItem("favorites",JSON.stringify(t)),i({title:"æ”¶è—æˆåŠŸ",description:"å†…å®¹å·²æ·»åŠ åˆ°æ”¶è—ï¼Œå¯åœ¨æˆ‘çš„é¡µé¢æŸ¥çœ‹"})})(e.platformId),children:[t.jsx(Se,{className:"h-5 w-5 mr-2"}),"æ”¶è—"]}),t.jsxs(k,{size:"lg",variant:"outline",onClick:()=>{return s=e.content,navigator.clipboard.writeText(s),void i({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",description:"å†…å®¹å·²æˆåŠŸå¤åˆ¶ï¼Œå¯ç›´æ¥ç²˜è´´ä½¿ç”¨"});var s},children:[t.jsx(Te,{className:"h-5 w-5 mr-2"}),"ä¸€é”®å¤åˆ¶"]}),t.jsxs(k,{size:"lg",variant:"outline",onClick:()=>(async(e,s)=>{if(ce.has(e))i({title:"è¯·å‹¿é¢‘ç¹ç‚¹å‡»",description:"ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™...",variant:"destructive"});else{de(s=>new Set(s).add(e));try{const t=await(async e=>{try{const s=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,targetLang:"en",sourceLang:"zh"})});if(!s.ok)throw new Error("Translation API failed");return(await s.json()).translatedText||e}catch{return is(e)}})(s);oe(s=>({...s,[e]:t})),i({title:"ç¿»è¯‘å®Œæˆ",description:"å†…å®¹å·²ç¿»è¯‘ä¸ºè‹±æ–‡"})}catch{i({title:"ç¿»è¯‘å¤±è´¥",description:"ç¿»è¯‘è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",variant:"destructive"})}finally{setTimeout(()=>{de(s=>{const t=new Set(s);return t.delete(e),t})},3e3)}}})(e.platformId,e.content),disabled:ce.has(e.platformId),children:[t.jsx(Oe,{className:"h-5 w-5 mr-2"}),"ä¸€é”®ç¿»è¯‘"]}),t.jsxs(k,{size:"lg",variant:"default",onClick:()=>(e=>{const s=m.find(s=>s.platformId===e);s&&s.content?(rs({platformId:e,content:s.content}),ts(!0)):i({title:"æ— æ³•å‘å¸ƒ",description:"æ²¡æœ‰å¯å‘å¸ƒçš„å†…å®¹",variant:"destructive"})})(e.platformId),disabled:qs.has(e.platformId),children:[qs.has(e.platformId)?t.jsx(ie,{className:"h-5 w-5 mr-2 animate-spin"}):"api"===zs?t.jsx(ye,{className:"h-5 w-5 mr-2"}):t.jsx(le,{className:"h-5 w-5 mr-2"}),qs.has(e.platformId)?"å‘å¸ƒä¸­...":"api"===zs?"APIç›´å‘":"ç«‹åˆ»å‘å¸ƒ"]})]})]})]})},e.platformId)})]})]})]}),t.jsx(Z,{open:ss,onOpenChange:ts,children:t.jsxs(Q,{children:[t.jsx(ee,{children:t.jsx(se,{children:"ä¸€é”®è½¬å‘ç¡®è®¤"})}),t.jsxs("div",{className:"py-2 text-gray-700",children:[t.jsx("p",{children:"api"===zs?"æ˜¯å¦é€šè¿‡APIç›´æ¥å‘å¸ƒå†…å®¹ï¼Ÿ":"å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ˜¯å¦è·³è½¬åˆ°å¹³å°å‘å¸ƒé¡µï¼Ÿ"}),t.jsx("div",{className:"bg-gray-100 rounded p-2 mt-2 text-xs break-all max-h-32 overflow-auto",children:null==as?void 0:as.content})]}),t.jsxs(te,{children:[t.jsx(k,{variant:"outline",onClick:()=>ts(!1),children:"å–æ¶ˆ"}),t.jsx(k,{variant:"default",onClick:()=>{if(!as)return;const{platformId:e,content:s}=as;if("api"===zs)(async(e,s)=>{if(!$s(e))return i({title:"æœªæˆæƒ",description:"è¯·å…ˆé…ç½®å¹³å°APIæˆæƒä¿¡æ¯",variant:"destructive"}),void Ps(!0);Ks(s=>new Set(s).add(e));try{const t={text:s,title:`AIç”Ÿæˆå†…å®¹ - ${(new Date).toLocaleString()}`,hashtags:[]},a=await Ds(e,t);if(a.success){const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t)),i({title:"å‘å¸ƒæˆåŠŸ",description:`å†…å®¹å·²æˆåŠŸå‘å¸ƒåˆ°${e}`}),a.publishUrl&&window.open(a.publishUrl,"_blank","noopener,noreferrer")}else i({title:"å‘å¸ƒå¤±è´¥",description:a.error||"å‘å¸ƒè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯",variant:"destructive"})}catch(t){i({title:"å‘å¸ƒå¤±è´¥",description:t instanceof Error?t.message:"ç½‘ç»œé”™è¯¯",variant:"destructive"})}finally{Ks(s=>{const t=new Set(s);return t.delete(e),t})}})(e,s);else{navigator.clipboard.writeText(s);const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t));const a=Ls[e];a?(window.open(a,"_blank","noopener,noreferrer"),i({title:"å†…å®¹å·²å¤åˆ¶ï¼Œæ­£åœ¨è·³è½¬",description:`å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ­£åœ¨æ‰“å¼€${e}å®˜ç½‘`})):i({title:"å†…å®¹å·²å¤åˆ¶",description:"å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä½†è¯¥å¹³å°çš„å‘å¸ƒé“¾æ¥æš‚æœªé…ç½®"})}ts(!1),rs(null)},children:"api"===zs?"ç¡®è®¤å‘å¸ƒ":"è·³è½¬å¹¶å‘å¸ƒ"})]})]})}),t.jsx(Z,{open:hs,onOpenChange:us,children:t.jsxs(Q,{children:[t.jsx(ee,{children:t.jsx(se,{children:"æ‰¹é‡ä¸€é”®è½¬å‘"})}),t.jsxs("div",{className:"py-2 text-gray-700",children:[t.jsx("p",{children:"è¯·é€‰æ‹©è¦æ‰¹é‡è½¬å‘çš„å¹³å°ï¼š"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.filter(e=>e.content).map(e=>t.jsx(k,{variant:xs.includes(e.platformId)?"default":"outline",onClick:()=>ps(s=>s.includes(e.platformId)?s.filter(s=>s!==e.platformId):[...s,e.platformId]),children:e.platformId},e.platformId))})]}),t.jsxs(te,{children:[t.jsx(k,{variant:"outline",onClick:()=>us(!1),children:"å–æ¶ˆ"}),t.jsx(k,{variant:"default",onClick:()=>{const e=xs.map(e=>{const s=m.find(s=>s.platformId===e);return s&&s.content?{platformId:e,content:s.content}:null}).filter(Boolean);"api"===zs?((async e=>{const s=e.filter(e=>!$s(e));if(s.length>0)return i({title:"éƒ¨åˆ†å¹³å°æœªæˆæƒ",description:`è¯·å…ˆé…ç½® ${s.join(", ")} çš„APIæˆæƒä¿¡æ¯`,variant:"destructive"}),void Ps(!0);const t=e.filter(e=>$s(e));if(0===t.length)return void i({title:"æ— å¯ç”¨å¹³å°",description:"è¯·å…ˆé…ç½®è‡³å°‘ä¸€ä¸ªå¹³å°çš„APIæˆæƒä¿¡æ¯",variant:"destructive"});const a=m.find(e=>e.platformId===t[0]);if(null==a?void 0:a.content){Ks(new Set(t));try{const e={text:a.content,title:`AIç”Ÿæˆå†…å®¹ - ${(new Date).toLocaleString()}`,hashtags:[]},s=await async function(e,s){const t=[];for(const r of e)try{const e=await Ds(r,s);t.push(e)}catch(a){t.push({success:!1,error:a instanceof Error?a.message:"å‘å¸ƒå¤±è´¥"})}return t}(t,e),r=s.filter(e=>e.success).length,n=s.length-r,l=JSON.parse(localStorage.getItem("shareHistory")||"[]");s.forEach((e,s)=>{e.success&&l.unshift({id:Date.now().toString()+s,platformId:t[s],platformName:t[s],content:a.content,time:(new Date).toISOString()})}),localStorage.setItem("shareHistory",JSON.stringify(l)),i({title:"æ‰¹é‡å‘å¸ƒå®Œæˆ",description:`æˆåŠŸ: ${r}ä¸ªå¹³å°ï¼Œå¤±è´¥: ${n}ä¸ªå¹³å°`}),s.forEach((e,s)=>{e.success&&e.publishUrl&&setTimeout(()=>{window.open(e.publishUrl,"_blank","noopener,noreferrer")},500*s)})}catch(r){i({title:"æ‰¹é‡å‘å¸ƒå¤±è´¥",description:r instanceof Error?r.message:"ç½‘ç»œé”™è¯¯",variant:"destructive"})}finally{Ks(new Set)}}else i({title:"æ— å†…å®¹å¯å‘å¸ƒ",description:"è¯·å…ˆç”Ÿæˆå†…å®¹",variant:"destructive"})})(xs),us(!1)):(gs(e),us(!1),e.length>0&&bs(e[0]))},disabled:0===xs.length,children:"å¼€å§‹æ‰¹é‡è½¬å‘"})]})]})}),t.jsx(Z,{open:!!js,onOpenChange:e=>{e||bs(null)},children:t.jsxs(Q,{children:[t.jsx(ee,{children:t.jsx(se,{children:"æ‰¹é‡ä¸€é”®è½¬å‘"})}),t.jsxs("div",{className:"py-2 text-gray-700",children:[t.jsxs("p",{children:["å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ˜¯å¦è·³è½¬åˆ° ",null==js?void 0:js.platformId," å‘å¸ƒé¡µï¼Ÿ"]}),t.jsx("div",{className:"bg-gray-100 rounded p-2 mt-2 text-xs break-all max-h-32 overflow-auto",children:null==js?void 0:js.content})]}),t.jsxs(te,{children:[t.jsx(k,{variant:"outline",onClick:()=>{if(!js)return;const e=fs.findIndex(e=>e.platformId===js.platformId);e>=0&&e<fs.length-1?bs(fs[e+1]):(bs(null),gs([]),i({title:"æ‰¹é‡è½¬å‘å®Œæˆ",description:"å·²å®Œæˆæ‰€æœ‰å¹³å°çš„è½¬å‘"}))},children:"è·³è¿‡"}),t.jsx(k,{variant:"default",onClick:()=>{if(!js)return;const{platformId:e,content:s}=js;navigator.clipboard.writeText(s);const t=JSON.parse(localStorage.getItem("shareHistory")||"[]");t.unshift({id:Date.now().toString(),platformId:e,platformName:e,content:s,time:(new Date).toISOString()}),localStorage.setItem("shareHistory",JSON.stringify(t));const a=Ls[e];a&&window.open(a,"_blank","noopener,noreferrer");const r=fs.findIndex(s=>s.platformId===e);r>=0&&r<fs.length-1?bs(fs[r+1]):(bs(null),gs([]),i({title:"æ‰¹é‡è½¬å‘å®Œæˆ",description:"å·²å®Œæˆæ‰€æœ‰å¹³å°çš„è½¬å‘"}))},children:"è·³è½¬å¹¶å‘å¸ƒ"})]})]})}),t.jsx(Z,{open:vs,onOpenChange:Ns,children:t.jsxs(Q,{className:"max-w-2xl",children:[t.jsx(ee,{children:t.jsx(se,{children:"è½¬å‘å†å²"})}),t.jsx("div",{className:"py-2 text-gray-700 max-h-[60vh] overflow-auto",children:0===ws.length?t.jsx("div",{className:"text-center text-gray-400 py-8",children:"æš‚æ— è½¬å‘å†å²"}):t.jsx("div",{className:"space-y-4",children:ws.map(e=>t.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"font-bold text-blue-600",children:e.platformName}),t.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.time).toLocaleString()})]}),t.jsx("div",{className:"text-xs break-all mb-1",children:e.content}),t.jsx(k,{size:"sm",variant:"outline",onClick:()=>navigator.clipboard.writeText(e.content),children:"å¤åˆ¶å†…å®¹"})]},e.id))})}),t.jsxs(te,{children:[t.jsx(k,{variant:"outline",onClick:()=>{localStorage.removeItem("shareHistory"),ys([]),i({title:"å·²æ¸…ç©º",description:"è½¬å‘å†å²å·²æ¸…ç©º"})},disabled:0===ws.length,children:"æ¸…ç©ºå†å²"}),t.jsx(k,{variant:"default",onClick:()=>Ns(!1),children:"å…³é—­"})]})]})}),t.jsx(Ms,{open:Is,onOpenChange:Ps}),t.jsx(Rs,{isOpen:Le,onClose:()=>Fe(!1),onUpgrade:()=>{Fe(!1),n("/payment")},remainingCount:Ue,userType:"trial"===_e?"trial":"pro"}),t.jsx(Bs,{isOpen:He,onClose:()=>qe(!1),onUpgrade:()=>{qe(!1),n("/payment")},featureName:Ke.name,featureDescription:Ke.description})]})}export{qs as default};
