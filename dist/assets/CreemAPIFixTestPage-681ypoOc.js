import{j as e}from"./ui-core-BoM6Gtru.js";import{r as s}from"./router-CDHmMMQ-.js";import{C as a,a as t,b as r,e as c,B as i}from"./pages-home-DBDkeS6P.js";import{B as l,L as n,I as d}from"./pages-adapt-D91yLQsN.js";import{c as m,a as o,g as x}from"./creemClientService-DNWMJNoV.js";import{C as p,p as h,ap as j,ad as u}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B0lu_Zdo.js";import"./components-layout-GdDGmkJW.js";import"./pages-brand-Y2nduvKa.js";import"./api-services-sC6AUvc1.js";import"./pages-content-extractor-UQ_Zkhev.js";import"./components-auth-BdwTK_yH.js";import"./browser-C5-Pn058.js";function g(){const[g,N]=s.useState([]),[f,v]=s.useState(!1),[I,y]=s.useState("prod_3nJOuQeVStqkp6JaDcrKHf"),[b,w]=s.useState("test@example.com"),C=[{name:"ä¸“ä¸šç‰ˆæœˆä»˜",priceId:"prod_3nJOuQeVStqkp6JaDcrKHf",expectedPrice:29},{name:"ä¸“ä¸šç‰ˆå¹´ä»˜",priceId:"prod_5qBlDTLpD3h9gvOZFd4Rgu",expectedPrice:299},{name:"é«˜çº§ç‰ˆæœˆä»˜",priceId:"prod_4HYBfvrcbXYnbxjlswMj28",expectedPrice:59},{name:"é«˜çº§ç‰ˆå¹´ä»˜",priceId:"prod_6OfIoVnRg2pXsuYceVKOYk",expectedPrice:599}],P=(e,s,a,t)=>{const r={name:e,timestamp:(new Date).toISOString(),success:s,data:a,error:t||null};N(e=>[r,...e])},D=async(e,s)=>{try{const a=await m(e,b);a.success?P(`${s} - createCreemCheckout`,!0,a):P(`${s} - createCreemCheckout`,!1,a,"APIè°ƒç”¨å¤±è´¥")}catch(a){P(`${s} - createCreemCheckout`,!1,null,a.message)}},A=async(e,s)=>{try{const a=await o(e,b);a.success?P(`${s} - getAlipayQRCode`,!0,a):P(`${s} - getAlipayQRCode`,!1,a,"APIè°ƒç”¨å¤±è´¥")}catch(a){P(`${s} - getAlipayQRCode`,!1,null,a.message)}},S=async(e,s)=>{try{const a=await x(e,b);a.success?P(`${s} - generateAlipayQRCode`,!0,a):P(`${s} - generateAlipayQRCode`,!1,a,"APIè°ƒç”¨å¤±è´¥")}catch(a){P(`${s} - generateAlipayQRCode`,!1,null,a.message)}},$=()=>g.filter(e=>e.success).length,k=()=>g.length;return e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:["ğŸ”§ Creem APIä¿®å¤æµ‹è¯•",e.jsx(l,{variant:"secondary",children:"priceIdå‚æ•°ä¿®å¤"})]}),e.jsx("p",{className:"text-muted-foreground",children:"éªŒè¯Creem APIçš„priceIdå‚æ•°ä¿®å¤æ˜¯å¦æœ‰æ•ˆï¼Œæµ‹è¯•æ‰€æœ‰ç›¸å…³å‡½æ•°"})]}),e.jsxs(c,{className:"space-y-6",children:[g.length>0&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["æˆåŠŸ: ",$()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["å¤±è´¥: ",k()-$()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"text-blue-600 font-medium",children:["æ€»è®¡: ",k()]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["æˆåŠŸç‡: ",k()>0?Math.round($()/k()*100):0,"%"]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{onClick:async()=>{v(!0),N([]);for(const e of C)await D(e.priceId,e.name),await new Promise(e=>setTimeout(e,500)),await A(e.priceId,e.name),await new Promise(e=>setTimeout(e,500)),await S(e.priceId,e.name),await new Promise(e=>setTimeout(e,1e3));v(!1)},disabled:f,className:"flex-1",children:f?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}),"æµ‹è¯•ä¸­..."]}):"è¿è¡Œæ‰€æœ‰æµ‹è¯•"}),e.jsx(i,{onClick:()=>{N([])},variant:"outline",children:"æ¸…é™¤ç»“æœ"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"è‡ªå®šä¹‰ä»·æ ¼IDæµ‹è¯•"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"customPriceId",children:"ä»·æ ¼ID"}),e.jsx(d,{id:"customPriceId",value:I,onChange:e=>y(e.target.value),placeholder:"è¾“å…¥Creemä»·æ ¼ID",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"customerEmail",children:"å®¢æˆ·é‚®ç®±"}),e.jsx(d,{id:"customerEmail",type:"email",value:b,onChange:e=>w(e.target.value),placeholder:"customer@example.com",className:"mt-1"})]})]}),e.jsx(i,{onClick:async()=>{if(I.trim()){v(!0);try{const e=await m(I,b);e.success?P("è‡ªå®šä¹‰ä»·æ ¼IDæµ‹è¯•",!0,e):P("è‡ªå®šä¹‰ä»·æ ¼IDæµ‹è¯•",!1,e,"APIè°ƒç”¨å¤±è´¥")}catch(e){P("è‡ªå®šä¹‰ä»·æ ¼IDæµ‹è¯•",!1,null,e.message)}finally{v(!1)}}else P("è‡ªå®šä¹‰ä»·æ ¼IDæµ‹è¯•",!1,null,"è¯·è¾“å…¥æœ‰æ•ˆçš„ä»·æ ¼ID")},disabled:f,className:"mt-3",children:"æµ‹è¯•è‡ªå®šä¹‰ä»·æ ¼ID"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"æµ‹è¯•é…ç½®"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(s=>e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.priceId}),e.jsxs("p",{className:"text-xs text-gray-500",children:["é¢„æœŸä»·æ ¼: Â¥",s.expectedPrice]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"å°†æµ‹è¯•3ä¸ªå‡½æ•°"})})]})},s.priceId))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"æµ‹è¯•ç»“æœ"}),0===g.length?e.jsx("p",{className:"text-muted-foreground",children:"æš‚æ— æµ‹è¯•ç»“æœ"}):e.jsx("div",{className:"space-y-3",children:g.map((s,t)=>e.jsx(a,{className:"p-4 "+(s.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(l,{variant:s.success?"default":"destructive",children:s.success?"æˆåŠŸ":"å¤±è´¥"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleTimeString()})]}),s.error&&e.jsx("p",{className:"text-red-600 text-sm",children:s.error}),s.success&&s.data&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-green-600",children:"APIè°ƒç”¨æˆåŠŸ"}),e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer text-muted-foreground",children:"æŸ¥çœ‹å“åº”æ•°æ®"}),e.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(s.data,null,2)})]})]})]})})},t))})]})]})]})})}export{g as default};
