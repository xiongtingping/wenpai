import{j as s}from"./ui-core-BoM6Gtru.js";import{p as e,u as a,f as t,A as l,D as i,E as r,F as c,B as n,C as x,a as d,b as m,d as o,e as j,G as h,I as p,J as g}from"./pages-home-DBDkeS6P.js";import{r as u,u as v}from"./router-CDHmMMQ-.js";import{B as N,I as f}from"./pages-adapt-D91yLQsN.js";import{aL as y,aJ as w,x as b,aW as I,n as D,a5 as k,U as C,E as S}from"./utils-Ck01-_Du.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B0lu_Zdo.js";import"./components-layout-GdDGmkJW.js";import"./pages-brand-Y2nduvKa.js";import"./api-services-sC6AUvc1.js";import"./pages-content-extractor-UQ_Zkhev.js";import"./components-auth-BdwTK_yH.js";function z(){const{showLogin:z}=e(),[L,R]=u.useState(null),[E,F]=u.useState(null),[U,B]=u.useState(!1),[J,$]=u.useState(""),[A,G]=u.useState({}),[O,T]=u.useState(""),[W,_]=u.useState(null),[q,H]=u.useState(null),{toast:K}=a(),M=v(),{getReferrer:P,clearReferrer:Q}=t();u.useEffect(()=>{V()},[]);const V=()=>{R(l()),F(i()),B(r()),$(c());const s={};for(let e=0;e<localStorage.length;e++){const a=localStorage.key(e);a&&(s[a]=localStorage.getItem(a)||"")}G(s)},X=s=>{navigator.clipboard.writeText(s),K({title:"已复制到剪贴板",description:s})},Y=s=>`${window.location.origin}/register?ref=${s}`;return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(n,{variant:"ghost",onClick:()=>M("/"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(y,{className:"h-4 w-4"}),"返回首页"]}),s.jsxs(x,{className:"shadow-xl",children:[s.jsxs(d,{children:[s.jsxs(m,{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(w,{className:"h-6 w-6 text-green-600"}),"推荐人ID测试页面"]}),s.jsx(o,{children:"测试推荐人ID的识别、存储和处理功能"})]}),s.jsxs(j,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(x,{className:"border-2 border-blue-200",children:[s.jsx(d,{className:"pb-3",children:s.jsx(m,{className:"text-lg",children:"当前状态"})}),s.jsxs(j,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"URL包含推荐人参数:"}),s.jsx(N,{variant:U?"default":"secondary",children:U?"是":"否"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"localStorage推荐人ID:"}),s.jsx("div",{className:"flex items-center gap-2",children:L?s.jsxs(s.Fragment,{children:[s.jsx(N,{variant:"default",className:"text-xs",children:L}),s.jsx(n,{size:"sm",variant:"ghost",onClick:()=>X(L),children:s.jsx(b,{className:"h-3 w-3"})})]}):s.jsx(N,{variant:"secondary",children:"无"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"URL推荐人ID:"}),s.jsx("div",{className:"flex items-center gap-2",children:E?s.jsxs(s.Fragment,{children:[s.jsx(N,{variant:"default",className:"text-xs",children:E}),s.jsx(n,{size:"sm",variant:"ghost",onClick:()=>X(E),children:s.jsx(b,{className:"h-3 w-3"})})]}):s.jsx(N,{variant:"secondary",children:"无"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"临时用户ID:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(N,{variant:"outline",className:"text-xs font-mono",children:J}),s.jsx(n,{size:"sm",variant:"ghost",onClick:()=>X(J),children:s.jsx(b,{className:"h-3 w-3"})})]})]})]})]}),s.jsxs(x,{className:"mt-6",children:[s.jsxs(d,{children:[s.jsxs(m,{className:"flex items-center gap-2",children:[s.jsx(I,{className:"h-5 w-5"}),"功能测试"]}),s.jsx(o,{children:"测试推荐人ID验证和处理状态功能"})]}),s.jsxs(j,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"测试推荐人ID"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{value:O,onChange:s=>T(s.target.value),placeholder:"输入要测试的推荐人ID",className:"flex-1"}),s.jsx(n,{onClick:()=>{if(!O.trim())return void K({title:"请输入测试ID",variant:"destructive"});const s=h(O.trim());_(s),K({title:s?"验证通过":"验证失败",description:s?"推荐人ID格式正确":"推荐人ID格式不正确",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"验证格式"}),s.jsx(n,{onClick:()=>{if(!O.trim())return void K({title:"请输入测试ID",variant:"destructive"});const s=p(O.trim());H(s),K({title:s?"已处理":"未处理",description:s?"该推荐奖励已处理过":"该推荐奖励未处理",variant:s?"default":"destructive"})},size:"sm",variant:"outline",children:"检查状态"}),s.jsx(n,{onClick:()=>{O.trim()?(g(O.trim()),V(),K({title:"标记成功",description:"推荐奖励已标记为已处理"})):K({title:"请输入测试ID",variant:"destructive"})},size:"sm",variant:"outline",children:"标记已处理"})]})]}),null!==W&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"验证结果:"}),s.jsx(N,{variant:W?"default":"destructive",children:W?"有效":"无效"})]}),null!==q&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"处理状态:"}),s.jsx(N,{variant:q?"default":"secondary",children:q?"已处理":"未处理"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[s.jsxs(n,{onClick:V,variant:"outline",size:"sm",children:[s.jsx(D,{className:"h-4 w-4 mr-2"}),"刷新数据"]}),s.jsxs(n,{onClick:()=>{Q(),V(),K({title:"已清除",description:"推荐人ID已清除"})},variant:"outline",size:"sm",children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),"清除推荐人ID"]}),s.jsxs(n,{onClick:()=>{localStorage.clear(),V(),K({title:"已清除",description:"所有本地数据已清除"})},variant:"destructive",size:"sm",children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),"清除所有数据"]})]})]}),s.jsxs(x,{className:"border-2 border-purple-200",children:[s.jsxs(d,{children:[s.jsx(m,{className:"text-lg",children:"测试链接生成"}),s.jsx(o,{children:"生成包含推荐人ID的测试链接"})]}),s.jsx(j,{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["user123","invite456","test789"].map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{className:"text-sm font-medium",children:["推荐人ID: ",e]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(n,{size:"sm",variant:"outline",onClick:()=>{const s=Y(e);X(s)},className:"flex-1",children:[s.jsx(b,{className:"h-3 w-3 mr-1"}),"复制链接"]}),s.jsx(n,{size:"sm",variant:"outline",onClick:()=>{const s=Y(e);window.open(s,"_blank")},children:s.jsx(S,{className:"h-3 w-3"})})]})]},e))})})]}),s.jsxs(x,{className:"border-2 border-orange-200",children:[s.jsxs(d,{children:[s.jsx(m,{className:"text-lg",children:"localStorage数据"}),s.jsx(o,{children:"查看localStorage中存储的所有数据"})]}),s.jsx(j,{children:s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries(A).map(([e,a])=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm font-mono text-gray-700",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 max-w-40 truncate",children:a}),s.jsx(n,{size:"sm",variant:"ghost",onClick:()=>X(a),children:s.jsx(b,{className:"h-3 w-3"})})]})]},e))})})]})]})]})]})})}export{z as default};
