import{j as e,K as s}from"./ui-core-CkDiOLPZ.js";import{r as a,u as l}from"./router-CDHmMMQ-.js";import{c as t,B as r,C as i,a as c,b as n,e as d,S as o,u as m,d as x}from"./pages-home-cm4XWoxC.js";import{B as h,I as j,L as p,i as u,j as f,k as g,l as N,D as v,b as y,c as b,d as w,m as k,S as C,e as S,f as P,g as K,h as $,n as I}from"./pages-adapt-BekQTgf9.js";import{P as z}from"./components-layout-Dpkc7dU5.js";import{g as E,a as F,b as H,c as L,d as T,e as A,f as O,h as _,i as B,j as D,t as J,m as V,k as M}from"./api-services-CFC91rmd.js";import{D as Q,Q as R,P as W,X as Y,W as q,Y as G,_ as U,$ as X,n as Z,a0 as ee,a1 as se,a2 as ae,a3 as le,a4 as te,a5 as re,E as ie}from"./utils-DOwhHgxs.js";const ce=a.forwardRef(({className:a,orientation:l="horizontal",decorative:r=!0,...i},c)=>e.jsx(s,{ref:c,decorative:r,orientation:l,className:t("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...i}));ce.displayName=s.displayName;const ne=({onFilterChange:s})=>{const[l,t]=a.useState(!1),[m,x]=a.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[u,f]=a.useState(""),[g,N]=a.useState("");a.useEffect(()=>{const e=localStorage.getItem("interestFilters");if(e)try{const a=JSON.parse(e);x(a),s(a)}catch(a){}},[]);const v=e=>{localStorage.setItem("interestFilters",JSON.stringify(e)),x(e),s(e)},y=()=>{if(u.trim()&&!m.blockedKeywords.includes(u.trim())){const e={...m,blockedKeywords:[...m.blockedKeywords,u.trim()]};v(e),f("")}},b=()=>{if(g.trim()&&!m.preferredKeywords.includes(g.trim())){const e={...m,preferredKeywords:[...m.preferredKeywords,g.trim()]};v(e),N("")}};return e.jsxs("div",{className:"mb-6",children:[e.jsxs(r,{variant:"outline",onClick:()=>t(!l),className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"å…´è¶£è°ƒèŠ‚",m.blockedKeywords.length>0||m.preferredKeywords.length>0&&e.jsx(h,{variant:"secondary",className:"ml-2",children:m.blockedKeywords.length+m.preferredKeywords.length})]}),l&&e.jsxs(i,{className:"mt-4",children:[e.jsx(c,{children:e.jsxs(n,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"å…´è¶£è°ƒèŠ‚è®¾ç½®"}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>{v({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1})},children:"é‡ç½®"})]})}),e.jsxs(d,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"å±è”½å…³é”®è¯"]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(j,{placeholder:"è¾“å…¥è¦å±è”½çš„å…³é”®è¯",value:u,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&y()}),e.jsx(r,{onClick:y,size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.blockedKeywords.map((s,a)=>e.jsxs(h,{variant:"destructive",className:"flex items-center gap-1",children:[s,e.jsx(Y,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const s={...m,blockedKeywords:m.blockedKeywords.filter(s=>s!==e)};v(s)})(s)})]},a))})]}),e.jsx(ce,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"åå¥½å…³é”®è¯"]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(j,{placeholder:"è¾“å…¥åå¥½çš„å…³é”®è¯",value:g,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&b()}),e.jsx(r,{onClick:b,size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.preferredKeywords.map((s,a)=>e.jsxs(h,{variant:"default",className:"flex items-center gap-1",children:[s,e.jsx(Y,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{const s={...m,preferredKeywords:m.preferredKeywords.filter(s=>s!==e)};v(s)})(s)})]},a))})]}),e.jsx(ce,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"å¹³å°åå¥½è®¾ç½®"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{value:"weibo",label:"å¾®åš"},{value:"zhihu",label:"çŸ¥ä¹"},{value:"bilibili",label:"Bç«™"},{value:"douyin",label:"æŠ–éŸ³"},{value:"toutiao",label:"å¤´æ¡"},{value:"baidu",label:"ç™¾åº¦"}].map(s=>{const a=m.blockedPlatforms.includes(s.value),l=m.preferredPlatforms.includes(s.value);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:s.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{htmlFor:`prefer-${s.value}`,className:"text-xs",children:"æ¨è"}),e.jsx(o,{id:`prefer-${s.value}`,checked:l,onCheckedChange:()=>(e=>{const s=m.preferredPlatforms.includes(e),a={...m,preferredPlatforms:s?m.preferredPlatforms.filter(s=>s!==e):[...m.preferredPlatforms,e]};v(a)})(s.value)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{htmlFor:`block-${s.value}`,className:"text-xs",children:"å±è”½"}),e.jsx(o,{id:`block-${s.value}`,checked:a,onCheckedChange:()=>(e=>{const s=m.blockedPlatforms.includes(e),a={...m,blockedPlatforms:s?m.blockedPlatforms.filter(s=>s!==e):[...m.blockedPlatforms,e]};v(a)})(s.value)})]})]})]},s.value)})})]})]})]})]})},de=({topics:s,onCategoryChange:l,onTopicClick:t})=>{const[r,c]=a.useState("all"),n=[{id:"all",label:"å…¨éƒ¨",icon:"ğŸ”¥"},{id:"entertainment",label:"å¨±ä¹",icon:"ğŸ¬"},{id:"technology",label:"ç§‘æŠ€",icon:"ğŸ’»"},{id:"sports",label:"ä½“è‚²",icon:"âš½"},{id:"politics",label:"æ”¿æ²»",icon:"ğŸ›ï¸"},{id:"economy",label:"è´¢ç»",icon:"ğŸ’°"},{id:"society",label:"ç¤¾ä¼š",icon:"ğŸ‘¥"},{id:"education",label:"æ•™è‚²",icon:"ğŸ“š"},{id:"health",label:"å¥åº·",icon:"ğŸ¥"},{id:"lifestyle",label:"ç”Ÿæ´»",icon:"ğŸ "}],o=e=>"all"===e?s:s.filter(s=>(e=>{const s=e.title.toLowerCase(),a=(e.desc||"").toLowerCase();return["æ˜æ˜Ÿ","æ¼”å‘˜","æ­Œæ‰‹","ç”µå½±","ç”µè§†å‰§","ç»¼è‰º","å¨±ä¹","æ˜æ˜Ÿ","è‰ºäºº","å¯¼æ¼”","ç¼–å‰§"].some(e=>s.includes(e)||a.includes(e))?"entertainment":["ç§‘æŠ€","æŠ€æœ¯","äº’è”ç½‘","AI","äººå·¥æ™ºèƒ½","æ‰‹æœº","ç”µè„‘","è½¯ä»¶","ç¼–ç¨‹","ç®—æ³•","èŠ¯ç‰‡"].some(e=>s.includes(e)||a.includes(e))?"technology":["è¶³çƒ","ç¯®çƒ","ä½“è‚²","æ¯”èµ›","è¿åŠ¨å‘˜","æ•™ç»ƒ","çƒé˜Ÿ","è”èµ›","å† å†›","å¥¥è¿ä¼š"].some(e=>s.includes(e)||a.includes(e))?"sports":["æ”¿åºœ","æ”¿ç­–","æ”¿æ²»","å®˜å‘˜","é€‰ä¸¾","æ³•å¾‹","æ³•è§„","å›½å®¶","é¢†å¯¼äºº","ä¼šè®®"].some(e=>s.includes(e)||a.includes(e))?"politics":["ç»æµ","é‡‘è","è‚¡ç¥¨","åŸºé‡‘","æŠ•èµ„","ç†è´¢","é“¶è¡Œ","ä¿é™©","æˆ¿åœ°äº§","è‚¡å¸‚"].some(e=>s.includes(e)||a.includes(e))?"economy":["ç¤¾ä¼š","äº‹ä»¶","æ–°é—»","è°ƒæŸ¥","æŠ¥é“","äº‹ä»¶","äº‹æ•…","æ¡ˆä»¶","çº çº·"].some(e=>s.includes(e)||a.includes(e))?"society":["æ•™è‚²","å­¦æ ¡","å­¦ç”Ÿ","è€å¸ˆ","è€ƒè¯•","å­¦ä¹ ","åŸ¹è®­","è¯¾ç¨‹","å¤§å­¦","é«˜è€ƒ"].some(e=>s.includes(e)||a.includes(e))?"education":["å¥åº·","åŒ»ç–—","åŒ»é™¢","åŒ»ç”Ÿ","ç–¾ç—…","æ²»ç–—","è¯ç‰©","ç–«è‹—","ç–«æƒ…","ä¿å¥"].some(e=>s.includes(e)||a.includes(e))?"health":["ç”Ÿæ´»","ç¾é£Ÿ","æ—…æ¸¸","è´­ç‰©","æ—¶å°š","ç¾å®¹","å®¶å±…","è£…ä¿®","å® ç‰©","å›­è‰º"].some(e=>s.includes(e)||a.includes(e))?"lifestyle":"other"})(s)===e),m=e=>o(e).length;return e.jsx("div",{className:"mb-6",children:e.jsxs(u,{value:r,onValueChange:e=>{c(e),l(e)},children:[e.jsx(f,{className:"grid w-full grid-cols-5 lg:grid-cols-10",children:n.map(s=>e.jsxs(g,{value:s.id,className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{className:"hidden sm:inline",children:s.label}),e.jsx(h,{variant:"secondary",className:"ml-1 text-xs",children:m(s.id)})]},s.id))}),n.map(s=>e.jsxs(N,{value:s.id,children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o(s.id).map((a,l)=>e.jsx(i,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(a),children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(h,{variant:"outline",className:"text-xs",children:a.platform}),e.jsxs("span",{className:"text-xs text-gray-500",children:["#",l+1]})]}),e.jsx("h3",{className:"font-medium text-sm line-clamp-2 mb-2",children:a.title}),a.desc&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:a.desc}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["çƒ­åº¦: ",a.hot]}),e.jsx(h,{variant:"secondary",className:"text-xs",children:s.label})]})]})},`${a.platform}-${l}`))}),0===o(s.id).length&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"è¯¥åˆ†ç±»ä¸‹æš‚æ— è¯é¢˜"})]},s.id))]})})},oe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){l();const{toast:s}=m(),[t,Q]=a.useState(null),[R,Y]=a.useState("all"),[ce,oe]=a.useState(!0),[me,xe]=a.useState(!1),[he,je]=a.useState(""),[pe,ue]=a.useState(null),[fe,ge]=a.useState(new Date),[Ne,ve]=a.useState(new Set),[ye,be]=a.useState(new Set),[we,ke]=a.useState("hot"),[Ce,Se]=a.useState([]),[Pe,Ke]=a.useState({}),[$e,Ie]=a.useState(null),[ze,Ee]=a.useState(!1),[Fe,He]=a.useState(!1),[Le,Te]=a.useState(!1),[Ae,Oe]=a.useState(E()),[_e,Be]=a.useState({}),[De,Je]=a.useState({}),[Ve,Me]=a.useState({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),[Qe]=a.useState(F()),Re=H(),[We,Ye]=a.useState({blockedKeywords:[],blockedPlatforms:[],preferredKeywords:[],preferredPlatforms:[],showBlocked:!1}),[qe,Ge]=a.useState("all"),[Ue,Xe]=a.useState([]),Ze=e=>{const a=`${e.platform}-${e.title}`;ls(a),e.url?window.open(e.url,"_blank"):e.mobil_url?window.open(e.mobil_url,"_blank"):s({title:"æ— æ³•æ‰“å¼€é“¾æ¥",description:"è¯¥è¯é¢˜æš‚æ— æºé“¾æ¥",variant:"destructive"})},es=async()=>{try{oe(!0),ue(null);const s=await A();Q(s),ge(new Date),localStorage.setItem("hotTopicsData",JSON.stringify(s.data));const a=localStorage.getItem("interestFilters");if(a)try{const e=JSON.parse(a);Ye(e)}catch(e){}}catch(s){ue(s instanceof Error?s.message:"è·å–æ•°æ®å¤±è´¥")}finally{oe(!1)}},ss=async()=>{xe(!0),await es(),xe(!1)},as=s=>{const a=O(s);return e.jsx("span",{className:`${a} mr-2`})},ls=e=>{ve(s=>new Set([...s,e]))},ts=e=>{const s=`${e.platform}-${e.title}`;return Ne.has(s)},rs=e=>{const s=`${e.platform}-${e.title}`;return ye.has(s)},is=()=>{const e=_();Se(e),Oe(E())};a.useEffect(()=>{es(),is()},[]);const cs=(()=>{if(!t||!t.data)return[];let e=[];return"all"===R?Object.values(t.data).forEach(s=>{e=e.concat(s.slice(0,10))}):e=(t.data[R]||[]).slice(0,10),(e=>{const s=e.filter(e=>{const s=e.title.toLowerCase(),a=(e.desc||"").toLowerCase(),l=(e.content||"").toLowerCase(),t=e.platform||"",r=We.blockedKeywords.some(e=>s.includes(e.toLowerCase())||a.includes(e.toLowerCase())||l.includes(e.toLowerCase())),i=We.blockedPlatforms.includes(t);return!r&&!i}).map(e=>{const s=e.title.toLowerCase(),a=(e.desc||"").toLowerCase(),l=(e.content||"").toLowerCase(),t=e.platform||"";let r=0,i=[];return We.preferredKeywords.forEach(e=>{const t=e.toLowerCase();(s.includes(t)||a.includes(t)||l.includes(t))&&(r+=10,i.push(e))}),We.preferredPlatforms.includes(t)&&(r+=5),{...e,preferenceScore:r,matchedKeywords:i,isHighPriority:r>0}});return[...s.filter(e=>e.isHighPriority).sort((e,s)=>{if(s.preferenceScore!==e.preferenceScore)return s.preferenceScore-e.preferenceScore;const a=parseInt(e.hot)||0;return(parseInt(s.hot)||0)-a}),...s.filter(e=>!e.isHighPriority).sort((e,s)=>{const a=parseInt(e.hot)||0;return(parseInt(s.hot)||0)-a})]})(e)})();return(()=>{if(!t||!t.data)return{total:0,platforms:0};Object.values(t.data).reduce((e,s)=>e+s.length,0),Object.keys(t.data).length})(),cs.slice(0,3),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(z,{title:"å…¨ç½‘é›·è¾¾",description:"å®æ—¶ç›‘æ§å„å¹³å°çƒ­é—¨è¯é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯é¢˜è®¢é˜…å’Œæ™ºèƒ½è¿½è¸ª",showAdaptButton:!1}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(u,{value:we,onValueChange:e=>ke(e),className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs(f,{className:"grid w-full grid-cols-3 max-w-md",children:[e.jsxs(g,{value:"hot",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(G,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"å…¨ç½‘çƒ­ç‚¹"}),e.jsx("span",{className:"sm:hidden",children:"çƒ­ç‚¹"})]}),e.jsxs(g,{value:"subscriptions",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(U,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"è¯é¢˜è®¢é˜…"}),e.jsx("span",{className:"sm:hidden",children:"è®¢é˜…"})]}),e.jsxs(g,{value:"bookmarks",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"çµæ„Ÿå¤¹"}),e.jsx("span",{className:"sm:hidden",children:"æ”¶è—"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>Ee(!0),className:"text-xs sm:text-sm",children:[e.jsx(W,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"æ·»åŠ è®¢é˜…"}),e.jsx("span",{className:"sm:hidden",children:"æ·»åŠ "})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:ss,disabled:me,className:"text-xs sm:text-sm",children:[e.jsx(Z,{className:"w-4 h-4 mr-1 "+(me?"animate-spin":"")}),"åˆ·æ–°"]})]})]}),e.jsxs(N,{value:"hot",children:[pe&&e.jsx(i,{className:"mb-6 border-red-200 bg-red-50",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-4 h-4 text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"è·å–çƒ­ç‚¹æ•°æ®å¤±è´¥"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:pe}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"å¯èƒ½åŸå› ï¼šç½‘ç»œè¿æ¥å¼‚å¸¸ã€APIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€æˆ–é˜²ç«å¢™é™åˆ¶"})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:ss,disabled:me,className:"border-red-300 text-red-700 hover:bg-red-100",children:[e.jsx(Z,{className:"h-4 h-4 mr-2 "+(me?"animate-spin":"")}),"é‡è¯•"]})]})})}),!ce&&t&&t.data&&e.jsx("div",{className:"mb-6",children:e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-red-500"}),"ä»Šæ—¥æœ€çƒ­é—¨è¯é¢˜"]}),e.jsx(x,{children:"å„å¹³å°çƒ­é—¨è¯é¢˜æ’è¡Œæ¦œ"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["æœ€åæ›´æ–°: ",fe.toLocaleString("zh-CN"),"ï¼ˆæ¯15åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°ï¼‰"]})]})}),e.jsx(d,{children:e.jsxs(u,{defaultValue:"all",className:"w-full",children:[e.jsxs(f,{className:"flex w-full overflow-x-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:[e.jsx(g,{value:"all",className:"min-w-[72px]",children:"æ€»æ¦œ"}),Re.map(s=>e.jsx(g,{value:s,className:"min-w-[72px]",children:L(s)},s))]}),e.jsx(N,{value:"all",className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:T(t.data).slice(0,10).map((s,a)=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${ts(s)?"bg-gray-50 opacity-75":"bg-white"} ${rs(s)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,onClick:()=>Ze(s),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(h,{variant:"destructive",className:"text-xs",children:["#",a+1]}),e.jsx(h,{variant:"outline",className:"text-xs",children:L(s.platform||"")})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:s.hot}),e.jsxs("div",{className:"flex items-center gap-1",children:[rs(s)&&e.jsx(X,{className:"w-3 h-3 text-yellow-500 fill-current"}),ts(s)&&e.jsx(q,{className:"w-3 h-3 text-gray-400"})]})]})]},a))})}),Re.map(s=>e.jsx(N,{value:s,className:"mt-4",children:0===(t.data[s]||[]).length?e.jsx("div",{className:"text-center text-gray-400 py-8",children:"æš‚æ— æ•°æ®"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:(t.data[s]||[]).slice(0,10).map((a,l)=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${ts(a)?"bg-gray-50 opacity-75":"bg-white"} ${rs(a)?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,onClick:()=>Ze(a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(h,{variant:"destructive",className:"text-xs",children:["#",l+1]}),e.jsx(h,{variant:"outline",className:"text-xs",children:L(s)})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-2",children:a.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:a.hot}),e.jsxs("div",{className:"flex items-center gap-1",children:[rs(a)&&e.jsx(X,{className:"w-3 h-3 text-yellow-500 fill-current"}),ts(a)&&e.jsx(q,{className:"w-3 h-3 text-gray-400"})]})]})]},l))})},s))]})})]})}),e.jsx(ne,{onFilterChange:e=>{Ye(e),localStorage.setItem("interestFilters",JSON.stringify(e))}}),"all"===R&&!ce&&cs.length>0&&e.jsx(de,{topics:cs,onCategoryChange:e=>{Ge(e)},onTopicClick:Ze})]}),e.jsxs(N,{value:"subscriptions",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ae.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"æ€»è®¢é˜…æ•°"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ae.active}),e.jsx("p",{className:"text-sm text-gray-600",children:"æ´»è·ƒè®¢é˜…"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ae.notificationEnabled}),e.jsx("p",{className:"text-sm text-gray-600",children:"é€šçŸ¥å¼€å¯"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.values(Pe).flat().length}),e.jsx("p",{className:"text-sm text-gray-600",children:"ç›‘æ§ç»“æœ"})]})})})]}),0===Ce.length?e.jsx(i,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(ae,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— è¯é¢˜è®¢é˜…"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"åˆ›å»ºè¯é¢˜è®¢é˜…ï¼Œå®æ—¶ç›‘æ§æ„Ÿå…´è¶£çš„å†…å®¹"}),e.jsxs(r,{onClick:()=>Ee(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"æ·»åŠ ç¬¬ä¸€ä¸ªè®¢é˜…"]})]})}):e.jsx("div",{className:"space-y-4",children:Ce.map(a=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["å…³é”®è¯: ",a.keyword]}),a.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{checked:a.isActive,onCheckedChange:e=>((e,a)=>{try{J(e,a),is(),s({title:a?"è®¢é˜…å·²å¯ç”¨":"è®¢é˜…å·²ç¦ç”¨",description:a?"è®¢é˜…ç›‘æ§å·²å¼€å§‹":"è®¢é˜…ç›‘æ§å·²æš‚åœ"})}catch(l){s({title:"æ“ä½œå¤±è´¥",description:"åˆ‡æ¢è®¢é˜…çŠ¶æ€æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}})(a.id,e)}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>(async e=>{Te(!0);try{const a=await V(e);Ke(s=>({...s,[e.id]:a})),a.length>0?s({title:"ç›‘æ§å®Œæˆ",description:`å‘ç° ${a.length} ä¸ªç›¸å…³è¯é¢˜`}):s({title:"ç›‘æ§å®Œæˆ",description:"æœªå‘ç°ç›¸å…³è¯é¢˜"})}catch(a){s({title:"ç›‘æ§å¤±è´¥",description:"ç›‘æ§è¯é¢˜æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}finally{Te(!1)}})(a),disabled:Le,children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),Le?"æ£€æŸ¥ä¸­...":"æ£€æŸ¥"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>{Ie(a),(async e=>{if(!_e[e]){Je(s=>({...s,[e]:!0}));try{const s=await M(e,7);Be(a=>({...a,[e]:s}))}catch(s){}finally{Je(s=>({...s,[e]:!1}))}}})(a.keyword)},children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"è¶‹åŠ¿"]}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>(e=>{try{D(e),is(),s({title:"åˆ é™¤æˆåŠŸ",description:"è®¢é˜…å·²åˆ é™¤"})}catch(a){s({title:"åˆ é™¤å¤±è´¥",description:"åˆ é™¤è®¢é˜…æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}})(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(re,{className:"w-4 h-4"})})]})]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"çŠ¶æ€:"}),e.jsx(h,{variant:a.isActive?"default":"secondary",className:"ml-2",children:a.isActive?"æ´»è·ƒ":"æš‚åœ"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"é€šçŸ¥:"}),e.jsx(h,{variant:a.notificationEnabled?"default":"secondary",className:"ml-2",children:a.notificationEnabled?"å¼€å¯":"å…³é—­"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"æ£€æŸ¥é—´éš”:"}),e.jsxs("span",{className:"ml-2",children:[a.checkInterval,"åˆ†é’Ÿ"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"çƒ­åº¦é˜ˆå€¼:"}),e.jsxs("span",{className:"ml-2",children:[a.minHeatThreshold,"-",a.maxHeatThreshold]})]})]}),Pe[a.id]&&Pe[a.id].length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"ç›‘æ§ç»“æœ"}),e.jsxs("div",{className:"space-y-2",children:[Pe[a.id].slice(0,3).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.title}),e.jsx(h,{variant:"outline",className:"text-xs",children:s.platform})]},a)),Pe[a.id].length>3&&e.jsxs("p",{className:"text-xs text-gray-500",children:["è¿˜æœ‰ ",Pe[a.id].length-3," ä¸ªç»“æœ..."]})]})]})]})]},a.id))})]}),e.jsx(N,{value:"bookmarks",children:e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-yellow-500"}),"çµæ„Ÿå¤¹"]}),e.jsx(x,{children:"æ‚¨æ”¶è—çš„æ„Ÿå…´è¶£è¯é¢˜"})]}),e.jsx(d,{children:0===ye.size?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"æš‚æ— æ”¶è—è¯é¢˜"}),e.jsx("p",{className:"text-gray-600",children:"ç‚¹å‡»è¯é¢˜å³ä¾§çš„ä¹¦ç­¾å›¾æ ‡æ¥æ”¶è—æ„Ÿå…´è¶£çš„å†…å®¹"})]}):e.jsx("div",{className:"space-y-3",children:Array.from(ye).map((a,l)=>{let i=null;if(t&&t.data)for(const[e,s]of Object.entries(t.data)){const e=s.find(e=>`${e.platform}-${e.title}`===a);if(e){i=e;break}}return i?e.jsx("div",{className:"p-4 rounded-lg border border-yellow-300 bg-yellow-50 cursor-pointer transition-all hover:shadow-md",onClick:()=>Ze(i),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(h,{className:"bg-yellow-500 text-white text-xs",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),"å·²æ”¶è—"]}),e.jsx(h,{variant:"outline",className:"text-xs",children:L(i.platform||"")}),i.hot&&e.jsxs(h,{variant:"destructive",className:"text-xs",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"çƒ­"]})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:i.title}),i.desc&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.desc}),i.content&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:i.content}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["çƒ­åº¦: ",i.hot]}),e.jsxs("span",{children:["å¹³å°: ",L(i.platform||"")]}),i.rank&&e.jsxs("span",{children:["æ’å: #",i.rank]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[e.jsx(r,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),(e=>{const a=`${e.platform}-${e.title}`;be(e=>{const l=new Set(e);return l.has(a)?(l.delete(a),s({title:"å·²å–æ¶ˆæ”¶è—",description:"è¯é¢˜å·²ä»çµæ„Ÿå¤¹ç§»é™¤"})):(l.add(a),s({title:"å·²æ”¶è—",description:"è¯é¢˜å·²æ·»åŠ åˆ°çµæ„Ÿå¤¹"})),l})})(i)},children:e.jsx(X,{className:"w-4 h-4 text-yellow-500 fill-current"})}),e.jsx(r,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>{e.stopPropagation(),i.url&&window.open(i.url,"_blank")},children:e.jsx(ie,{className:"w-4 h-4"})})]})]})},a):null})})})]})})]}),e.jsx(v,{open:ze,onOpenChange:Ee,children:e.jsxs(y,{className:"sm:max-w-[500px]",children:[e.jsxs(b,{children:[e.jsx(w,{children:"æ·»åŠ è¯é¢˜è®¢é˜…"}),e.jsx(k,{children:"è®¾ç½®å…³é”®è¯å’Œç›‘æ§æ¡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è¿½è¸ªç›¸å…³è¯é¢˜"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"keyword",children:"å…³é”®è¯ *"}),e.jsx(j,{id:"keyword",placeholder:"è¾“å…¥è¦ç›‘æ§çš„å…³é”®è¯",value:Ve.keyword,onChange:e=>Me(s=>({...s,keyword:e.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"name",children:"è®¢é˜…åç§°"}),e.jsx(j,{id:"name",placeholder:"ä¸ºè®¢é˜…èµ·ä¸ªåå­—",value:Ve.name,onChange:e=>Me(s=>({...s,name:e.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"description",children:"æè¿°"}),e.jsx(j,{id:"description",placeholder:"è®¢é˜…çš„è¯¦ç»†æè¿°",value:Ve.description,onChange:e=>Me(s=>({...s,description:e.target.value}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{children:"ç›‘æ§å¹³å°"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Re.map(s=>e.jsxs(r,{variant:Ve.platforms.includes(s)?"default":"outline",size:"sm",onClick:()=>{const e=Ve.platforms.includes(s)?Ve.platforms.filter(e=>e!==s):[...Ve.platforms,s];Me(s=>({...s,platforms:e}))},children:[as(s),L(s)]},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"checkInterval",children:"æ£€æŸ¥é—´éš” (åˆ†é’Ÿ)"}),e.jsxs(C,{value:Ve.checkInterval.toString(),onValueChange:e=>Me(s=>({...s,checkInterval:parseInt(e)})),children:[e.jsx(S,{children:e.jsx(P,{})}),e.jsxs(K,{children:[e.jsx($,{value:"5",children:"5åˆ†é’Ÿ"}),e.jsx($,{value:"15",children:"15åˆ†é’Ÿ"}),e.jsx($,{value:"30",children:"30åˆ†é’Ÿ"}),e.jsx($,{value:"60",children:"1å°æ—¶"}),e.jsx($,{value:"120",children:"2å°æ—¶"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"minHeatThreshold",children:"æœ€ä½çƒ­åº¦"}),e.jsx(j,{id:"minHeatThreshold",type:"number",value:Ve.minHeatThreshold,onChange:e=>Me(s=>({...s,minHeatThreshold:parseInt(e.target.value)||0}))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"isActive",checked:Ve.isActive,onCheckedChange:e=>Me(s=>({...s,isActive:e}))}),e.jsx(p,{htmlFor:"isActive",children:"ç«‹å³å¯ç”¨"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"notificationEnabled",checked:Ve.notificationEnabled,onCheckedChange:e=>Me(s=>({...s,notificationEnabled:e}))}),e.jsx(p,{htmlFor:"notificationEnabled",children:"å¯ç”¨é€šçŸ¥"})]})]}),e.jsxs(I,{children:[e.jsx(r,{variant:"outline",onClick:()=>Ee(!1),children:"å–æ¶ˆ"}),e.jsx(r,{onClick:()=>{if(Ve.keyword.trim())try{B({...Ve,lastChecked:null,lastNotification:null}),Me({keyword:"",name:"",description:"",platforms:[],sources:[],isActive:!0,notificationEnabled:!0,checkInterval:30,minHeatThreshold:1e3,maxHeatThreshold:5e4}),Ee(!1),is(),s({title:"è®¢é˜…æ·»åŠ æˆåŠŸ",description:`å·²æ·»åŠ å…³é”®è¯"${Ve.keyword}"çš„è®¢é˜…`})}catch(e){s({title:"æ·»åŠ å¤±è´¥",description:"æ·»åŠ è®¢é˜…æ—¶å‘ç”Ÿé”™è¯¯",variant:"destructive"})}else s({title:"è¯·è¾“å…¥å…³é”®è¯",description:"è®¢é˜…å…³é”®è¯ä¸èƒ½ä¸ºç©º",variant:"destructive"})},children:"æ·»åŠ è®¢é˜…"})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{oe as H,ce as S};
