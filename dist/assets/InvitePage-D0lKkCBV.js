import{j as e}from"./ui-core-CkDiOLPZ.js";import{r as s,u as a}from"./router-CDHmMMQ-.js";import{u as t,g as r,f as i,B as l,C as c,a as n,b as x,d as m,e as d}from"./pages-home-BlE-Wmr4.js";import{I as o}from"./pages-adapt-C-FFQ0EZ.js";import{aK as j,U as g,x as h,P as p,C as N,aa as v,O as f,ap as b}from"./utils-BfXu217i.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-B9GOBhKP.js";import"./components-layout-C5KCNaYQ.js";import"./components-auth-DTk8b9Kb.js";import"./pages-brand-N_nBb024.js";import"./api-services-BzrWmb-W.js";import"./pages-content-extractor-CyBrX7L3.js";function u(){const{toast:u}=t(),{userId:w,isTempUser:y}=r(),[k,C]=s.useState("invite"),D=i(e=>e.userInviteCode),I=i(e=>e.generateInviteCode),S=i(e=>e.userInviteStats);i(e=>e.usageRemaining);const $=i(e=>e.trackInviteClick),O=a(),[z,R]=s.useState(null),T=window.location.origin,A=`${T}/register?ref=${D}`,U=async e=>{try{const s=`${window.location.origin}/register?ref=${e}`;await navigator.clipboard.writeText(s),$(e),u({title:"邀请链接已复制",description:"邀请链接已复制到剪贴板"})}catch(s){u({title:"复制失败",description:"请手动复制邀请链接",variant:"destructive"})}},B=e=>new Date(e).toLocaleString("zh-CN");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(l,{variant:"ghost",onClick:()=>O("/profile"),className:"mb-6 flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[e.jsx(j,{className:"h-4 w-4"}),"返回个人中心"]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"邀请好友"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"邀请好友注册，双方各得20次使用机会奖励"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs(c,{className:"text-center p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:S.totalClicks}),e.jsx("div",{className:"text-gray-600",children:"总点击次数"})]}),e.jsxs(c,{className:"text-center p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:S.totalRegistrations}),e.jsx("div",{className:"text-gray-600",children:"成功邀请"})]}),e.jsxs(c,{className:"text-center p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:20*S.totalRegistrations}),e.jsx("div",{className:"text-gray-600",children:"总奖励次数"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(c,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"推荐码邀请"]}),e.jsx(m,{children:"分享您的专属推荐码，好友注册时输入即可获得奖励"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"您的推荐码"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{value:D,readOnly:!0,className:"font-mono text-lg"}),e.jsxs(l,{onClick:()=>U(D),size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," 复制"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-2 block",children:"邀请链接"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{value:A,readOnly:!0,className:"text-sm"}),e.jsxs(l,{onClick:()=>U(D),size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," 复制"]})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(n,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"创建新邀请链接"]}),e.jsx(m,{children:"创建带有7天有效期的专属邀请链接"})]}),e.jsx(d,{children:e.jsxs(l,{onClick:()=>{const e=new Date,s=new Date;s.setDate(e.getDate()+7);const a={code:I(),createdAt:e.toISOString(),expirationDate:s.toISOString(),clicks:0,registrations:0};R(a)},className:"w-full",disabled:!!z,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"创建新邀请链接"]})})]})]}),z&&e.jsxs(c,{className:"border-2 border-green-200 bg-gradient-to-r from-green-50 to-emerald-50 mt-8",children:[e.jsxs(n,{className:"pb-3",children:[e.jsxs(x,{className:"flex items-center text-green-800 text-lg",children:[e.jsx(N,{className:"h-5 w-5 text-green-500 mr-2"}),"新邀请链接已创建"]}),e.jsx(m,{className:"text-green-600",children:"分享以下链接给您的好友，开始获得奖励"})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(o,{value:`${T}/register?ref=${z.code}`,readOnly:!0,className:"bg-white font-medium text-base py-3 border-green-300"}),e.jsxs(l,{onClick:()=>{navigator.clipboard.writeText(`${T}/register?ref=${z.code}`),$(z.code),u({title:"链接已复制",description:"新的邀请链接已复制到剪贴板"})},className:"flex-shrink-0 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," 复制"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"创建时间: ",B(z.createdAt)]}),e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"过期时间: ",B(z.expirationDate)]})]}),(K=z.expirationDate,new Date>new Date(K)&&e.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"此邀请链接已过期"]}))]})})]})]})]})});var K}export{u as default};
