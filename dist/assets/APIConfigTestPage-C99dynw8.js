import{as as e,at as s,au as a,r,j as i,o as t,B as l,av as n}from"./index-Cu70HESd.js";import{C as c,d as m,a as d,b as x}from"./card-C_loCoFD.js";import{B as u}from"./badge-CIOmyheZ.js";import{S as o}from"./separator-B2tGVToK.js";import{A as h}from"./alert-uwy97Dud.js";import{R as p}from"./refresh-cw-DxcdbKGG.js";import{C as j}from"./circle-check-big-P3EWXA1B.js";import{T as g}from"./triangle-alert-CKSzkCD3.js";import{C as N}from"./circle-x-Wo4NID7o.js";import{I as f}from"./info-BSqS0fyx.js";import{C as y}from"./copy-BOz6b4UI.js";import{E as v}from"./external-link-jeGEvVBw.js";function I(){const r=e(),i=s(),t=[],l=[],n=[];l.push("VITE_API_BASE_URL 未设置 - 某些功能可能不可用"),n.push("建议设置 VITE_API_BASE_URL 指向后端API服务"),a("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","openai")||(t.push("VITE_OPENAI_API_KEY 格式无效"),n.push("OpenAI API密钥应以 sk- 开头，长度至少20个字符")),a("your_deepseek_key_here","deepseek")||(t.push("VITE_DEEPSEEK_API_KEY 格式无效"),n.push("DeepSeek API密钥应以 sk- 开头，长度至少30个字符")),a("your_gemini_key_here","gemini")||(t.push("VITE_GEMINI_API_KEY 格式无效"),n.push("Gemini API密钥长度至少20个字符")),a("your_creem_key_here","creem")||(t.push("VITE_CREEM_API_KEY 格式无效"),n.push("Creem API密钥应以 creem_ 开头")),r.environment.isProd&&!r.backend.baseUrl&&(l.push("生产环境缺少后端API配置"),n.push("生产环境建议配置完整的后端API服务"));const c=i.details.map(e=>({...e,value:b(e.name,r)}));return{isValid:0===t.length,errors:t,warnings:l,summary:i,details:c,recommendations:n}}function b(e,s){switch(e){case"OpenAI API":return s.openai.apiKey?`${s.openai.apiKey.substring(0,8)}...`:"未设置";case"DeepSeek API":return s.deepseek.apiKey?`${s.deepseek.apiKey.substring(0,8)}...`:"未设置";case"Gemini API":return s.gemini.apiKey?`${s.gemini.apiKey.substring(0,8)}...`:"未设置";case"Authing认证":return s.authing.appId?`${s.authing.appId.substring(0,8)}...`:"未设置";case"Creem支付":return s.creem.apiKey?`${s.creem.apiKey.substring(0,8)}...`:"未设置";case"后端API":return s.backend.baseUrl||"未设置";default:return"未知"}}function A(){const[e,s]=r.useState(null),[a,b]=r.useState(!1),[A,_]=r.useState("overview"),w=async()=>{b(!0);try{n();const e=I();s(e)}catch(e){}finally{b(!1)}};r.useEffect(()=>{w()},[]);const E=e=>{navigator.clipboard.writeText(e)},P=e=>{switch(e){case"valid":return i.jsx(j,{className:"w-4 h-4 text-green-600"});case"invalid":return i.jsx(N,{className:"w-4 h-4 text-red-600"});case"missing":return i.jsx(g,{className:"w-4 h-4 text-yellow-600"});case"optional":return i.jsx(f,{className:"w-4 h-4 text-blue-600"});default:return i.jsx(f,{className:"w-4 h-4 text-gray-600"})}},k=e=>{switch(e){case"valid":return"bg-green-100 text-green-800";case"invalid":return"bg-red-100 text-red-800";case"missing":return"bg-yellow-100 text-yellow-800";case"optional":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(!e)return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(c,{children:i.jsxs(m,{className:"flex items-center justify-center py-8",children:[i.jsx(p,{className:"w-6 h-6 animate-spin mr-2"}),"正在检查API配置..."]})})});const T=function(){const e=I();return e.isValid&&0===e.warnings.length?{status:"success",message:"✅ 所有API配置正确",details:["所有必需的API配置已正确设置","系统可以正常运行"]}:e.isValid&&e.warnings.length>0?{status:"warning",message:"⚠️ API配置基本正确，但有一些警告",details:["必需的API配置已设置","系统可以正常运行",`但有 ${e.warnings.length} 个警告需要注意`]}:{status:"error",message:"❌ API配置存在问题",details:[`发现 ${e.errors.length} 个错误`,`发现 ${e.warnings.length} 个警告`,"请修复配置问题后重新部署"]}}();return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs(c,{children:[i.jsx(d,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(x,{className:"flex items-center gap-2",children:[i.jsx(t,{className:"w-5 h-5"}),"API配置测试"]}),i.jsxs(l,{onClick:w,disabled:a,children:[i.jsx(p,{className:"w-4 h-4 mr-2 "+(a?"animate-spin":"")}),"重新检查"]})]})}),i.jsxs(m,{children:[i.jsx(h,{className:"mb-6 "+("success"===T.status?"border-green-200 bg-green-50":"warning"===T.status?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"),children:i.jsxs("div",{className:"flex items-start gap-3",children:["success"===T.status&&i.jsx(j,{className:"w-5 h-5 text-green-600 mt-0.5"}),"warning"===T.status&&i.jsx(g,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),"error"===T.status&&i.jsx(N,{className:"w-5 h-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:T.message}),i.jsx("ul",{className:"text-sm space-y-1",children:T.details.map((e,s)=>i.jsx("li",{children:e},s))})]})]})}),i.jsxs("div",{className:"flex space-x-1 mb-6",children:[i.jsx(l,{variant:"overview"===A?"default":"outline",size:"sm",onClick:()=>_("overview"),children:"概览"}),i.jsx(l,{variant:"details"===A?"default":"outline",size:"sm",onClick:()=>_("details"),children:"详细配置"}),i.jsx(l,{variant:"deployment"===A?"default":"outline",size:"sm",onClick:()=>_("deployment"),children:"部署配置"})]}),"overview"===A&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(c,{children:i.jsxs(m,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.summary.totalConfigs}),i.jsx("div",{className:"text-sm text-gray-600",children:"总配置项"})]})}),i.jsx(c,{children:i.jsxs(m,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.summary.validConfigs}),i.jsx("div",{className:"text-sm text-gray-600",children:"有效配置"})]})}),i.jsx(c,{children:i.jsxs(m,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.summary.requiredConfigs}),i.jsx("div",{className:"text-sm text-gray-600",children:"必需配置"})]})}),i.jsx(c,{children:i.jsxs(m,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.summary.requiredValid}),i.jsx("div",{className:"text-sm text-gray-600",children:"必需有效"})]})})]}),e.errors.length>0&&i.jsxs(c,{className:"border-red-200",children:[i.jsx(d,{children:i.jsxs(x,{className:"text-red-600 flex items-center gap-2",children:[i.jsx(N,{className:"w-5 h-5"}),"配置错误 (",e.errors.length,")"]})}),i.jsx(m,{children:i.jsx("ul",{className:"space-y-2",children:e.errors.map((e,s)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[i.jsx(N,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:e})]},s))})})]}),e.warnings.length>0&&i.jsxs(c,{className:"border-yellow-200",children:[i.jsx(d,{children:i.jsxs(x,{className:"text-yellow-600 flex items-center gap-2",children:[i.jsx(g,{className:"w-5 h-5"}),"配置警告 (",e.warnings.length,")"]})}),i.jsx(m,{children:i.jsx("ul",{className:"space-y-2",children:e.warnings.map((e,s)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[i.jsx(g,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:e})]},s))})})]}),e.recommendations.length>0&&i.jsxs(c,{className:"border-blue-200",children:[i.jsx(d,{children:i.jsxs(x,{className:"text-blue-600 flex items-center gap-2",children:[i.jsx(f,{className:"w-5 h-5"}),"配置建议"]})}),i.jsx(m,{children:i.jsx("ul",{className:"space-y-2",children:e.recommendations.map((e,s)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[i.jsx(f,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:e})]},s))})})]})]}),"details"===A&&i.jsx("div",{className:"space-y-4",children:e.details.map((e,s)=>i.jsx(c,{children:i.jsxs(m,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[P(e.status),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(u,{className:k(e.status),children:["valid"===e.status&&"有效","invalid"===e.status&&"无效","missing"===e.status&&"缺失","optional"===e.status&&"可选"]}),e.value&&i.jsx(l,{variant:"ghost",size:"sm",onClick:()=>E(e.value),children:i.jsx(y,{className:"w-4 h-4"})})]})]}),e.value&&i.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm font-mono",children:e.value})]})},s))}),"deployment"===A&&i.jsx("div",{className:"space-y-6",children:[{platform:"Netlify",variables:[{name:"VITE_OPENAI_API_KEY",value:"sk-your-actual-openai-api-key",required:!0,description:"OpenAI API密钥"},{name:"VITE_AUTHING_APP_ID",value:"your-actual-authing-app-id",required:!0,description:"Authing应用ID"},{name:"VITE_AUTHING_HOST",value:"your-actual-authing-host",required:!0,description:"Authing域名"},{name:"VITE_DEEPSEEK_API_KEY",value:"sk-your-actual-deepseek-api-key",required:!1,description:"DeepSeek API密钥（可选）"},{name:"VITE_GEMINI_API_KEY",value:"your-actual-gemini-api-key",required:!1,description:"Gemini API密钥（可选）"},{name:"VITE_CREEM_API_KEY",value:"creem_your-actual-creem-api-key",required:!1,description:"Creem支付API密钥（可选）"},{name:"VITE_API_BASE_URL",value:"https://your-domain.com/api",required:!1,description:"后端API基础URL（可选）"}],instructions:["1. 登录Netlify控制台","2. 进入项目设置 → Environment variables","3. 添加上述环境变量","4. 重新部署项目"]},{platform:"Vercel",variables:[{name:"VITE_OPENAI_API_KEY",value:"sk-your-actual-openai-api-key",required:!0,description:"OpenAI API密钥"},{name:"VITE_AUTHING_APP_ID",value:"your-actual-authing-app-id",required:!0,description:"Authing应用ID"},{name:"VITE_AUTHING_HOST",value:"your-actual-authing-host",required:!0,description:"Authing域名"}],instructions:["1. 登录Vercel控制台","2. 进入项目设置 → Environment Variables","3. 添加上述环境变量","4. 重新部署项目"]}].map((e,s)=>i.jsxs(c,{children:[i.jsx(d,{children:i.jsxs(x,{className:"flex items-center gap-2",children:[i.jsx(v,{className:"w-5 h-5"}),e.platform," 部署配置"]})}),i.jsx(m,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-3",children:"环境变量配置"}),i.jsx("div",{className:"space-y-2",children:e.variables.map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono text-sm",children:e.name}),e.required&&i.jsx(u,{variant:"destructive",className:"text-xs",children:"必需"})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.value}),i.jsx(l,{variant:"ghost",size:"sm",onClick:()=>E(e.name),children:i.jsx(y,{className:"w-4 h-4"})})]})]},s))})]}),i.jsx(o,{}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-3",children:"配置步骤"}),i.jsx("ol",{className:"space-y-2",children:e.instructions.map((e,s)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[i.jsx("span",{className:"bg-blue-100 text-blue-600 rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium flex-shrink-0 mt-0.5",children:s+1}),i.jsx("span",{children:e})]},s))})]})]})})]},s))})]})]})})}export{A as default};
