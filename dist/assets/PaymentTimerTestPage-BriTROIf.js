import{_ as s,r as e,bp as a,j as l,C as t,e as c,f as n,ay as i,i as r,g as x,ad as d,B as m,R as j,bq as h}from"./index-BuR5xlXm.js";import{S as o}from"./separator-CMY9eZD-.js";import{G as N}from"./gift-Dt6sROyp.js";import{C as f}from"./calendar-6PEMc_Cw.js";import{T as p}from"./trash-2-BeMaJGgV.js";function g(){const{user:g,isAuthenticated:u}=s(),[v,y]=e.useState(a(null==g?void 0:g.id)),[b,w]=e.useState(new Date);return e.useEffect(()=>{const s=setInterval(()=>{w(new Date),y(a(null==g?void 0:g.id))},1e3);return()=>clearInterval(s)},[null==g?void 0:g.id]),l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-8",children:l.jsxs("div",{className:"container mx-auto max-w-4xl",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"支付计时器测试"}),l.jsx("p",{className:"text-gray-600",children:"测试新用户限时优惠功能"})]}),l.jsxs(t,{className:"mb-6",children:[l.jsx(c,{children:l.jsxs(n,{className:"flex items-center gap-2",children:[l.jsx(i,{className:"h-5 w-5"}),"用户信息"]})}),l.jsx(r,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"登录状态"}),l.jsx("p",{className:"font-medium",children:u?l.jsx(x,{variant:"default",children:"已登录"}):l.jsx(x,{variant:"secondary",children:"未登录"})})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"用户ID"}),l.jsx("p",{className:"font-mono text-sm",children:(null==g?void 0:g.id)||"未登录"})]})]})})]}),l.jsxs(t,{className:"mb-6",children:[l.jsx(c,{children:l.jsxs(n,{className:"flex items-center gap-2",children:[l.jsx(N,{className:"h-5 w-5"}),"限时优惠状态"]})}),l.jsx(r,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"优惠状态"}),v.isActive?l.jsxs(x,{className:"bg-green-100 text-green-800 border-green-200",children:[l.jsx(d,{className:"h-3 w-3 mr-1"}),"优惠进行中"]}):l.jsx(x,{variant:"secondary",children:"优惠已结束"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"剩余时间"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(d,{className:"h-4 w-4 text-blue-500"}),l.jsx("span",{className:"font-mono text-lg font-bold text-blue-600",children:v.formattedTime})]})]}),v.accessTime&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"访问时间"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(f,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"font-mono text-sm",children:v.accessTime.toLocaleString()})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"当前时间"}),l.jsx("span",{className:"font-mono text-sm",children:b.toLocaleString()})]})]})})]}),l.jsxs(t,{className:"mb-6",children:[l.jsx(c,{children:l.jsx(n,{children:"优惠信息"})}),l.jsx(r,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"优惠时长"}),l.jsx("span",{className:"font-medium",children:"30分钟"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"计时方式"}),l.jsx("span",{className:"font-medium",children:"从访问支付中心开始计时"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"存储方式"}),l.jsx("span",{className:"font-medium",children:"localStorage"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"存储键名"}),l.jsxs("span",{className:"font-mono text-xs",children:["payment_center_access_time_",(null==g?void 0:g.id)||"anonymous"]})]})]})})]}),l.jsxs(t,{children:[l.jsx(c,{children:l.jsx(n,{children:"测试操作"})}),l.jsxs(r,{children:[l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs(m,{onClick:()=>{h(null==g?void 0:g.id),y(a(null==g?void 0:g.id))},className:"flex items-center gap-2",disabled:!u,children:[l.jsx(j,{className:"h-4 w-4"}),"模拟访问支付中心"]}),l.jsxs(m,{onClick:()=>{h(null==g?void 0:g.id),y(a(null==g?void 0:g.id))},variant:"outline",className:"flex items-center gap-2",disabled:!u,children:[l.jsx(p,{className:"h-4 w-4"}),"重置计时器"]})]}),!u&&l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"请先登录以进行测试"})]})]}),l.jsxs(t,{className:"mt-6",children:[l.jsx(c,{children:l.jsx(n,{children:"使用说明"})}),l.jsx(r,{children:l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[l.jsxs("p",{children:["1. ",l.jsx("strong",{children:"模拟访问支付中心"}),"：清除现有计时并重新开始30分钟倒计时"]}),l.jsxs("p",{children:["2. ",l.jsx("strong",{children:"重置计时器"}),"：清除localStorage中的访问时间记录"]}),l.jsxs("p",{children:["3. ",l.jsx("strong",{children:"优惠状态"}),"：实时显示当前优惠是否有效"]}),l.jsxs("p",{children:["4. ",l.jsx("strong",{children:"剩余时间"}),"：显示距离优惠结束的剩余时间"]}),l.jsx(o,{className:"my-4"}),l.jsx("p",{className:"text-xs text-gray-500",children:"注意：此功能仅用于测试。在实际使用中，用户第一次访问支付中心页面时会自动开始计时。"})]})})]})]})})}export{g as default};
