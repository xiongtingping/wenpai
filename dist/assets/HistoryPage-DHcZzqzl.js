import{j as e}from"./ui-core-DvCHSSHi.js";import{r as s}from"./router-C2V8BG2_.js";import{u as a,f as t,C as i,e as r,B as n,a as l}from"./pages-home-BppkB_BK.js";import{B as c}from"./pages-adapt-QlWqecYb.js";import{a3 as o,a1 as m,x as d}from"./utils-OoJFdsFh.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-BJ7QG1EI.js";import"./components-layout-wBk4MFkI.js";import"./components-auth-D2bnNZhR.js";import"./pages-brand-CLp9D2Z8.js";import"./api-services-yBnNgddQ.js";import"./pages-hot-topics-BcWl1nYB.js";function x(){const[x,h]=s.useState([]),[j,p]=s.useState(!0),{toast:u}=a(),{user:g,isAuthenticated:N}=t();return s.useEffect(()=>{if(N&&g){const s=`history_${g.username||g.email||"anonymous"}`,a=localStorage.getItem(s);if(a)try{const e=JSON.parse(a);h(e)}catch(e){h([])}else h([])}else h([]);p(!1)},[N,g]),j?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"加载历史记录中..."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"历史记录"}),e.jsx("p",{className:"text-gray-600",children:"查看您之前生成的内容适配记录"})]}),0===x.length?e.jsx(i,{children:e.jsxs(r,{className:"text-center py-12",children:[e.jsx(o,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无历史记录"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"您还没有生成过内容，快去试试内容适配功能吧！"}),e.jsx(n,{onClick:()=>window.location.href="/adapt",children:"开始生成内容"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(c,{variant:"secondary",children:["共 ",x.length," 条记录"]})}),e.jsxs(n,{variant:"outline",onClick:()=>{if(g){const e=`history_${g.username||g.email||"anonymous"}`;h([]),localStorage.removeItem(e),u({title:"清空成功",description:"所有历史记录已清空"})}},className:"text-red-600 hover:text-red-700",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"清空所有"]})]}),e.jsx("div",{className:"grid gap-4",children:x.map((s,a)=>{return e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",children:(o=s.platformId,{wechat:"微信",weibo:"微博",douyin:"抖音",xiaohongshu:"小红书",zhihu:"知乎",bilibili:"B站",toutiao:"头条",kuaishou:"快手"}[o]||o)}),e.jsx("span",{className:"text-sm text-gray-500",children:(t=s.timestamp,new Date(t).toLocaleString("zh-CN"))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>{return e=s.content,navigator.clipboard.writeText(e),void u({title:"已复制",description:"内容已复制到剪贴板"});var e},children:e.jsx(d,{className:"w-4 h-4"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>(e=>{if(g){const s=`history_${g.username||g.email||"anonymous"}`,a=x.filter((s,a)=>a!==e);h(a),localStorage.setItem(s,JSON.stringify(a)),u({title:"删除成功",description:"历史记录已删除"})}})(a),className:"text-red-600 hover:text-red-700",children:e.jsx(m,{className:"w-4 h-4"})})]})]})}),e.jsx(r,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:s.content})})})]},a);var t,o})})]})]})}export{x as default};
