import{j as e}from"./ui-core-BoM6Gtru.js";import{r as s}from"./router-CDHmMMQ-.js";import{C as r,a,b as t,e as c,B as i}from"./pages-home-B-YLcn0z.js";import{B as n}from"./pages-adapt-CSkmXLuc.js";import{a as d}from"./creemClientService-DNWMJNoV.js";import"./react-vendor-D7XYiaTe.js";import"./components-landing-CGa4OaD-.js";import"./components-layout-B8FsrdzO.js";import"./utils-Ck01-_Du.js";import"./pages-brand-BuX6qQ3s.js";import"./api-services-DPZFfcoz.js";import"./pages-content-extractor-C4B3q1d0.js";import"./components-auth-BBdw3eti.js";import"./browser-C5-Pn058.js";function l(){const[l,m]=s.useState([]),[o,x]=s.useState(!1),p=[{name:"专业版月付",priceId:"prod_3nJOuQeVStqkp6JaDcrKHf"},{name:"专业版年付",priceId:"prod_5qBlDTLpD3h9gvOZFd4Rgu"},{name:"高级版月付",priceId:"prod_4HYBfvrcbXYnbxjlswMj28"},{name:"高级版年付",priceId:"prod_6OfIoVnRg2pXsuYceVKOYk"}],j=(e,s,r,a)=>{const t={name:e,timestamp:(new Date).toISOString(),success:s,data:r,error:a||null};m(e=>[t,...e])},h=async(e,s)=>{try{const r=await d(e);r.success?j(s,!0,r):j(s,!1,r,"API调用失败")}catch(r){j(s,!1,null,r.message)}};return e.jsx("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:e.jsxs(r,{children:[e.jsxs(a,{children:[e.jsxs(t,{className:"flex items-center gap-2",children:["🧪 Creem API测试页面",e.jsx(n,{variant:"secondary",children:"Netlify函数"})]}),e.jsx("p",{className:"text-muted-foreground",children:"测试Creem支付API端点是否正常工作"})]}),e.jsxs(c,{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{onClick:async()=>{x(!0),m([]);for(const e of p)await h(e.priceId,e.name),await new Promise(e=>setTimeout(e,1e3));x(!1)},disabled:o,className:"flex-1",children:o?"测试中...":"运行所有测试"}),e.jsx(i,{onClick:()=>{m([])},variant:"outline",children:"清除结果"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"测试配置"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(s=>e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.priceId})]}),e.jsx(i,{size:"sm",onClick:()=>h(s.priceId,s.name),disabled:o,children:"测试"})]})},s.priceId))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"测试结果"}),0===l.length?e.jsx("p",{className:"text-muted-foreground",children:"暂无测试结果"}):e.jsx("div",{className:"space-y-3",children:l.map((s,a)=>e.jsx(r,{className:"p-4 "+(s.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(n,{variant:s.success?"default":"destructive",children:s.success?"成功":"失败"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleTimeString()})]}),s.error&&e.jsx("p",{className:"text-red-600 text-sm",children:s.error}),s.success&&s.data&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-green-600",children:"API调用成功"}),e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer text-muted-foreground",children:"查看响应数据"}),e.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(s.data,null,2)})]})]})]})})},a))})]})]})]})})}export{l as default};
